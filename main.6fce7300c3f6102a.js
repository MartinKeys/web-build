(self.webpackChunkpd_free_angularcli=self.webpackChunkpd_free_angularcli||[]).push([[179],{2616:(gn,it,K)=>{"use strict";var m=K(1481),b=K(1571),X=K(7340);function ye(s){return new b.vHH(3e3,!1)}function Be(){return typeof window<"u"&&typeof window.document<"u"}function We(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Xt(s){switch(s.length){case 0:return new X.ZN;case 1:return s[0];default:return new X.ZE(s)}}function bn(s,e,t,n,i=new Map,a=new Map){const c=[],u=[];let h=-1,g=null;if(n.forEach(y=>{const E=y.get("offset"),C=E==h,T=C&&g||new Map;y.forEach((R,B)=>{let L=B,O=R;if("offset"!==B)switch(L=e.normalizePropertyName(L,c),O){case X.k1:O=i.get(B);break;case X.l3:O=a.get(B);break;default:O=e.normalizeStyleValue(B,L,O,c)}T.set(L,O)}),C||u.push(T),g=T,h=E}),c.length)throw function ke(s){return new b.vHH(3502,!1)}();return u}function On(s,e,t,n){switch(e){case"start":s.onStart(()=>n(t&&dr(t,"start",s)));break;case"done":s.onDone(()=>n(t&&dr(t,"done",s)));break;case"destroy":s.onDestroy(()=>n(t&&dr(t,"destroy",s)))}}function dr(s,e,t){const a=ji(s.element,s.triggerName,s.fromState,s.toState,e||s.phaseName,t.totalTime??s.totalTime,!!t.disabled),c=s._data;return null!=c&&(a._data=c),a}function ji(s,e,t,n,i="",a=0,c){return{element:s,triggerName:e,fromState:t,toState:n,phaseName:i,totalTime:a,disabled:!!c}}function _i(s,e,t){let n=s.get(e);return n||s.set(e,n=t),n}function tr(s){const e=s.indexOf(":");return[s.substring(1,e),s.slice(e+1)]}let Ki=(s,e)=>!1,vr=(s,e,t)=>[],ms=null;function Ai(s){const e=s.parentNode||s.host;return e===ms?null:e}(We()||typeof Element<"u")&&(Be()?(ms=(()=>document.documentElement)(),Ki=(s,e)=>{for(;e;){if(e===s)return!0;e=Ai(e)}return!1}):Ki=(s,e)=>s.contains(e),vr=(s,e,t)=>{if(t)return Array.from(s.querySelectorAll(e));const n=s.querySelector(e);return n?[n]:[]});let Mi=null,vn=!1;const Yi=Ki,Rn=vr;let ls=(()=>{class s{validateStyleProperty(t){return function ca(s){Mi||(Mi=function kr(){return typeof document<"u"?document.body:null}()||{},vn=!!Mi.style&&"WebkitAppearance"in Mi.style);let e=!0;return Mi.style&&!function Or(s){return"ebkit"==s.substring(1,6)}(s)&&(e=s in Mi.style,!e&&vn&&(e="Webkit"+s.charAt(0).toUpperCase()+s.slice(1)in Mi.style)),e}(t)}matchesElement(t,n){return!1}containsElement(t,n){return Yi(t,n)}getParentElement(t){return Ai(t)}query(t,n,i){return Rn(t,n,i)}computeStyle(t,n,i){return i||""}animate(t,n,i,a,c,u=[],h){return new X.ZN(i,a)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac}),s})(),Xs=(()=>{class s{}return s.NOOP=new ls,s})();const Os="ng-enter",wn="ng-leave",Xi="ng-trigger",dn=".ng-trigger",lr="ng-animating",Ss=".ng-animating";function hr(s){if("number"==typeof s)return s;const e=s.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Br(parseFloat(e[1]),e[2])}function Br(s,e){return"s"===e?1e3*s:s}function Ur(s,e,t){return s.hasOwnProperty("duration")?s:function $r(s,e,t){let i,a=0,c="";if("string"==typeof s){const u=s.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===u)return e.push(ye()),{duration:0,delay:0,easing:""};i=Br(parseFloat(u[1]),u[2]);const h=u[3];null!=h&&(a=Br(parseFloat(h),u[4]));const g=u[5];g&&(c=g)}else i=s;if(!t){let u=!1,h=e.length;i<0&&(e.push(function Oe(){return new b.vHH(3100,!1)}()),u=!0),a<0&&(e.push(function Ae(){return new b.vHH(3101,!1)}()),u=!0),u&&e.splice(h,0,ye())}return{duration:i,delay:a,easing:c}}(s,e,t)}function Vr(s,e={}){return Object.keys(s).forEach(t=>{e[t]=s[t]}),e}function Yr(s){const e=new Map;return Object.keys(s).forEach(t=>{e.set(t,s[t])}),e}function br(s,e=new Map,t){if(t)for(let[n,i]of t)e.set(n,i);for(let[n,i]of s)e.set(n,i);return e}function qs(s,e,t){return t?e+":"+t+";":""}function gs(s){let e="";for(let t=0;t<s.style.length;t++){const n=s.style.item(t);e+=qs(0,n,s.style.getPropertyValue(n))}for(const t in s.style)s.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=qs(0,Nt(t),s.style[t]));s.setAttribute("style",e)}function qr(s,e,t){s.style&&(e.forEach((n,i)=>{const a=Ie(i);t&&!t.has(i)&&t.set(i,s.style[a]),s.style[a]=n}),We()&&gs(s))}function fr(s,e){s.style&&(e.forEach((t,n)=>{const i=Ie(n);s.style[i]=""}),We()&&gs(s))}function Zr(s){return Array.isArray(s)?1==s.length?s[0]:(0,X.vP)(s):s}const Ji=new RegExp("{{\\s*(.+?)\\s*}}","g");function Re(s){let e=[];if("string"==typeof s){let t;for(;t=Ji.exec(s);)e.push(t[1]);Ji.lastIndex=0}return e}function xe(s,e,t){const n=s.toString(),i=n.replace(Ji,(a,c)=>{let u=e[c];return null==u&&(t.push(function qe(s){return new b.vHH(3003,!1)}()),u=""),u.toString()});return i==n?s:i}function de(s){const e=[];let t=s.next();for(;!t.done;)e.push(t.value),t=s.next();return e}const Pe=/-+([a-z0-9])/g;function Ie(s){return s.replace(Pe,(...e)=>e[1].toUpperCase())}function Nt(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Xn(s,e,t){switch(e.type){case 7:return s.visitTrigger(e,t);case 0:return s.visitState(e,t);case 1:return s.visitTransition(e,t);case 2:return s.visitSequence(e,t);case 3:return s.visitGroup(e,t);case 4:return s.visitAnimate(e,t);case 5:return s.visitKeyframes(e,t);case 6:return s.visitStyle(e,t);case 8:return s.visitReference(e,t);case 9:return s.visitAnimateChild(e,t);case 10:return s.visitAnimateRef(e,t);case 11:return s.visitQuery(e,t);case 12:return s.visitStagger(e,t);default:throw function je(s){return new b.vHH(3004,!1)}()}}function Ui(s,e){return window.getComputedStyle(s)[e]}function Eo(s,e){const t=[];return"string"==typeof s?s.split(/\s*,\s*/).forEach(n=>function Kr(s,e,t){if(":"==s[0]){const h=function Ks(s,e){switch(s){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(function ft(s){return new b.vHH(3016,!1)}()),"* => *"}}(s,t);if("function"==typeof h)return void e.push(h);s=h}const n=s.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return t.push(function Dt(s){return new b.vHH(3015,!1)}()),e;const i=n[1],a=n[2],c=n[3];e.push(Jr(i,c));"<"==a[0]&&!("*"==i&&"*"==c)&&e.push(Jr(c,i))}(n,t,e)):t.push(s),t}const Fs=new Set(["true","1"]),vs=new Set(["false","0"]);function Jr(s,e){const t=Fs.has(s)||vs.has(s),n=Fs.has(e)||vs.has(e);return(i,a)=>{let c="*"==s||s==i,u="*"==e||e==a;return!c&&t&&"boolean"==typeof i&&(c=i?Fs.has(s):vs.has(s)),!u&&n&&"boolean"==typeof a&&(u=a?Fs.has(e):vs.has(e)),c&&u}}const Di=new RegExp("s*:selfs*,?","g");function Js(s,e,t,n){return new ua(s).build(e,t,n)}class ua{constructor(e){this._driver=e}build(e,t,n){const i=new mo(t);return this._resetContextStyleTimingState(i),Xn(this,Zr(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,i=t.depCount=0;const a=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function ot(){return new b.vHH(3006,!1)}()),e.definitions.forEach(u=>{if(this._resetContextStyleTimingState(t),0==u.type){const h=u,g=h.name;g.toString().split(/\s*,\s*/).forEach(y=>{h.name=y,a.push(this.visitState(h,t))}),h.name=g}else if(1==u.type){const h=this.visitTransition(u,t);n+=h.queryCount,i+=h.depCount,c.push(h)}else t.errors.push(function tn(){return new b.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:c,queryCount:n,depCount:i,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(n.containsDynamicStyles){const a=new Set,c=i||{};n.styles.forEach(u=>{u instanceof Map&&u.forEach(h=>{Re(h).forEach(g=>{c.hasOwnProperty(g)||a.add(g)})})}),a.size&&(de(a.values()),t.errors.push(function Ct(s,e){return new b.vHH(3008,!1)}()))}return{type:0,name:e.name,style:n,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=Xn(this,Zr(e.animation),t);return{type:1,matchers:Eo(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Qr(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(n=>Xn(this,n,t)),options:Qr(e.options)}}visitGroup(e,t){const n=t.currentTime;let i=0;const a=e.steps.map(c=>{t.currentTime=n;const u=Xn(this,c,t);return i=Math.max(i,t.currentTime),u});return t.currentTime=i,{type:3,steps:a,options:Qr(e.options)}}visitAnimate(e,t){const n=function cr(s,e){if(s.hasOwnProperty("duration"))return s;if("number"==typeof s)return wr(Ur(s,e).duration,0,"");const t=s;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=wr(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=Ur(t,e);return wr(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;let i,a=e.styles?e.styles:(0,X.oB)({});if(5==a.type)i=this.visitKeyframes(a,t);else{let c=e.styles,u=!1;if(!c){u=!0;const g={};n.easing&&(g.easing=n.easing),c=(0,X.oB)(g)}t.currentTime+=n.duration+n.delay;const h=this.visitStyle(c,t);h.isEmptyStep=u,i=h}return t.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let u of i)"string"==typeof u?u===X.l3?n.push(u):t.errors.push(new b.vHH(3002,!1)):n.push(Yr(u));let a=!1,c=null;return n.forEach(u=>{if(u instanceof Map&&(u.has("easing")&&(c=u.get("easing"),u.delete("easing")),!a))for(let h of u.values())if(h.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:n,easing:c,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;n&&a>0&&(a-=n.duration+n.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((u,h)=>{const g=t.collectedStyles.get(t.currentQuerySelector),y=g.get(h);let E=!0;y&&(a!=i&&a>=y.startTime&&i<=y.endTime&&(t.errors.push(function Yt(s,e,t,n,i){return new b.vHH(3010,!1)}()),E=!1),a=y.startTime),E&&g.set(h,{startTime:a,endTime:i}),t.options&&function hi(s,e,t){const n=e.params||{},i=Re(s);i.length&&i.forEach(a=>{n.hasOwnProperty(a)||t.push(function st(s){return new b.vHH(3001,!1)}())})}(u,t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Dn(){return new b.vHH(3011,!1)}()),n;let a=0;const c=[];let u=!1,h=!1,g=0;const y=e.steps.map(O=>{const q=this._makeStyleAst(O,t);let j=null!=q.offset?q.offset:function xr(s){if("string"==typeof s)return null;let e=null;if(Array.isArray(s))s.forEach(t=>{if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(s instanceof Map&&s.has("offset")){const t=s;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(q.styles),Z=0;return null!=j&&(a++,Z=q.offset=j),h=h||Z<0||Z>1,u=u||Z<g,g=Z,c.push(Z),q});h&&t.errors.push(function Gt(){return new b.vHH(3012,!1)}()),u&&t.errors.push(function ei(){return new b.vHH(3200,!1)}());const E=e.steps.length;let C=0;a>0&&a<E?t.errors.push(function Ue(){return new b.vHH(3202,!1)}()):0==a&&(C=1/(E-1));const T=E-1,R=t.currentTime,B=t.currentAnimateTimings,L=B.duration;return y.forEach((O,q)=>{const j=C>0?q==T?1:C*q:c[q],Z=j*L;t.currentTime=R+B.delay+Z,B.duration=Z,this._validateStyleAst(O,t),O.offset=j,n.styles.push(O)}),n}visitReference(e,t){return{type:8,animation:Xn(this,Zr(e.animation),t),options:Qr(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Qr(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Qr(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,c]=function Ma(s){const e=!!s.split(/\s*,\s*/).find(t=>":self"==t);return e&&(s=s.replace(Di,"")),s=s.replace(/@\*/g,dn).replace(/@\w+/g,t=>dn+"-"+t.slice(1)).replace(/:animating/g,Ss),[s,e]}(e.selector);t.currentQuerySelector=n.length?n+" "+a:a,_i(t.collectedStyles,t.currentQuerySelector,new Map);const u=Xn(this,Zr(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:u,originalSelector:e.selector,options:Qr(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function ve(){return new b.vHH(3013,!1)}());const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:Ur(e.timings,t.errors,!0);return{type:12,animation:Xn(this,Zr(e.animation),t),timings:n,options:null}}}class mo{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Qr(s){return s?(s=Vr(s)).params&&(s.params=function Qs(s){return s?Vr(s):null}(s.params)):s={},s}function wr(s,e,t){return{duration:s,delay:e,easing:t}}function ys(s,e,t,n,i,a,c=null,u=!1){return{type:1,element:s,keyframes:e,preStyleProps:t,postStyleProps:n,duration:i,delay:a,totalTime:i+a,easing:c,subTimeline:u}}class Mo{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const xs=new RegExp(":enter","g"),eo=new RegExp(":leave","g");function ol(s,e,t,n,i,a=new Map,c=new Map,u,h,g=[]){return(new Sa).buildKeyframes(s,e,t,n,i,a,c,u,h,g)}class Sa{buildKeyframes(e,t,n,i,a,c,u,h,g,y=[]){g=g||new Mo;const E=new al(e,t,g,i,a,y,[]);E.options=h;const C=h.delay?hr(h.delay):0;E.currentTimeline.delayNextStep(C),E.currentTimeline.setStyles([c],null,E.errors,h),Xn(this,n,E);const T=E.timelines.filter(R=>R.containsAnimation());if(T.length&&u.size){let R;for(let B=T.length-1;B>=0;B--){const L=T[B];if(L.element===t){R=L;break}}R&&!R.allowOnlyTimelineStyles()&&R.setStyles([u],null,E.errors,h)}return T.length?T.map(R=>R.buildKeyframes()):[ys(t,[],[],[],0,C,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.get(t.element);if(n){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,c=this._visitSubInstructions(n,i,i.options);a!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(const i of e){const a=i?.delay;if(a){const c="number"==typeof a?a:hr(xe(a,i?.params??{},t.errors));n.delayNextStep(c)}}}_visitSubInstructions(e,t,n){let a=t.currentTimeline.currentTime;const c=null!=n.duration?hr(n.duration):null,u=null!=n.delay?hr(n.delay):null;return 0!==c&&e.forEach(h=>{const g=t.appendInstructionToTimeline(h,c,u);a=Math.max(a,g.duration+g.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Xn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Ca);const c=hr(a.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Xn(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?hr(e.options.delay):0;e.steps.forEach(c=>{const u=t.createSubContext(e.options);a&&u.delayNextStep(a),Xn(this,c,u),i=Math.max(i,u.currentTimeline.currentTime),n.push(u.currentTimeline)}),n.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return Ur(t.params?xe(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(n.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,i=t.currentAnimateTimings;!i&&n.hasCurrentStyleProperties()&&n.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(a):n.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,i=t.currentTimeline.duration,a=n.duration,u=t.createSubContext().currentTimeline;u.easing=n.easing,e.styles.forEach(h=>{u.forwardTime((h.offset||0)*a),u.setStyles(h.styles,h.easing,t.errors,t.options),u.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(u),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?hr(i.delay):0;a&&(6===t.previousNode.type||0==n&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ca);let c=n;const u=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=u.length;let h=null;u.forEach((g,y)=>{t.currentQueryIndex=y;const E=t.createSubContext(e.options,g);a&&E.delayNextStep(a),g===t.element&&(h=E.currentTimeline),Xn(this,e.animation,E),E.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,E.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),h&&(t.currentTimeline.mergeTimelineCollectedStyles(h),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,i=t.currentTimeline,a=e.timings,c=Math.abs(a.duration),u=c*(t.currentQueryTotal-1);let h=c*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":h=u-h;break;case"full":h=n.currentStaggerTime}const y=t.currentTimeline;h&&y.delayNextStep(h);const E=y.currentTime;Xn(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=i.currentTime-E+(i.startTime-n.currentTimeline.startTime)}}const Ca={};class al{constructor(e,t,n,i,a,c,u,h){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=a,this.errors=c,this.timelines=u,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ca,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=h||new xa(this._driver,t,0),u.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let i=this.options;null!=n.duration&&(i.duration=hr(n.duration)),null!=n.delay&&(i.delay=hr(n.delay));const a=n.params;if(a){let c=i.params;c||(c=this.options.params={}),Object.keys(a).forEach(u=>{(!t||!c.hasOwnProperty(u))&&(c[u]=xe(a[u],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(i=>{n[i]=t[i]})}}return e}createSubContext(e=null,t,n){const i=t||this.element,a=new al(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=Ca,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},a=new Ic(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,i,a,c){let u=[];if(i&&u.push(this.element),e.length>0){e=(e=e.replace(xs,"."+this._enterClassName)).replace(eo,"."+this._leaveClassName);let g=this._driver.query(this.element,e,1!=n);0!==n&&(g=n<0?g.slice(g.length+n,g.length):g.slice(0,n)),u.push(...g)}return!a&&0==u.length&&c.push(function xt(s){return new b.vHH(3014,!1)}()),u}}class xa{constructor(e,t,n,i){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new xa(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||X.l3),this._currentKeyframe.set(t,X.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},c=function Oc(s,e){const t=new Map;let n;return s.forEach(i=>{if("*"===i){n=n||e.keys();for(let a of n)t.set(a,X.l3)}else br(i,t)}),t}(e,this._globalTimelineStyles);for(let[u,h]of c){const g=xe(h,a,n);this._pendingStyles.set(u,g),this._localTimelineStyles.has(u)||this._backFill.set(u,this._globalTimelineStyles.get(u)??X.l3),this._updateStyle(u,g)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{const i=this._styleSummary.get(n);(!i||t.time>i.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((u,h)=>{const g=br(u,new Map,this._backFill);g.forEach((y,E)=>{y===X.k1?e.add(E):y===X.l3&&t.add(E)}),n||g.set("offset",h/this.duration),i.push(g)});const a=e.size?de(e.values()):[],c=t.size?de(t.values()):[];if(n){const u=i[0],h=new Map(u);u.set("offset",0),h.set("offset",1),i=[u,h]}return ys(this.element,i,a,c,this.duration,this.startTime,this.easing,!1)}}class Ic extends xa{constructor(e,t,n,i,a,c,u=!1){super(e,t,c.delay),this.keyframes=n,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=u,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],c=n+t,u=t/c,h=br(e[0]);h.set("offset",0),a.push(h);const g=br(e[0]);g.set("offset",Xl(u)),a.push(g);const y=e.length-1;for(let E=1;E<=y;E++){let C=br(e[E]);const T=C.get("offset");C.set("offset",Xl((t+T*n)/c)),a.push(C)}n=c,t=0,i="",e=a}return ys(this.element,e,this.preStyleProps,this.postStyleProps,n,t,i,!0)}}function Xl(s,e=3){const t=Math.pow(10,e-1);return Math.round(s*t)/t}class da{}const ea=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Pc extends da{normalizePropertyName(e,t){return Ie(e)}normalizeStyleValue(e,t,n,i){let a="";const c=n.toString().trim();if(ea.has(t)&&0!==n&&"0"!==n)if("number"==typeof n)a="px";else{const u=n.match(/^[+-]?[\d\.]+([a-z]*)$/);u&&0==u[1].length&&i.push(function $e(s,e){return new b.vHH(3005,!1)}())}return c+a}}function ql(s,e,t,n,i,a,c,u,h,g,y,E,C){return{type:0,element:s,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:n,toStyles:c,timelines:u,queriedElements:h,preStyleProps:g,postStyleProps:y,totalTime:E,errors:C}}const ll={};class Bo{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,i){return function Ta(s,e,t,n,i){return s.some(a=>a(e,t,n,i))}(this.ast.matchers,e,t,n,i)}buildStyles(e,t,n){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,n):new Map}build(e,t,n,i,a,c,u,h,g,y){const E=[],C=this.ast.options&&this.ast.options.params||ll,R=this.buildStyles(n,u&&u.params||ll,E),B=h&&h.params||ll,L=this.buildStyles(i,B,E),O=new Set,q=new Map,j=new Map,Z="void"===i,ie={params:ta(B,C),delay:this.ast.options?.delay},oe=y?[]:ol(e,t,this.ast.animation,a,c,R,L,ie,g,E);let re=0;if(oe.forEach(te=>{re=Math.max(te.duration+te.delay,re)}),E.length)return ql(t,this._triggerName,n,i,Z,R,L,[],[],q,j,re,E);oe.forEach(te=>{const ae=te.element,ze=_i(q,ae,new Set);te.preStyleProps.forEach(bt=>ze.add(bt));const dt=_i(j,ae,new Set);te.postStyleProps.forEach(bt=>dt.add(bt)),ae!==t&&O.add(ae)});const pe=de(O.values());return ql(t,this._triggerName,n,i,Z,R,L,oe,pe,q,j,re)}}function ta(s,e){const t=Vr(e);for(const n in s)s.hasOwnProperty(n)&&null!=s[n]&&(t[n]=s[n]);return t}class Lc{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n=new Map,i=Vr(this.defaultParams);return Object.keys(e).forEach(a=>{const c=e[a];null!==c&&(i[a]=c)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((c,u)=>{c&&(c=xe(c,i,t));const h=this.normalizer.normalizePropertyName(u,t);c=this.normalizer.normalizeStyleValue(u,h,c,t),n.set(h,c)})}),n}}class to{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Lc(i.style,i.options&&i.options.params||{},n))}),Vo(this.states,"true","1"),Vo(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Bo(e,i,this.states))}),this.fallbackTransition=function Uo(s,e,t){return new Bo(s,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,u)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,i){return this.transitionFactories.find(c=>c.match(e,t,n,i))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function Vo(s,e,t){s.has(e)?s.has(t)||s.set(t,s.get(e)):s.has(t)&&s.set(e,s.get(t))}const Fc=new Mo;class na{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const n=[],a=Js(this._driver,t,n,[]);if(n.length)throw function at(s){return new b.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,n){const i=e.element,a=bn(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const i=[],a=this._animations.get(e);let c;const u=new Map;if(a?(c=ol(this._driver,t,a,Os,wn,new Map,new Map,n,Fc,i),c.forEach(y=>{const E=_i(u,y.element,new Map);y.postStyleProps.forEach(C=>E.set(C,null))})):(i.push(function Ge(){return new b.vHH(3300,!1)}()),c=[]),i.length)throw function Vt(s){return new b.vHH(3504,!1)}();u.forEach((y,E)=>{y.forEach((C,T)=>{y.set(T,this._driver.computeStyle(E,T,X.l3))})});const g=Xt(c.map(y=>{const E=u.get(y.element);return this._buildPlayer(y,new Map,E)}));return this._playersById.set(e,g),g.onDestroy(()=>this.destroy(e)),this.players.push(g),g}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Bt(s){return new b.vHH(3301,!1)}();return t}listen(e,t,n,i){const a=ji(t,"","","");return On(this._getPlayer(e),n,a,i),()=>{}}command(e,t,n,i){if("register"==n)return void this.register(e,i[0]);if("create"==n)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(n){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Zl="ng-animate-queued",ia="ng-animate-disabled",bs=[],Kl={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Jl={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Tr="__ng_removed";class Ia{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function yd(s){return s??null}(n?e.value:e),n){const a=Vr(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const n=this.options.params;Object.keys(t).forEach(i=>{null==n[i]&&(n[i]=t[i])})}}}const ha="void",nr=new Ia(ha);class So{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Nr(t,this._hostClassName)}listen(e,t,n,i){if(!this._triggers.has(t))throw function Mn(s,e){return new b.vHH(3302,!1)}();if(null==n||0==n.length)throw function Li(s){return new b.vHH(3303,!1)}();if(!function Ho(s){return"start"==s||"done"==s}(n))throw function ar(s,e){return new b.vHH(3400,!1)}();const a=_i(this._elementListeners,e,[]),c={name:t,phase:n,callback:i};a.push(c);const u=_i(this._engine.statesByElement,e,new Map);return u.has(t)||(Nr(e,Xi),Nr(e,Xi+"-"+t),u.set(t,nr)),()=>{this._engine.afterFlush(()=>{const h=a.indexOf(c);h>=0&&a.splice(h,1),this._triggers.has(t)||u.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Wn(s){return new b.vHH(3401,!1)}();return t}trigger(e,t,n,i=!0){const a=this._getTrigger(t),c=new Oa(this.id,t,e);let u=this._engine.statesByElement.get(e);u||(Nr(e,Xi),Nr(e,Xi+"-"+t),this._engine.statesByElement.set(e,u=new Map));let h=u.get(t);const g=new Ia(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&h&&g.absorbOptions(h.options),u.set(t,g),h||(h=nr),g.value!==ha&&h.value===g.value){if(!function Uc(s,e){const t=Object.keys(s),n=Object.keys(e);if(t.length!=n.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||s[a]!==e[a])return!1}return!0}(h.params,g.params)){const B=[],L=a.matchStyles(h.value,h.params,B),O=a.matchStyles(g.value,g.params,B);B.length?this._engine.reportError(B):this._engine.afterFlush(()=>{fr(e,L),qr(e,O)})}return}const C=_i(this._engine.playersByElement,e,[]);C.forEach(B=>{B.namespaceId==this.id&&B.triggerName==t&&B.queued&&B.destroy()});let T=a.matchTransition(h.value,g.value,e,g.params),R=!1;if(!T){if(!i)return;T=a.fallbackTransition,R=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:T,fromState:h,toState:g,player:c,isFallbackTransition:R}),R||(Nr(e,Zl),c.onStart(()=>{ir(e,Zl)})),c.onDone(()=>{let B=this.players.indexOf(c);B>=0&&this.players.splice(B,1);const L=this._engine.playersByElement.get(e);if(L){let O=L.indexOf(c);O>=0&&L.splice(O,1)}}),this.players.push(c),C.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,dn,!0);n.forEach(i=>{if(i[Tr])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,n,i){const a=this._engine.statesByElement.get(e),c=new Map;if(a){const u=[];if(a.forEach((h,g)=>{if(c.set(g,h.value),this._triggers.has(g)){const y=this.trigger(e,g,ha,i);y&&u.push(y)}}),u.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),n&&Xt(u).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const i=new Set;t.forEach(a=>{const c=a.name;if(i.has(c))return;i.add(c);const h=this._triggers.get(c).fallbackTransition,g=n.get(c)||nr,y=new Ia(ha),E=new Oa(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:h,fromState:g,toState:y,player:E,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(n.totalAnimations){const a=n.players.length?n.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(n.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)n.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Tr];(!a||a===Kl)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){Nr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const a=n.element,c=this._elementListeners.get(a);c&&c.forEach(u=>{if(u.name==n.triggerName){const h=ji(a,n.triggerName,n.fromState.value,n.toState.value);h._data=e,On(n.player,u.phase,h,u.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(n)}),this._queue=[],t.sort((n,i)=>{const a=n.transition.ast.depCount,c=i.transition.ast.depCount;return 0==a||0==c?a-c:this._engine.driver.containsElement(n.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(n=>n.element===e)||t,t}}class Bc{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){const n=new So(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList,i=this.namespacesByHostElement;if(n.length-1>=0){let c=!1,u=this.driver.getParentElement(t);for(;u;){const h=i.get(u);if(h){const g=n.indexOf(h);n.splice(g+1,0,e),c=!0;break}u=this.driver.getParentElement(u)}c||n.unshift(e)}else n.push(e);return i.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let i=this._namespaceLookup[e];i&&i.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(n);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n)for(let i of n.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(e,t,n,i){if(Na(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,n,i),!0}return!1}insertNode(e,t,n,i){if(!Na(t))return;const a=t[Tr];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,n)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Nr(e,ia)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ir(e,ia))}removeNode(e,t,n,i){if(Na(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),n){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,n,i,a){this.collectedLeaveElements.push(t),t[Tr]={namespaceId:e,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,n,i,a){return Na(t)?this._fetchNamespace(e).listen(t,n,i,a):()=>{}}_buildInstruction(e,t,n,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,dn,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Ss,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Xt(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Tr];if(t&&t.setForRemoval){if(e[Tr]=Kl,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(ia)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,i)=>this._balanceNamespaceList(n,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Nr(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let i=0;i<n.length;i++)n[i]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],t.length?Xt(t).onDone(()=>{n.forEach(i=>i())}):n.forEach(i=>i())}}reportError(e){throw function yr(s){return new b.vHH(3402,!1)}()}_flushAnimations(e,t){const n=new Mo,i=[],a=new Map,c=[],u=new Map,h=new Map,g=new Map,y=new Set;this.disabledNodes.forEach(Ne=>{y.add(Ne);const Ve=this.driver.query(Ne,".ng-animate-queued",!0);for(let rt=0;rt<Ve.length;rt++)y.add(Ve[rt])});const E=this.bodyNode,C=Array.from(this.statesByElement.keys()),T=Pa(C,this.collectedEnterElements),R=new Map;let B=0;T.forEach((Ne,Ve)=>{const rt=Os+B++;R.set(Ve,rt),Ne.forEach(Xe=>Nr(Xe,rt))});const L=[],O=new Set,q=new Set;for(let Ne=0;Ne<this.collectedLeaveElements.length;Ne++){const Ve=this.collectedLeaveElements[Ne],rt=Ve[Tr];rt&&rt.setForRemoval&&(L.push(Ve),O.add(Ve),rt.hasAnimation?this.driver.query(Ve,".ng-star-inserted",!0).forEach(Xe=>O.add(Xe)):q.add(Ve))}const j=new Map,Z=Pa(C,Array.from(O));Z.forEach((Ne,Ve)=>{const rt=wn+B++;j.set(Ve,rt),Ne.forEach(Xe=>Nr(Xe,rt))}),e.push(()=>{T.forEach((Ne,Ve)=>{const rt=R.get(Ve);Ne.forEach(Xe=>ir(Xe,rt))}),Z.forEach((Ne,Ve)=>{const rt=j.get(Ve);Ne.forEach(Xe=>ir(Xe,rt))}),L.forEach(Ne=>{this.processLeaveNode(Ne)})});const ie=[],oe=[];for(let Ne=this._namespaceList.length-1;Ne>=0;Ne--)this._namespaceList[Ne].drainQueuedTransitions(t).forEach(rt=>{const Xe=rt.player,wt=rt.element;if(ie.push(Xe),this.collectedEnterElements.length){const un=wt[Tr];if(un&&un.setForMove){if(un.previousTriggersValues&&un.previousTriggersValues.has(rt.triggerName)){const xn=un.previousTriggersValues.get(rt.triggerName),Jn=this.statesByElement.get(rt.element);if(Jn&&Jn.has(rt.triggerName)){const Ni=Jn.get(rt.triggerName);Ni.value=xn,Jn.set(rt.triggerName,Ni)}}return void Xe.destroy()}}const Le=!E||!this.driver.containsElement(E,wt),ut=j.get(wt),Ht=R.get(wt),Lt=this._buildInstruction(rt,n,Ht,ut,Le);if(Lt.errors&&Lt.errors.length)return void oe.push(Lt);if(Le)return Xe.onStart(()=>fr(wt,Lt.fromStyles)),Xe.onDestroy(()=>qr(wt,Lt.toStyles)),void i.push(Xe);if(rt.isFallbackTransition)return Xe.onStart(()=>fr(wt,Lt.fromStyles)),Xe.onDestroy(()=>qr(wt,Lt.toStyles)),void i.push(Xe);const ln=[];Lt.timelines.forEach(un=>{un.stretchStartingKeyframe=!0,this.disabledNodes.has(un.element)||ln.push(un)}),Lt.timelines=ln,n.append(wt,Lt.timelines),c.push({instruction:Lt,player:Xe,element:wt}),Lt.queriedElements.forEach(un=>_i(u,un,[]).push(Xe)),Lt.preStyleProps.forEach((un,xn)=>{if(un.size){let Jn=h.get(xn);Jn||h.set(xn,Jn=new Set),un.forEach((Ni,Bn)=>Jn.add(Bn))}}),Lt.postStyleProps.forEach((un,xn)=>{let Jn=g.get(xn);Jn||g.set(xn,Jn=new Set),un.forEach((Ni,Bn)=>Jn.add(Bn))})});if(oe.length){const Ne=[];oe.forEach(Ve=>{Ne.push(function lt(s,e){return new b.vHH(3505,!1)}())}),ie.forEach(Ve=>Ve.destroy()),this.reportError(Ne)}const re=new Map,pe=new Map;c.forEach(Ne=>{const Ve=Ne.element;n.has(Ve)&&(pe.set(Ve,Ve),this._beforeAnimationBuild(Ne.player.namespaceId,Ne.instruction,re))}),i.forEach(Ne=>{const Ve=Ne.element;this._getPreviousPlayers(Ve,!1,Ne.namespaceId,Ne.triggerName,null).forEach(Xe=>{_i(re,Ve,[]).push(Xe),Xe.destroy()})});const te=L.filter(Ne=>hl(Ne,h,g)),ae=new Map;ra(ae,this.driver,q,g,X.l3).forEach(Ne=>{hl(Ne,h,g)&&te.push(Ne)});const dt=new Map;T.forEach((Ne,Ve)=>{ra(dt,this.driver,new Set(Ne),h,X.k1)}),te.forEach(Ne=>{const Ve=ae.get(Ne),rt=dt.get(Ne);ae.set(Ne,new Map([...Array.from(Ve?.entries()??[]),...Array.from(rt?.entries()??[])]))});const bt=[],De=[],Ke={};c.forEach(Ne=>{const{element:Ve,player:rt,instruction:Xe}=Ne;if(n.has(Ve)){if(y.has(Ve))return rt.onDestroy(()=>qr(Ve,Xe.toStyles)),rt.disabled=!0,rt.overrideTotalTime(Xe.totalTime),void i.push(rt);let wt=Ke;if(pe.size>1){let ut=Ve;const Ht=[];for(;ut=ut.parentNode;){const Lt=pe.get(ut);if(Lt){wt=Lt;break}Ht.push(ut)}Ht.forEach(Lt=>pe.set(Lt,wt))}const Le=this._buildAnimation(rt.namespaceId,Xe,re,a,dt,ae);if(rt.setRealPlayer(Le),wt===Ke)bt.push(rt);else{const ut=this.playersByElement.get(wt);ut&&ut.length&&(rt.parentPlayer=Xt(ut)),i.push(rt)}}else fr(Ve,Xe.fromStyles),rt.onDestroy(()=>qr(Ve,Xe.toStyles)),De.push(rt),y.has(Ve)&&i.push(rt)}),De.forEach(Ne=>{const Ve=a.get(Ne.element);if(Ve&&Ve.length){const rt=Xt(Ve);Ne.setRealPlayer(rt)}}),i.forEach(Ne=>{Ne.parentPlayer?Ne.syncPlayerEvents(Ne.parentPlayer):Ne.destroy()});for(let Ne=0;Ne<L.length;Ne++){const Ve=L[Ne],rt=Ve[Tr];if(ir(Ve,wn),rt&&rt.hasAnimation)continue;let Xe=[];if(u.size){let Le=u.get(Ve);Le&&Le.length&&Xe.push(...Le);let ut=this.driver.query(Ve,Ss,!0);for(let Ht=0;Ht<ut.length;Ht++){let Lt=u.get(ut[Ht]);Lt&&Lt.length&&Xe.push(...Lt)}}const wt=Xe.filter(Le=>!Le.destroyed);wt.length?dl(this,Ve,wt):this.processLeaveNode(Ve)}return L.length=0,bt.forEach(Ne=>{this.players.push(Ne),Ne.onDone(()=>{Ne.destroy();const Ve=this.players.indexOf(Ne);this.players.splice(Ve,1)}),Ne.play()}),bt}elementContainsData(e,t){let n=!1;const i=t[Tr];return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,i,a){let c=[];if(t){const u=this.playersByQueriedElement.get(e);u&&(c=u)}else{const u=this.playersByElement.get(e);if(u){const h=!a||a==ha;u.forEach(g=>{g.queued||!h&&g.triggerName!=i||c.push(g)})}}return(n||i)&&(c=c.filter(u=>!(n&&n!=u.namespaceId||i&&i!=u.triggerName))),c}_beforeAnimationBuild(e,t,n){const a=t.element,c=t.isRemovalTransition?void 0:e,u=t.isRemovalTransition?void 0:t.triggerName;for(const h of t.timelines){const g=h.element,y=g!==a,E=_i(n,g,[]);this._getPreviousPlayers(g,y,c,u,t.toState).forEach(T=>{const R=T.getRealPlayer();R.beforeDestroy&&R.beforeDestroy(),T.destroy(),E.push(T)})}fr(a,t.fromStyles)}_buildAnimation(e,t,n,i,a,c){const u=t.triggerName,h=t.element,g=[],y=new Set,E=new Set,C=t.timelines.map(R=>{const B=R.element;y.add(B);const L=B[Tr];if(L&&L.removedBeforeQueried)return new X.ZN(R.duration,R.delay);const O=B!==h,q=function sa(s){const e=[];return Vn(s,e),e}((n.get(B)||bs).map(re=>re.getRealPlayer())).filter(re=>!!re.element&&re.element===B),j=a.get(B),Z=c.get(B),ie=bn(0,this._normalizer,0,R.keyframes,j,Z),oe=this._buildPlayer(R,ie,q);if(R.subTimeline&&i&&E.add(B),O){const re=new Oa(e,u,B);re.setRealPlayer(oe),g.push(re)}return oe});g.forEach(R=>{_i(this.playersByQueriedElement,R.element,[]).push(R),R.onDone(()=>function ws(s,e,t){let n=s.get(e);if(n){if(n.length){const i=n.indexOf(t);n.splice(i,1)}0==n.length&&s.delete(e)}return n}(this.playersByQueriedElement,R.element,R))}),y.forEach(R=>Nr(R,lr));const T=Xt(C);return T.onDestroy(()=>{y.forEach(R=>ir(R,lr)),qr(h,t.toStyles)}),E.forEach(R=>{_i(i,R,[]).push(T)}),T}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new X.ZN(e.duration,e.delay)}}class Oa{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new X.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(i=>On(e,n,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){_i(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Na(s){return s&&1===s.nodeType}function Hr(s,e){const t=s.style.display;return s.style.display=e??"none",t}function ra(s,e,t,n,i){const a=[];t.forEach(h=>a.push(Hr(h)));const c=[];n.forEach((h,g)=>{const y=new Map;h.forEach(E=>{const C=e.computeStyle(g,E,i);y.set(E,C),(!C||0==C.length)&&(g[Tr]=Jl,c.push(g))}),s.set(g,y)});let u=0;return t.forEach(h=>Hr(h,a[u++])),c}function Pa(s,e){const t=new Map;if(s.forEach(u=>t.set(u,[])),0==e.length)return t;const i=new Set(e),a=new Map;function c(u){if(!u)return 1;let h=a.get(u);if(h)return h;const g=u.parentNode;return h=t.has(g)?g:i.has(g)?1:c(g),a.set(u,h),h}return e.forEach(u=>{const h=c(u);1!==h&&t.get(h).push(u)}),t}function Nr(s,e){s.classList?.add(e)}function ir(s,e){s.classList?.remove(e)}function dl(s,e,t){Xt(t).onDone(()=>s.processLeaveNode(e))}function Vn(s,e){for(let t=0;t<s.length;t++){const n=s[t];n instanceof X.ZE?Vn(n.players,e):e.push(n)}}function hl(s,e,t){const n=t.get(s);if(!n)return!1;let i=e.get(s);return i?n.forEach(a=>i.add(a)):e.set(s,n),t.delete(s),!0}class oa{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new Bc(e,t,n),this._timelineEngine=new na(e,t,n),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,n,i,a){const c=e+"-"+i;let u=this._triggerCache[c];if(!u){const h=[],y=Js(this._driver,a,h,[]);if(h.length)throw function Fe(s,e){return new b.vHH(3404,!1)}();u=function Da(s,e,t){return new to(s,e,t)}(i,y,this._normalizer),this._triggerCache[c]=u}this._transitionEngine.registerTrigger(t,i,u)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,i){this._transitionEngine.insertNode(e,t,n,i)}onRemove(e,t,n,i){this._transitionEngine.removeNode(e,t,i||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,i){if("@"==n.charAt(0)){const[a,c]=tr(n);this._timelineEngine.command(a,t,c,i)}else this._transitionEngine.trigger(e,t,n,i)}listen(e,t,n,i,a){if("@"==n.charAt(0)){const[c,u]=tr(n);return this._timelineEngine.listen(c,t,u,a)}return this._transitionEngine.listen(e,t,n,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Au=(()=>{class s{constructor(t,n,i){this._element=t,this._startStyles=n,this._endStyles=i,this._state=0;let a=s.initialStylesByElement.get(t);a||s.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&qr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qr(this._element,this._initialStyles),this._endStyles&&(qr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(s.initialStylesByElement.delete(this._element),this._startStyles&&(fr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fr(this._element,this._endStyles),this._endStyles=null),qr(this._element,this._initialStyles),this._state=3)}}return s.initialStylesByElement=new WeakMap,s})();function go(s){let e=null;return s.forEach((t,n)=>{(function La(s){return"display"===s||"position"===s})(n)&&(e=e||new Map,e.set(n,t))}),e}class Vc{constructor(e,t,n,i){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,i)=>{"offset"!==i&&e.set(i,this._finished?n:Ui(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class St{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Yi(e,t)}getParentElement(e){return Ai(e)}query(e,t,n){return Rn(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}animate(e,t,n,i,a,c=[]){const h={duration:n,delay:i,fill:0==i?"both":"forwards"};a&&(h.easing=a);const g=new Map,y=c.filter(T=>T instanceof Vc);(function an(s,e){return 0===s||0===e})(n,i)&&y.forEach(T=>{T.currentSnapshot.forEach((R,B)=>g.set(B,R))});let E=function Xr(s){return s.length?s[0]instanceof Map?s:s.map(e=>Yr(e)):[]}(t).map(T=>br(T));E=function yi(s,e,t){if(t.size&&e.length){let n=e[0],i=[];if(t.forEach((a,c)=>{n.has(c)||i.push(c),n.set(c,a)}),i.length)for(let a=1;a<e.length;a++){let c=e[a];i.forEach(u=>c.set(u,Ui(s,u)))}}return e}(e,E,g);const C=function bd(s,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=go(e[0]),e.length>1&&(n=go(e[e.length-1]))):e instanceof Map&&(t=go(e)),t||n?new Au(s,t,n):null}(e,E);return new Vc(e,E,h,C)}}var Jt=K(6895);let fa=(()=>{class s extends X._j{constructor(t,n){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(n.body,{id:"0",encapsulation:b.ifc.None,styles:[],data:{animation:[]}})}build(t){const n=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?(0,X.vP)(t):t;return Gc(this._renderer,null,n,"register",[i]),new Hc(n,this._renderer)}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(b.FYo),b.LFG(Jt.K0))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac}),s})();class Hc extends X.LC{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Dr(this._id,e,t||{},this._renderer)}}class Dr{constructor(e,t,n,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Gc(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Gc(s,e,t,n,i){return s.setProperty(e,`@@${t}:${n}`,i)}const Ri="@.disabled";let W=(()=>{class s{constructor(t,n,i){this.delegate=t,this.engine=n,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(a,c)=>{const u=c?.parentNode(a);u&&c.removeChild(u,a)}}createRenderer(t,n){const a=this.delegate.createRenderer(t,n);if(!(t&&n&&n.data&&n.data.animation)){let y=this._rendererCache.get(a);return y||(y=new H("",a,this.engine,()=>this._rendererCache.delete(a)),this._rendererCache.set(a,y)),y}const c=n.id,u=n.id+"-"+this._currentId;this._currentId++,this.engine.register(u,t);const h=y=>{Array.isArray(y)?y.forEach(h):this.engine.registerTrigger(c,u,t,y.name,y)};return n.data.animation.forEach(h),new V(this,u,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,n,i){t>=0&&t<this._microtaskId?this._zone.run(()=>n(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[c,u]=a;c(u)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(b.FYo),b.LFG(oa),b.LFG(b.R0b))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac}),s})();class H{constructor(e,t,n,i){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?a=>t.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,i=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,i){this.delegate.setAttribute(e,t,n,i)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,i){this.delegate.setStyle(e,t,n,i)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&t==Ri?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class V extends H{constructor(e,t,n,i,a){super(t,n,i,a),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Ri?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const i=function ne(s){switch(s){case"body":return document.body;case"document":return document;case"window":return window;default:return s}}(e);let a=t.slice(1),c="";return"@"!=a.charAt(0)&&([a,c]=function tt(s){const e=s.indexOf(".");return[s.substring(0,e),s.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,c,u=>{this.factory.scheduleListenerCallback(u._data||-1,n,u)})}return this.delegate.listen(e,t,n)}}const Co=[{provide:X._j,useClass:fa},{provide:da,useFactory:function oi(){return new Pc}},{provide:oa,useClass:(()=>{class s extends oa{constructor(t,n,i,a){super(t.body,n,i)}ngOnDestroy(){this.flush()}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(Jt.K0),b.LFG(Xs),b.LFG(da),b.LFG(b.z2F))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac}),s})()},{provide:b.FYo,useFactory:function Ar(s,e,t){return new W(s,e,t)},deps:[m.se,oa,b.R0b]}],Ts=[{provide:Xs,useFactory:()=>new St},{provide:b.QbO,useValue:"BrowserAnimations"},...Co],cs=[{provide:Xs,useClass:ls},{provide:b.QbO,useValue:"NoopAnimations"},...Co];let fl=(()=>{class s{static withConfig(t){return{ngModule:s,providers:t.disableAnimations?cs:Ts}}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({providers:Ts,imports:[m.b2]}),s})();var no=K(9347),Ru=K(7185);let pl=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({imports:[no.Bz,Jt.ez]}),s})(),ml=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({imports:[no.Bz,Jt.ez]}),s})();var pa=K(2953);let tc=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({imports:[no.Bz,Jt.ez,pa.IJ]}),s})(),jc=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({imports:[no.Bz,Jt.ez,pa.IJ]}),s})(),Wc=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=b.Xpm({type:s,selectors:[["app-root"]],decls:1,vars:0,template:function(t,n){1&t&&b._UZ(0,"router-outlet")},dependencies:[no.lC]}),s})();const wd=function(s){return[s]};function Ed(s,e){if(1&s&&(b.TgZ(0,"li",8)(1,"a",9),b._UZ(2,"i"),b.TgZ(3,"p"),b._uU(4),b.qZA()()()),2&s){const t=e.$implicit;b.Tol(t.class),b.xp6(1),b.Q6J("routerLink",b.VKq(8,wd,t.path)),b.xp6(1),b.Gre("nc-icon ",t.icon,""),b.xp6(2),b.Oqu(t.title)}}const gl=[{path:"/dashboard",title:"Dashboard",icon:"nc-bank",class:""},{path:"/icons",title:"Icons",icon:"nc-diamond",class:""},{path:"/maps",title:"Maps",icon:"nc-pin-3",class:""},{path:"/notifications",title:"Notifications",icon:"nc-bell-55",class:""},{path:"/user",title:"User Profile",icon:"nc-single-02",class:""},{path:"/table",title:"Table List",icon:"nc-tile-56",class:""},{path:"/typography",title:"Typography",icon:"nc-caps-small",class:""},{path:"/upgrade",title:"Upgrade to PRO",icon:"nc-spaceship",class:"active-pro"}];let Iu=(()=>{class s{ngOnInit(){this.menuItems=gl.filter(t=>t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=b.Xpm({type:s,selectors:[["sidebar-cmp"]],decls:9,vars:1,consts:[[1,"sidebar-wrapper"],[1,"logo"],["href","http://www.creative-tim.com",1,"simple-text","logo-mini"],[1,"logo-image-small"],["src","assets/img/angular2-logo.png"],["href","https://www.creative-tim.com",1,"simple-text","logo-normal"],[1,"nav"],["routerLinkActive","active",3,"class",4,"ngFor","ngForOf"],["routerLinkActive","active"],[3,"routerLink"]],template:function(t,n){1&t&&(b.TgZ(0,"div",0)(1,"div",1)(2,"a",2)(3,"div",3),b._UZ(4,"img",4),b.qZA()(),b.TgZ(5,"a",5),b._uU(6," Creative Tim "),b.qZA()(),b.TgZ(7,"ul",6),b.YNc(8,Ed,5,10,"li",7),b.qZA()()),2&t&&(b.xp6(8),b.Q6J("ngForOf",n.menuItems))},dependencies:[no.yS,no.Od,Jt.sg],encapsulation:2}),s})();const _h=["navbar-cmp"];let Ou=(()=>{class s{constructor(t,n,i,a){this.renderer=n,this.element=i,this.router=a,this.isCollapsed=!0,this.location=t,this.nativeElement=i.nativeElement,this.sidebarVisible=!1}ngOnInit(){this.listTitles=gl.filter(n=>n),this.toggleButton=this.element.nativeElement.getElementsByClassName("navbar-toggle")[0],this.router.events.subscribe(n=>{this.sidebarClose()})}getTitle(){var t=this.location.prepareExternalUrl(this.location.path());"#"===t.charAt(0)&&(t=t.slice(1));for(var n=0;n<this.listTitles.length;n++)if(this.listTitles[n].path===t)return this.listTitles[n].title;return"Zat\xed\u017een\xed konzoly"}sidebarToggle(){!1===this.sidebarVisible?this.sidebarOpen():this.sidebarClose()}sidebarOpen(){const t=this.toggleButton,n=document.getElementsByTagName("html")[0],i=document.getElementsByClassName("main-panel")[0];setTimeout(function(){t.classList.add("toggled")},500),n.classList.add("nav-open"),window.innerWidth<991&&(i.style.position="fixed"),this.sidebarVisible=!0}sidebarClose(){const t=document.getElementsByTagName("html")[0],n=document.getElementsByClassName("main-panel")[0];window.innerWidth<991&&setTimeout(function(){n.style.position=""},500),this.toggleButton.classList.remove("toggled"),this.sidebarVisible=!1,t.classList.remove("nav-open")}collapse(){this.isCollapsed=!this.isCollapsed;const t=document.getElementsByTagName("nav")[0];console.log(t),this.isCollapsed?(t.classList.add("navbar-transparent"),t.classList.remove("bg-white")):(t.classList.remove("navbar-transparent"),t.classList.add("bg-white"))}}return s.\u0275fac=function(t){return new(t||s)(b.Y36(Jt.Ye),b.Y36(b.Qsj),b.Y36(b.SBq),b.Y36(no.F0))},s.\u0275cmp=b.Xpm({type:s,selectors:[["navbar-cmp"]],viewQuery:function(t,n){if(1&t&&b.Gf(_h,5),2&t){let i;b.iGM(i=b.CRH())&&(n.button=i.first)}},decls:14,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-absolute","fixed-top","navbar-transparent"],[1,"container-fluid"],[1,"navbar-wrapper"],[1,"navbar-toggle"],["type","button",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-bar","bar1"],[1,"navbar-toggler-bar","bar2"],[1,"navbar-toggler-bar","bar3"],["href","javascript:void(0)",1,"navbar-brand"],["type","button",1,"navbar-toggler"],[1,"navbar-toggler-bar","navbar-kebab"]],template:function(t,n){1&t&&(b.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),b.NdJ("click",function(){return n.sidebarToggle()}),b._UZ(5,"span",5)(6,"span",6)(7,"span",7),b.qZA()()(),b.TgZ(8,"a",8),b._uU(9),b.qZA(),b.TgZ(10,"button",9),b._UZ(11,"span",10)(12,"span",10)(13,"span",10),b.qZA()()()),2&t&&(b.xp6(9),b.Oqu(n.getTitle()))},dependencies:[pa.M2],encapsulation:2}),s})(),es=(()=>{class s{constructor(){this.test=new Date}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=b.Xpm({type:s,selectors:[["footer-cmp"]],decls:2,vars:0,consts:[[1,"footer"],[1,"container-fluid"]],template:function(t,n){1&t&&(b.TgZ(0,"footer",0),b._UZ(1,"div",1),b.qZA())},encapsulation:2}),s})();const ks=function(s){return{active:s}};let rr=(()=>{class s{constructor(){this.sidebarColor="white",this.sidebarActiveColor="danger",this.state=!0}changeSidebarColor(t){var n=document.querySelector(".sidebar");this.sidebarColor=t,n?.setAttribute("data-color",t)}changeSidebarActiveColor(t){var n=document.querySelector(".sidebar");this.sidebarActiveColor=t,n?.setAttribute("data-active-color",t)}ngOnInit(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=b.Xpm({type:s,selectors:[["fixedplugin-cmp"]],decls:20,vars:21,consts:[[1,"fixed-plugin"],["ngbDropdown","",1,"show-dropdown"],["href","javascript:void(0)","ngbDropdownToggle","","id","dropdownConfig"],[1,"fa","fa-cog","fa-2x"],["ngbDropdownMenu","","aria-labelledby","dropdownConfig",1,""],[1,"header-title"],[1,"adjustments-line","text-center"],["href","javascript:void(0)",1,"switch-trigger","background-color"],[1,"badge","filter","badge-light","active",3,"ngClass","click"],[1,"badge","filter","badge-dark",3,"ngClass","click"],["href","javascript:void(0)",1,"switch-trigger","active-color"],[1,"badge","filter","badge-primary",3,"ngClass","click"],[1,"badge","filter","badge-info",3,"ngClass","click"],[1,"badge","filter","badge-success",3,"ngClass","click"],[1,"badge","filter","badge-warning",3,"ngClass","click"],[1,"badge","filter","badge-danger","active",3,"ngClass","click"]],template:function(t,n){1&t&&(b.TgZ(0,"div",0)(1,"div",1)(2,"a",2),b._UZ(3,"i",3),b.qZA(),b.TgZ(4,"ul",4)(5,"li",5),b._uU(6,"Sidebar Background"),b.qZA(),b.TgZ(7,"li",6)(8,"a",7)(9,"span",8),b.NdJ("click",function(){return n.changeSidebarColor("white")}),b.qZA(),b.TgZ(10,"span",9),b.NdJ("click",function(){return n.changeSidebarColor("black")}),b.qZA()()(),b.TgZ(11,"li",5),b._uU(12,"Sidebar Active Color"),b.qZA(),b.TgZ(13,"li",6)(14,"a",10)(15,"span",11),b.NdJ("click",function(){return n.changeSidebarActiveColor("primary")}),b.qZA(),b.TgZ(16,"span",12),b.NdJ("click",function(){return n.changeSidebarActiveColor("info")}),b.qZA(),b.TgZ(17,"span",13),b.NdJ("click",function(){return n.changeSidebarActiveColor("success")}),b.qZA(),b.TgZ(18,"span",14),b.NdJ("click",function(){return n.changeSidebarActiveColor("warning")}),b.qZA(),b.TgZ(19,"span",15),b.NdJ("click",function(){return n.changeSidebarActiveColor("danger")}),b.qZA()()()()()()),2&t&&(b.xp6(9),b.Q6J("ngClass",b.VKq(7,ks,"white"===n.sidebarColor)),b.xp6(1),b.Q6J("ngClass",b.VKq(9,ks,"black"===n.sidebarColor)),b.xp6(5),b.Q6J("ngClass",b.VKq(11,ks,"primary"===n.sidebarActiveColor)),b.xp6(1),b.Q6J("ngClass",b.VKq(13,ks,"info"===n.sidebarActiveColor)),b.xp6(1),b.Q6J("ngClass",b.VKq(15,ks,"success"===n.sidebarActiveColor)),b.xp6(1),b.Q6J("ngClass",b.VKq(17,ks,"warning"===n.sidebarActiveColor)),b.xp6(1),b.Q6J("ngClass",b.VKq(19,ks,"danger"===n.sidebarActiveColor)))},dependencies:[Jt.mk,pa.jt,pa.iD,pa.Vi],encapsulation:2}),s})(),vh=(()=>{class s{ngOnInit(){var t=document.querySelector(".sidebar");null!=t&&(t.setAttribute("data-color","black"),console.log("sidebar color changed"))}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=b.Xpm({type:s,selectors:[["app-admin-layout"]],decls:9,vars:0,consts:[[1,"wrapper"],["data-color","white","data-active-color","danger",1,"sidebar"],[1,"main-panel"],[1,"content"]],template:function(t,n){1&t&&(b.TgZ(0,"div",0)(1,"div",1),b._UZ(2,"sidebar-cmp"),b.qZA(),b.TgZ(3,"div",2),b._UZ(4,"navbar-cmp"),b.TgZ(5,"div",3),b._UZ(6,"router-outlet"),b.qZA(),b._UZ(7,"footer-cmp"),b.qZA()(),b._UZ(8,"fixedplugin-cmp"))},dependencies:[no.lC,Iu,Ou,es,rr]}),s})();function Md(s,e,t,n,i,a,c){try{var u=s[a](c),h=u.value}catch(g){return void t(g)}u.done?e(h):Promise.resolve(h).then(n,i)}const Vs=1e3,pr=1001,mr=1003,sr=1006,Ga=1008,Sl=1009,gr=1014,aa=1015,za=1016,us=1020,vo=1023,D=1026,A=1027,Bu=2300,lc=2301,cc=2400,eu=2401,Uu=3001,Pr="srgb",oo="srgb-linear",Hf="display-p3",gm="display-p3-linear",Od="linear",Lr="srgb",Gf="rec709",xl=2e3;class Tl{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const a=i.indexOf(t);-1!==a&&i.splice(a,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const n=this._listeners[e.type];if(void 0!==n){e.target=this;const i=n.slice(0);for(let a=0,c=i.length;a<c;a++)i[a].call(this,e);e.target=null}}}const yo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Gu=Math.PI/180,Ld=180/Math.PI;function Oo(){const s=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(yo[255&s]+yo[s>>8&255]+yo[s>>16&255]+yo[s>>24&255]+"-"+yo[255&e]+yo[e>>8&255]+"-"+yo[e>>16&15|64]+yo[e>>24&255]+"-"+yo[63&t|128]+yo[t>>8&255]+"-"+yo[t>>16&255]+yo[t>>24&255]+yo[255&n]+yo[n>>8&255]+yo[n>>16&255]+yo[n>>24&255]).toLowerCase()}function Mr(s,e,t){return Math.max(e,Math.min(t,s))}function Kf(s,e){return(s%e+e)%e}function _a(s,e,t){return(1-t)*s+t*e}function Dl(s){return 0==(s&s-1)&&0!==s}function xm(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function Ih(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))}function No(s,e){switch(e.constructor){case Float32Array:return s;case Uint32Array:return s/4294967295;case Uint16Array:return s/65535;case Uint8Array:return s/255;case Int32Array:return Math.max(s/2147483647,-1);case Int16Array:return Math.max(s/32767,-1);case Int8Array:return Math.max(s/127,-1);default:throw new Error("Invalid component type.")}}function fi(s,e){switch(e.constructor){case Float32Array:return s;case Uint32Array:return Math.round(4294967295*s);case Uint16Array:return Math.round(65535*s);case Uint8Array:return Math.round(255*s);case Int32Array:return Math.round(2147483647*s);case Int16Array:return Math.round(32767*s);case Int8Array:return Math.round(127*s);default:throw new Error("Invalid component type.")}}const Al_DEG2RAD=Gu,Al_degToRad=function ep(s){return s*Gu},Al_radToDeg=function S_(s){return s*Ld};class yt{constructor(e=0,t=0){yt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Mr(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),a=this.x-e.x,c=this.y-e.y;return this.x=a*n-c*i+e.x,this.y=a*i+c*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ci{constructor(e,t,n,i,a,c,u,h,g){ci.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,a,c,u,h,g)}set(e,t,n,i,a,c,u,h,g){const y=this.elements;return y[0]=e,y[1]=i,y[2]=u,y[3]=t,y[4]=a,y[5]=h,y[6]=n,y[7]=c,y[8]=g,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,a=this.elements,c=n[0],u=n[3],h=n[6],g=n[1],y=n[4],E=n[7],C=n[2],T=n[5],R=n[8],B=i[0],L=i[3],O=i[6],q=i[1],j=i[4],Z=i[7],ie=i[2],oe=i[5],re=i[8];return a[0]=c*B+u*q+h*ie,a[3]=c*L+u*j+h*oe,a[6]=c*O+u*Z+h*re,a[1]=g*B+y*q+E*ie,a[4]=g*L+y*j+E*oe,a[7]=g*O+y*Z+E*re,a[2]=C*B+T*q+R*ie,a[5]=C*L+T*j+R*oe,a[8]=C*O+T*Z+R*re,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],c=e[4],u=e[5],h=e[6],g=e[7],y=e[8];return t*c*y-t*u*g-n*a*y+n*u*h+i*a*g-i*c*h}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],c=e[4],u=e[5],h=e[6],g=e[7],y=e[8],E=y*c-u*g,C=u*h-y*a,T=g*a-c*h,R=t*E+n*C+i*T;if(0===R)return this.set(0,0,0,0,0,0,0,0,0);const B=1/R;return e[0]=E*B,e[1]=(i*g-y*n)*B,e[2]=(u*n-i*c)*B,e[3]=C*B,e[4]=(y*t-i*h)*B,e[5]=(i*a-u*t)*B,e[6]=T*B,e[7]=(n*h-g*t)*B,e[8]=(c*t-n*a)*B,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,a,c,u){const h=Math.cos(a),g=Math.sin(a);return this.set(n*h,n*g,-n*(h*c+g*u)+c+e,-i*g,i*h,-i*(-g*c+h*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(Oh.makeScale(e,t)),this}rotate(e){return this.premultiply(Oh.makeRotation(-e)),this}translate(e,t){return this.premultiply(Oh.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Oh=new ci;function kd(s){for(let e=s.length-1;e>=0;--e)if(s[e]>=65535)return!0;return!1}function ru(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}function Tm(){const s=ru("canvas");return s.style.display="block",s}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const hc={};function fc(s){s in hc||(hc[s]=!0,console.warn(s))}const Dm=(new ci).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),x_=(new ci).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Nh={[oo]:{transfer:Od,primaries:Gf,toReference:s=>s,fromReference:s=>s},[Pr]:{transfer:Lr,primaries:Gf,toReference:s=>s.convertSRGBToLinear(),fromReference:s=>s.convertLinearToSRGB()},[gm]:{transfer:Od,primaries:"p3",toReference:s=>s.applyMatrix3(x_),fromReference:s=>s.applyMatrix3(Dm)},[Hf]:{transfer:Lr,primaries:"p3",toReference:s=>s.convertSRGBToLinear().applyMatrix3(x_),fromReference:s=>s.applyMatrix3(Dm).convertLinearToSRGB()}},Ph=new Set([oo,gm]),Zi={enabled:!0,_workingColorSpace:oo,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(s){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!s},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(s){if(!Ph.has(s))throw new Error(`Unsupported working color space, "${s}".`);this._workingColorSpace=s},convert:function(s,e,t){return!1!==this.enabled&&e!==t&&e&&t?(0,Nh[t].fromReference)((0,Nh[e].toReference)(s)):s},fromWorkingColorSpace:function(s,e){return this.convert(s,this._workingColorSpace,e)},toWorkingColorSpace:function(s,e){return this.convert(s,e,this._workingColorSpace)},getPrimaries:function(s){return Nh[s].primaries},getTransfer:function(s){return""===s?Od:Nh[s].transfer}};function pc(s){return s<.04045?.0773993808*s:Math.pow(.9478672986*s+.0521327014,2.4)}function Bd(s){return s<.0031308?12.92*s:1.055*Math.pow(s,.41666)-.055}let mc;class Ud{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===mc&&(mc=ru("canvas")),mc.width=e.width,mc.height=e.height;const n=mc.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=mc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=ru("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),a=i.data;for(let c=0;c<a.length;c++)a[c]=255*pc(a[c]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t[n]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*pc(t[n]/255)):pc(t[n]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let np=0;class $a{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:np++}),this.uuid=Oo(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let a;if(Array.isArray(i)){a=[];for(let c=0,u=i.length;c<u;c++)a.push(Vd(i[c].isDataTexture?i[c].image:i[c]))}else a=Vd(i);n.url=a}return t||(e.images[this.uuid]=n),n}}function Vd(s){return typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap?Ud.getDataURL(s):s.data?{data:Array.from(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let T_=0,Po=(()=>{class s extends Tl{constructor(t=s.DEFAULT_IMAGE,n=s.DEFAULT_MAPPING,i=pr,a=pr,c=sr,u=Ga,h=vo,g=Sl,y=s.DEFAULT_ANISOTROPY,E=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:T_++}),this.uuid=Oo(),this.name="",this.source=new $a(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=a,this.magFilter=c,this.minFilter=u,this.anisotropy=y,this.format=h,this.internalFormat=null,this.type=g,this.offset=new yt(0,0),this.repeat=new yt(1,1),this.center=new yt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ci,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof E?this.colorSpace=E:(fc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=E===Uu?Pr:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Vs:t.x=t.x-Math.floor(t.x);break;case pr:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Vs:t.y=t.y-Math.floor(t.y);break;case pr:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return fc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Pr?Uu:3e3}set encoding(t){fc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===Uu?Pr:""}}return s.DEFAULT_IMAGE=null,s.DEFAULT_MAPPING=300,s.DEFAULT_ANISOTROPY=1,s})();class er{constructor(e=0,t=0,n=0,i=1){er.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,a=this.w,c=e.elements;return this.x=c[0]*t+c[4]*n+c[8]*i+c[12]*a,this.y=c[1]*t+c[5]*n+c[9]*i+c[13]*a,this.z=c[2]*t+c[6]*n+c[10]*i+c[14]*a,this.w=c[3]*t+c[7]*n+c[11]*i+c[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,a;const h=e.elements,g=h[0],y=h[4],E=h[8],C=h[1],T=h[5],R=h[9],B=h[2],L=h[6],O=h[10];if(Math.abs(y-C)<.01&&Math.abs(E-B)<.01&&Math.abs(R-L)<.01){if(Math.abs(y+C)<.1&&Math.abs(E+B)<.1&&Math.abs(R+L)<.1&&Math.abs(g+T+O-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const j=(g+1)/2,Z=(T+1)/2,ie=(O+1)/2,oe=(y+C)/4,re=(E+B)/4,pe=(R+L)/4;return j>Z&&j>ie?j<.01?(n=0,i=.707106781,a=.707106781):(n=Math.sqrt(j),i=oe/n,a=re/n):Z>ie?Z<.01?(n=.707106781,i=0,a=.707106781):(i=Math.sqrt(Z),n=oe/i,a=pe/i):ie<.01?(n=.707106781,i=.707106781,a=0):(a=Math.sqrt(ie),n=re/a,i=pe/a),this.set(n,i,a,t),this}let q=Math.sqrt((L-R)*(L-R)+(E-B)*(E-B)+(C-y)*(C-y));return Math.abs(q)<.001&&(q=1),this.x=(L-R)/q,this.y=(E-B)/q,this.z=(C-y)/q,this.w=Math.acos((g+T+O-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ip extends Tl{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new er(0,0,e,t),this.scissorTest=!1,this.viewport=new er(0,0,e,t);const i={width:e,height:t,depth:1};void 0!==n.encoding&&(fc("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Uu?Pr:""),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:sr,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new Po(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new $a(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class va extends ip{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class rp extends Po{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=mr,this.minFilter=mr,this.wrapR=pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Rm extends Po{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=mr,this.minFilter=mr,this.wrapR=pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ds{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,a,c,u){let h=n[i+0],g=n[i+1],y=n[i+2],E=n[i+3];const C=a[c+0],T=a[c+1],R=a[c+2],B=a[c+3];if(0===u)return e[t+0]=h,e[t+1]=g,e[t+2]=y,void(e[t+3]=E);if(1===u)return e[t+0]=C,e[t+1]=T,e[t+2]=R,void(e[t+3]=B);if(E!==B||h!==C||g!==T||y!==R){let L=1-u;const O=h*C+g*T+y*R+E*B,q=O>=0?1:-1,j=1-O*O;if(j>Number.EPSILON){const ie=Math.sqrt(j),oe=Math.atan2(ie,O*q);L=Math.sin(L*oe)/ie,u=Math.sin(u*oe)/ie}const Z=u*q;if(h=h*L+C*Z,g=g*L+T*Z,y=y*L+R*Z,E=E*L+B*Z,L===1-u){const ie=1/Math.sqrt(h*h+g*g+y*y+E*E);h*=ie,g*=ie,y*=ie,E*=ie}}e[t]=h,e[t+1]=g,e[t+2]=y,e[t+3]=E}static multiplyQuaternionsFlat(e,t,n,i,a,c){const u=n[i],h=n[i+1],g=n[i+2],y=n[i+3],E=a[c],C=a[c+1],T=a[c+2],R=a[c+3];return e[t]=u*R+y*E+h*T-g*C,e[t+1]=h*R+y*C+g*E-u*T,e[t+2]=g*R+y*T+u*C-h*E,e[t+3]=y*R-u*E-h*C-g*T,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,a=e._z,c=e._order,u=Math.cos,h=Math.sin,g=u(n/2),y=u(i/2),E=u(a/2),C=h(n/2),T=h(i/2),R=h(a/2);switch(c){case"XYZ":this._x=C*y*E+g*T*R,this._y=g*T*E-C*y*R,this._z=g*y*R+C*T*E,this._w=g*y*E-C*T*R;break;case"YXZ":this._x=C*y*E+g*T*R,this._y=g*T*E-C*y*R,this._z=g*y*R-C*T*E,this._w=g*y*E+C*T*R;break;case"ZXY":this._x=C*y*E-g*T*R,this._y=g*T*E+C*y*R,this._z=g*y*R+C*T*E,this._w=g*y*E-C*T*R;break;case"ZYX":this._x=C*y*E-g*T*R,this._y=g*T*E+C*y*R,this._z=g*y*R-C*T*E,this._w=g*y*E+C*T*R;break;case"YZX":this._x=C*y*E+g*T*R,this._y=g*T*E+C*y*R,this._z=g*y*R-C*T*E,this._w=g*y*E-C*T*R;break;case"XZY":this._x=C*y*E-g*T*R,this._y=g*T*E-C*y*R,this._z=g*y*R+C*T*E,this._w=g*y*E+C*T*R;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],a=t[8],c=t[1],u=t[5],h=t[9],g=t[2],y=t[6],E=t[10],C=n+u+E;if(C>0){const T=.5/Math.sqrt(C+1);this._w=.25/T,this._x=(y-h)*T,this._y=(a-g)*T,this._z=(c-i)*T}else if(n>u&&n>E){const T=2*Math.sqrt(1+n-u-E);this._w=(y-h)/T,this._x=.25*T,this._y=(i+c)/T,this._z=(a+g)/T}else if(u>E){const T=2*Math.sqrt(1+u-n-E);this._w=(a-g)/T,this._x=(i+c)/T,this._y=.25*T,this._z=(h+y)/T}else{const T=2*Math.sqrt(1+E-n-u);this._w=(c-i)/T,this._x=(a+g)/T,this._y=(h+y)/T,this._z=.25*T}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Mr(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,a=e._z,c=e._w,u=t._x,h=t._y,g=t._z,y=t._w;return this._x=n*y+c*u+i*g-a*h,this._y=i*y+c*h+a*u-n*g,this._z=a*y+c*g+n*h-i*u,this._w=c*y-n*u-i*h-a*g,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,a=this._z,c=this._w;let u=c*e._w+n*e._x+i*e._y+a*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=c,this._x=n,this._y=i,this._z=a,this;const h=1-u*u;if(h<=Number.EPSILON){const T=1-t;return this._w=T*c+t*this._w,this._x=T*n+t*this._x,this._y=T*i+t*this._y,this._z=T*a+t*this._z,this.normalize(),this._onChangeCallback(),this}const g=Math.sqrt(h),y=Math.atan2(g,u),E=Math.sin((1-t)*y)/g,C=Math.sin(t*y)/g;return this._w=c*E+this._w*C,this._x=n*E+this._x*C,this._y=i*E+this._y*C,this._z=a*E+this._z*C,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(a),n*Math.cos(a),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ce{constructor(e=0,t=0,n=0){ce.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Rl.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Rl.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*i,this.y=a[1]*t+a[4]*n+a[7]*i,this.z=a[2]*t+a[5]*n+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,a=e.elements,c=1/(a[3]*t+a[7]*n+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*i+a[12])*c,this.y=(a[1]*t+a[5]*n+a[9]*i+a[13])*c,this.z=(a[2]*t+a[6]*n+a[10]*i+a[14])*c,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,a=e.x,c=e.y,u=e.z,h=e.w,g=h*t+c*i-u*n,y=h*n+u*t-a*i,E=h*i+a*n-c*t,C=-a*t-c*n-u*i;return this.x=g*h+C*-a+y*-u-E*-c,this.y=y*h+C*-c+E*-a-g*-u,this.z=E*h+C*-u+g*-c-y*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i,this.y=a[1]*t+a[5]*n+a[9]*i,this.z=a[2]*t+a[6]*n+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,a=e.z,c=t.x,u=t.y,h=t.z;return this.x=i*h-a*u,this.y=a*c-n*h,this.z=n*u-i*c,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Lh.copy(this).projectOnVector(e),this.sub(Lh)}reflect(e){return this.sub(Lh.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Mr(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Lh=new ce,Rl=new Ds;class Il{constructor(e=new ce(1/0,1/0,1/0),t=new ce(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Ol.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Ol.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ol.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),Hd.copy(e.boundingBox),Hd.applyMatrix4(e.matrixWorld),this.union(Hd);else{const i=e.geometry;if(void 0!==i)if(t&&void 0!==i.attributes&&void 0!==i.attributes.position){const a=i.attributes.position;for(let c=0,u=a.count;c<u;c++)Ol.fromBufferAttribute(a,c).applyMatrix4(e.matrixWorld),this.expandByPoint(Ol)}else null===i.boundingBox&&i.computeBoundingBox(),Hd.copy(i.boundingBox),Hd.applyMatrix4(e.matrixWorld),this.union(Hd)}const n=e.children;for(let i=0,a=n.length;i<a;i++)this.expandByObject(n[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ol),Ol.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Wu),Fh.subVectors(this.max,Wu),su.subVectors(e.a,Wu),ou.subVectors(e.b,Wu),ju.subVectors(e.c,Wu),Ya.subVectors(ou,su),Nl.subVectors(ju,ou),au.subVectors(su,ju);let t=[0,-Ya.z,Ya.y,0,-Nl.z,Nl.y,0,-au.z,au.y,Ya.z,0,-Ya.x,Nl.z,0,-Nl.x,au.z,0,-au.x,-Ya.y,Ya.x,0,-Nl.y,Nl.x,0,-au.y,au.x,0];return!(!Im(t,su,ou,ju,Fh)||(t=[1,0,0,0,1,0,0,0,1],!Im(t,su,ou,ju,Fh)))&&(Pl.crossVectors(Ya,Nl),t=[Pl.x,Pl.y,Pl.z],Im(t,su,ou,ju,Fh))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ol).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Ol).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(gc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),gc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),gc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),gc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),gc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),gc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),gc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),gc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(gc)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const gc=[new ce,new ce,new ce,new ce,new ce,new ce,new ce,new ce],Ol=new ce,Hd=new Il,su=new ce,ou=new ce,ju=new ce,Ya=new ce,Nl=new ce,au=new ce,Wu=new ce,Fh=new ce,Pl=new ce,lu=new ce;function Im(s,e,t,n,i){for(let a=0,c=s.length-3;a<=c;a+=3){lu.fromArray(s,a);const u=i.x*Math.abs(lu.x)+i.y*Math.abs(lu.y)+i.z*Math.abs(lu.z),h=e.dot(lu),g=t.dot(lu),y=n.dot(lu);if(Math.max(-Math.max(h,g,y),Math.min(h,g,y))>u)return!1}return!0}const Zy=new Il,$u=new ce,Om=new ce;class As{constructor(e=new ce,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Zy.setFromPoints(e).getCenter(n);let i=0;for(let a=0,c=e.length;a<c;a++)i=Math.max(i,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;$u.subVectors(e,this.center);const t=$u.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=.5*(n-this.radius);this.center.addScaledVector($u,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Om.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint($u.copy(e.center).add(Om)),this.expandByPoint($u.copy(e.center).sub(Om))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Yo=new ce,Nm=new ce,sp=new ce,Ll=new ce,Pm=new ce,op=new ce,Lm=new ce;class Yu{constructor(e=new ce,t=new ce(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Yo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Yo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Yo.copy(this.origin).addScaledVector(this.direction,t),Yo.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Nm.copy(e).add(t).multiplyScalar(.5),sp.copy(t).sub(e).normalize(),Ll.copy(this.origin).sub(Nm);const a=.5*e.distanceTo(t),c=-this.direction.dot(sp),u=Ll.dot(this.direction),h=-Ll.dot(sp),g=Ll.lengthSq(),y=Math.abs(1-c*c);let E,C,T,R;if(y>0)if(E=c*h-u,C=c*u-h,R=a*y,E>=0)if(C>=-R)if(C<=R){const B=1/y;E*=B,C*=B,T=E*(E+c*C+2*u)+C*(c*E+C+2*h)+g}else C=a,E=Math.max(0,-(c*C+u)),T=-E*E+C*(C+2*h)+g;else C=-a,E=Math.max(0,-(c*C+u)),T=-E*E+C*(C+2*h)+g;else C<=-R?(E=Math.max(0,-(-c*a+u)),C=E>0?-a:Math.min(Math.max(-a,-h),a),T=-E*E+C*(C+2*h)+g):C<=R?(E=0,C=Math.min(Math.max(-a,-h),a),T=C*(C+2*h)+g):(E=Math.max(0,-(c*a+u)),C=E>0?a:Math.min(Math.max(-a,-h),a),T=-E*E+C*(C+2*h)+g);else C=c>0?-a:a,E=Math.max(0,-(c*C+u)),T=-E*E+C*(C+2*h)+g;return n&&n.copy(this.origin).addScaledVector(this.direction,E),i&&i.copy(Nm).addScaledVector(sp,C),T}intersectSphere(e,t){Yo.subVectors(e.center,this.origin);const n=Yo.dot(this.direction),i=Yo.dot(Yo)-n*n,a=e.radius*e.radius;if(i>a)return null;const c=Math.sqrt(a-i),u=n-c,h=n+c;return h<0?null:this.at(u<0?h:u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,a,c,u,h;const g=1/this.direction.x,y=1/this.direction.y,E=1/this.direction.z,C=this.origin;return g>=0?(n=(e.min.x-C.x)*g,i=(e.max.x-C.x)*g):(n=(e.max.x-C.x)*g,i=(e.min.x-C.x)*g),y>=0?(a=(e.min.y-C.y)*y,c=(e.max.y-C.y)*y):(a=(e.max.y-C.y)*y,c=(e.min.y-C.y)*y),n>c||a>i||((a>n||isNaN(n))&&(n=a),(c<i||isNaN(i))&&(i=c),E>=0?(u=(e.min.z-C.z)*E,h=(e.max.z-C.z)*E):(u=(e.max.z-C.z)*E,h=(e.min.z-C.z)*E),n>h||u>i)||((u>n||n!=n)&&(n=u),(h<i||i!=i)&&(i=h),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return null!==this.intersectBox(e,Yo)}intersectTriangle(e,t,n,i,a){Pm.subVectors(t,e),op.subVectors(n,e),Lm.crossVectors(Pm,op);let u,c=this.direction.dot(Lm);if(c>0){if(i)return null;u=1}else{if(!(c<0))return null;u=-1,c=-c}Ll.subVectors(this.origin,e);const h=u*this.direction.dot(op.crossVectors(Ll,op));if(h<0)return null;const g=u*this.direction.dot(Pm.cross(Ll));if(g<0||h+g>c)return null;const y=-u*Ll.dot(Lm);return y<0?null:this.at(y/c,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Kn{constructor(e,t,n,i,a,c,u,h,g,y,E,C,T,R,B,L){Kn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,a,c,u,h,g,y,E,C,T,R,B,L)}set(e,t,n,i,a,c,u,h,g,y,E,C,T,R,B,L){const O=this.elements;return O[0]=e,O[4]=t,O[8]=n,O[12]=i,O[1]=a,O[5]=c,O[9]=u,O[13]=h,O[2]=g,O[6]=y,O[10]=E,O[14]=C,O[3]=T,O[7]=R,O[11]=B,O[15]=L,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Kn).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Gd.setFromMatrixColumn(e,0).length(),a=1/Gd.setFromMatrixColumn(e,1).length(),c=1/Gd.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*c,t[9]=n[9]*c,t[10]=n[10]*c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,a=e.z,c=Math.cos(n),u=Math.sin(n),h=Math.cos(i),g=Math.sin(i),y=Math.cos(a),E=Math.sin(a);if("XYZ"===e.order){const C=c*y,T=c*E,R=u*y,B=u*E;t[0]=h*y,t[4]=-h*E,t[8]=g,t[1]=T+R*g,t[5]=C-B*g,t[9]=-u*h,t[2]=B-C*g,t[6]=R+T*g,t[10]=c*h}else if("YXZ"===e.order){const C=h*y,T=h*E,R=g*y,B=g*E;t[0]=C+B*u,t[4]=R*u-T,t[8]=c*g,t[1]=c*E,t[5]=c*y,t[9]=-u,t[2]=T*u-R,t[6]=B+C*u,t[10]=c*h}else if("ZXY"===e.order){const C=h*y,T=h*E,R=g*y,B=g*E;t[0]=C-B*u,t[4]=-c*E,t[8]=R+T*u,t[1]=T+R*u,t[5]=c*y,t[9]=B-C*u,t[2]=-c*g,t[6]=u,t[10]=c*h}else if("ZYX"===e.order){const C=c*y,T=c*E,R=u*y,B=u*E;t[0]=h*y,t[4]=R*g-T,t[8]=C*g+B,t[1]=h*E,t[5]=B*g+C,t[9]=T*g-R,t[2]=-g,t[6]=u*h,t[10]=c*h}else if("YZX"===e.order){const C=c*h,T=c*g,R=u*h,B=u*g;t[0]=h*y,t[4]=B-C*E,t[8]=R*E+T,t[1]=E,t[5]=c*y,t[9]=-u*y,t[2]=-g*y,t[6]=T*E+R,t[10]=C-B*E}else if("XZY"===e.order){const C=c*h,T=c*g,R=u*h,B=u*g;t[0]=h*y,t[4]=-E,t[8]=g*y,t[1]=C*E+B,t[5]=c*y,t[9]=T*E-R,t[2]=R*E-T,t[6]=u*y,t[10]=B*E+C}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ky,e,ap)}lookAt(e,t,n){const i=this.elements;return Xo.subVectors(e,t),0===Xo.lengthSq()&&(Xo.z=1),Xo.normalize(),ao.crossVectors(n,Xo),0===ao.lengthSq()&&(1===Math.abs(n.z)?Xo.x+=1e-4:Xo.z+=1e-4,Xo.normalize(),ao.crossVectors(n,Xo)),ao.normalize(),cu.crossVectors(Xo,ao),i[0]=ao.x,i[4]=cu.x,i[8]=Xo.x,i[1]=ao.y,i[5]=cu.y,i[9]=Xo.y,i[2]=ao.z,i[6]=cu.z,i[10]=Xo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,a=this.elements,c=n[0],u=n[4],h=n[8],g=n[12],y=n[1],E=n[5],C=n[9],T=n[13],R=n[2],B=n[6],L=n[10],O=n[14],q=n[3],j=n[7],Z=n[11],ie=n[15],oe=i[0],re=i[4],pe=i[8],te=i[12],ae=i[1],ze=i[5],dt=i[9],bt=i[13],De=i[2],Ke=i[6],Ne=i[10],Ve=i[14],rt=i[3],Xe=i[7],wt=i[11],Le=i[15];return a[0]=c*oe+u*ae+h*De+g*rt,a[4]=c*re+u*ze+h*Ke+g*Xe,a[8]=c*pe+u*dt+h*Ne+g*wt,a[12]=c*te+u*bt+h*Ve+g*Le,a[1]=y*oe+E*ae+C*De+T*rt,a[5]=y*re+E*ze+C*Ke+T*Xe,a[9]=y*pe+E*dt+C*Ne+T*wt,a[13]=y*te+E*bt+C*Ve+T*Le,a[2]=R*oe+B*ae+L*De+O*rt,a[6]=R*re+B*ze+L*Ke+O*Xe,a[10]=R*pe+B*dt+L*Ne+O*wt,a[14]=R*te+B*bt+L*Ve+O*Le,a[3]=q*oe+j*ae+Z*De+ie*rt,a[7]=q*re+j*ze+Z*Ke+ie*Xe,a[11]=q*pe+j*dt+Z*Ne+ie*wt,a[15]=q*te+j*bt+Z*Ve+ie*Le,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],a=e[12],c=e[1],u=e[5],h=e[9],g=e[13],y=e[2],E=e[6],C=e[10],T=e[14];return e[3]*(+a*h*E-i*g*E-a*u*C+n*g*C+i*u*T-n*h*T)+e[7]*(+t*h*T-t*g*C+a*c*C-i*c*T+i*g*y-a*h*y)+e[11]*(+t*g*E-t*u*T-a*c*E+n*c*T+a*u*y-n*g*y)+e[15]*(-i*u*y-t*h*E+t*u*C+i*c*E-n*c*C+n*h*y)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],c=e[4],u=e[5],h=e[6],g=e[7],y=e[8],E=e[9],C=e[10],T=e[11],R=e[12],B=e[13],L=e[14],O=e[15],q=E*L*g-B*C*g+B*h*T-u*L*T-E*h*O+u*C*O,j=R*C*g-y*L*g-R*h*T+c*L*T+y*h*O-c*C*O,Z=y*B*g-R*E*g+R*u*T-c*B*T-y*u*O+c*E*O,ie=R*E*h-y*B*h-R*u*C+c*B*C+y*u*L-c*E*L,oe=t*q+n*j+i*Z+a*ie;if(0===oe)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const re=1/oe;return e[0]=q*re,e[1]=(B*C*a-E*L*a-B*i*T+n*L*T+E*i*O-n*C*O)*re,e[2]=(u*L*a-B*h*a+B*i*g-n*L*g-u*i*O+n*h*O)*re,e[3]=(E*h*a-u*C*a-E*i*g+n*C*g+u*i*T-n*h*T)*re,e[4]=j*re,e[5]=(y*L*a-R*C*a+R*i*T-t*L*T-y*i*O+t*C*O)*re,e[6]=(R*h*a-c*L*a-R*i*g+t*L*g+c*i*O-t*h*O)*re,e[7]=(c*C*a-y*h*a+y*i*g-t*C*g-c*i*T+t*h*T)*re,e[8]=Z*re,e[9]=(R*E*a-y*B*a-R*n*T+t*B*T+y*n*O-t*E*O)*re,e[10]=(c*B*a-R*u*a+R*n*g-t*B*g-c*n*O+t*u*O)*re,e[11]=(y*u*a-c*E*a-y*n*g+t*E*g+c*n*T-t*u*T)*re,e[12]=ie*re,e[13]=(y*B*i-R*E*i+R*n*C-t*B*C-y*n*L+t*E*L)*re,e[14]=(R*u*i-c*B*i-R*n*h+t*B*h+c*n*L-t*u*L)*re,e[15]=(c*E*i-y*u*i+y*n*h-t*E*h-c*n*C+t*u*C)*re,this}scale(e){const t=this.elements,n=e.x,i=e.y,a=e.z;return t[0]*=n,t[4]*=i,t[8]*=a,t[1]*=n,t[5]*=i,t[9]*=a,t[2]*=n,t[6]*=i,t[10]*=a,t[3]*=n,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),a=1-n,c=e.x,u=e.y,h=e.z,g=a*c,y=a*u;return this.set(g*c+n,g*u-i*h,g*h+i*u,0,g*u+i*h,y*u+n,y*h-i*c,0,g*h-i*u,y*h+i*c,a*h*h+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,a,c){return this.set(1,n,a,0,e,1,c,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,a=t._x,c=t._y,u=t._z,h=t._w,g=a+a,y=c+c,E=u+u,C=a*g,T=a*y,R=a*E,B=c*y,L=c*E,O=u*E,q=h*g,j=h*y,Z=h*E,ie=n.x,oe=n.y,re=n.z;return i[0]=(1-(B+O))*ie,i[1]=(T+Z)*ie,i[2]=(R-j)*ie,i[3]=0,i[4]=(T-Z)*oe,i[5]=(1-(C+O))*oe,i[6]=(L+q)*oe,i[7]=0,i[8]=(R+j)*re,i[9]=(L-q)*re,i[10]=(1-(C+B))*re,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let a=Gd.set(i[0],i[1],i[2]).length();const c=Gd.set(i[4],i[5],i[6]).length(),u=Gd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],Xa.copy(this);const g=1/a,y=1/c,E=1/u;return Xa.elements[0]*=g,Xa.elements[1]*=g,Xa.elements[2]*=g,Xa.elements[4]*=y,Xa.elements[5]*=y,Xa.elements[6]*=y,Xa.elements[8]*=E,Xa.elements[9]*=E,Xa.elements[10]*=E,t.setFromRotationMatrix(Xa),n.x=a,n.y=c,n.z=u,this}makePerspective(e,t,n,i,a,c,u=xl){const h=this.elements,g=2*a/(t-e),y=2*a/(n-i),E=(t+e)/(t-e),C=(n+i)/(n-i);let T,R;if(u===xl)T=-(c+a)/(c-a),R=-2*c*a/(c-a);else{if(2001!==u)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);T=-c/(c-a),R=-c*a/(c-a)}return h[0]=g,h[4]=0,h[8]=E,h[12]=0,h[1]=0,h[5]=y,h[9]=C,h[13]=0,h[2]=0,h[6]=0,h[10]=T,h[14]=R,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,n,i,a,c,u=xl){const h=this.elements,g=1/(t-e),y=1/(n-i),E=1/(c-a),C=(t+e)*g,T=(n+i)*y;let R,B;if(u===xl)R=(c+a)*E,B=-2*E;else{if(2001!==u)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);R=a*E,B=-1*E}return h[0]=2*g,h[4]=0,h[8]=0,h[12]=-C,h[1]=0,h[5]=2*y,h[9]=0,h[13]=-T,h[2]=0,h[6]=0,h[10]=B,h[14]=-R,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Gd=new ce,Xa=new Kn,Ky=new ce(0,0,0),ap=new ce(1,1,1),ao=new ce,cu=new ce,Xo=new ce,Fm=new Kn,km=new Ds;let D_=(()=>{class s{constructor(t=0,n=0,i=0,a=s.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=i,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,i,a=this._order){return this._x=t,this._y=n,this._z=i,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,i=!0){const a=t.elements,c=a[0],u=a[4],h=a[8],g=a[1],y=a[5],E=a[9],C=a[2],T=a[6],R=a[10];switch(n){case"XYZ":this._y=Math.asin(Mr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-E,R),this._z=Math.atan2(-u,c)):(this._x=Math.atan2(T,y),this._z=0);break;case"YXZ":this._x=Math.asin(-Mr(E,-1,1)),Math.abs(E)<.9999999?(this._y=Math.atan2(h,R),this._z=Math.atan2(g,y)):(this._y=Math.atan2(-C,c),this._z=0);break;case"ZXY":this._x=Math.asin(Mr(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(-C,R),this._z=Math.atan2(-u,y)):(this._y=0,this._z=Math.atan2(g,c));break;case"ZYX":this._y=Math.asin(-Mr(C,-1,1)),Math.abs(C)<.9999999?(this._x=Math.atan2(T,R),this._z=Math.atan2(g,c)):(this._x=0,this._z=Math.atan2(-u,y));break;case"YZX":this._z=Math.asin(Mr(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-E,y),this._y=Math.atan2(-C,c)):(this._x=0,this._y=Math.atan2(h,R));break;case"XZY":this._z=Math.asin(-Mr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(T,y),this._y=Math.atan2(h,c)):(this._x=Math.atan2(-E,R),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,n,i){return Fm.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Fm,n,i)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return km.setFromEuler(this),this.setFromQuaternion(km,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return s.DEFAULT_ORDER="XYZ",s})();class A_{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let OE=0;const lp=new ce,uu=new Ds,du=new Kn,Bm=new ce,zd=new ce,Jy=new ce,Um=new Ds,Vm=new ce(1,0,0),Hm=new ce(0,1,0),_=new ce(0,0,1),w={type:"added"},f={type:"removed"};let M=(()=>{class s extends Tl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:OE++}),this.uuid=Oo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=s.DEFAULT_UP.clone();const t=new ce,n=new D_,i=new Ds,a=new ce(1,1,1);n._onChange(function c(){i.setFromEuler(n,!1)}),i._onChange(function u(){n.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Kn},normalMatrix:{value:new ci}}),this.matrix=new Kn,this.matrixWorld=new Kn,this.matrixAutoUpdate=s.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=s.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new A_,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return uu.setFromAxisAngle(t,n),this.quaternion.multiply(uu),this}rotateOnWorldAxis(t,n){return uu.setFromAxisAngle(t,n),this.quaternion.premultiply(uu),this}rotateX(t){return this.rotateOnAxis(Vm,t)}rotateY(t){return this.rotateOnAxis(Hm,t)}rotateZ(t){return this.rotateOnAxis(_,t)}translateOnAxis(t,n){return lp.copy(t).applyQuaternion(this.quaternion),this.position.add(lp.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(Vm,t)}translateY(t){return this.translateOnAxis(Hm,t)}translateZ(t){return this.translateOnAxis(_,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(du.copy(this.matrixWorld).invert())}lookAt(t,n,i){t.isVector3?Bm.copy(t):Bm.set(t,n,i);const a=this.parent;this.updateWorldMatrix(!0,!1),zd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?du.lookAt(zd,Bm,this.up):du.lookAt(Bm,zd,this.up),this.quaternion.setFromRotationMatrix(du),a&&(du.extractRotation(a.matrixWorld),uu.setFromRotationMatrix(du),this.quaternion.premultiply(uu.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(w)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(f)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),du.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),du.multiply(t.parent.matrixWorld)),t.applyMatrix4(du),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let i=0,a=this.children.length;i<a;i++){const u=this.children[i].getObjectByProperty(t,n);if(void 0!==u)return u}}getObjectsByProperty(t,n){let i=[];this[t]===n&&i.push(this);for(let a=0,c=this.children.length;a<c;a++){const u=this.children[a].getObjectsByProperty(t,n);u.length>0&&(i=i.concat(u))}return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zd,t,Jy),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zd,Um,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let i=0,a=n.length;i<a;i++)n[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const n=this.children;for(let i=0,a=n.length;i<a;i++)n[i].traverseVisible(t)}traverseAncestors(t){const n=this.parent;null!==n&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let i=0,a=n.length;i<a;i++){const c=n[i];(!0===c.matrixWorldAutoUpdate||!0===t)&&c.updateMatrixWorld(t)}}updateWorldMatrix(t,n){const i=this.parent;if(!0===t&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const a=this.children;for(let c=0,u=a.length;c<u;c++){const h=a[c];!0===h.matrixWorldAutoUpdate&&h.updateWorldMatrix(!1,!0)}}}toJSON(t){const n=void 0===t||"string"==typeof t,i={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const a={};function c(h,g){return void 0===h[g.uuid]&&(h[g.uuid]=g.toJSON(t)),g.uuid}if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(a.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=c(t.geometries,this.geometry);const h=this.geometry.parameters;if(void 0!==h&&void 0!==h.shapes){const g=h.shapes;if(Array.isArray(g))for(let y=0,E=g.length;y<E;y++)c(t.shapes,g[y]);else c(t.shapes,g)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(c(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const h=[];for(let g=0,y=this.material.length;g<y;g++)h.push(c(t.materials,this.material[g]));a.material=h}else a.material=c(t.materials,this.material);if(this.children.length>0){a.children=[];for(let h=0;h<this.children.length;h++)a.children.push(this.children[h].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let h=0;h<this.animations.length;h++)a.animations.push(c(t.animations,this.animations[h]))}if(n){const h=u(t.geometries),g=u(t.materials),y=u(t.textures),E=u(t.images),C=u(t.shapes),T=u(t.skeletons),R=u(t.animations),B=u(t.nodes);h.length>0&&(i.geometries=h),g.length>0&&(i.materials=g),y.length>0&&(i.textures=y),E.length>0&&(i.images=E),C.length>0&&(i.shapes=C),T.length>0&&(i.skeletons=T),R.length>0&&(i.animations=R),B.length>0&&(i.nodes=B)}return i.object=a,i;function u(h){const g=[];for(const y in h){const E=h[y];delete E.metadata,g.push(E)}return g}}clone(t){return(new this.constructor).copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===n)for(let i=0;i<t.children.length;i++)this.add(t.children[i].clone());return this}}return s.DEFAULT_UP=new ce(0,1,0),s.DEFAULT_MATRIX_AUTO_UPDATE=!0,s.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,s})();const N=new ce,z=new ce,he=new ce,Se=new ce,we=new ce,Ye=new ce,ht=new ce,cn=new ce,rn=new ce,Sn=new ce;let Ii=!1;class Cn{constructor(e=new ce,t=new ce,n=new ce){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),N.subVectors(e,t),i.cross(N);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,n,i,a){N.subVectors(i,t),z.subVectors(n,t),he.subVectors(e,t);const c=N.dot(N),u=N.dot(z),h=N.dot(he),g=z.dot(z),y=z.dot(he),E=c*g-u*u;if(0===E)return a.set(-2,-1,-1);const C=1/E,T=(g*h-u*y)*C,R=(c*y-u*h)*C;return a.set(1-T-R,R,T)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Se),Se.x>=0&&Se.y>=0&&Se.x+Se.y<=1}static getUV(e,t,n,i,a,c,u,h){return!1===Ii&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ii=!0),this.getInterpolation(e,t,n,i,a,c,u,h)}static getInterpolation(e,t,n,i,a,c,u,h){return this.getBarycoord(e,t,n,i,Se),h.setScalar(0),h.addScaledVector(a,Se.x),h.addScaledVector(c,Se.y),h.addScaledVector(u,Se.z),h}static isFrontFacing(e,t,n,i){return N.subVectors(n,t),z.subVectors(e,t),N.cross(z).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return N.subVectors(this.c,this.b),z.subVectors(this.a,this.b),.5*N.cross(z).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Cn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Cn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,a){return!1===Ii&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ii=!0),Cn.getInterpolation(e,this.a,this.b,this.c,t,n,i,a)}getInterpolation(e,t,n,i,a){return Cn.getInterpolation(e,this.a,this.b,this.c,t,n,i,a)}containsPoint(e){return Cn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Cn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,a=this.c;let c,u;we.subVectors(i,n),Ye.subVectors(a,n),cn.subVectors(e,n);const h=we.dot(cn),g=Ye.dot(cn);if(h<=0&&g<=0)return t.copy(n);rn.subVectors(e,i);const y=we.dot(rn),E=Ye.dot(rn);if(y>=0&&E<=y)return t.copy(i);const C=h*E-y*g;if(C<=0&&h>=0&&y<=0)return c=h/(h-y),t.copy(n).addScaledVector(we,c);Sn.subVectors(e,a);const T=we.dot(Sn),R=Ye.dot(Sn);if(R>=0&&T<=R)return t.copy(a);const B=T*g-h*R;if(B<=0&&g>=0&&R<=0)return u=g/(g-R),t.copy(n).addScaledVector(Ye,u);const L=y*R-T*E;if(L<=0&&E-y>=0&&T-R>=0)return ht.subVectors(a,i),u=(E-y)/(E-y+(T-R)),t.copy(i).addScaledVector(ht,u);const O=1/(L+B+C);return c=B*O,u=C*O,t.copy(n).addScaledVector(we,c).addScaledVector(Ye,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let wi=0;class $n extends Tl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:wi++}),this.uuid=Oo(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(a){const c=[];for(const u in a){const h=a[u];delete h.metadata,c.push(h)}return c}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const a=i(e.textures),c=i(e.images);a.length>0&&(n.textures=a),c.length>0&&(n.images=c)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const i=t.length;n=new Array(i);for(let a=0;a!==i;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const Ei={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Vi={h:0,s:0,l:0},ri={h:0,s:0,l:0};function Oi(s,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+6*(e-s)*t:t<.5?e:t<2/3?s+6*(e-s)*(2/3-t):s}class Rt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const i=e;i&&i.isColor?this.copy(i):"number"==typeof i?this.setHex(i):"string"==typeof i&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Pr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Zi.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=Zi.workingColorSpace){return this.r=e,this.g=t,this.b=n,Zi.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=Zi.workingColorSpace){if(e=Kf(e,1),t=Mr(t,0,1),n=Mr(n,0,1),0===t)this.r=this.g=this.b=n;else{const a=n<=.5?n*(1+t):n+t-n*t,c=2*n-a;this.r=Oi(c,a,e+1/3),this.g=Oi(c,a,e),this.b=Oi(c,a,e-1/3)}return Zi.toWorkingColorSpace(this,i),this}setStyle(e,t=Pr){function n(a){void 0!==a&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const u=i[2];switch(i[1]){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return n(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],c=a.length;if(3===c)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(6===c)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Pr){const n=Ei[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=pc(e.r),this.g=pc(e.g),this.b=pc(e.b),this}copyLinearToSRGB(e){return this.r=Bd(e.r),this.g=Bd(e.g),this.b=Bd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Pr){return Zi.fromWorkingColorSpace(pi.copy(this),e),65536*Math.round(Mr(255*pi.r,0,255))+256*Math.round(Mr(255*pi.g,0,255))+Math.round(Mr(255*pi.b,0,255))}getHexString(e=Pr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Zi.workingColorSpace){Zi.fromWorkingColorSpace(pi.copy(this),t);const n=pi.r,i=pi.g,a=pi.b,c=Math.max(n,i,a),u=Math.min(n,i,a);let h,g;const y=(u+c)/2;if(u===c)h=0,g=0;else{const E=c-u;switch(g=y<=.5?E/(c+u):E/(2-c-u),c){case n:h=(i-a)/E+(i<a?6:0);break;case i:h=(a-n)/E+2;break;case a:h=(n-i)/E+4}h/=6}return e.h=h,e.s=g,e.l=y,e}getRGB(e,t=Zi.workingColorSpace){return Zi.fromWorkingColorSpace(pi.copy(this),t),e.r=pi.r,e.g=pi.g,e.b=pi.b,e}getStyle(e=Pr){Zi.fromWorkingColorSpace(pi.copy(this),e);const t=pi.r,n=pi.g,i=pi.b;return e!==Pr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(e,t,n){return this.getHSL(Vi),this.setHSL(Vi.h+e,Vi.s+t,Vi.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Vi),e.getHSL(ri);const n=_a(Vi.h,ri.h,t),i=_a(Vi.s,ri.s,t),a=_a(Vi.l,ri.l,t);return this.setHSL(n,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,a=e.elements;return this.r=a[0]*t+a[3]*n+a[6]*i,this.g=a[1]*t+a[4]*n+a[7]*i,this.b=a[2]*t+a[5]*n+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const pi=new Rt;Rt.NAMES=Ei;class xi extends $n{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const _r=new ce,lo=new yt;class Bi{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=aa,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)lo.fromBufferAttribute(this,t),lo.applyMatrix3(e),this.setXY(t,lo.x,lo.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)_r.fromBufferAttribute(this,t),_r.applyMatrix3(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)_r.fromBufferAttribute(this,t),_r.applyMatrix4(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)_r.fromBufferAttribute(this,t),_r.applyNormalMatrix(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)_r.fromBufferAttribute(this,t),_r.transformDirection(e),this.setXYZ(t,_r.x,_r.y,_r.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=No(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=fi(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=No(t,this.array)),t}setX(e,t){return this.normalized&&(t=fi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=No(t,this.array)),t}setY(e,t){return this.normalized&&(t=fi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=No(t,this.array)),t}setZ(e,t){return this.normalized&&(t=fi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=No(t,this.array)),t}setW(e,t){return this.normalized&&(t=fi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=fi(t,this.array),n=fi(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=fi(t,this.array),n=fi(n,this.array),i=fi(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,a){return e*=this.itemSize,this.normalized&&(t=fi(t,this.array),n=fi(n,this.array),i=fi(i,this.array),a=fi(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}class hu extends Bi{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Zu extends Bi{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class En extends Bi{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Wd=0;const Fr=new Kn,$d=new M,Ku=new ce,wo=new Il,Yd=new Il,rs=new ce;class Ti extends Tl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Wd++}),this.uuid=Oo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(kd(e)?Zu:hu)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const a=(new ci).getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Fr.makeRotationFromQuaternion(e),this.applyMatrix4(Fr),this}rotateX(e){return Fr.makeRotationX(e),this.applyMatrix4(Fr),this}rotateY(e){return Fr.makeRotationY(e),this.applyMatrix4(Fr),this}rotateZ(e){return Fr.makeRotationZ(e),this.applyMatrix4(Fr),this}translate(e,t,n){return Fr.makeTranslation(e,t,n),this.applyMatrix4(Fr),this}scale(e,t,n){return Fr.makeScale(e,t,n),this.applyMatrix4(Fr),this}lookAt(e){return $d.lookAt(e),$d.updateMatrix(),this.applyMatrix4($d.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ku).negate(),this.translate(Ku.x,Ku.y,Ku.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const a=e[n];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new En(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Il);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ce(-1/0,-1/0,-1/0),new ce(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++)wo.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(rs.addVectors(this.boundingBox.min,wo.min),this.boundingBox.expandByPoint(rs),rs.addVectors(this.boundingBox.max,wo.max),this.boundingBox.expandByPoint(rs)):(this.boundingBox.expandByPoint(wo.min),this.boundingBox.expandByPoint(wo.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new As);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ce,1/0);if(e){const n=this.boundingSphere.center;if(wo.setFromBufferAttribute(e),t)for(let a=0,c=t.length;a<c;a++)Yd.setFromBufferAttribute(t[a]),this.morphTargetsRelative?(rs.addVectors(wo.min,Yd.min),wo.expandByPoint(rs),rs.addVectors(wo.max,Yd.max),wo.expandByPoint(rs)):(wo.expandByPoint(Yd.min),wo.expandByPoint(Yd.max));wo.getCenter(n);let i=0;for(let a=0,c=e.count;a<c;a++)rs.fromBufferAttribute(e,a),i=Math.max(i,n.distanceToSquared(rs));if(t)for(let a=0,c=t.length;a<c;a++){const u=t[a],h=this.morphTargetsRelative;for(let g=0,y=u.count;g<y;g++)rs.fromBufferAttribute(u,g),h&&(Ku.fromBufferAttribute(e,g),rs.add(Ku)),i=Math.max(i,n.distanceToSquared(rs))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,i=t.position.array,a=t.normal.array,c=t.uv.array,u=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Bi(new Float32Array(4*u),4));const h=this.getAttribute("tangent").array,g=[],y=[];for(let ae=0;ae<u;ae++)g[ae]=new ce,y[ae]=new ce;const E=new ce,C=new ce,T=new ce,R=new yt,B=new yt,L=new yt,O=new ce,q=new ce;function j(ae,ze,dt){E.fromArray(i,3*ae),C.fromArray(i,3*ze),T.fromArray(i,3*dt),R.fromArray(c,2*ae),B.fromArray(c,2*ze),L.fromArray(c,2*dt),C.sub(E),T.sub(E),B.sub(R),L.sub(R);const bt=1/(B.x*L.y-L.x*B.y);!isFinite(bt)||(O.copy(C).multiplyScalar(L.y).addScaledVector(T,-B.y).multiplyScalar(bt),q.copy(T).multiplyScalar(B.x).addScaledVector(C,-L.x).multiplyScalar(bt),g[ae].add(O),g[ze].add(O),g[dt].add(O),y[ae].add(q),y[ze].add(q),y[dt].add(q))}let Z=this.groups;0===Z.length&&(Z=[{start:0,count:n.length}]);for(let ae=0,ze=Z.length;ae<ze;++ae){const dt=Z[ae],bt=dt.start;for(let Ke=bt,Ne=bt+dt.count;Ke<Ne;Ke+=3)j(n[Ke+0],n[Ke+1],n[Ke+2])}const ie=new ce,oe=new ce,re=new ce,pe=new ce;function te(ae){re.fromArray(a,3*ae),pe.copy(re);const ze=g[ae];ie.copy(ze),ie.sub(re.multiplyScalar(re.dot(ze))).normalize(),oe.crossVectors(pe,ze);const bt=oe.dot(y[ae])<0?-1:1;h[4*ae]=ie.x,h[4*ae+1]=ie.y,h[4*ae+2]=ie.z,h[4*ae+3]=bt}for(let ae=0,ze=Z.length;ae<ze;++ae){const dt=Z[ae],bt=dt.start;for(let Ke=bt,Ne=bt+dt.count;Ke<Ne;Ke+=3)te(n[Ke+0]),te(n[Ke+1]),te(n[Ke+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Bi(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let C=0,T=n.count;C<T;C++)n.setXYZ(C,0,0,0);const i=new ce,a=new ce,c=new ce,u=new ce,h=new ce,g=new ce,y=new ce,E=new ce;if(e)for(let C=0,T=e.count;C<T;C+=3){const R=e.getX(C+0),B=e.getX(C+1),L=e.getX(C+2);i.fromBufferAttribute(t,R),a.fromBufferAttribute(t,B),c.fromBufferAttribute(t,L),y.subVectors(c,a),E.subVectors(i,a),y.cross(E),u.fromBufferAttribute(n,R),h.fromBufferAttribute(n,B),g.fromBufferAttribute(n,L),u.add(y),h.add(y),g.add(y),n.setXYZ(R,u.x,u.y,u.z),n.setXYZ(B,h.x,h.y,h.z),n.setXYZ(L,g.x,g.y,g.z)}else for(let C=0,T=t.count;C<T;C+=3)i.fromBufferAttribute(t,C+0),a.fromBufferAttribute(t,C+1),c.fromBufferAttribute(t,C+2),y.subVectors(c,a),E.subVectors(i,a),y.cross(E),n.setXYZ(C+0,y.x,y.y,y.z),n.setXYZ(C+1,y.x,y.y,y.z),n.setXYZ(C+2,y.x,y.y,y.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)rs.fromBufferAttribute(e,t),rs.normalize(),e.setXYZ(t,rs.x,rs.y,rs.z)}toNonIndexed(){function e(u,h){const g=u.array,y=u.itemSize,E=u.normalized,C=new g.constructor(h.length*y);let T=0,R=0;for(let B=0,L=h.length;B<L;B++){T=u.isInterleavedBufferAttribute?h[B]*u.data.stride+u.offset:h[B]*y;for(let O=0;O<y;O++)C[R++]=g[T++]}return new Bi(C,y,E)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ti,n=this.index.array,i=this.attributes;for(const u in i){const g=e(i[u],n);t.setAttribute(u,g)}const a=this.morphAttributes;for(const u in a){const h=[],g=a[u];for(let y=0,E=g.length;y<E;y++){const T=e(g[y],n);h.push(T)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let u=0,h=c.length;u<h;u++){const g=c[u];t.addGroup(g.start,g.count,g.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const h=this.parameters;for(const g in h)void 0!==h[g]&&(e[g]=h[g]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const h in n)e.data.attributes[h]=n[h].toJSON(e.data);const i={};let a=!1;for(const h in this.morphAttributes){const g=this.morphAttributes[h],y=[];for(let E=0,C=g.length;E<C;E++)y.push(g[E].toJSON(e.data));y.length>0&&(i[h]=y,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(e.data.groups=JSON.parse(JSON.stringify(c)));const u=this.boundingSphere;return null!==u&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const g in i)this.setAttribute(g,i[g].clone(t));const a=e.morphAttributes;for(const g in a){const y=[],E=a[g];for(let C=0,T=E.length;C<T;C++)y.push(E[C].clone(t));this.morphAttributes[g]=y}this.morphTargetsRelative=e.morphTargetsRelative;const c=e.groups;for(let g=0,y=c.length;g<y;g++){const E=c[g];this.addGroup(E.start,E.count,E.materialIndex)}const u=e.boundingBox;null!==u&&(this.boundingBox=u.clone());const h=e.boundingSphere;return null!==h&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const cp=new Kn,_c=new Yu,Ju=new As,R_=new ce,Qu=new ce,co=new ce,Fl=new ce,kl=new ce,Bl=new ce,ed=new yt,Bh=new yt,td=new yt,up=new ce,dp=new ce,Qy=new ce,hp=new ce,Gm=new ce;class zs extends M{constructor(e=new Ti,t=new xi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,c=i.length;a<c;a++){const u=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=a}}}}getVertexPosition(e,t){const n=this.geometry,a=n.morphAttributes.position,c=n.morphTargetsRelative;t.fromBufferAttribute(n.attributes.position,e);const u=this.morphTargetInfluences;if(a&&u){Bl.set(0,0,0);for(let h=0,g=a.length;h<g;h++){const y=u[h],E=a[h];0!==y&&(kl.fromBufferAttribute(E,e),Bl.addScaledVector(c?kl:kl.sub(t),y))}t.add(Bl)}return t}raycast(e,t){const n=this.geometry,a=this.matrixWorld;void 0!==this.material&&(null===n.boundingSphere&&n.computeBoundingSphere(),Ju.copy(n.boundingSphere),Ju.applyMatrix4(a),_c.copy(e.ray).recast(e.near),(!1!==Ju.containsPoint(_c.origin)||!(null===_c.intersectSphere(Ju,R_)||_c.origin.distanceToSquared(R_)>(e.far-e.near)**2))&&(cp.copy(a).invert(),_c.copy(e.ray).applyMatrix4(cp),(null===n.boundingBox||!1!==_c.intersectsBox(n.boundingBox))&&this._computeIntersections(e,t,_c)))}_computeIntersections(e,t,n){let i;const a=this.geometry,c=this.material,u=a.index,h=a.attributes.position,g=a.attributes.uv,y=a.attributes.uv1,E=a.attributes.normal,C=a.groups,T=a.drawRange;if(null!==u)if(Array.isArray(c))for(let R=0,B=C.length;R<B;R++){const L=C[R],O=c[L.materialIndex];for(let Z=Math.max(L.start,T.start),ie=Math.min(u.count,Math.min(L.start+L.count,T.start+T.count));Z<ie;Z+=3)i=zm(this,O,e,n,g,y,E,u.getX(Z),u.getX(Z+1),u.getX(Z+2)),i&&(i.faceIndex=Math.floor(Z/3),i.face.materialIndex=L.materialIndex,t.push(i))}else for(let L=Math.max(0,T.start),O=Math.min(u.count,T.start+T.count);L<O;L+=3)i=zm(this,c,e,n,g,y,E,u.getX(L),u.getX(L+1),u.getX(L+2)),i&&(i.faceIndex=Math.floor(L/3),t.push(i));else if(void 0!==h)if(Array.isArray(c))for(let R=0,B=C.length;R<B;R++){const L=C[R],O=c[L.materialIndex];for(let Z=Math.max(L.start,T.start),ie=Math.min(h.count,Math.min(L.start+L.count,T.start+T.count));Z<ie;Z+=3)i=zm(this,O,e,n,g,y,E,Z,Z+1,Z+2),i&&(i.faceIndex=Math.floor(Z/3),i.face.materialIndex=L.materialIndex,t.push(i))}else for(let L=Math.max(0,T.start),O=Math.min(h.count,T.start+T.count);L<O;L+=3)i=zm(this,c,e,n,g,y,E,L,L+1,L+2),i&&(i.faceIndex=Math.floor(L/3),t.push(i))}}function zm(s,e,t,n,i,a,c,u,h,g){s.getVertexPosition(u,Qu),s.getVertexPosition(h,co),s.getVertexPosition(g,Fl);const y=function I_(s,e,t,n,i,a,c,u){let h;if(h=1===e.side?n.intersectTriangle(c,a,i,!0,u):n.intersectTriangle(i,a,c,0===e.side,u),null===h)return null;Gm.copy(u),Gm.applyMatrix4(s.matrixWorld);const g=t.ray.origin.distanceTo(Gm);return g<t.near||g>t.far?null:{distance:g,point:Gm.clone(),object:s}}(s,e,t,n,Qu,co,Fl,hp);if(y){i&&(ed.fromBufferAttribute(i,u),Bh.fromBufferAttribute(i,h),td.fromBufferAttribute(i,g),y.uv=Cn.getInterpolation(hp,Qu,co,Fl,ed,Bh,td,new yt)),a&&(ed.fromBufferAttribute(a,u),Bh.fromBufferAttribute(a,h),td.fromBufferAttribute(a,g),y.uv1=Cn.getInterpolation(hp,Qu,co,Fl,ed,Bh,td,new yt),y.uv2=y.uv1),c&&(up.fromBufferAttribute(c,u),dp.fromBufferAttribute(c,h),Qy.fromBufferAttribute(c,g),y.normal=Cn.getInterpolation(hp,Qu,co,Fl,up,dp,Qy,new ce),y.normal.dot(n.direction)>0&&y.normal.multiplyScalar(-1));const E={a:u,b:h,c:g,normal:new ce,materialIndex:0};Cn.getNormal(Qu,co,Fl,E.normal),y.face=E}return y}class nd extends Ti{constructor(e=1,t=1,n=1,i=1,a=1,c=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:a,depthSegments:c};const u=this;i=Math.floor(i),a=Math.floor(a),c=Math.floor(c);const h=[],g=[],y=[],E=[];let C=0,T=0;function R(B,L,O,q,j,Z,ie,oe,re,pe,te){const ae=Z/re,ze=ie/pe,dt=Z/2,bt=ie/2,De=oe/2,Ke=re+1,Ne=pe+1;let Ve=0,rt=0;const Xe=new ce;for(let wt=0;wt<Ne;wt++){const Le=wt*ze-bt;for(let ut=0;ut<Ke;ut++)Xe[B]=(ut*ae-dt)*q,Xe[L]=Le*j,Xe[O]=De,g.push(Xe.x,Xe.y,Xe.z),Xe[B]=0,Xe[L]=0,Xe[O]=oe>0?1:-1,y.push(Xe.x,Xe.y,Xe.z),E.push(ut/re),E.push(1-wt/pe),Ve+=1}for(let wt=0;wt<pe;wt++)for(let Le=0;Le<re;Le++){const Ht=C+Le+Ke*(wt+1),Lt=C+(Le+1)+Ke*(wt+1),ln=C+(Le+1)+Ke*wt;h.push(C+Le+Ke*wt,Ht,ln),h.push(Ht,Lt,ln),rt+=6}u.addGroup(T,rt,te),T+=rt,C+=Ve}R("z","y","x",-1,-1,n,t,e,c,a,0),R("z","y","x",1,-1,n,t,-e,c,a,1),R("x","z","y",1,1,e,n,t,i,c,2),R("x","z","y",1,-1,e,n,-t,i,c,3),R("x","y","z",1,-1,e,t,n,i,a,4),R("x","y","z",-1,-1,e,t,-n,i,a,5),this.setIndex(h),this.setAttribute("position",new En(g,3)),this.setAttribute("normal",new En(y,3)),this.setAttribute("uv",new En(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function vc(s){const e={};for(const t in s){e[t]={};for(const n in s[t]){const i=s[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():e[t][n]=Array.isArray(i)?i.slice():i}}return e}function qo(s){const e={};for(let t=0;t<s.length;t++){const n=vc(s[t]);for(const i in n)e[i]=n[i]}return e}function e0(s){return null===s.getRenderTarget()?s.outputColorSpace:Zi.workingColorSpace}const PE={clone:vc,merge:qo};class id extends $n{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=vc(e.uniforms),this.uniformsGroups=function NE(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const c=this.uniforms[i].value;t.uniforms[i]=c&&c.isTexture?{type:"t",value:c.toJSON(e).uuid}:c&&c.isColor?{type:"c",value:c.getHex()}:c&&c.isVector2?{type:"v2",value:c.toArray()}:c&&c.isVector3?{type:"v3",value:c.toArray()}:c&&c.isVector4?{type:"v4",value:c.toArray()}:c&&c.isMatrix3?{type:"m3",value:c.toArray()}:c&&c.isMatrix4?{type:"m4",value:c.toArray()}:{value:c}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class rd extends M{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Kn,this.projectionMatrix=new Kn,this.projectionMatrixInverse=new Kn,this.coordinateSystem=xl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Rr extends rd{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ld*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Gu*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ld*Math.atan(Math.tan(.5*Gu*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,a,c){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Gu*this.fov)/this.zoom,n=2*t,i=this.aspect*n,a=-.5*i;const c=this.view;if(null!==this.view&&this.view.enabled){const h=c.fullWidth,g=c.fullHeight;a+=c.offsetX*i/h,t-=c.offsetY*n/g,i*=c.width/h,n*=c.height/g}const u=this.filmOffset;0!==u&&(a+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class FC extends M{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Rr(-90,1,e,t);i.layers=this.layers,this.add(i);const a=new Rr(-90,1,e,t);a.layers=this.layers,this.add(a);const c=new Rr(-90,1,e,t);c.layers=this.layers,this.add(c);const u=new Rr(-90,1,e,t);u.layers=this.layers,this.add(u);const h=new Rr(-90,1,e,t);h.layers=this.layers,this.add(h);const g=new Rr(-90,1,e,t);g.layers=this.layers,this.add(g)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,a,c,u,h]=t;for(const g of t)this.remove(g);if(e===xl)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),c.up.set(0,0,1),c.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),h.up.set(0,1,0),h.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),c.up.set(0,0,-1),c.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),h.up.set(0,-1,0),h.lookAt(0,0,-1)}for(const g of t)this.add(g),g.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,c,u,h,g,y]=this.children,E=e.getRenderTarget(),C=e.getActiveCubeFace(),T=e.getActiveMipmapLevel(),R=e.xr.enabled;e.xr.enabled=!1;const B=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,a),e.setRenderTarget(n,1,i),e.render(t,c),e.setRenderTarget(n,2,i),e.render(t,u),e.setRenderTarget(n,3,i),e.render(t,h),e.setRenderTarget(n,4,i),e.render(t,g),n.texture.generateMipmaps=B,e.setRenderTarget(n,5,i),e.render(t,y),e.setRenderTarget(E,C,T),e.xr.enabled=R,n.texture.needsPMREMUpdate=!0}}class O_ extends Po{constructor(e,t,n,i,a,c,u,h,g,y){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,i,a,c,u,h,g,y),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class t0 extends va{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];void 0!==t.encoding&&(fc("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Uu?Pr:""),this.texture=new O_(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:sr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new nd(5,5,5),a=new id({name:"CubemapFromEquirect",uniforms:vc(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});a.uniforms.tEquirect.value=t;const c=new zs(i,a),u=t.minFilter;return t.minFilter===Ga&&(t.minFilter=sr),new FC(1,10,this).update(e,c),t.minFilter=u,c.geometry.dispose(),c.material.dispose(),this}clear(e,t,n,i){const a=e.getRenderTarget();for(let c=0;c<6;c++)e.setRenderTarget(this,c),e.clear(t,n,i);e.setRenderTarget(a)}}const n0=new ce,r0=new ce,kC=new ci;class pu{constructor(e=new ce(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=n0.subVectors(n,t).cross(r0.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(n0),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(e.start).addScaledVector(n,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||kC.getNormalMatrix(e),i=this.coplanarPoint(n0).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Xd=new As,fp=new ce;class N_{constructor(e=new pu,t=new pu,n=new pu,i=new pu,a=new pu,c=new pu){this.planes=[e,t,n,i,a,c]}set(e,t,n,i,a,c){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(n),u[3].copy(i),u[4].copy(a),u[5].copy(c),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=xl){const n=this.planes,i=e.elements,a=i[0],c=i[1],u=i[2],h=i[3],g=i[4],y=i[5],E=i[6],C=i[7],T=i[8],R=i[9],B=i[10],L=i[11],O=i[12],q=i[13],j=i[14],Z=i[15];if(n[0].setComponents(h-a,C-g,L-T,Z-O).normalize(),n[1].setComponents(h+a,C+g,L+T,Z+O).normalize(),n[2].setComponents(h+c,C+y,L+R,Z+q).normalize(),n[3].setComponents(h-c,C-y,L-R,Z-q).normalize(),n[4].setComponents(h-u,C-E,L-B,Z-j).normalize(),t===xl)n[5].setComponents(h+u,C+E,L+B,Z+j).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(u,E,B,j).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Xd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Xd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Xd)}intersectsSprite(e){return Xd.center.set(0,0,0),Xd.radius=.7071067811865476,Xd.applyMatrix4(e.matrixWorld),this.intersectsSphere(Xd)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(fp.x=i.normal.x>0?e.max.x:e.min.x,fp.y=i.normal.y>0?e.max.y:e.min.y,fp.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(fp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function s0(){let s=null,e=!1,t=null,n=null;function i(a,c){t(a,c),n=s.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==t&&(n=s.requestAnimationFrame(i),e=!0)},stop:function(){s.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){s=a}}}function Ul(s,e){const t=e.isWebGL2,n=new WeakMap;return{get:function c(g){return g.isInterleavedBufferAttribute&&(g=g.data),n.get(g)},remove:function u(g){g.isInterleavedBufferAttribute&&(g=g.data);const y=n.get(g);y&&(s.deleteBuffer(y.buffer),n.delete(g))},update:function h(g,y){if(g.isGLBufferAttribute){const C=n.get(g);return void((!C||C.version<g.version)&&n.set(g,{buffer:g.buffer,type:g.type,bytesPerElement:g.elementSize,version:g.version}))}g.isInterleavedBufferAttribute&&(g=g.data);const E=n.get(g);void 0===E?n.set(g,function i(g,y){const E=g.array,C=g.usage,T=s.createBuffer();let R;if(s.bindBuffer(y,T),s.bufferData(y,E,C),g.onUploadCallback(),E instanceof Float32Array)R=s.FLOAT;else if(E instanceof Uint16Array)if(g.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");R=s.HALF_FLOAT}else R=s.UNSIGNED_SHORT;else if(E instanceof Int16Array)R=s.SHORT;else if(E instanceof Uint32Array)R=s.UNSIGNED_INT;else if(E instanceof Int32Array)R=s.INT;else if(E instanceof Int8Array)R=s.BYTE;else if(E instanceof Uint8Array)R=s.UNSIGNED_BYTE;else{if(!(E instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+E);R=s.UNSIGNED_BYTE}return{buffer:T,type:R,bytesPerElement:E.BYTES_PER_ELEMENT,version:g.version}}(g,y)):E.version<g.version&&(function a(g,y,E){const C=y.array,T=y.updateRange;s.bindBuffer(E,g),-1===T.count?s.bufferSubData(E,0,C):(t?s.bufferSubData(E,T.offset*C.BYTES_PER_ELEMENT,C,T.offset,T.count):s.bufferSubData(E,T.offset*C.BYTES_PER_ELEMENT,C.subarray(T.offset,T.offset+T.count)),T.count=-1),y.onUploadCallback()}(E.buffer,g,y),E.version=g.version)}}}class jm extends Ti{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const a=e/2,c=t/2,u=Math.floor(n),h=Math.floor(i),g=u+1,y=h+1,E=e/u,C=t/h,T=[],R=[],B=[],L=[];for(let O=0;O<y;O++){const q=O*C-c;for(let j=0;j<g;j++)R.push(j*E-a,-q,0),B.push(0,0,1),L.push(j/u),L.push(1-O/h)}for(let O=0;O<h;O++)for(let q=0;q<u;q++){const Z=q+g*(O+1),ie=q+1+g*(O+1),oe=q+1+g*O;T.push(q+g*O,Z,oe),T.push(Z,ie,oe)}this.setIndex(T),this.setAttribute("position",new En(R,3)),this.setAttribute("normal",new En(B,3)),this.setAttribute("uv",new En(L,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jm(e.width,e.height,e.widthSegments,e.heightSegments)}}const Ci={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal;\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},on={common:{diffuse:{value:new Rt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ci},alphaMap:{value:null},alphaMapTransform:{value:new ci},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ci}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ci}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ci}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ci},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ci},normalScale:{value:new yt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ci},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ci}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ci}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ci}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Rt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Rt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ci},alphaTest:{value:0},uvTransform:{value:new ci}},sprite:{diffuse:{value:new Rt(16777215)},opacity:{value:1},center:{value:new yt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ci},alphaMap:{value:null},alphaMapTransform:{value:new ci},alphaTest:{value:0}}},yc={basic:{uniforms:qo([on.common,on.specularmap,on.envmap,on.aomap,on.lightmap,on.fog]),vertexShader:Ci.meshbasic_vert,fragmentShader:Ci.meshbasic_frag},lambert:{uniforms:qo([on.common,on.specularmap,on.envmap,on.aomap,on.lightmap,on.emissivemap,on.bumpmap,on.normalmap,on.displacementmap,on.fog,on.lights,{emissive:{value:new Rt(0)}}]),vertexShader:Ci.meshlambert_vert,fragmentShader:Ci.meshlambert_frag},phong:{uniforms:qo([on.common,on.specularmap,on.envmap,on.aomap,on.lightmap,on.emissivemap,on.bumpmap,on.normalmap,on.displacementmap,on.fog,on.lights,{emissive:{value:new Rt(0)},specular:{value:new Rt(1118481)},shininess:{value:30}}]),vertexShader:Ci.meshphong_vert,fragmentShader:Ci.meshphong_frag},standard:{uniforms:qo([on.common,on.envmap,on.aomap,on.lightmap,on.emissivemap,on.bumpmap,on.normalmap,on.displacementmap,on.roughnessmap,on.metalnessmap,on.fog,on.lights,{emissive:{value:new Rt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ci.meshphysical_vert,fragmentShader:Ci.meshphysical_frag},toon:{uniforms:qo([on.common,on.aomap,on.lightmap,on.emissivemap,on.bumpmap,on.normalmap,on.displacementmap,on.gradientmap,on.fog,on.lights,{emissive:{value:new Rt(0)}}]),vertexShader:Ci.meshtoon_vert,fragmentShader:Ci.meshtoon_frag},matcap:{uniforms:qo([on.common,on.bumpmap,on.normalmap,on.displacementmap,on.fog,{matcap:{value:null}}]),vertexShader:Ci.meshmatcap_vert,fragmentShader:Ci.meshmatcap_frag},points:{uniforms:qo([on.points,on.fog]),vertexShader:Ci.points_vert,fragmentShader:Ci.points_frag},dashed:{uniforms:qo([on.common,on.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ci.linedashed_vert,fragmentShader:Ci.linedashed_frag},depth:{uniforms:qo([on.common,on.displacementmap]),vertexShader:Ci.depth_vert,fragmentShader:Ci.depth_frag},normal:{uniforms:qo([on.common,on.bumpmap,on.normalmap,on.displacementmap,{opacity:{value:1}}]),vertexShader:Ci.meshnormal_vert,fragmentShader:Ci.meshnormal_frag},sprite:{uniforms:qo([on.sprite,on.fog]),vertexShader:Ci.sprite_vert,fragmentShader:Ci.sprite_frag},background:{uniforms:{uvTransform:{value:new ci},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ci.background_vert,fragmentShader:Ci.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ci.backgroundCube_vert,fragmentShader:Ci.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ci.cube_vert,fragmentShader:Ci.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ci.equirect_vert,fragmentShader:Ci.equirect_frag},distanceRGBA:{uniforms:qo([on.common,on.displacementmap,{referencePosition:{value:new ce},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ci.distanceRGBA_vert,fragmentShader:Ci.distanceRGBA_frag},shadow:{uniforms:qo([on.lights,on.fog,{color:{value:new Rt(0)},opacity:{value:1}}]),vertexShader:Ci.shadow_vert,fragmentShader:Ci.shadow_frag}};yc.physical={uniforms:qo([yc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ci},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ci},clearcoatNormalScale:{value:new yt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ci},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ci},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ci},sheen:{value:0},sheenColor:{value:new Rt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ci},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ci},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ci},transmissionSamplerSize:{value:new yt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ci},attenuationDistance:{value:0},attenuationColor:{value:new Rt(0)},specularColor:{value:new Rt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ci},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ci},anisotropyVector:{value:new yt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ci}}]),vertexShader:Ci.meshphysical_vert,fragmentShader:Ci.meshphysical_frag};const qm={r:0,b:0,g:0};function k0(s,e,t,n,i,a,c){const u=new Rt(0);let g,y,h=!0===a?0:1,E=null,C=0,T=null;function B(L,O){L.getRGB(qm,e0(s)),n.buffers.color.setClear(qm.r,qm.g,qm.b,O,c)}return{getClearColor:function(){return u},setClearColor:function(L,O=1){u.set(L),h=O,B(u,h)},getClearAlpha:function(){return h},setClearAlpha:function(L){h=L,B(u,h)},render:function R(L,O){let q=!1,j=!0===O.isScene?O.background:null;j&&j.isTexture&&(j=(O.backgroundBlurriness>0?t:e).get(j)),null===j?B(u,h):j&&j.isColor&&(B(j,1),q=!0);const Z=s.xr.getEnvironmentBlendMode();"additive"===Z?n.buffers.color.setClear(0,0,0,1,c):"alpha-blend"===Z&&n.buffers.color.setClear(0,0,0,0,c),(s.autoClear||q)&&s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil),j&&(j.isCubeTexture||306===j.mapping)?(void 0===y&&(y=new zs(new nd(1,1,1),new id({name:"BackgroundCubeMaterial",uniforms:vc(yc.backgroundCube.uniforms),vertexShader:yc.backgroundCube.vertexShader,fragmentShader:yc.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),y.geometry.deleteAttribute("normal"),y.geometry.deleteAttribute("uv"),y.onBeforeRender=function(ie,oe,re){this.matrixWorld.copyPosition(re.matrixWorld)},Object.defineProperty(y.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(y)),y.material.uniforms.envMap.value=j,y.material.uniforms.flipEnvMap.value=j.isCubeTexture&&!1===j.isRenderTargetTexture?-1:1,y.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,y.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,y.material.toneMapped=Zi.getTransfer(j.colorSpace)!==Lr,(E!==j||C!==j.version||T!==s.toneMapping)&&(y.material.needsUpdate=!0,E=j,C=j.version,T=s.toneMapping),y.layers.enableAll(),L.unshift(y,y.geometry,y.material,0,0,null)):j&&j.isTexture&&(void 0===g&&(g=new zs(new jm(2,2),new id({name:"BackgroundMaterial",uniforms:vc(yc.background.uniforms),vertexShader:yc.background.vertexShader,fragmentShader:yc.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.deleteAttribute("normal"),Object.defineProperty(g.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(g)),g.material.uniforms.t2D.value=j,g.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,g.material.toneMapped=Zi.getTransfer(j.colorSpace)!==Lr,!0===j.matrixAutoUpdate&&j.updateMatrix(),g.material.uniforms.uvTransform.value.copy(j.matrix),(E!==j||C!==j.version||T!==s.toneMapping)&&(g.material.needsUpdate=!0,E=j,C=j.version,T=s.toneMapping),g.layers.enableAll(),L.unshift(g,g.geometry,g.material,0,0,null))}}}function CM(s,e,t,n){const i=s.getParameter(s.MAX_VERTEX_ATTRIBS),a=n.isWebGL2?null:e.get("OES_vertex_array_object"),c=n.isWebGL2||null!==a,u={},h=L(null);let g=h,y=!1;function T(De){return n.isWebGL2?s.bindVertexArray(De):a.bindVertexArrayOES(De)}function R(De){return n.isWebGL2?s.deleteVertexArray(De):a.deleteVertexArrayOES(De)}function L(De){const Ke=[],Ne=[],Ve=[];for(let rt=0;rt<i;rt++)Ke[rt]=0,Ne[rt]=0,Ve[rt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ke,enabledAttributes:Ne,attributeDivisors:Ve,object:De,attributes:{},index:null}}function j(){const De=g.newAttributes;for(let Ke=0,Ne=De.length;Ke<Ne;Ke++)De[Ke]=0}function Z(De){ie(De,0)}function ie(De,Ke){const Ve=g.enabledAttributes,rt=g.attributeDivisors;g.newAttributes[De]=1,0===Ve[De]&&(s.enableVertexAttribArray(De),Ve[De]=1),rt[De]!==Ke&&((n.isWebGL2?s:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](De,Ke),rt[De]=Ke)}function oe(){const De=g.newAttributes,Ke=g.enabledAttributes;for(let Ne=0,Ve=Ke.length;Ne<Ve;Ne++)Ke[Ne]!==De[Ne]&&(s.disableVertexAttribArray(Ne),Ke[Ne]=0)}function re(De,Ke,Ne,Ve,rt,Xe,wt){!0===wt?s.vertexAttribIPointer(De,Ke,Ne,rt,Xe):s.vertexAttribPointer(De,Ke,Ne,Ve,rt,Xe)}function dt(){bt(),y=!0,g!==h&&(g=h,T(g.object))}function bt(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:function E(De,Ke,Ne,Ve,rt){let Xe=!1;if(c){const wt=function B(De,Ke,Ne){const Ve=!0===Ne.wireframe;let rt=u[De.id];void 0===rt&&(rt={},u[De.id]=rt);let Xe=rt[Ke.id];void 0===Xe&&(Xe={},rt[Ke.id]=Xe);let wt=Xe[Ve];return void 0===wt&&(wt=L(function C(){return n.isWebGL2?s.createVertexArray():a.createVertexArrayOES()}()),Xe[Ve]=wt),wt}(Ve,Ne,Ke);g!==wt&&(g=wt,T(g.object)),Xe=function O(De,Ke,Ne,Ve){const rt=g.attributes,Xe=Ke.attributes;let wt=0;const Le=Ne.getAttributes();for(const ut in Le)if(Le[ut].location>=0){const Lt=rt[ut];let ln=Xe[ut];if(void 0===ln&&("instanceMatrix"===ut&&De.instanceMatrix&&(ln=De.instanceMatrix),"instanceColor"===ut&&De.instanceColor&&(ln=De.instanceColor)),void 0===Lt||Lt.attribute!==ln||ln&&Lt.data!==ln.data)return!0;wt++}return g.attributesNum!==wt||g.index!==Ve}(De,Ve,Ne,rt),Xe&&function q(De,Ke,Ne,Ve){const rt={},Xe=Ke.attributes;let wt=0;const Le=Ne.getAttributes();for(const ut in Le)if(Le[ut].location>=0){let Lt=Xe[ut];void 0===Lt&&("instanceMatrix"===ut&&De.instanceMatrix&&(Lt=De.instanceMatrix),"instanceColor"===ut&&De.instanceColor&&(Lt=De.instanceColor));const ln={};ln.attribute=Lt,Lt&&Lt.data&&(ln.data=Lt.data),rt[ut]=ln,wt++}g.attributes=rt,g.attributesNum=wt,g.index=Ve}(De,Ve,Ne,rt)}else{const wt=!0===Ke.wireframe;(g.geometry!==Ve.id||g.program!==Ne.id||g.wireframe!==wt)&&(g.geometry=Ve.id,g.program=Ne.id,g.wireframe=wt,Xe=!0)}null!==rt&&t.update(rt,s.ELEMENT_ARRAY_BUFFER),(Xe||y)&&(y=!1,function pe(De,Ke,Ne,Ve){if(!1===n.isWebGL2&&(De.isInstancedMesh||Ve.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;j();const rt=Ve.attributes,Xe=Ne.getAttributes(),wt=Ke.defaultAttributeValues;for(const Le in Xe){const ut=Xe[Le];if(ut.location>=0){let Ht=rt[Le];if(void 0===Ht&&("instanceMatrix"===Le&&De.instanceMatrix&&(Ht=De.instanceMatrix),"instanceColor"===Le&&De.instanceColor&&(Ht=De.instanceColor)),void 0!==Ht){const Lt=Ht.normalized,ln=Ht.itemSize,In=t.get(Ht);if(void 0===In)continue;const un=In.buffer,xn=In.type,Jn=In.bytesPerElement,Ni=!0===n.isWebGL2&&(xn===s.INT||xn===s.UNSIGNED_INT||1013===Ht.gpuType);if(Ht.isInterleavedBufferAttribute){const Bn=Ht.data,Ce=Bn.stride,en=Ht.offset;if(Bn.isInstancedInterleavedBuffer){for(let Tt=0;Tt<ut.locationSize;Tt++)ie(ut.location+Tt,Bn.meshPerAttribute);!0!==De.isInstancedMesh&&void 0===Ve._maxInstanceCount&&(Ve._maxInstanceCount=Bn.meshPerAttribute*Bn.count)}else for(let Tt=0;Tt<ut.locationSize;Tt++)Z(ut.location+Tt);s.bindBuffer(s.ARRAY_BUFFER,un);for(let Tt=0;Tt<ut.locationSize;Tt++)re(ut.location+Tt,ln/ut.locationSize,xn,Lt,Ce*Jn,(en+ln/ut.locationSize*Tt)*Jn,Ni)}else{if(Ht.isInstancedBufferAttribute){for(let Bn=0;Bn<ut.locationSize;Bn++)ie(ut.location+Bn,Ht.meshPerAttribute);!0!==De.isInstancedMesh&&void 0===Ve._maxInstanceCount&&(Ve._maxInstanceCount=Ht.meshPerAttribute*Ht.count)}else for(let Bn=0;Bn<ut.locationSize;Bn++)Z(ut.location+Bn);s.bindBuffer(s.ARRAY_BUFFER,un);for(let Bn=0;Bn<ut.locationSize;Bn++)re(ut.location+Bn,ln/ut.locationSize,xn,Lt,ln*Jn,ln/ut.locationSize*Bn*Jn,Ni)}}else if(void 0!==wt){const Lt=wt[Le];if(void 0!==Lt)switch(Lt.length){case 2:s.vertexAttrib2fv(ut.location,Lt);break;case 3:s.vertexAttrib3fv(ut.location,Lt);break;case 4:s.vertexAttrib4fv(ut.location,Lt);break;default:s.vertexAttrib1fv(ut.location,Lt)}}}}oe()}(De,Ke,Ne,Ve),null!==rt&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,t.get(rt).buffer))},reset:dt,resetDefaultState:bt,dispose:function te(){dt();for(const De in u){const Ke=u[De];for(const Ne in Ke){const Ve=Ke[Ne];for(const rt in Ve)R(Ve[rt].object),delete Ve[rt];delete Ke[Ne]}delete u[De]}},releaseStatesOfGeometry:function ae(De){if(void 0===u[De.id])return;const Ke=u[De.id];for(const Ne in Ke){const Ve=Ke[Ne];for(const rt in Ve)R(Ve[rt].object),delete Ve[rt];delete Ke[Ne]}delete u[De.id]},releaseStatesOfProgram:function ze(De){for(const Ke in u){const Ne=u[Ke];if(void 0===Ne[De.id])continue;const Ve=Ne[De.id];for(const rt in Ve)R(Ve[rt].object),delete Ve[rt];delete Ne[De.id]}},initAttributes:j,enableAttribute:Z,disableUnusedAttributes:oe}}function B0(s,e,t,n){const i=n.isWebGL2;let a;this.setMode=function c(g){a=g},this.render=function u(g,y){s.drawArrays(a,g,y),t.update(y,a,1)},this.renderInstances=function h(g,y,E){if(0===E)return;let C,T;if(i)C=s,T="drawArraysInstanced";else if(C=e.get("ANGLE_instanced_arrays"),T="drawArraysInstancedANGLE",null===C)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");C[T](a,g,y,E),t.update(y,a,E)}}function xM(s,e,t){let n;function a(re){if("highp"===re){if(s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.HIGH_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision>0)return"highp";re="mediump"}return"mediump"===re&&s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.MEDIUM_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const c=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===s.constructor.name;let u=void 0!==t.precision?t.precision:"highp";const h=a(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const g=c||e.has("WEBGL_draw_buffers"),y=!0===t.logarithmicDepthBuffer,E=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),C=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS),T=s.getParameter(s.MAX_TEXTURE_SIZE),R=s.getParameter(s.MAX_CUBE_MAP_TEXTURE_SIZE),B=s.getParameter(s.MAX_VERTEX_ATTRIBS),L=s.getParameter(s.MAX_VERTEX_UNIFORM_VECTORS),O=s.getParameter(s.MAX_VARYING_VECTORS),q=s.getParameter(s.MAX_FRAGMENT_UNIFORM_VECTORS),j=C>0,Z=c||e.has("OES_texture_float");return{isWebGL2:c,drawBuffers:g,getMaxAnisotropy:function i(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){const re=e.get("EXT_texture_filter_anisotropic");n=s.getParameter(re.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:a,precision:u,logarithmicDepthBuffer:y,maxTextures:E,maxVertexTextures:C,maxTextureSize:T,maxCubemapSize:R,maxAttributes:B,maxVertexUniforms:L,maxVaryings:O,maxFragmentUniforms:q,vertexTextures:j,floatFragmentTextures:Z,floatVertexTextures:j&&Z,maxSamples:c?s.getParameter(s.MAX_SAMPLES):0}}function TM(s){const e=this;let t=null,n=0,i=!1,a=!1;const c=new pu,u=new ci,h={value:null,needsUpdate:!1};function y(E,C,T,R){const B=null!==E?E.length:0;let L=null;if(0!==B){if(L=h.value,!0!==R||null===L){const O=T+4*B,q=C.matrixWorldInverse;u.getNormalMatrix(q),(null===L||L.length<O)&&(L=new Float32Array(O));for(let j=0,Z=T;j!==B;++j,Z+=4)c.copy(E[j]).applyMatrix4(q,u),c.normal.toArray(L,Z),L[Z+3]=c.constant}h.value=L,h.needsUpdate=!0}return e.numPlanes=B,e.numIntersection=0,L}this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(E,C){const T=0!==E.length||C||0!==n||i;return i=C,n=E.length,T},this.beginShadows=function(){a=!0,y(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(E,C){t=y(E,C,0)},this.setState=function(E,C,T){const R=E.clippingPlanes,B=E.clipIntersection,L=E.clipShadows,O=s.get(E);if(!i||null===R||0===R.length||a&&!L)a?y(null):function g(){h.value!==t&&(h.value=t,h.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}();else{const q=a?0:n,j=4*q;let Z=O.clippingState||null;h.value=Z,Z=y(R,C,j,T);for(let ie=0;ie!==j;++ie)Z[ie]=t[ie];O.clippingState=Z,this.numIntersection=B?this.numPlanes:0,this.numPlanes+=q}}}function U0(s){let e=new WeakMap;function t(c,u){return 303===u?c.mapping=301:304===u&&(c.mapping=302),c}function i(c){const u=c.target;u.removeEventListener("dispose",i);const h=e.get(u);void 0!==h&&(e.delete(u),h.dispose())}return{get:function n(c){if(c&&c.isTexture&&!1===c.isRenderTargetTexture){const u=c.mapping;if(303===u||304===u){if(e.has(c))return t(e.get(c).texture,c.mapping);{const h=c.image;if(h&&h.height>0){const g=new t0(h.height/2);return g.fromEquirectangularTexture(s,c),e.set(c,g),c.addEventListener("dispose",i),t(g.texture,c.mapping)}return null}}}return c},dispose:function a(){e=new WeakMap}}}class gp extends rd{constructor(e=-1,t=1,n=1,i=-1,a=.1,c=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=a,this.far=c,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,a,c){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=n-e,c=n+e,u=i+t,h=i-t;if(null!==this.view&&this.view.enabled){const g=(this.right-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=g*this.view.offsetX,c=a+g*this.view.width,u-=y*this.view.offsetY,h=u-y*this.view.height}this.projectionMatrix.makeOrthographic(a,c,u,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Hl=[.125,.215,.35,.446,.526,.582],Z_=new gp,V0=new Rt;let H0=null;const od=(1+Math.sqrt(5))/2,jh=1/od,G0=[new ce(1,1,1),new ce(-1,1,1),new ce(1,1,-1),new ce(-1,1,-1),new ce(0,od,jh),new ce(0,od,-jh),new ce(jh,0,od),new ce(-jh,0,od),new ce(od,jh,0),new ce(-od,jh,0)];class z0{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){H0=this._renderer.getRenderTarget(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,n,i,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=_p(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Jm(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(H0),e.scissorTest=!1,Zm(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),H0=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:sr,minFilter:sr,generateMipmaps:!1,type:za,format:vo,colorSpace:oo,depthBuffer:!1},i=j0(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=j0(e,t,n);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function K_(s){const e=[],t=[],n=[];let i=s;const a=s-4+1+Hl.length;for(let c=0;c<a;c++){const u=Math.pow(2,i);t.push(u);let h=1/u;c>s-4?h=Hl[c-s+4-1]:0===c&&(h=0),n.push(h);const g=1/(u-2),y=-g,E=1+g,C=[y,y,E,y,E,E,y,y,E,E,y,E],T=6,R=6,B=3,L=2,O=1,q=new Float32Array(B*R*T),j=new Float32Array(L*R*T),Z=new Float32Array(O*R*T);for(let oe=0;oe<T;oe++){const re=oe%3*2/3-1,pe=oe>2?0:-1;q.set([re,pe,0,re+2/3,pe,0,re+2/3,pe+1,0,re,pe,0,re+2/3,pe+1,0,re,pe+1,0],B*R*oe),j.set(C,L*R*oe),Z.set([oe,oe,oe,oe,oe,oe],O*R*oe)}const ie=new Ti;ie.setAttribute("position",new Bi(q,B)),ie.setAttribute("uv",new Bi(j,L)),ie.setAttribute("faceIndex",new Bi(Z,O)),e.push(ie),i>4&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}(a)),this._blurMaterial=function Km(s,e,t){const n=new Float32Array(20),i=new ce(0,1,0);return new id({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(a,e,t)}return i}_compileMaterial(e){const t=new zs(this._lodPlanes[0],e);this._renderer.compile(t,Z_)}_sceneToCubeUV(e,t,n,i){const u=new Rr(90,1,t,n),h=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],y=this._renderer,E=y.autoClear,C=y.toneMapping;y.getClearColor(V0),y.toneMapping=0,y.autoClear=!1;const T=new xi({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),R=new zs(new nd,T);let B=!1;const L=e.background;L?L.isColor&&(T.color.copy(L),e.background=null,B=!0):(T.color.copy(V0),B=!0);for(let O=0;O<6;O++){const q=O%3;0===q?(u.up.set(0,h[O],0),u.lookAt(g[O],0,0)):1===q?(u.up.set(0,0,h[O]),u.lookAt(0,g[O],0)):(u.up.set(0,h[O],0),u.lookAt(0,0,g[O]));const j=this._cubeSize;Zm(i,q*j,O>2?j:0,j,j),y.setRenderTarget(i),B&&y.render(R,u),y.render(e,u)}R.geometry.dispose(),R.material.dispose(),y.toneMapping=C,y.autoClear=E,e.background=L}_textureToCubeUV(e,t){const n=this._renderer,i=301===e.mapping||302===e.mapping;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=_p()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Jm());const a=i?this._cubemapMaterial:this._equirectMaterial,c=new zs(this._lodPlanes[0],a);a.uniforms.envMap.value=e;const h=this._cubeSize;Zm(t,0,0,3*h,2*h),n.setRenderTarget(t),n.render(c,Z_)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]);this._blur(e,i-1,i,a,G0[(i-1)%G0.length])}t.autoClear=n}_blur(e,t,n,i,a){const c=this._pingPongRenderTarget;this._halfBlur(e,c,t,n,i,"latitudinal",a),this._halfBlur(c,e,n,n,i,"longitudinal",a)}_halfBlur(e,t,n,i,a,c,u){const h=this._renderer,g=this._blurMaterial;"latitudinal"!==c&&"longitudinal"!==c&&console.error("blur direction must be either latitudinal or longitudinal!");const E=new zs(this._lodPlanes[i],g),C=g.uniforms,T=this._sizeLods[n]-1,R=isFinite(a)?Math.PI/(2*T):2*Math.PI/39,B=a/R,L=isFinite(a)?1+Math.floor(3*B):20;L>20&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${L} samples when the maximum is set to 20`);const O=[];let q=0;for(let re=0;re<20;++re){const pe=re/B,te=Math.exp(-pe*pe/2);O.push(te),0===re?q+=te:re<L&&(q+=2*te)}for(let re=0;re<O.length;re++)O[re]=O[re]/q;C.envMap.value=e.texture,C.samples.value=L,C.weights.value=O,C.latitudinal.value="latitudinal"===c,u&&(C.poleAxis.value=u);const{_lodMax:j}=this;C.dTheta.value=R,C.mipInt.value=j-n;const Z=this._sizeLods[i];Zm(t,3*Z*(i>j-4?i-j+4:0),4*(this._cubeSize-Z),3*Z,2*Z),h.setRenderTarget(t),h.render(E,Z_)}}function j0(s,e,t){const n=new va(s,e,t);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Zm(s,e,t,n,i){s.viewport.set(e,t,n,i),s.scissor.set(e,t,n,i)}function Jm(){return new id({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function _p(){return new id({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function J_(s){let e=new WeakMap,t=null;function a(u){const h=u.target;h.removeEventListener("dispose",a);const g=e.get(h);void 0!==g&&(e.delete(h),g.dispose())}return{get:function n(u){if(u&&u.isTexture){const h=u.mapping,g=303===h||304===h,y=301===h||302===h;if(g||y){if(u.isRenderTargetTexture&&!0===u.needsPMREMUpdate){u.needsPMREMUpdate=!1;let E=e.get(u);return null===t&&(t=new z0(s)),E=g?t.fromEquirectangular(u,E):t.fromCubemap(u,E),e.set(u,E),E.texture}if(e.has(u))return e.get(u).texture;{const E=u.image;if(g&&E&&E.height>0||y&&E&&function i(u){let h=0;for(let y=0;y<6;y++)void 0!==u[y]&&h++;return 6===h}(E)){null===t&&(t=new z0(s));const C=g?t.fromEquirectangular(u):t.fromCubemap(u);return e.set(u,C),u.addEventListener("dispose",a),C.texture}return null}}}return u},dispose:function c(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function _x(s){const e={};function t(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=s.getExtension(n)}return e[n]=i,i}return{has:function(n){return null!==t(n)},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const i=t(n);return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function $0(s,e,t,n){const i={},a=new WeakMap;function c(E){const C=E.target;null!==C.index&&e.remove(C.index);for(const R in C.attributes)e.remove(C.attributes[R]);for(const R in C.morphAttributes){const B=C.morphAttributes[R];for(let L=0,O=B.length;L<O;L++)e.remove(B[L])}C.removeEventListener("dispose",c),delete i[C.id];const T=a.get(C);T&&(e.remove(T),a.delete(C)),n.releaseStatesOfGeometry(C),!0===C.isInstancedBufferGeometry&&delete C._maxInstanceCount,t.memory.geometries--}function g(E){const C=[],T=E.index,R=E.attributes.position;let B=0;if(null!==T){const q=T.array;B=T.version;for(let j=0,Z=q.length;j<Z;j+=3){const ie=q[j+0],oe=q[j+1],re=q[j+2];C.push(ie,oe,oe,re,re,ie)}}else{if(void 0===R)return;B=R.version;for(let j=0,Z=R.array.length/3-1;j<Z;j+=3){const ie=j+0,oe=j+1,re=j+2;C.push(ie,oe,oe,re,re,ie)}}const L=new(kd(C)?Zu:hu)(C,1);L.version=B;const O=a.get(E);O&&e.remove(O),a.set(E,L)}return{get:function u(E,C){return!0===i[C.id]||(C.addEventListener("dispose",c),i[C.id]=!0,t.memory.geometries++),C},update:function h(E){const C=E.attributes;for(const R in C)e.update(C[R],s.ARRAY_BUFFER);const T=E.morphAttributes;for(const R in T){const B=T[R];for(let L=0,O=B.length;L<O;L++)e.update(B[L],s.ARRAY_BUFFER)}},getWireframeAttribute:function y(E){const C=a.get(E);if(C){const T=E.index;null!==T&&C.version<T.version&&g(E)}else g(E);return a.get(E)}}}function Y0(s,e,t,n){const i=n.isWebGL2;let a,u,h;this.setMode=function c(C){a=C},this.setIndex=function g(C){u=C.type,h=C.bytesPerElement},this.render=function y(C,T){s.drawElements(a,T,u,C*h),t.update(T,a,1)},this.renderInstances=function E(C,T,R){if(0===R)return;let B,L;if(i)B=s,L="drawElementsInstanced";else if(B=e.get("ANGLE_instanced_arrays"),L="drawElementsInstancedANGLE",null===B)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");B[L](a,T,u,C*h,R),t.update(T,a,R)}}function X0(s){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function n(a,c,u){switch(t.calls++,c){case s.TRIANGLES:t.triangles+=u*(a/3);break;case s.LINES:t.lines+=u*(a/2);break;case s.LINE_STRIP:t.lines+=u*(a-1);break;case s.LINE_LOOP:t.lines+=u*a;break;case s.POINTS:t.points+=u*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c)}}}}function q0(s,e){return s[0]-e[0]}function Q_(s,e){return Math.abs(e[1])-Math.abs(s[1])}function _u(s,e,t){const n={},i=new Float32Array(8),a=new WeakMap,c=new er,u=[];for(let g=0;g<8;g++)u[g]=[g,0];return{update:function h(g,y,E){const C=g.morphTargetInfluences;if(!0===e.isWebGL2){const T=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,R=void 0!==T?T.length:0;let B=a.get(y);if(void 0===B||B.count!==R){let De=function(){dt.dispose(),a.delete(y),y.removeEventListener("dispose",De)};void 0!==B&&B.texture.dispose();const q=void 0!==y.morphAttributes.position,j=void 0!==y.morphAttributes.normal,Z=void 0!==y.morphAttributes.color,ie=y.morphAttributes.position||[],oe=y.morphAttributes.normal||[],re=y.morphAttributes.color||[];let pe=0;!0===q&&(pe=1),!0===j&&(pe=2),!0===Z&&(pe=3);let te=y.attributes.position.count*pe,ae=1;te>e.maxTextureSize&&(ae=Math.ceil(te/e.maxTextureSize),te=e.maxTextureSize);const ze=new Float32Array(te*ae*4*R),dt=new rp(ze,te,ae,R);dt.type=aa,dt.needsUpdate=!0;const bt=4*pe;for(let Ke=0;Ke<R;Ke++){const Ne=ie[Ke],Ve=oe[Ke],rt=re[Ke],Xe=te*ae*4*Ke;for(let wt=0;wt<Ne.count;wt++){const Le=wt*bt;!0===q&&(c.fromBufferAttribute(Ne,wt),ze[Xe+Le+0]=c.x,ze[Xe+Le+1]=c.y,ze[Xe+Le+2]=c.z,ze[Xe+Le+3]=0),!0===j&&(c.fromBufferAttribute(Ve,wt),ze[Xe+Le+4]=c.x,ze[Xe+Le+5]=c.y,ze[Xe+Le+6]=c.z,ze[Xe+Le+7]=0),!0===Z&&(c.fromBufferAttribute(rt,wt),ze[Xe+Le+8]=c.x,ze[Xe+Le+9]=c.y,ze[Xe+Le+10]=c.z,ze[Xe+Le+11]=4===rt.itemSize?c.w:1)}}B={count:R,texture:dt,size:new yt(te,ae)},a.set(y,B),y.addEventListener("dispose",De)}let L=0;for(let q=0;q<C.length;q++)L+=C[q];const O=y.morphTargetsRelative?1:1-L;E.getUniforms().setValue(s,"morphTargetBaseInfluence",O),E.getUniforms().setValue(s,"morphTargetInfluences",C),E.getUniforms().setValue(s,"morphTargetsTexture",B.texture,t),E.getUniforms().setValue(s,"morphTargetsTextureSize",B.size)}else{const T=void 0===C?0:C.length;let R=n[y.id];if(void 0===R||R.length!==T){R=[];for(let j=0;j<T;j++)R[j]=[j,0];n[y.id]=R}for(let j=0;j<T;j++){const Z=R[j];Z[0]=j,Z[1]=C[j]}R.sort(Q_);for(let j=0;j<8;j++)j<T&&R[j][1]?(u[j][0]=R[j][0],u[j][1]=R[j][1]):(u[j][0]=Number.MAX_SAFE_INTEGER,u[j][1]=0);u.sort(q0);const B=y.morphAttributes.position,L=y.morphAttributes.normal;let O=0;for(let j=0;j<8;j++){const Z=u[j],ie=Z[0],oe=Z[1];ie!==Number.MAX_SAFE_INTEGER&&oe?(B&&y.getAttribute("morphTarget"+j)!==B[ie]&&y.setAttribute("morphTarget"+j,B[ie]),L&&y.getAttribute("morphNormal"+j)!==L[ie]&&y.setAttribute("morphNormal"+j,L[ie]),i[j]=oe,O+=oe):(B&&!0===y.hasAttribute("morphTarget"+j)&&y.deleteAttribute("morphTarget"+j),L&&!0===y.hasAttribute("morphNormal"+j)&&y.deleteAttribute("morphNormal"+j),i[j]=0)}const q=y.morphTargetsRelative?1:1-O;E.getUniforms().setValue(s,"morphTargetBaseInfluence",q),E.getUniforms().setValue(s,"morphTargetInfluences",i)}}}}function Qm(s,e,t,n){let i=new WeakMap;function u(h){const g=h.target;g.removeEventListener("dispose",u),t.remove(g.instanceMatrix),null!==g.instanceColor&&t.remove(g.instanceColor)}return{update:function a(h){const g=n.render.frame,E=e.get(h,h.geometry);if(i.get(E)!==g&&(e.update(E),i.set(E,g)),h.isInstancedMesh&&(!1===h.hasEventListener("dispose",u)&&h.addEventListener("dispose",u),i.get(h)!==g&&(t.update(h.instanceMatrix,s.ARRAY_BUFFER),null!==h.instanceColor&&t.update(h.instanceColor,s.ARRAY_BUFFER),i.set(h,g))),h.isSkinnedMesh){const C=h.skeleton;i.get(C)!==g&&(C.update(),i.set(C,g))}return E},dispose:function c(){i=new WeakMap}}}const vp=new Po,Wh=new rp,Z0=new Rm,eg=new O_,ev=[],K0=[],J0=new Float32Array(16),$h=new Float32Array(9),Q0=new Float32Array(4);function yp(s,e,t){const n=s[0];if(n<=0||n>0)return s;const i=e*t;let a=ev[i];if(void 0===a&&(a=new Float32Array(i),ev[i]=a),0!==e){n.toArray(a,0);for(let c=1,u=0;c!==e;++c)u+=t,s[c].toArray(a,u)}return a}function js(s,e){if(s.length!==e.length)return!1;for(let t=0,n=s.length;t<n;t++)if(s[t]!==e[t])return!1;return!0}function uo(s,e){for(let t=0,n=e.length;t<n;t++)s[t]=e[t]}function tg(s,e){let t=K0[e];void 0===t&&(t=new Int32Array(e),K0[e]=t);for(let n=0;n!==e;++n)t[n]=s.allocateTextureUnit();return t}function DM(s,e){const t=this.cache;t[0]!==e&&(s.uniform1f(this.addr,e),t[0]=e)}function AM(s,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(js(t,e))return;s.uniform2fv(this.addr,e),uo(t,e)}}function eb(s,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(s.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(js(t,e))return;s.uniform3fv(this.addr,e),uo(t,e)}}function tv(s,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(js(t,e))return;s.uniform4fv(this.addr,e),uo(t,e)}}function RM(s,e){const t=this.cache,n=e.elements;if(void 0===n){if(js(t,e))return;s.uniformMatrix2fv(this.addr,!1,e),uo(t,e)}else{if(js(t,n))return;Q0.set(n),s.uniformMatrix2fv(this.addr,!1,Q0),uo(t,n)}}function nv(s,e){const t=this.cache,n=e.elements;if(void 0===n){if(js(t,e))return;s.uniformMatrix3fv(this.addr,!1,e),uo(t,e)}else{if(js(t,n))return;$h.set(n),s.uniformMatrix3fv(this.addr,!1,$h),uo(t,n)}}function IM(s,e){const t=this.cache,n=e.elements;if(void 0===n){if(js(t,e))return;s.uniformMatrix4fv(this.addr,!1,e),uo(t,e)}else{if(js(t,n))return;J0.set(n),s.uniformMatrix4fv(this.addr,!1,J0),uo(t,n)}}function OM(s,e){const t=this.cache;t[0]!==e&&(s.uniform1i(this.addr,e),t[0]=e)}function NM(s,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(js(t,e))return;s.uniform2iv(this.addr,e),uo(t,e)}}function PM(s,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(js(t,e))return;s.uniform3iv(this.addr,e),uo(t,e)}}function LM(s,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(js(t,e))return;s.uniform4iv(this.addr,e),uo(t,e)}}function FM(s,e){const t=this.cache;t[0]!==e&&(s.uniform1ui(this.addr,e),t[0]=e)}function ng(s,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(js(t,e))return;s.uniform2uiv(this.addr,e),uo(t,e)}}function Kd(s,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(js(t,e))return;s.uniform3uiv(this.addr,e),uo(t,e)}}function vx(s,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(js(t,e))return;s.uniform4uiv(this.addr,e),uo(t,e)}}function bp(s,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(s.uniform1i(this.addr,i),n[0]=i),t.setTexture2D(e||vp,i)}function kM(s,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(s.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||Z0,i)}function BM(s,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(s.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||eg,i)}function iv(s,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(s.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||Wh,i)}function bc(s,e){s.uniform1fv(this.addr,e)}function wp(s,e){const t=yp(e,this.size,2);s.uniform2fv(this.addr,t)}function Lo(s,e){const t=yp(e,this.size,3);s.uniform3fv(this.addr,t)}function Jd(s,e){const t=yp(e,this.size,4);s.uniform4fv(this.addr,t)}function ig(s,e){const t=yp(e,this.size,4);s.uniformMatrix2fv(this.addr,!1,t)}function Ka(s,e){const t=yp(e,this.size,9);s.uniformMatrix3fv(this.addr,!1,t)}function rv(s,e){const t=yp(e,this.size,16);s.uniformMatrix4fv(this.addr,!1,t)}function Yh(s,e){s.uniform1iv(this.addr,e)}function Xh(s,e){s.uniform2iv(this.addr,e)}function qh(s,e){s.uniform3iv(this.addr,e)}function Zh(s,e){s.uniform4iv(this.addr,e)}function Kh(s,e){s.uniform1uiv(this.addr,e)}function Jh(s,e){s.uniform2uiv(this.addr,e)}function Qh(s,e){s.uniform3uiv(this.addr,e)}function ef(s,e){s.uniform4uiv(this.addr,e)}function tf(s,e,t){const n=this.cache,i=e.length,a=tg(t,i);js(n,a)||(s.uniform1iv(this.addr,a),uo(n,a));for(let c=0;c!==i;++c)t.setTexture2D(e[c]||vp,a[c])}function tb(s,e,t){const n=this.cache,i=e.length,a=tg(t,i);js(n,a)||(s.uniform1iv(this.addr,a),uo(n,a));for(let c=0;c!==i;++c)t.setTexture3D(e[c]||Z0,a[c])}function nb(s,e,t){const n=this.cache,i=e.length,a=tg(t,i);js(n,a)||(s.uniform1iv(this.addr,a),uo(n,a));for(let c=0;c!==i;++c)t.setTextureCube(e[c]||eg,a[c])}function ib(s,e,t){const n=this.cache,i=e.length,a=tg(t,i);js(n,a)||(s.uniform1iv(this.addr,a),uo(n,a));for(let c=0;c!==i;++c)t.setTexture2DArray(e[c]||Wh,a[c])}class sb{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function UM(s){switch(s){case 5126:return DM;case 35664:return AM;case 35665:return eb;case 35666:return tv;case 35674:return RM;case 35675:return nv;case 35676:return IM;case 5124:case 35670:return OM;case 35667:case 35671:return NM;case 35668:case 35672:return PM;case 35669:case 35673:return LM;case 5125:return FM;case 36294:return ng;case 36295:return Kd;case 36296:return vx;case 35678:case 36198:case 36298:case 36306:case 35682:return bp;case 35679:case 36299:case 36307:return kM;case 35680:case 36300:case 36308:case 36293:return BM;case 36289:case 36303:case 36311:case 36292:return iv}}(t.type)}}class ob{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function rb(s){switch(s){case 5126:return bc;case 35664:return wp;case 35665:return Lo;case 35666:return Jd;case 35674:return ig;case 35675:return Ka;case 35676:return rv;case 5124:case 35670:return Yh;case 35667:case 35671:return Xh;case 35668:case 35672:return qh;case 35669:case 35673:return Zh;case 5125:return Kh;case 36294:return Jh;case 36295:return Qh;case 36296:return ef;case 35678:case 36198:case 36298:case 36306:case 35682:return tf;case 35679:case 36299:case 36307:return tb;case 35680:case 36300:case 36308:case 36293:return nb;case 36289:case 36303:case 36311:case 36292:return ib}}(t.type)}}class ab{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let a=0,c=i.length;a!==c;++a){const u=i[a];u.setValue(e,t[u.id],n)}}}const rg=/(\w+)(\])?(\[|\.)?/g;function sv(s,e){s.seq.push(e),s.map[e.id]=e}function VM(s,e,t){const n=s.name,i=n.length;for(rg.lastIndex=0;;){const a=rg.exec(n),c=rg.lastIndex;let u=a[1];const g=a[3];if("]"===a[2]&&(u|=0),void 0===g||"["===g&&c+2===i){sv(t,void 0===g?new sb(u,s,e):new ob(u,s,e));break}{let E=t.map[u];void 0===E&&(E=new ab(u),sv(t,E)),t=E}}}class sg{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const a=e.getActiveUniform(t,i);VM(a,e.getUniformLocation(t,a.name),this)}}setValue(e,t,n,i){const a=this.map[t];void 0!==a&&a.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let a=0,c=t.length;a!==c;++a){const u=t[a],h=n[u.id];!1!==h.needsUpdate&&u.setValue(e,h.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,a=e.length;i!==a;++i){const c=e[i];c.id in t&&n.push(c)}return n}}function ov(s,e,t){const n=s.createShader(e);return s.shaderSource(n,t),s.compileShader(n),n}let HM=0;function og(s,e,t){const n=s.getShaderParameter(e,s.COMPILE_STATUS),i=s.getShaderInfoLog(e).trim();if(n&&""===i)return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const c=parseInt(a[1]);return t.toUpperCase()+"\n\n"+i+"\n\n"+function lb(s,e){const t=s.split("\n"),n=[],i=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let c=i;c<a;c++){const u=c+1;n.push(`${u===e?">":" "} ${u}: ${t[c]}`)}return n.join("\n")}(s.getShaderSource(e),c)}return i}function GM(s,e){const t=function av(s){const e=Zi.getPrimaries(Zi.workingColorSpace),t=Zi.getPrimaries(s);let n;switch(e===t?n="":"p3"===e&&t===Gf?n="LinearDisplayP3ToLinearSRGB":e===Gf&&"p3"===t&&(n="LinearSRGBToLinearDisplayP3"),s){case oo:case gm:return[n,"LinearTransferOETF"];case Pr:case Hf:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",s),[n,"LinearTransferOETF"]}}(e);return`vec4 ${s}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function ag(s,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+s+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function ad(s){return""!==s}function Ep(s,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return s.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function cv(s,e){return s.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const cb=/^[ \t]*#include +<([\w\d./]+)>/gm;function Mp(s){return s.replace(cb,db)}const ub=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function db(s,e){let t=Ci[e];if(void 0===t){const n=ub.get(e);if(void 0===n)throw new Error("Can not resolve #include <"+e+">");t=Ci[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n)}return Mp(t)}const uv=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dv(s){return s.replace(uv,jM)}function jM(s,e,t,n){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function hv(s){let e="precision "+s.precision+" float;\nprecision "+s.precision+" int;";return"highp"===s.precision?e+="\n#define HIGH_PRECISION":"mediump"===s.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===s.precision&&(e+="\n#define LOW_PRECISION"),e}function gb(s,e,t,n){const i=s.getContext(),a=t.defines;let c=t.vertexShader,u=t.fragmentShader;const h=function hb(s){let e="SHADOWMAP_TYPE_BASIC";return 1===s.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===s.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===s.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),g=function fb(s){let e="ENVMAP_TYPE_CUBE";if(s.envMap)switch(s.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),y=function pb(s){let e="ENVMAP_MODE_REFLECTION";return s.envMap&&302===s.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),E=function WM(s){let e="ENVMAP_BLENDING_NONE";if(s.envMap)switch(s.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),C=function mb(s){const e=s.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}(t),T=t.isWebGL2?"":function lg(s){return[s.extensionDerivatives||s.envMapCubeUVHeight||s.bumpMap||s.normalMapTangentSpace||s.clearcoatNormalMap||s.flatShading||"physical"===s.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(s.extensionFragDepth||s.logarithmicDepthBuffer)&&s.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",s.extensionDrawBuffers&&s.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(s.extensionShaderTextureLOD||s.envMap||s.transmission)&&s.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ad).join("\n")}(t),R=function lv(s){const e=[];for(const t in s){const n=s[t];!1!==n&&e.push("#define "+t+" "+n)}return e.join("\n")}(a),B=i.createProgram();let L,O,q=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(L=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,R].filter(ad).join("\n"),L.length>0&&(L+="\n"),O=[T,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,R].filter(ad).join("\n"),O.length>0&&(O+="\n")):(L=[hv(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,R,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+y:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ad).join("\n"),O=[T,hv(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,R,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.envMap?"#define "+y:"",t.envMap?"#define "+E:"",C?"#define CUBEUV_TEXEL_WIDTH "+C.texelWidth:"",C?"#define CUBEUV_TEXEL_HEIGHT "+C.texelHeight:"",C?"#define CUBEUV_MAX_MIP "+C.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Ci.tonemapping_pars_fragment:"",0!==t.toneMapping?ag("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ci.colorspace_pars_fragment,GM("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(ad).join("\n")),c=Mp(c),c=Ep(c,t),c=cv(c,t),u=Mp(u),u=Ep(u,t),u=cv(u,t),c=dv(c),u=dv(u),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(q="#version 300 es\n",L=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+L,O=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+O);const Z=q+O+u,ie=ov(i,i.VERTEX_SHADER,q+L+c),oe=ov(i,i.FRAGMENT_SHADER,Z);if(i.attachShader(B,ie),i.attachShader(B,oe),void 0!==t.index0AttributeName?i.bindAttribLocation(B,0,t.index0AttributeName):!0===t.morphTargets&&i.bindAttribLocation(B,0,"position"),i.linkProgram(B),s.debug.checkShaderErrors){const te=i.getProgramInfoLog(B).trim(),ae=i.getShaderInfoLog(ie).trim(),ze=i.getShaderInfoLog(oe).trim();let dt=!0,bt=!0;if(!1===i.getProgramParameter(B,i.LINK_STATUS))if(dt=!1,"function"==typeof s.debug.onShaderError)s.debug.onShaderError(i,B,ie,oe);else{const De=og(i,ie,"vertex"),Ke=og(i,oe,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(B,i.VALIDATE_STATUS)+"\n\nProgram Info Log: "+te+"\n"+De+"\n"+Ke)}else""!==te?console.warn("THREE.WebGLProgram: Program Info Log:",te):(""===ae||""===ze)&&(bt=!1);bt&&(this.diagnostics={runnable:dt,programLog:te,vertexShader:{log:ae,prefix:L},fragmentShader:{log:ze,prefix:O}})}let re,pe;return i.deleteShader(ie),i.deleteShader(oe),this.getUniforms=function(){return void 0===re&&(re=new sg(i,B)),re},this.getAttributes=function(){return void 0===pe&&(pe=function zM(s,e){const t={},n=s.getProgramParameter(e,s.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const a=s.getActiveAttrib(e,i),c=a.name;let u=1;a.type===s.FLOAT_MAT2&&(u=2),a.type===s.FLOAT_MAT3&&(u=3),a.type===s.FLOAT_MAT4&&(u=4),t[c]={type:a.type,location:s.getAttribLocation(e,c),locationSize:u}}return t}(i,B)),pe},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(B),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=HM++,this.cacheKey=e,this.usedTimes=1,this.program=B,this.vertexShader=ie,this.fragmentShader=oe,this}let fv=0;class cg{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.fragmentShader,i=this._getShaderStage(e.vertexShader),a=this._getShaderStage(n),c=this._getShaderCacheForMaterial(e);return!1===c.has(i)&&(c.add(i),i.usedTimes++),!1===c.has(a)&&(c.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new _b(e),t.set(e,n)),n}}class _b{constructor(e){this.id=fv++,this.code=e,this.usedTimes=0}}function vb(s,e,t,n,i,a,c){const u=new A_,h=new cg,g=[],y=i.isWebGL2,E=i.logarithmicDepthBuffer,C=i.vertexTextures;let T=i.precision;const R={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function B(te){return 0===te?"uv":`uv${te}`}return{getParameters:function L(te,ae,ze,dt,bt){const De=dt.fog,Ke=bt.geometry,Ve=(te.isMeshStandardMaterial?t:e).get(te.envMap||(te.isMeshStandardMaterial?dt.environment:null)),rt=Ve&&306===Ve.mapping?Ve.image.height:null,Xe=R[te.type];null!==te.precision&&(T=i.getMaxPrecision(te.precision),T!==te.precision&&console.warn("THREE.WebGLProgram.getParameters:",te.precision,"not supported, using",T,"instead."));const wt=Ke.morphAttributes.position||Ke.morphAttributes.normal||Ke.morphAttributes.color,Le=void 0!==wt?wt.length:0;let Ht,Lt,ln,In,ut=0;if(void 0!==Ke.morphAttributes.position&&(ut=1),void 0!==Ke.morphAttributes.normal&&(ut=2),void 0!==Ke.morphAttributes.color&&(ut=3),Xe){const as=yc[Xe];Ht=as.vertexShader,Lt=as.fragmentShader}else Ht=te.vertexShader,Lt=te.fragmentShader,h.update(te),ln=h.getVertexShaderID(te),In=h.getFragmentShaderID(te);const un=s.getRenderTarget(),xn=!0===bt.isInstancedMesh,Jn=!!te.map,Bn=!!Ve,Ce=!!te.aoMap,en=!!te.lightMap,Tt=!!te.bumpMap,Wt=!!te.normalMap,Ot=!!te.displacementMap,Gn=!!te.emissiveMap,Tn=!!te.metalnessMap,An=!!te.roughnessMap,ti=te.anisotropy>0,Gi=te.clearcoat>0,fs=te.iridescence>0,me=te.sheen>0,se=te.transmission>0,nt=ti&&!!te.anisotropyMap,zt=Gi&&!!te.clearcoatMap,Ut=Gi&&!!te.clearcoatNormalMap,$t=Gi&&!!te.clearcoatRoughnessMap,kn=fs&&!!te.iridescenceMap,qt=fs&&!!te.iridescenceThicknessMap,mn=me&&!!te.sheenColorMap,Te=me&&!!te.sheenRoughnessMap,Zt=!!te.specularMap,It=!!te.specularColorMap,ii=!!te.specularIntensityMap,zn=se&&!!te.transmissionMap,qn=se&&!!te.thicknessMap,Ee=!!te.alphaMap,fn=!!te.extensions,sn=!!Ke.attributes.uv1,Ft=!!Ke.attributes.uv2,Fn=!!Ke.attributes.uv3;let si=0;return te.toneMapped&&(null===un||!0===un.isXRRenderTarget)&&(si=s.toneMapping),{isWebGL2:y,shaderID:Xe,shaderType:te.type,shaderName:te.name,vertexShader:Ht,fragmentShader:Lt,defines:te.defines,customVertexShaderID:ln,customFragmentShaderID:In,isRawShaderMaterial:!0===te.isRawShaderMaterial,glslVersion:te.glslVersion,precision:T,instancing:xn,instancingColor:xn&&null!==bt.instanceColor,supportsVertexTextures:C,outputColorSpace:null===un?s.outputColorSpace:!0===un.isXRRenderTarget?un.texture.colorSpace:oo,map:Jn,matcap:!!te.matcap,envMap:Bn,envMapMode:Bn&&Ve.mapping,envMapCubeUVHeight:rt,aoMap:Ce,lightMap:en,bumpMap:Tt,normalMap:Wt,displacementMap:C&&Ot,emissiveMap:Gn,normalMapObjectSpace:Wt&&1===te.normalMapType,normalMapTangentSpace:Wt&&0===te.normalMapType,metalnessMap:Tn,roughnessMap:An,anisotropy:ti,anisotropyMap:nt,clearcoat:Gi,clearcoatMap:zt,clearcoatNormalMap:Ut,clearcoatRoughnessMap:$t,iridescence:fs,iridescenceMap:kn,iridescenceThicknessMap:qt,sheen:me,sheenColorMap:mn,sheenRoughnessMap:Te,specularMap:Zt,specularColorMap:It,specularIntensityMap:ii,transmission:se,transmissionMap:zn,thicknessMap:qn,gradientMap:!!te.gradientMap,opaque:!1===te.transparent&&1===te.blending,alphaMap:Ee,alphaTest:te.alphaTest>0,alphaHash:!!te.alphaHash,combine:te.combine,mapUv:Jn&&B(te.map.channel),aoMapUv:Ce&&B(te.aoMap.channel),lightMapUv:en&&B(te.lightMap.channel),bumpMapUv:Tt&&B(te.bumpMap.channel),normalMapUv:Wt&&B(te.normalMap.channel),displacementMapUv:Ot&&B(te.displacementMap.channel),emissiveMapUv:Gn&&B(te.emissiveMap.channel),metalnessMapUv:Tn&&B(te.metalnessMap.channel),roughnessMapUv:An&&B(te.roughnessMap.channel),anisotropyMapUv:nt&&B(te.anisotropyMap.channel),clearcoatMapUv:zt&&B(te.clearcoatMap.channel),clearcoatNormalMapUv:Ut&&B(te.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:$t&&B(te.clearcoatRoughnessMap.channel),iridescenceMapUv:kn&&B(te.iridescenceMap.channel),iridescenceThicknessMapUv:qt&&B(te.iridescenceThicknessMap.channel),sheenColorMapUv:mn&&B(te.sheenColorMap.channel),sheenRoughnessMapUv:Te&&B(te.sheenRoughnessMap.channel),specularMapUv:Zt&&B(te.specularMap.channel),specularColorMapUv:It&&B(te.specularColorMap.channel),specularIntensityMapUv:ii&&B(te.specularIntensityMap.channel),transmissionMapUv:zn&&B(te.transmissionMap.channel),thicknessMapUv:qn&&B(te.thicknessMap.channel),alphaMapUv:Ee&&B(te.alphaMap.channel),vertexTangents:!!Ke.attributes.tangent&&(Wt||ti),vertexColors:te.vertexColors,vertexAlphas:!0===te.vertexColors&&!!Ke.attributes.color&&4===Ke.attributes.color.itemSize,vertexUv1s:sn,vertexUv2s:Ft,vertexUv3s:Fn,pointsUvs:!0===bt.isPoints&&!!Ke.attributes.uv&&(Jn||Ee),fog:!!De,useFog:!0===te.fog,fogExp2:De&&De.isFogExp2,flatShading:!0===te.flatShading,sizeAttenuation:!0===te.sizeAttenuation,logarithmicDepthBuffer:E,skinning:!0===bt.isSkinnedMesh,morphTargets:void 0!==Ke.morphAttributes.position,morphNormals:void 0!==Ke.morphAttributes.normal,morphColors:void 0!==Ke.morphAttributes.color,morphTargetsCount:Le,morphTextureStride:ut,numDirLights:ae.directional.length,numPointLights:ae.point.length,numSpotLights:ae.spot.length,numSpotLightMaps:ae.spotLightMap.length,numRectAreaLights:ae.rectArea.length,numHemiLights:ae.hemi.length,numDirLightShadows:ae.directionalShadowMap.length,numPointLightShadows:ae.pointShadowMap.length,numSpotLightShadows:ae.spotShadowMap.length,numSpotLightShadowsWithMaps:ae.numSpotLightShadowsWithMaps,numLightProbes:ae.numLightProbes,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:te.dithering,shadowMapEnabled:s.shadowMap.enabled&&ze.length>0,shadowMapType:s.shadowMap.type,toneMapping:si,useLegacyLights:s._useLegacyLights,decodeVideoTexture:Jn&&!0===te.map.isVideoTexture&&Zi.getTransfer(te.map.colorSpace)===Lr,premultipliedAlpha:te.premultipliedAlpha,doubleSided:2===te.side,flipSided:1===te.side,useDepthPacking:te.depthPacking>=0,depthPacking:te.depthPacking||0,index0AttributeName:te.index0AttributeName,extensionDerivatives:fn&&!0===te.extensions.derivatives,extensionFragDepth:fn&&!0===te.extensions.fragDepth,extensionDrawBuffers:fn&&!0===te.extensions.drawBuffers,extensionShaderTextureLOD:fn&&!0===te.extensions.shaderTextureLOD,rendererExtensionFragDepth:y||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:y||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:y||n.has("EXT_shader_texture_lod"),customProgramCacheKey:te.customProgramCacheKey()}},getProgramCacheKey:function O(te){const ae=[];if(te.shaderID?ae.push(te.shaderID):(ae.push(te.customVertexShaderID),ae.push(te.customFragmentShaderID)),void 0!==te.defines)for(const ze in te.defines)ae.push(ze),ae.push(te.defines[ze]);return!1===te.isRawShaderMaterial&&(function q(te,ae){te.push(ae.precision),te.push(ae.outputColorSpace),te.push(ae.envMapMode),te.push(ae.envMapCubeUVHeight),te.push(ae.mapUv),te.push(ae.alphaMapUv),te.push(ae.lightMapUv),te.push(ae.aoMapUv),te.push(ae.bumpMapUv),te.push(ae.normalMapUv),te.push(ae.displacementMapUv),te.push(ae.emissiveMapUv),te.push(ae.metalnessMapUv),te.push(ae.roughnessMapUv),te.push(ae.anisotropyMapUv),te.push(ae.clearcoatMapUv),te.push(ae.clearcoatNormalMapUv),te.push(ae.clearcoatRoughnessMapUv),te.push(ae.iridescenceMapUv),te.push(ae.iridescenceThicknessMapUv),te.push(ae.sheenColorMapUv),te.push(ae.sheenRoughnessMapUv),te.push(ae.specularMapUv),te.push(ae.specularColorMapUv),te.push(ae.specularIntensityMapUv),te.push(ae.transmissionMapUv),te.push(ae.thicknessMapUv),te.push(ae.combine),te.push(ae.fogExp2),te.push(ae.sizeAttenuation),te.push(ae.morphTargetsCount),te.push(ae.morphAttributeCount),te.push(ae.numDirLights),te.push(ae.numPointLights),te.push(ae.numSpotLights),te.push(ae.numSpotLightMaps),te.push(ae.numHemiLights),te.push(ae.numRectAreaLights),te.push(ae.numDirLightShadows),te.push(ae.numPointLightShadows),te.push(ae.numSpotLightShadows),te.push(ae.numSpotLightShadowsWithMaps),te.push(ae.numLightProbes),te.push(ae.shadowMapType),te.push(ae.toneMapping),te.push(ae.numClippingPlanes),te.push(ae.numClipIntersection),te.push(ae.depthPacking)}(ae,te),function j(te,ae){u.disableAll(),ae.isWebGL2&&u.enable(0),ae.supportsVertexTextures&&u.enable(1),ae.instancing&&u.enable(2),ae.instancingColor&&u.enable(3),ae.matcap&&u.enable(4),ae.envMap&&u.enable(5),ae.normalMapObjectSpace&&u.enable(6),ae.normalMapTangentSpace&&u.enable(7),ae.clearcoat&&u.enable(8),ae.iridescence&&u.enable(9),ae.alphaTest&&u.enable(10),ae.vertexColors&&u.enable(11),ae.vertexAlphas&&u.enable(12),ae.vertexUv1s&&u.enable(13),ae.vertexUv2s&&u.enable(14),ae.vertexUv3s&&u.enable(15),ae.vertexTangents&&u.enable(16),ae.anisotropy&&u.enable(17),te.push(u.mask),u.disableAll(),ae.fog&&u.enable(0),ae.useFog&&u.enable(1),ae.flatShading&&u.enable(2),ae.logarithmicDepthBuffer&&u.enable(3),ae.skinning&&u.enable(4),ae.morphTargets&&u.enable(5),ae.morphNormals&&u.enable(6),ae.morphColors&&u.enable(7),ae.premultipliedAlpha&&u.enable(8),ae.shadowMapEnabled&&u.enable(9),ae.useLegacyLights&&u.enable(10),ae.doubleSided&&u.enable(11),ae.flipSided&&u.enable(12),ae.useDepthPacking&&u.enable(13),ae.dithering&&u.enable(14),ae.transmission&&u.enable(15),ae.sheen&&u.enable(16),ae.opaque&&u.enable(17),ae.pointsUvs&&u.enable(18),ae.decodeVideoTexture&&u.enable(19),te.push(u.mask)}(ae,te),ae.push(s.outputColorSpace)),ae.push(te.customProgramCacheKey),ae.join()},getUniforms:function Z(te){const ae=R[te.type];let ze;return ze=ae?PE.clone(yc[ae].uniforms):te.uniforms,ze},acquireProgram:function ie(te,ae){let ze;for(let dt=0,bt=g.length;dt<bt;dt++){const De=g[dt];if(De.cacheKey===ae){ze=De,++ze.usedTimes;break}}return void 0===ze&&(ze=new gb(s,ae,te,a),g.push(ze)),ze},releaseProgram:function oe(te){if(0==--te.usedTimes){const ae=g.indexOf(te);g[ae]=g[g.length-1],g.pop(),te.destroy()}},releaseShaderCache:function re(te){h.remove(te)},programs:g,dispose:function pe(){h.dispose()}}}function yb(){let s=new WeakMap;return{get:function e(a){let c=s.get(a);return void 0===c&&(c={},s.set(a,c)),c},remove:function t(a){s.delete(a)},update:function n(a,c,u){s.get(a)[c]=u},dispose:function i(){s=new WeakMap}}}function bb(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.material.id!==e.material.id?s.material.id-e.material.id:s.z!==e.z?s.z-e.z:s.id-e.id}function pv(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.z!==e.z?e.z-s.z:s.id-e.id}function mv(){const s=[];let e=0;const t=[],n=[],i=[];function c(E,C,T,R,B,L){let O=s[e];return void 0===O?(O={id:E.id,object:E,geometry:C,material:T,groupOrder:R,renderOrder:E.renderOrder,z:B,group:L},s[e]=O):(O.id=E.id,O.object=E,O.geometry=C,O.material=T,O.groupOrder=R,O.renderOrder=E.renderOrder,O.z=B,O.group=L),e++,O}return{opaque:t,transmissive:n,transparent:i,init:function a(){e=0,t.length=0,n.length=0,i.length=0},push:function u(E,C,T,R,B,L){const O=c(E,C,T,R,B,L);T.transmission>0?n.push(O):!0===T.transparent?i.push(O):t.push(O)},unshift:function h(E,C,T,R,B,L){const O=c(E,C,T,R,B,L);T.transmission>0?n.unshift(O):!0===T.transparent?i.unshift(O):t.unshift(O)},finish:function y(){for(let E=e,C=s.length;E<C;E++){const T=s[E];if(null===T.id)break;T.id=null,T.object=null,T.geometry=null,T.material=null,T.group=null}},sort:function g(E,C){t.length>1&&t.sort(E||bb),n.length>1&&n.sort(C||pv),i.length>1&&i.sort(C||pv)}}}function wb(){let s=new WeakMap;return{get:function e(n,i){const a=s.get(n);let c;return void 0===a?(c=new mv,s.set(n,[c])):i>=a.length?(c=new mv,a.push(c)):c=a[i],c},dispose:function t(){s=new WeakMap}}}function Eb(){const s={};return{get:function(e){if(void 0!==s[e.id])return s[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ce,color:new Rt};break;case"SpotLight":t={position:new ce,direction:new ce,color:new Rt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ce,color:new Rt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ce,skyColor:new Rt,groundColor:new Rt};break;case"RectAreaLight":t={color:new Rt,position:new ce,halfWidth:new ce,halfHeight:new ce}}return s[e.id]=t,t}}}let $M=0;function YM(s,e){return(e.castShadow?2:0)-(s.castShadow?2:0)+(e.map?1:0)-(s.map?1:0)}function Mb(s,e){const t=new Eb,n=function yx(){const s={};return{get:function(e){if(void 0!==s[e.id])return s[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yt,shadowCameraNear:1,shadowCameraFar:1e3}}return s[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let y=0;y<9;y++)i.probe.push(new ce);const a=new ce,c=new Kn,u=new Kn;return{setup:function h(y,E){let C=0,T=0,R=0;for(let dt=0;dt<9;dt++)i.probe[dt].set(0,0,0);let B=0,L=0,O=0,q=0,j=0,Z=0,ie=0,oe=0,re=0,pe=0,te=0;y.sort(YM);const ae=!0===E?Math.PI:1;for(let dt=0,bt=y.length;dt<bt;dt++){const De=y[dt],Ke=De.color,Ne=De.intensity,Ve=De.distance,rt=De.shadow&&De.shadow.map?De.shadow.map.texture:null;if(De.isAmbientLight)C+=Ke.r*Ne*ae,T+=Ke.g*Ne*ae,R+=Ke.b*Ne*ae;else if(De.isLightProbe){for(let Xe=0;Xe<9;Xe++)i.probe[Xe].addScaledVector(De.sh.coefficients[Xe],Ne);te++}else if(De.isDirectionalLight){const Xe=t.get(De);if(Xe.color.copy(De.color).multiplyScalar(De.intensity*ae),De.castShadow){const wt=De.shadow,Le=n.get(De);Le.shadowBias=wt.bias,Le.shadowNormalBias=wt.normalBias,Le.shadowRadius=wt.radius,Le.shadowMapSize=wt.mapSize,i.directionalShadow[B]=Le,i.directionalShadowMap[B]=rt,i.directionalShadowMatrix[B]=De.shadow.matrix,Z++}i.directional[B]=Xe,B++}else if(De.isSpotLight){const Xe=t.get(De);Xe.position.setFromMatrixPosition(De.matrixWorld),Xe.color.copy(Ke).multiplyScalar(Ne*ae),Xe.distance=Ve,Xe.coneCos=Math.cos(De.angle),Xe.penumbraCos=Math.cos(De.angle*(1-De.penumbra)),Xe.decay=De.decay,i.spot[O]=Xe;const wt=De.shadow;if(De.map&&(i.spotLightMap[re]=De.map,re++,wt.updateMatrices(De),De.castShadow&&pe++),i.spotLightMatrix[O]=wt.matrix,De.castShadow){const Le=n.get(De);Le.shadowBias=wt.bias,Le.shadowNormalBias=wt.normalBias,Le.shadowRadius=wt.radius,Le.shadowMapSize=wt.mapSize,i.spotShadow[O]=Le,i.spotShadowMap[O]=rt,oe++}O++}else if(De.isRectAreaLight){const Xe=t.get(De);Xe.color.copy(Ke).multiplyScalar(Ne),Xe.halfWidth.set(.5*De.width,0,0),Xe.halfHeight.set(0,.5*De.height,0),i.rectArea[q]=Xe,q++}else if(De.isPointLight){const Xe=t.get(De);if(Xe.color.copy(De.color).multiplyScalar(De.intensity*ae),Xe.distance=De.distance,Xe.decay=De.decay,De.castShadow){const wt=De.shadow,Le=n.get(De);Le.shadowBias=wt.bias,Le.shadowNormalBias=wt.normalBias,Le.shadowRadius=wt.radius,Le.shadowMapSize=wt.mapSize,Le.shadowCameraNear=wt.camera.near,Le.shadowCameraFar=wt.camera.far,i.pointShadow[L]=Le,i.pointShadowMap[L]=rt,i.pointShadowMatrix[L]=De.shadow.matrix,ie++}i.point[L]=Xe,L++}else if(De.isHemisphereLight){const Xe=t.get(De);Xe.skyColor.copy(De.color).multiplyScalar(Ne*ae),Xe.groundColor.copy(De.groundColor).multiplyScalar(Ne*ae),i.hemi[j]=Xe,j++}}q>0&&(e.isWebGL2||!0===s.has("OES_texture_float_linear")?(i.rectAreaLTC1=on.LTC_FLOAT_1,i.rectAreaLTC2=on.LTC_FLOAT_2):!0===s.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=on.LTC_HALF_1,i.rectAreaLTC2=on.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=C,i.ambient[1]=T,i.ambient[2]=R;const ze=i.hash;(ze.directionalLength!==B||ze.pointLength!==L||ze.spotLength!==O||ze.rectAreaLength!==q||ze.hemiLength!==j||ze.numDirectionalShadows!==Z||ze.numPointShadows!==ie||ze.numSpotShadows!==oe||ze.numSpotMaps!==re||ze.numLightProbes!==te)&&(i.directional.length=B,i.spot.length=O,i.rectArea.length=q,i.point.length=L,i.hemi.length=j,i.directionalShadow.length=Z,i.directionalShadowMap.length=Z,i.pointShadow.length=ie,i.pointShadowMap.length=ie,i.spotShadow.length=oe,i.spotShadowMap.length=oe,i.directionalShadowMatrix.length=Z,i.pointShadowMatrix.length=ie,i.spotLightMatrix.length=oe+re-pe,i.spotLightMap.length=re,i.numSpotLightShadowsWithMaps=pe,i.numLightProbes=te,ze.directionalLength=B,ze.pointLength=L,ze.spotLength=O,ze.rectAreaLength=q,ze.hemiLength=j,ze.numDirectionalShadows=Z,ze.numPointShadows=ie,ze.numSpotShadows=oe,ze.numSpotMaps=re,ze.numLightProbes=te,i.version=$M++)},setupView:function g(y,E){let C=0,T=0,R=0,B=0,L=0;const O=E.matrixWorldInverse;for(let q=0,j=y.length;q<j;q++){const Z=y[q];if(Z.isDirectionalLight){const ie=i.directional[C];ie.direction.setFromMatrixPosition(Z.matrixWorld),a.setFromMatrixPosition(Z.target.matrixWorld),ie.direction.sub(a),ie.direction.transformDirection(O),C++}else if(Z.isSpotLight){const ie=i.spot[R];ie.position.setFromMatrixPosition(Z.matrixWorld),ie.position.applyMatrix4(O),ie.direction.setFromMatrixPosition(Z.matrixWorld),a.setFromMatrixPosition(Z.target.matrixWorld),ie.direction.sub(a),ie.direction.transformDirection(O),R++}else if(Z.isRectAreaLight){const ie=i.rectArea[B];ie.position.setFromMatrixPosition(Z.matrixWorld),ie.position.applyMatrix4(O),u.identity(),c.copy(Z.matrixWorld),c.premultiply(O),u.extractRotation(c),ie.halfWidth.set(.5*Z.width,0,0),ie.halfHeight.set(0,.5*Z.height,0),ie.halfWidth.applyMatrix4(u),ie.halfHeight.applyMatrix4(u),B++}else if(Z.isPointLight){const ie=i.point[T];ie.position.setFromMatrixPosition(Z.matrixWorld),ie.position.applyMatrix4(O),T++}else if(Z.isHemisphereLight){const ie=i.hemi[L];ie.direction.setFromMatrixPosition(Z.matrixWorld),ie.direction.transformDirection(O),L++}}},state:i}}function Sb(s,e){const t=new Mb(s,e),n=[],i=[];return{init:function a(){n.length=0,i.length=0},state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:function h(E){t.setup(n,E)},setupLightsView:function g(E){t.setupView(n,E)},pushLight:function c(E){n.push(E)},pushShadow:function u(E){i.push(E)}}}function Ws(s,e){let t=new WeakMap;return{get:function n(a,c=0){const u=t.get(a);let h;return void 0===u?(h=new Sb(s,e),t.set(a,[h])):c>=u.length?(h=new Sb(s,e),u.push(h)):h=u[c],h},dispose:function i(){t=new WeakMap}}}class gv extends $n{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Cb extends $n{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function qM(s,e,t){let n=new N_;const i=new yt,a=new yt,c=new er,u=new gv({depthPacking:3201}),h=new Cb,g={},y=t.maxTextureSize,E={0:1,1:0,2:2},C=new id({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new yt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),T=C.clone();T.defines.HORIZONTAL_PASS=1;const R=new Ti;R.setAttribute("position",new Bi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const B=new zs(R,C),L=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let O=this.type;function q(ie,oe){const re=e.update(B);C.defines.VSM_SAMPLES!==ie.blurSamples&&(C.defines.VSM_SAMPLES=ie.blurSamples,T.defines.VSM_SAMPLES=ie.blurSamples,C.needsUpdate=!0,T.needsUpdate=!0),null===ie.mapPass&&(ie.mapPass=new va(i.x,i.y)),C.uniforms.shadow_pass.value=ie.map.texture,C.uniforms.resolution.value=ie.mapSize,C.uniforms.radius.value=ie.radius,s.setRenderTarget(ie.mapPass),s.clear(),s.renderBufferDirect(oe,null,re,C,B,null),T.uniforms.shadow_pass.value=ie.mapPass.texture,T.uniforms.resolution.value=ie.mapSize,T.uniforms.radius.value=ie.radius,s.setRenderTarget(ie.map),s.clear(),s.renderBufferDirect(oe,null,re,T,B,null)}function j(ie,oe,re,pe){let te=null;const ae=!0===re.isPointLight?ie.customDistanceMaterial:ie.customDepthMaterial;if(void 0!==ae)te=ae;else if(te=!0===re.isPointLight?h:u,s.localClippingEnabled&&!0===oe.clipShadows&&Array.isArray(oe.clippingPlanes)&&0!==oe.clippingPlanes.length||oe.displacementMap&&0!==oe.displacementScale||oe.alphaMap&&oe.alphaTest>0||oe.map&&oe.alphaTest>0){const ze=te.uuid,dt=oe.uuid;let bt=g[ze];void 0===bt&&(bt={},g[ze]=bt);let De=bt[dt];void 0===De&&(De=te.clone(),bt[dt]=De),te=De}return te.visible=oe.visible,te.wireframe=oe.wireframe,te.side=3===pe?null!==oe.shadowSide?oe.shadowSide:oe.side:null!==oe.shadowSide?oe.shadowSide:E[oe.side],te.alphaMap=oe.alphaMap,te.alphaTest=oe.alphaTest,te.map=oe.map,te.clipShadows=oe.clipShadows,te.clippingPlanes=oe.clippingPlanes,te.clipIntersection=oe.clipIntersection,te.displacementMap=oe.displacementMap,te.displacementScale=oe.displacementScale,te.displacementBias=oe.displacementBias,te.wireframeLinewidth=oe.wireframeLinewidth,te.linewidth=oe.linewidth,!0===re.isPointLight&&!0===te.isMeshDistanceMaterial&&(s.properties.get(te).light=re),te}function Z(ie,oe,re,pe,te){if(!1===ie.visible)return;if(ie.layers.test(oe.layers)&&(ie.isMesh||ie.isLine||ie.isPoints)&&(ie.castShadow||ie.receiveShadow&&3===te)&&(!ie.frustumCulled||n.intersectsObject(ie))){ie.modelViewMatrix.multiplyMatrices(re.matrixWorldInverse,ie.matrixWorld);const dt=e.update(ie),bt=ie.material;if(Array.isArray(bt)){const De=dt.groups;for(let Ke=0,Ne=De.length;Ke<Ne;Ke++){const Ve=De[Ke],rt=bt[Ve.materialIndex];if(rt&&rt.visible){const Xe=j(ie,rt,pe,te);s.renderBufferDirect(re,null,dt,Xe,ie,Ve)}}}else if(bt.visible){const De=j(ie,bt,pe,te);s.renderBufferDirect(re,null,dt,De,ie,null)}}const ze=ie.children;for(let dt=0,bt=ze.length;dt<bt;dt++)Z(ze[dt],oe,re,pe,te)}this.render=function(ie,oe,re){if(!1===L.enabled||!1===L.autoUpdate&&!1===L.needsUpdate||0===ie.length)return;const pe=s.getRenderTarget(),te=s.getActiveCubeFace(),ae=s.getActiveMipmapLevel(),ze=s.state;ze.setBlending(0),ze.buffers.color.setClear(1,1,1,1),ze.buffers.depth.setTest(!0),ze.setScissorTest(!1);const dt=3!==O&&3===this.type,bt=3===O&&3!==this.type;for(let De=0,Ke=ie.length;De<Ke;De++){const Ne=ie[De],Ve=Ne.shadow;if(void 0===Ve){console.warn("THREE.WebGLShadowMap:",Ne,"has no shadow.");continue}if(!1===Ve.autoUpdate&&!1===Ve.needsUpdate)continue;i.copy(Ve.mapSize);const rt=Ve.getFrameExtents();if(i.multiply(rt),a.copy(Ve.mapSize),(i.x>y||i.y>y)&&(i.x>y&&(a.x=Math.floor(y/rt.x),i.x=a.x*rt.x,Ve.mapSize.x=a.x),i.y>y&&(a.y=Math.floor(y/rt.y),i.y=a.y*rt.y,Ve.mapSize.y=a.y)),null===Ve.map||!0===dt||!0===bt){const wt=3!==this.type?{minFilter:mr,magFilter:mr}:{};null!==Ve.map&&Ve.map.dispose(),Ve.map=new va(i.x,i.y,wt),Ve.map.texture.name=Ne.name+".shadowMap",Ve.camera.updateProjectionMatrix()}s.setRenderTarget(Ve.map),s.clear();const Xe=Ve.getViewportCount();for(let wt=0;wt<Xe;wt++){const Le=Ve.getViewport(wt);c.set(a.x*Le.x,a.y*Le.y,a.x*Le.z,a.y*Le.w),ze.viewport(c),Ve.updateMatrices(Ne,wt),n=Ve.getFrustum(),Z(oe,re,Ve.camera,Ne,this.type)}!0!==Ve.isPointLightShadow&&3===this.type&&q(Ve,re),Ve.needsUpdate=!1}O=this.type,L.needsUpdate=!1,s.setRenderTarget(pe,te,ae)}}function Tb(s,e,t){const n=t.isWebGL2,u=new function i(){let Ee=!1;const nn=new er;let Kt=null;const fn=new er(0,0,0,0);return{setMask:function(sn){Kt!==sn&&!Ee&&(s.colorMask(sn,sn,sn,sn),Kt=sn)},setLocked:function(sn){Ee=sn},setClear:function(sn,Ft,Fn,si,ho){!0===ho&&(sn*=si,Ft*=si,Fn*=si),nn.set(sn,Ft,Fn,si),!1===fn.equals(nn)&&(s.clearColor(sn,Ft,Fn,si),fn.copy(nn))},reset:function(){Ee=!1,Kt=null,fn.set(-1,0,0,0)}}},h=new function a(){let Ee=!1,nn=null,Kt=null,fn=null;return{setTest:function(sn){sn?un(s.DEPTH_TEST):xn(s.DEPTH_TEST)},setMask:function(sn){nn!==sn&&!Ee&&(s.depthMask(sn),nn=sn)},setFunc:function(sn){if(Kt!==sn){switch(sn){case 0:s.depthFunc(s.NEVER);break;case 1:s.depthFunc(s.ALWAYS);break;case 2:s.depthFunc(s.LESS);break;case 3:default:s.depthFunc(s.LEQUAL);break;case 4:s.depthFunc(s.EQUAL);break;case 5:s.depthFunc(s.GEQUAL);break;case 6:s.depthFunc(s.GREATER);break;case 7:s.depthFunc(s.NOTEQUAL)}Kt=sn}},setLocked:function(sn){Ee=sn},setClear:function(sn){fn!==sn&&(s.clearDepth(sn),fn=sn)},reset:function(){Ee=!1,nn=null,Kt=null,fn=null}}},g=new function c(){let Ee=!1,nn=null,Kt=null,fn=null,sn=null,Ft=null,Fn=null,si=null,ho=null;return{setTest:function(as){Ee||(as?un(s.STENCIL_TEST):xn(s.STENCIL_TEST))},setMask:function(as){nn!==as&&!Ee&&(s.stencilMask(as),nn=as)},setFunc:function(as,vd,ba){(Kt!==as||fn!==vd||sn!==ba)&&(s.stencilFunc(as,vd,ba),Kt=as,fn=vd,sn=ba)},setOp:function(as,vd,ba){(Ft!==as||Fn!==vd||si!==ba)&&(s.stencilOp(as,vd,ba),Ft=as,Fn=vd,si=ba)},setLocked:function(as){Ee=as},setClear:function(as){ho!==as&&(s.clearStencil(as),ho=as)},reset:function(){Ee=!1,nn=null,Kt=null,fn=null,sn=null,Ft=null,Fn=null,si=null,ho=null}}},y=new WeakMap,E=new WeakMap;let C={},T={},R=new WeakMap,B=[],L=null,O=!1,q=null,j=null,Z=null,ie=null,oe=null,re=null,pe=null,te=!1,ae=null,ze=null,dt=null,bt=null,De=null;const Ke=s.getParameter(s.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Ne=!1,Ve=0;const rt=s.getParameter(s.VERSION);-1!==rt.indexOf("WebGL")?(Ve=parseFloat(/^WebGL (\d)/.exec(rt)[1]),Ne=Ve>=1):-1!==rt.indexOf("OpenGL ES")&&(Ve=parseFloat(/^OpenGL ES (\d)/.exec(rt)[1]),Ne=Ve>=2);let Xe=null,wt={};const Le=s.getParameter(s.SCISSOR_BOX),ut=s.getParameter(s.VIEWPORT),Ht=(new er).fromArray(Le),Lt=(new er).fromArray(ut);function ln(Ee,nn,Kt,fn){const sn=new Uint8Array(4),Ft=s.createTexture();s.bindTexture(Ee,Ft),s.texParameteri(Ee,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(Ee,s.TEXTURE_MAG_FILTER,s.NEAREST);for(let Fn=0;Fn<Kt;Fn++)!n||Ee!==s.TEXTURE_3D&&Ee!==s.TEXTURE_2D_ARRAY?s.texImage2D(nn+Fn,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,sn):s.texImage3D(nn,0,s.RGBA,1,1,fn,0,s.RGBA,s.UNSIGNED_BYTE,sn);return Ft}const In={};function un(Ee){!0!==C[Ee]&&(s.enable(Ee),C[Ee]=!0)}function xn(Ee){!1!==C[Ee]&&(s.disable(Ee),C[Ee]=!1)}In[s.TEXTURE_2D]=ln(s.TEXTURE_2D,s.TEXTURE_2D,1),In[s.TEXTURE_CUBE_MAP]=ln(s.TEXTURE_CUBE_MAP,s.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(In[s.TEXTURE_2D_ARRAY]=ln(s.TEXTURE_2D_ARRAY,s.TEXTURE_2D_ARRAY,1,1),In[s.TEXTURE_3D]=ln(s.TEXTURE_3D,s.TEXTURE_3D,1,1)),u.setClear(0,0,0,1),h.setClear(1),g.setClear(0),un(s.DEPTH_TEST),h.setFunc(3),Ot(!1),Gn(1),un(s.CULL_FACE),Tt(0);const Ce={100:s.FUNC_ADD,101:s.FUNC_SUBTRACT,102:s.FUNC_REVERSE_SUBTRACT};if(n)Ce[103]=s.MIN,Ce[104]=s.MAX;else{const Ee=e.get("EXT_blend_minmax");null!==Ee&&(Ce[103]=Ee.MIN_EXT,Ce[104]=Ee.MAX_EXT)}const en={200:s.ZERO,201:s.ONE,202:s.SRC_COLOR,204:s.SRC_ALPHA,210:s.SRC_ALPHA_SATURATE,208:s.DST_COLOR,206:s.DST_ALPHA,203:s.ONE_MINUS_SRC_COLOR,205:s.ONE_MINUS_SRC_ALPHA,209:s.ONE_MINUS_DST_COLOR,207:s.ONE_MINUS_DST_ALPHA};function Tt(Ee,nn,Kt,fn,sn,Ft,Fn,si){if(0!==Ee){if(!1===O&&(un(s.BLEND),O=!0),5===Ee)sn=sn||nn,Ft=Ft||Kt,Fn=Fn||fn,(nn!==j||sn!==oe)&&(s.blendEquationSeparate(Ce[nn],Ce[sn]),j=nn,oe=sn),(Kt!==Z||fn!==ie||Ft!==re||Fn!==pe)&&(s.blendFuncSeparate(en[Kt],en[fn],en[Ft],en[Fn]),Z=Kt,ie=fn,re=Ft,pe=Fn),q=Ee,te=!1;else if(Ee!==q||si!==te){if((100!==j||100!==oe)&&(s.blendEquation(s.FUNC_ADD),j=100,oe=100),si)switch(Ee){case 1:s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case 2:s.blendFunc(s.ONE,s.ONE);break;case 3:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case 4:s.blendFuncSeparate(s.ZERO,s.SRC_COLOR,s.ZERO,s.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ee)}else switch(Ee){case 1:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case 2:s.blendFunc(s.SRC_ALPHA,s.ONE);break;case 3:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case 4:s.blendFunc(s.ZERO,s.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ee)}Z=null,ie=null,re=null,pe=null,q=Ee,te=si}}else!0===O&&(xn(s.BLEND),O=!1)}function Ot(Ee){ae!==Ee&&(s.frontFace(Ee?s.CW:s.CCW),ae=Ee)}function Gn(Ee){0!==Ee?(un(s.CULL_FACE),Ee!==ze&&s.cullFace(1===Ee?s.BACK:2===Ee?s.FRONT:s.FRONT_AND_BACK)):xn(s.CULL_FACE),ze=Ee}function An(Ee,nn,Kt){Ee?(un(s.POLYGON_OFFSET_FILL),(bt!==nn||De!==Kt)&&(s.polygonOffset(nn,Kt),bt=nn,De=Kt)):xn(s.POLYGON_OFFSET_FILL)}return{buffers:{color:u,depth:h,stencil:g},enable:un,disable:xn,bindFramebuffer:function Jn(Ee,nn){return T[Ee]!==nn&&(s.bindFramebuffer(Ee,nn),T[Ee]=nn,n&&(Ee===s.DRAW_FRAMEBUFFER&&(T[s.FRAMEBUFFER]=nn),Ee===s.FRAMEBUFFER&&(T[s.DRAW_FRAMEBUFFER]=nn)),!0)},drawBuffers:function Ni(Ee,nn){let Kt=B,fn=!1;if(Ee)if(Kt=R.get(nn),void 0===Kt&&(Kt=[],R.set(nn,Kt)),Ee.isWebGLMultipleRenderTargets){const sn=Ee.texture;if(Kt.length!==sn.length||Kt[0]!==s.COLOR_ATTACHMENT0){for(let Ft=0,Fn=sn.length;Ft<Fn;Ft++)Kt[Ft]=s.COLOR_ATTACHMENT0+Ft;Kt.length=sn.length,fn=!0}}else Kt[0]!==s.COLOR_ATTACHMENT0&&(Kt[0]=s.COLOR_ATTACHMENT0,fn=!0);else Kt[0]!==s.BACK&&(Kt[0]=s.BACK,fn=!0);fn&&(t.isWebGL2?s.drawBuffers(Kt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Kt))},useProgram:function Bn(Ee){return L!==Ee&&(s.useProgram(Ee),L=Ee,!0)},setBlending:Tt,setMaterial:function Wt(Ee,nn){2===Ee.side?xn(s.CULL_FACE):un(s.CULL_FACE);let Kt=1===Ee.side;nn&&(Kt=!Kt),Ot(Kt),1===Ee.blending&&!1===Ee.transparent?Tt(0):Tt(Ee.blending,Ee.blendEquation,Ee.blendSrc,Ee.blendDst,Ee.blendEquationAlpha,Ee.blendSrcAlpha,Ee.blendDstAlpha,Ee.premultipliedAlpha),h.setFunc(Ee.depthFunc),h.setTest(Ee.depthTest),h.setMask(Ee.depthWrite),u.setMask(Ee.colorWrite);const fn=Ee.stencilWrite;g.setTest(fn),fn&&(g.setMask(Ee.stencilWriteMask),g.setFunc(Ee.stencilFunc,Ee.stencilRef,Ee.stencilFuncMask),g.setOp(Ee.stencilFail,Ee.stencilZFail,Ee.stencilZPass)),An(Ee.polygonOffset,Ee.polygonOffsetFactor,Ee.polygonOffsetUnits),!0===Ee.alphaToCoverage?un(s.SAMPLE_ALPHA_TO_COVERAGE):xn(s.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Ot,setCullFace:Gn,setLineWidth:function Tn(Ee){Ee!==dt&&(Ne&&s.lineWidth(Ee),dt=Ee)},setPolygonOffset:An,setScissorTest:function ti(Ee){Ee?un(s.SCISSOR_TEST):xn(s.SCISSOR_TEST)},activeTexture:function Gi(Ee){void 0===Ee&&(Ee=s.TEXTURE0+Ke-1),Xe!==Ee&&(s.activeTexture(Ee),Xe=Ee)},bindTexture:function fs(Ee,nn,Kt){void 0===Kt&&(Kt=null===Xe?s.TEXTURE0+Ke-1:Xe);let fn=wt[Kt];void 0===fn&&(fn={type:void 0,texture:void 0},wt[Kt]=fn),(fn.type!==Ee||fn.texture!==nn)&&(Xe!==Kt&&(s.activeTexture(Kt),Xe=Kt),s.bindTexture(Ee,nn||In[Ee]),fn.type=Ee,fn.texture=nn)},unbindTexture:function me(){const Ee=wt[Xe];void 0!==Ee&&void 0!==Ee.type&&(s.bindTexture(Ee.type,null),Ee.type=void 0,Ee.texture=void 0)},compressedTexImage2D:function se(){try{s.compressedTexImage2D.apply(s,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},compressedTexImage3D:function nt(){try{s.compressedTexImage3D.apply(s,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},texImage2D:function Te(){try{s.texImage2D.apply(s,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},texImage3D:function Zt(){try{s.texImage3D.apply(s,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},updateUBOMapping:function zn(Ee,nn){let Kt=E.get(nn);void 0===Kt&&(Kt=new WeakMap,E.set(nn,Kt));let fn=Kt.get(Ee);void 0===fn&&(fn=s.getUniformBlockIndex(nn,Ee.name),Kt.set(Ee,fn))},uniformBlockBinding:function qn(Ee,nn){const fn=E.get(nn).get(Ee);y.get(nn)!==fn&&(s.uniformBlockBinding(nn,fn,Ee.__bindingPointIndex),y.set(nn,fn))},texStorage2D:function qt(){try{s.texStorage2D.apply(s,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},texStorage3D:function mn(){try{s.texStorage3D.apply(s,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},texSubImage2D:function zt(){try{s.texSubImage2D.apply(s,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},texSubImage3D:function Ut(){try{s.texSubImage3D.apply(s,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},compressedTexSubImage2D:function $t(){try{s.compressedTexSubImage2D.apply(s,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},compressedTexSubImage3D:function kn(){try{s.compressedTexSubImage3D.apply(s,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}},scissor:function It(Ee){!1===Ht.equals(Ee)&&(s.scissor(Ee.x,Ee.y,Ee.z,Ee.w),Ht.copy(Ee))},viewport:function ii(Ee){!1===Lt.equals(Ee)&&(s.viewport(Ee.x,Ee.y,Ee.z,Ee.w),Lt.copy(Ee))},reset:function Un(){s.disable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.DEPTH_TEST),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SCISSOR_TEST),s.disable(s.STENCIL_TEST),s.disable(s.SAMPLE_ALPHA_TO_COVERAGE),s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ZERO),s.blendFuncSeparate(s.ONE,s.ZERO,s.ONE,s.ZERO),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(s.LESS),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(s.ALWAYS,0,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.clearStencil(0),s.cullFace(s.BACK),s.frontFace(s.CCW),s.polygonOffset(0,0),s.activeTexture(s.TEXTURE0),s.bindFramebuffer(s.FRAMEBUFFER,null),!0===n&&(s.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),s.bindFramebuffer(s.READ_FRAMEBUFFER,null)),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),C={},Xe=null,wt={},T={},R=new WeakMap,B=[],L=null,O=!1,q=null,j=null,Z=null,ie=null,oe=null,re=null,pe=null,te=!1,ae=null,ze=null,dt=null,bt=null,De=null,Ht.set(0,0,s.canvas.width,s.canvas.height),Lt.set(0,0,s.canvas.width,s.canvas.height),u.reset(),h.reset(),g.reset()}}}function Db(s,e,t,n,i,a,c){const u=i.isWebGL2,h=i.maxTextures,g=i.maxCubemapSize,y=i.maxTextureSize,E=i.maxSamples,C=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,T=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),R=new WeakMap;let B;const L=new WeakMap;let O=!1;try{O=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function q(me,se){return O?new OffscreenCanvas(me,se):ru("canvas")}function j(me,se,nt,zt){let Ut=1;if((me.width>zt||me.height>zt)&&(Ut=zt/Math.max(me.width,me.height)),Ut<1||!0===se){if(typeof HTMLImageElement<"u"&&me instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&me instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&me instanceof ImageBitmap){const $t=se?Ih:Math.floor,kn=$t(Ut*me.width),qt=$t(Ut*me.height);void 0===B&&(B=q(kn,qt));const mn=nt?q(kn,qt):B;return mn.width=kn,mn.height=qt,mn.getContext("2d").drawImage(me,0,0,kn,qt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+me.width+"x"+me.height+") to ("+kn+"x"+qt+")."),mn}return"data"in me&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+me.width+"x"+me.height+")."),me}return me}function Z(me){return Dl(me.width)&&Dl(me.height)}function oe(me,se){return me.generateMipmaps&&se&&me.minFilter!==mr&&me.minFilter!==sr}function re(me){s.generateMipmap(me)}function pe(me,se,nt,zt,Ut=!1){if(!1===u)return se;if(null!==me){if(void 0!==s[me])return s[me];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+me+"'")}let $t=se;if(se===s.RED&&(nt===s.FLOAT&&($t=s.R32F),nt===s.HALF_FLOAT&&($t=s.R16F),nt===s.UNSIGNED_BYTE&&($t=s.R8)),se===s.RED_INTEGER&&(nt===s.UNSIGNED_BYTE&&($t=s.R8UI),nt===s.UNSIGNED_SHORT&&($t=s.R16UI),nt===s.UNSIGNED_INT&&($t=s.R32UI),nt===s.BYTE&&($t=s.R8I),nt===s.SHORT&&($t=s.R16I),nt===s.INT&&($t=s.R32I)),se===s.RG&&(nt===s.FLOAT&&($t=s.RG32F),nt===s.HALF_FLOAT&&($t=s.RG16F),nt===s.UNSIGNED_BYTE&&($t=s.RG8)),se===s.RGBA){const kn=Ut?Od:Zi.getTransfer(zt);nt===s.FLOAT&&($t=s.RGBA32F),nt===s.HALF_FLOAT&&($t=s.RGBA16F),nt===s.UNSIGNED_BYTE&&($t=kn===Lr?s.SRGB8_ALPHA8:s.RGBA8),nt===s.UNSIGNED_SHORT_4_4_4_4&&($t=s.RGBA4),nt===s.UNSIGNED_SHORT_5_5_5_1&&($t=s.RGB5_A1)}return($t===s.R16F||$t===s.R32F||$t===s.RG16F||$t===s.RG32F||$t===s.RGBA16F||$t===s.RGBA32F)&&e.get("EXT_color_buffer_float"),$t}function te(me,se,nt){return!0===oe(me,nt)||me.isFramebufferTexture&&me.minFilter!==mr&&me.minFilter!==sr?Math.log2(Math.max(se.width,se.height))+1:void 0!==me.mipmaps&&me.mipmaps.length>0?me.mipmaps.length:me.isCompressedTexture&&Array.isArray(me.image)?se.mipmaps.length:1}function ae(me){return me===mr||1004===me||1005===me?s.NEAREST:s.LINEAR}function ze(me){const se=me.target;se.removeEventListener("dispose",ze),function bt(me){const se=n.get(me);if(void 0===se.__webglInit)return;const nt=me.source,zt=L.get(nt);if(zt){const Ut=zt[se.__cacheKey];Ut.usedTimes--,0===Ut.usedTimes&&De(me),0===Object.keys(zt).length&&L.delete(nt)}n.remove(me)}(se),se.isVideoTexture&&R.delete(se)}function dt(me){const se=me.target;se.removeEventListener("dispose",dt),function Ke(me){const se=me.texture,nt=n.get(me),zt=n.get(se);if(void 0!==zt.__webglTexture&&(s.deleteTexture(zt.__webglTexture),c.memory.textures--),me.depthTexture&&me.depthTexture.dispose(),me.isWebGLCubeRenderTarget)for(let Ut=0;Ut<6;Ut++){if(Array.isArray(nt.__webglFramebuffer[Ut]))for(let $t=0;$t<nt.__webglFramebuffer[Ut].length;$t++)s.deleteFramebuffer(nt.__webglFramebuffer[Ut][$t]);else s.deleteFramebuffer(nt.__webglFramebuffer[Ut]);nt.__webglDepthbuffer&&s.deleteRenderbuffer(nt.__webglDepthbuffer[Ut])}else{if(Array.isArray(nt.__webglFramebuffer))for(let Ut=0;Ut<nt.__webglFramebuffer.length;Ut++)s.deleteFramebuffer(nt.__webglFramebuffer[Ut]);else s.deleteFramebuffer(nt.__webglFramebuffer);if(nt.__webglDepthbuffer&&s.deleteRenderbuffer(nt.__webglDepthbuffer),nt.__webglMultisampledFramebuffer&&s.deleteFramebuffer(nt.__webglMultisampledFramebuffer),nt.__webglColorRenderbuffer)for(let Ut=0;Ut<nt.__webglColorRenderbuffer.length;Ut++)nt.__webglColorRenderbuffer[Ut]&&s.deleteRenderbuffer(nt.__webglColorRenderbuffer[Ut]);nt.__webglDepthRenderbuffer&&s.deleteRenderbuffer(nt.__webglDepthRenderbuffer)}if(me.isWebGLMultipleRenderTargets)for(let Ut=0,$t=se.length;Ut<$t;Ut++){const kn=n.get(se[Ut]);kn.__webglTexture&&(s.deleteTexture(kn.__webglTexture),c.memory.textures--),n.remove(se[Ut])}n.remove(se),n.remove(me)}(se)}function De(me){const se=n.get(me);s.deleteTexture(se.__webglTexture),delete L.get(me.source)[se.__cacheKey],c.memory.textures--}let Ne=0;function wt(me,se){const nt=n.get(me);if(me.isVideoTexture&&function Gi(me){const se=c.render.frame;R.get(me)!==se&&(R.set(me,se),me.update())}(me),!1===me.isRenderTargetTexture&&me.version>0&&nt.__version!==me.version){const zt=me.image;if(null===zt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==zt.complete)return void Jn(nt,me,se);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(s.TEXTURE_2D,nt.__webglTexture,s.TEXTURE0+se)}const Lt={[Vs]:s.REPEAT,[pr]:s.CLAMP_TO_EDGE,1002:s.MIRRORED_REPEAT},ln={[mr]:s.NEAREST,1004:s.NEAREST_MIPMAP_NEAREST,1005:s.NEAREST_MIPMAP_LINEAR,[sr]:s.LINEAR,1007:s.LINEAR_MIPMAP_NEAREST,[Ga]:s.LINEAR_MIPMAP_LINEAR},In={512:s.NEVER,519:s.ALWAYS,513:s.LESS,515:s.LEQUAL,514:s.EQUAL,518:s.GEQUAL,516:s.GREATER,517:s.NOTEQUAL};function un(me,se,nt){if(nt?(s.texParameteri(me,s.TEXTURE_WRAP_S,Lt[se.wrapS]),s.texParameteri(me,s.TEXTURE_WRAP_T,Lt[se.wrapT]),(me===s.TEXTURE_3D||me===s.TEXTURE_2D_ARRAY)&&s.texParameteri(me,s.TEXTURE_WRAP_R,Lt[se.wrapR]),s.texParameteri(me,s.TEXTURE_MAG_FILTER,ln[se.magFilter]),s.texParameteri(me,s.TEXTURE_MIN_FILTER,ln[se.minFilter])):(s.texParameteri(me,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(me,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),(me===s.TEXTURE_3D||me===s.TEXTURE_2D_ARRAY)&&s.texParameteri(me,s.TEXTURE_WRAP_R,s.CLAMP_TO_EDGE),(se.wrapS!==pr||se.wrapT!==pr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),s.texParameteri(me,s.TEXTURE_MAG_FILTER,ae(se.magFilter)),s.texParameteri(me,s.TEXTURE_MIN_FILTER,ae(se.minFilter)),se.minFilter!==mr&&se.minFilter!==sr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),se.compareFunction&&(s.texParameteri(me,s.TEXTURE_COMPARE_MODE,s.COMPARE_REF_TO_TEXTURE),s.texParameteri(me,s.TEXTURE_COMPARE_FUNC,In[se.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const zt=e.get("EXT_texture_filter_anisotropic");if(se.magFilter===mr||1005!==se.minFilter&&se.minFilter!==Ga||se.type===aa&&!1===e.has("OES_texture_float_linear")||!1===u&&se.type===za&&!1===e.has("OES_texture_half_float_linear"))return;(se.anisotropy>1||n.get(se).__currentAnisotropy)&&(s.texParameterf(me,zt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(se.anisotropy,i.getMaxAnisotropy())),n.get(se).__currentAnisotropy=se.anisotropy)}}function xn(me,se){let nt=!1;void 0===me.__webglInit&&(me.__webglInit=!0,se.addEventListener("dispose",ze));const zt=se.source;let Ut=L.get(zt);void 0===Ut&&(Ut={},L.set(zt,Ut));const $t=function Xe(me){const se=[];return se.push(me.wrapS),se.push(me.wrapT),se.push(me.wrapR||0),se.push(me.magFilter),se.push(me.minFilter),se.push(me.anisotropy),se.push(me.internalFormat),se.push(me.format),se.push(me.type),se.push(me.generateMipmaps),se.push(me.premultiplyAlpha),se.push(me.flipY),se.push(me.unpackAlignment),se.push(me.colorSpace),se.join()}(se);if($t!==me.__cacheKey){void 0===Ut[$t]&&(Ut[$t]={texture:s.createTexture(),usedTimes:0},c.memory.textures++,nt=!0),Ut[$t].usedTimes++;const kn=Ut[me.__cacheKey];void 0!==kn&&(Ut[me.__cacheKey].usedTimes--,0===kn.usedTimes&&De(se)),me.__cacheKey=$t,me.__webglTexture=Ut[$t].texture}return nt}function Jn(me,se,nt){let zt=s.TEXTURE_2D;(se.isDataArrayTexture||se.isCompressedArrayTexture)&&(zt=s.TEXTURE_2D_ARRAY),se.isData3DTexture&&(zt=s.TEXTURE_3D);const Ut=xn(me,se),$t=se.source;t.bindTexture(zt,me.__webglTexture,s.TEXTURE0+nt);const kn=n.get($t);if($t.version!==kn.__version||!0===Ut){t.activeTexture(s.TEXTURE0+nt);const qt=Zi.getPrimaries(Zi.workingColorSpace),mn=""===se.colorSpace?null:Zi.getPrimaries(se.colorSpace),Te=""===se.colorSpace||qt===mn?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,se.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,se.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,Te);const Zt=function ie(me){return!u&&(me.wrapS!==pr||me.wrapT!==pr||me.minFilter!==mr&&me.minFilter!==sr)}(se)&&!1===Z(se.image);let It=j(se.image,Zt,!1,y);It=fs(se,It);const ii=Z(It)||u,zn=a.convert(se.format,se.colorSpace);let Ee,qn=a.convert(se.type),Un=pe(se.internalFormat,zn,qn,se.colorSpace,se.isVideoTexture);un(zt,se,ii);const nn=se.mipmaps,Kt=u&&!0!==se.isVideoTexture,fn=void 0===kn.__version||!0===Ut,sn=te(se,It,ii);if(se.isDepthTexture)Un=s.DEPTH_COMPONENT,u?Un=se.type===aa?s.DEPTH_COMPONENT32F:se.type===gr?s.DEPTH_COMPONENT24:se.type===us?s.DEPTH24_STENCIL8:s.DEPTH_COMPONENT16:se.type===aa&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),se.format===D&&Un===s.DEPTH_COMPONENT&&1012!==se.type&&se.type!==gr&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),se.type=gr,qn=a.convert(se.type)),se.format===A&&Un===s.DEPTH_COMPONENT&&(Un=s.DEPTH_STENCIL,se.type!==us&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),se.type=us,qn=a.convert(se.type))),fn&&(Kt?t.texStorage2D(s.TEXTURE_2D,1,Un,It.width,It.height):t.texImage2D(s.TEXTURE_2D,0,Un,It.width,It.height,0,zn,qn,null));else if(se.isDataTexture)if(nn.length>0&&ii){Kt&&fn&&t.texStorage2D(s.TEXTURE_2D,sn,Un,nn[0].width,nn[0].height);for(let Ft=0,Fn=nn.length;Ft<Fn;Ft++)Ee=nn[Ft],Kt?t.texSubImage2D(s.TEXTURE_2D,Ft,0,0,Ee.width,Ee.height,zn,qn,Ee.data):t.texImage2D(s.TEXTURE_2D,Ft,Un,Ee.width,Ee.height,0,zn,qn,Ee.data);se.generateMipmaps=!1}else Kt?(fn&&t.texStorage2D(s.TEXTURE_2D,sn,Un,It.width,It.height),t.texSubImage2D(s.TEXTURE_2D,0,0,0,It.width,It.height,zn,qn,It.data)):t.texImage2D(s.TEXTURE_2D,0,Un,It.width,It.height,0,zn,qn,It.data);else if(se.isCompressedTexture)if(se.isCompressedArrayTexture){Kt&&fn&&t.texStorage3D(s.TEXTURE_2D_ARRAY,sn,Un,nn[0].width,nn[0].height,It.depth);for(let Ft=0,Fn=nn.length;Ft<Fn;Ft++)Ee=nn[Ft],se.format!==vo?null!==zn?Kt?t.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Ft,0,0,0,Ee.width,Ee.height,It.depth,zn,Ee.data,0,0):t.compressedTexImage3D(s.TEXTURE_2D_ARRAY,Ft,Un,Ee.width,Ee.height,It.depth,0,Ee.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Kt?t.texSubImage3D(s.TEXTURE_2D_ARRAY,Ft,0,0,0,Ee.width,Ee.height,It.depth,zn,qn,Ee.data):t.texImage3D(s.TEXTURE_2D_ARRAY,Ft,Un,Ee.width,Ee.height,It.depth,0,zn,qn,Ee.data)}else{Kt&&fn&&t.texStorage2D(s.TEXTURE_2D,sn,Un,nn[0].width,nn[0].height);for(let Ft=0,Fn=nn.length;Ft<Fn;Ft++)Ee=nn[Ft],se.format!==vo?null!==zn?Kt?t.compressedTexSubImage2D(s.TEXTURE_2D,Ft,0,0,Ee.width,Ee.height,zn,Ee.data):t.compressedTexImage2D(s.TEXTURE_2D,Ft,Un,Ee.width,Ee.height,0,Ee.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Kt?t.texSubImage2D(s.TEXTURE_2D,Ft,0,0,Ee.width,Ee.height,zn,qn,Ee.data):t.texImage2D(s.TEXTURE_2D,Ft,Un,Ee.width,Ee.height,0,zn,qn,Ee.data)}else if(se.isDataArrayTexture)Kt?(fn&&t.texStorage3D(s.TEXTURE_2D_ARRAY,sn,Un,It.width,It.height,It.depth),t.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,0,It.width,It.height,It.depth,zn,qn,It.data)):t.texImage3D(s.TEXTURE_2D_ARRAY,0,Un,It.width,It.height,It.depth,0,zn,qn,It.data);else if(se.isData3DTexture)Kt?(fn&&t.texStorage3D(s.TEXTURE_3D,sn,Un,It.width,It.height,It.depth),t.texSubImage3D(s.TEXTURE_3D,0,0,0,0,It.width,It.height,It.depth,zn,qn,It.data)):t.texImage3D(s.TEXTURE_3D,0,Un,It.width,It.height,It.depth,0,zn,qn,It.data);else if(se.isFramebufferTexture){if(fn)if(Kt)t.texStorage2D(s.TEXTURE_2D,sn,Un,It.width,It.height);else{let Ft=It.width,Fn=It.height;for(let si=0;si<sn;si++)t.texImage2D(s.TEXTURE_2D,si,Un,Ft,Fn,0,zn,qn,null),Ft>>=1,Fn>>=1}}else if(nn.length>0&&ii){Kt&&fn&&t.texStorage2D(s.TEXTURE_2D,sn,Un,nn[0].width,nn[0].height);for(let Ft=0,Fn=nn.length;Ft<Fn;Ft++)Ee=nn[Ft],Kt?t.texSubImage2D(s.TEXTURE_2D,Ft,0,0,zn,qn,Ee):t.texImage2D(s.TEXTURE_2D,Ft,Un,zn,qn,Ee);se.generateMipmaps=!1}else Kt?(fn&&t.texStorage2D(s.TEXTURE_2D,sn,Un,It.width,It.height),t.texSubImage2D(s.TEXTURE_2D,0,0,0,zn,qn,It)):t.texImage2D(s.TEXTURE_2D,0,Un,zn,qn,It);oe(se,ii)&&re(zt),kn.__version=$t.version,se.onUpdate&&se.onUpdate(se)}me.__version=se.version}function Bn(me,se,nt,zt,Ut,$t){const kn=a.convert(nt.format,nt.colorSpace),qt=a.convert(nt.type),mn=pe(nt.internalFormat,kn,qt,nt.colorSpace);if(!n.get(se).__hasExternalTextures){const Zt=Math.max(1,se.width>>$t),It=Math.max(1,se.height>>$t);Ut===s.TEXTURE_3D||Ut===s.TEXTURE_2D_ARRAY?t.texImage3D(Ut,$t,mn,Zt,It,se.depth,0,kn,qt,null):t.texImage2D(Ut,$t,mn,Zt,It,0,kn,qt,null)}t.bindFramebuffer(s.FRAMEBUFFER,me),ti(se)?C.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,zt,Ut,n.get(nt).__webglTexture,0,An(se)):(Ut===s.TEXTURE_2D||Ut>=s.TEXTURE_CUBE_MAP_POSITIVE_X&&Ut<=s.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&s.framebufferTexture2D(s.FRAMEBUFFER,zt,Ut,n.get(nt).__webglTexture,$t),t.bindFramebuffer(s.FRAMEBUFFER,null)}function Ce(me,se,nt){if(s.bindRenderbuffer(s.RENDERBUFFER,me),se.depthBuffer&&!se.stencilBuffer){let zt=!0===u?s.DEPTH_COMPONENT24:s.DEPTH_COMPONENT16;if(nt||ti(se)){const Ut=se.depthTexture;Ut&&Ut.isDepthTexture&&(Ut.type===aa?zt=s.DEPTH_COMPONENT32F:Ut.type===gr&&(zt=s.DEPTH_COMPONENT24));const $t=An(se);ti(se)?C.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,$t,zt,se.width,se.height):s.renderbufferStorageMultisample(s.RENDERBUFFER,$t,zt,se.width,se.height)}else s.renderbufferStorage(s.RENDERBUFFER,zt,se.width,se.height);s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,me)}else if(se.depthBuffer&&se.stencilBuffer){const zt=An(se);nt&&!1===ti(se)?s.renderbufferStorageMultisample(s.RENDERBUFFER,zt,s.DEPTH24_STENCIL8,se.width,se.height):ti(se)?C.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,zt,s.DEPTH24_STENCIL8,se.width,se.height):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,se.width,se.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,me)}else{const zt=!0===se.isWebGLMultipleRenderTargets?se.texture:[se.texture];for(let Ut=0;Ut<zt.length;Ut++){const $t=zt[Ut],kn=a.convert($t.format,$t.colorSpace),qt=a.convert($t.type),mn=pe($t.internalFormat,kn,qt,$t.colorSpace),Te=An(se);nt&&!1===ti(se)?s.renderbufferStorageMultisample(s.RENDERBUFFER,Te,mn,se.width,se.height):ti(se)?C.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,Te,mn,se.width,se.height):s.renderbufferStorage(s.RENDERBUFFER,mn,se.width,se.height)}}s.bindRenderbuffer(s.RENDERBUFFER,null)}function Tt(me){const se=n.get(me),nt=!0===me.isWebGLCubeRenderTarget;if(me.depthTexture&&!se.__autoAllocateDepthBuffer){if(nt)throw new Error("target.depthTexture not supported in Cube render targets");!function en(me,se){if(se&&se.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(s.FRAMEBUFFER,me),!se.depthTexture||!se.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(se.depthTexture).__webglTexture||se.depthTexture.image.width!==se.width||se.depthTexture.image.height!==se.height)&&(se.depthTexture.image.width=se.width,se.depthTexture.image.height=se.height,se.depthTexture.needsUpdate=!0),wt(se.depthTexture,0);const zt=n.get(se.depthTexture).__webglTexture,Ut=An(se);if(se.depthTexture.format===D)ti(se)?C.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,zt,0,Ut):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,zt,0);else{if(se.depthTexture.format!==A)throw new Error("Unknown depthTexture format");ti(se)?C.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,zt,0,Ut):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,zt,0)}}(se.__webglFramebuffer,me)}else if(nt){se.__webglDepthbuffer=[];for(let zt=0;zt<6;zt++)t.bindFramebuffer(s.FRAMEBUFFER,se.__webglFramebuffer[zt]),se.__webglDepthbuffer[zt]=s.createRenderbuffer(),Ce(se.__webglDepthbuffer[zt],me,!1)}else t.bindFramebuffer(s.FRAMEBUFFER,se.__webglFramebuffer),se.__webglDepthbuffer=s.createRenderbuffer(),Ce(se.__webglDepthbuffer,me,!1);t.bindFramebuffer(s.FRAMEBUFFER,null)}function An(me){return Math.min(E,me.samples)}function ti(me){const se=n.get(me);return u&&me.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==se.__useRenderToTexture}function fs(me,se){const nt=me.colorSpace,zt=me.format,Ut=me.type;return!0===me.isCompressedTexture||!0===me.isVideoTexture||1035===me.format||nt!==oo&&""!==nt&&(Zi.getTransfer(nt)===Lr?!1===u?!0===e.has("EXT_sRGB")&&zt===vo?(me.format=1035,me.minFilter=sr,me.generateMipmaps=!1):se=Ud.sRGBToLinear(se):(zt!==vo||Ut!==Sl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",nt)),se}this.allocateTextureUnit=function rt(){const me=Ne;return me>=h&&console.warn("THREE.WebGLTextures: Trying to use "+me+" texture units while this GPU supports only "+h),Ne+=1,me},this.resetTextureUnits=function Ve(){Ne=0},this.setTexture2D=wt,this.setTexture2DArray=function Le(me,se){const nt=n.get(me);me.version>0&&nt.__version!==me.version?Jn(nt,me,se):t.bindTexture(s.TEXTURE_2D_ARRAY,nt.__webglTexture,s.TEXTURE0+se)},this.setTexture3D=function ut(me,se){const nt=n.get(me);me.version>0&&nt.__version!==me.version?Jn(nt,me,se):t.bindTexture(s.TEXTURE_3D,nt.__webglTexture,s.TEXTURE0+se)},this.setTextureCube=function Ht(me,se){const nt=n.get(me);me.version>0&&nt.__version!==me.version?function Ni(me,se,nt){if(6!==se.image.length)return;const zt=xn(me,se),Ut=se.source;t.bindTexture(s.TEXTURE_CUBE_MAP,me.__webglTexture,s.TEXTURE0+nt);const $t=n.get(Ut);if(Ut.version!==$t.__version||!0===zt){t.activeTexture(s.TEXTURE0+nt);const kn=Zi.getPrimaries(Zi.workingColorSpace),qt=""===se.colorSpace?null:Zi.getPrimaries(se.colorSpace),mn=""===se.colorSpace||kn===qt?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,se.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,se.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,mn);const Te=se.isCompressedTexture||se.image[0].isCompressedTexture,Zt=se.image[0]&&se.image[0].isDataTexture,It=[];for(let Ft=0;Ft<6;Ft++)It[Ft]=Te||Zt?Zt?se.image[Ft].image:se.image[Ft]:j(se.image[Ft],!1,!0,g),It[Ft]=fs(se,It[Ft]);const ii=It[0],zn=Z(ii)||u,qn=a.convert(se.format,se.colorSpace),Un=a.convert(se.type),Ee=pe(se.internalFormat,qn,Un,se.colorSpace),nn=u&&!0!==se.isVideoTexture,Kt=void 0===$t.__version||!0===zt;let sn,fn=te(se,ii,zn);if(un(s.TEXTURE_CUBE_MAP,se,zn),Te){nn&&Kt&&t.texStorage2D(s.TEXTURE_CUBE_MAP,fn,Ee,ii.width,ii.height);for(let Ft=0;Ft<6;Ft++){sn=It[Ft].mipmaps;for(let Fn=0;Fn<sn.length;Fn++){const si=sn[Fn];se.format!==vo?null!==qn?nn?t.compressedTexSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,Fn,0,0,si.width,si.height,qn,si.data):t.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,Fn,Ee,si.width,si.height,0,si.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):nn?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,Fn,0,0,si.width,si.height,qn,Un,si.data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,Fn,Ee,si.width,si.height,0,qn,Un,si.data)}}}else{sn=se.mipmaps,nn&&Kt&&(sn.length>0&&fn++,t.texStorage2D(s.TEXTURE_CUBE_MAP,fn,Ee,It[0].width,It[0].height));for(let Ft=0;Ft<6;Ft++)if(Zt){nn?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,0,0,0,It[Ft].width,It[Ft].height,qn,Un,It[Ft].data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,0,Ee,It[Ft].width,It[Ft].height,0,qn,Un,It[Ft].data);for(let Fn=0;Fn<sn.length;Fn++){const ho=sn[Fn].image[Ft].image;nn?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,Fn+1,0,0,ho.width,ho.height,qn,Un,ho.data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,Fn+1,Ee,ho.width,ho.height,0,qn,Un,ho.data)}}else{nn?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,0,0,0,qn,Un,It[Ft]):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,0,Ee,qn,Un,It[Ft]);for(let Fn=0;Fn<sn.length;Fn++){const si=sn[Fn];nn?t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,Fn+1,0,0,qn,Un,si.image[Ft]):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ft,Fn+1,Ee,qn,Un,si.image[Ft])}}}oe(se,zn)&&re(s.TEXTURE_CUBE_MAP),$t.__version=Ut.version,se.onUpdate&&se.onUpdate(se)}me.__version=se.version}(nt,me,se):t.bindTexture(s.TEXTURE_CUBE_MAP,nt.__webglTexture,s.TEXTURE0+se)},this.rebindTextures=function Wt(me,se,nt){const zt=n.get(me);void 0!==se&&Bn(zt.__webglFramebuffer,me,me.texture,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,0),void 0!==nt&&Tt(me)},this.setupRenderTarget=function Ot(me){const se=me.texture,nt=n.get(me),zt=n.get(se);me.addEventListener("dispose",dt),!0!==me.isWebGLMultipleRenderTargets&&(void 0===zt.__webglTexture&&(zt.__webglTexture=s.createTexture()),zt.__version=se.version,c.memory.textures++);const Ut=!0===me.isWebGLCubeRenderTarget,$t=!0===me.isWebGLMultipleRenderTargets,kn=Z(me)||u;if(Ut){nt.__webglFramebuffer=[];for(let qt=0;qt<6;qt++)if(u&&se.mipmaps&&se.mipmaps.length>0){nt.__webglFramebuffer[qt]=[];for(let mn=0;mn<se.mipmaps.length;mn++)nt.__webglFramebuffer[qt][mn]=s.createFramebuffer()}else nt.__webglFramebuffer[qt]=s.createFramebuffer()}else{if(u&&se.mipmaps&&se.mipmaps.length>0){nt.__webglFramebuffer=[];for(let qt=0;qt<se.mipmaps.length;qt++)nt.__webglFramebuffer[qt]=s.createFramebuffer()}else nt.__webglFramebuffer=s.createFramebuffer();if($t)if(i.drawBuffers){const qt=me.texture;for(let mn=0,Te=qt.length;mn<Te;mn++){const Zt=n.get(qt[mn]);void 0===Zt.__webglTexture&&(Zt.__webglTexture=s.createTexture(),c.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&me.samples>0&&!1===ti(me)){const qt=$t?se:[se];nt.__webglMultisampledFramebuffer=s.createFramebuffer(),nt.__webglColorRenderbuffer=[],t.bindFramebuffer(s.FRAMEBUFFER,nt.__webglMultisampledFramebuffer);for(let mn=0;mn<qt.length;mn++){const Te=qt[mn];nt.__webglColorRenderbuffer[mn]=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,nt.__webglColorRenderbuffer[mn]);const Zt=a.convert(Te.format,Te.colorSpace),It=a.convert(Te.type),ii=pe(Te.internalFormat,Zt,It,Te.colorSpace,!0===me.isXRRenderTarget),zn=An(me);s.renderbufferStorageMultisample(s.RENDERBUFFER,zn,ii,me.width,me.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+mn,s.RENDERBUFFER,nt.__webglColorRenderbuffer[mn])}s.bindRenderbuffer(s.RENDERBUFFER,null),me.depthBuffer&&(nt.__webglDepthRenderbuffer=s.createRenderbuffer(),Ce(nt.__webglDepthRenderbuffer,me,!0)),t.bindFramebuffer(s.FRAMEBUFFER,null)}}if(Ut){t.bindTexture(s.TEXTURE_CUBE_MAP,zt.__webglTexture),un(s.TEXTURE_CUBE_MAP,se,kn);for(let qt=0;qt<6;qt++)if(u&&se.mipmaps&&se.mipmaps.length>0)for(let mn=0;mn<se.mipmaps.length;mn++)Bn(nt.__webglFramebuffer[qt][mn],me,se,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+qt,mn);else Bn(nt.__webglFramebuffer[qt],me,se,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+qt,0);oe(se,kn)&&re(s.TEXTURE_CUBE_MAP),t.unbindTexture()}else if($t){const qt=me.texture;for(let mn=0,Te=qt.length;mn<Te;mn++){const Zt=qt[mn],It=n.get(Zt);t.bindTexture(s.TEXTURE_2D,It.__webglTexture),un(s.TEXTURE_2D,Zt,kn),Bn(nt.__webglFramebuffer,me,Zt,s.COLOR_ATTACHMENT0+mn,s.TEXTURE_2D,0),oe(Zt,kn)&&re(s.TEXTURE_2D)}t.unbindTexture()}else{let qt=s.TEXTURE_2D;if((me.isWebGL3DRenderTarget||me.isWebGLArrayRenderTarget)&&(u?qt=me.isWebGL3DRenderTarget?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(qt,zt.__webglTexture),un(qt,se,kn),u&&se.mipmaps&&se.mipmaps.length>0)for(let mn=0;mn<se.mipmaps.length;mn++)Bn(nt.__webglFramebuffer[mn],me,se,s.COLOR_ATTACHMENT0,qt,mn);else Bn(nt.__webglFramebuffer,me,se,s.COLOR_ATTACHMENT0,qt,0);oe(se,kn)&&re(qt),t.unbindTexture()}me.depthBuffer&&Tt(me)},this.updateRenderTargetMipmap=function Gn(me){const se=Z(me)||u,nt=!0===me.isWebGLMultipleRenderTargets?me.texture:[me.texture];for(let zt=0,Ut=nt.length;zt<Ut;zt++){const $t=nt[zt];if(oe($t,se)){const kn=me.isWebGLCubeRenderTarget?s.TEXTURE_CUBE_MAP:s.TEXTURE_2D,qt=n.get($t).__webglTexture;t.bindTexture(kn,qt),re(kn),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Tn(me){if(u&&me.samples>0&&!1===ti(me)){const se=me.isWebGLMultipleRenderTargets?me.texture:[me.texture],nt=me.width,zt=me.height;let Ut=s.COLOR_BUFFER_BIT;const $t=[],kn=me.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,qt=n.get(me),mn=!0===me.isWebGLMultipleRenderTargets;if(mn)for(let Te=0;Te<se.length;Te++)t.bindFramebuffer(s.FRAMEBUFFER,qt.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+Te,s.RENDERBUFFER,null),t.bindFramebuffer(s.FRAMEBUFFER,qt.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+Te,s.TEXTURE_2D,null,0);t.bindFramebuffer(s.READ_FRAMEBUFFER,qt.__webglMultisampledFramebuffer),t.bindFramebuffer(s.DRAW_FRAMEBUFFER,qt.__webglFramebuffer);for(let Te=0;Te<se.length;Te++){$t.push(s.COLOR_ATTACHMENT0+Te),me.depthBuffer&&$t.push(kn);const Zt=void 0!==qt.__ignoreDepthValues&&qt.__ignoreDepthValues;if(!1===Zt&&(me.depthBuffer&&(Ut|=s.DEPTH_BUFFER_BIT),me.stencilBuffer&&(Ut|=s.STENCIL_BUFFER_BIT)),mn&&s.framebufferRenderbuffer(s.READ_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,qt.__webglColorRenderbuffer[Te]),!0===Zt&&(s.invalidateFramebuffer(s.READ_FRAMEBUFFER,[kn]),s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,[kn])),mn){const It=n.get(se[Te]).__webglTexture;s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,It,0)}s.blitFramebuffer(0,0,nt,zt,0,0,nt,zt,Ut,s.NEAREST),T&&s.invalidateFramebuffer(s.READ_FRAMEBUFFER,$t)}if(t.bindFramebuffer(s.READ_FRAMEBUFFER,null),t.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),mn)for(let Te=0;Te<se.length;Te++){t.bindFramebuffer(s.FRAMEBUFFER,qt.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+Te,s.RENDERBUFFER,qt.__webglColorRenderbuffer[Te]);const Zt=n.get(se[Te]).__webglTexture;t.bindFramebuffer(s.FRAMEBUFFER,qt.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+Te,s.TEXTURE_2D,Zt,0)}t.bindFramebuffer(s.DRAW_FRAMEBUFFER,qt.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Tt,this.setupFrameBufferTexture=Bn,this.useMultisampledRTT=ti}function nf(s,e,t){const n=t.isWebGL2;return{convert:function i(a,c=""){let u;const h=Zi.getTransfer(c);if(a===Sl)return s.UNSIGNED_BYTE;if(1017===a)return s.UNSIGNED_SHORT_4_4_4_4;if(1018===a)return s.UNSIGNED_SHORT_5_5_5_1;if(1010===a)return s.BYTE;if(1011===a)return s.SHORT;if(1012===a)return s.UNSIGNED_SHORT;if(1013===a)return s.INT;if(a===gr)return s.UNSIGNED_INT;if(a===aa)return s.FLOAT;if(a===za)return n?s.HALF_FLOAT:(u=e.get("OES_texture_half_float"),null!==u?u.HALF_FLOAT_OES:null);if(1021===a)return s.ALPHA;if(a===vo)return s.RGBA;if(1024===a)return s.LUMINANCE;if(1025===a)return s.LUMINANCE_ALPHA;if(a===D)return s.DEPTH_COMPONENT;if(a===A)return s.DEPTH_STENCIL;if(1035===a)return u=e.get("EXT_sRGB"),null!==u?u.SRGB_ALPHA_EXT:null;if(1028===a)return s.RED;if(1029===a)return s.RED_INTEGER;if(1030===a)return s.RG;if(1031===a)return s.RG_INTEGER;if(1033===a)return s.RGBA_INTEGER;if(33776===a||33777===a||33778===a||33779===a)if(h===Lr){if(u=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===u)return null;if(33776===a)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===a)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===a)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===a)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(u=e.get("WEBGL_compressed_texture_s3tc"),null===u)return null;if(33776===a)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===a)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===a)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===a)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===a||35841===a||35842===a||35843===a){if(u=e.get("WEBGL_compressed_texture_pvrtc"),null===u)return null;if(35840===a)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===a)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===a)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===a)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===a)return u=e.get("WEBGL_compressed_texture_etc1"),null!==u?u.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===a||37496===a){if(u=e.get("WEBGL_compressed_texture_etc"),null===u)return null;if(37492===a)return h===Lr?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(37496===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}if(37808===a||37809===a||37810===a||37811===a||37812===a||37813===a||37814===a||37815===a||37816===a||37817===a||37818===a||37819===a||37820===a||37821===a){if(u=e.get("WEBGL_compressed_texture_astc"),null===u)return null;if(37808===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===a)return h===Lr?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===a||36494===a||36495===a){if(u=e.get("EXT_texture_compression_bptc"),null===u)return null;if(36492===a)return h===Lr?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===a)return u.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===a)return u.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===a||36284===a||36285===a||36286===a){if(u=e.get("EXT_texture_compression_rgtc"),null===u)return null;if(36492===a)return u.COMPRESSED_RED_RGTC1_EXT;if(36284===a)return u.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===a)return u.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===a)return u.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return a===us?n?s.UNSIGNED_INT_24_8:(u=e.get("WEBGL_depth_texture"),null!==u?u.UNSIGNED_INT_24_8_WEBGL:null):void 0!==s[a]?s[a]:null}}}class ZM extends Rr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class vu extends M{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ab={type:"move"};class _v{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new vu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new vu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ce,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ce),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new vu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ce,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ce),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,a=null,c=null;const u=this._targetRay,h=this._grip,g=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(g&&e.hand){c=!0;for(const B of e.hand.values()){const L=t.getJointPose(B,n),O=this._getHandJoint(g,B);null!==L&&(O.matrix.fromArray(L.transform.matrix),O.matrix.decompose(O.position,O.rotation,O.scale),O.matrixWorldNeedsUpdate=!0,O.jointRadius=L.radius),O.visible=null!==L}const C=g.joints["index-finger-tip"].position.distanceTo(g.joints["thumb-tip"].position),T=.02,R=.005;g.inputState.pinching&&C>T+R?(g.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!g.inputState.pinching&&C<=T-R&&(g.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==h&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),null!==a&&(h.matrix.fromArray(a.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,a.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(a.linearVelocity)):h.hasLinearVelocity=!1,a.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(a.angularVelocity)):h.hasAngularVelocity=!1));null!==u&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==a&&(i=a),null!==i&&(u.matrix.fromArray(i.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,i.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(i.linearVelocity)):u.hasLinearVelocity=!1,i.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(i.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(Ab)))}return null!==u&&(u.visible=null!==i),null!==h&&(h.visible=null!==a),null!==g&&(g.visible=null!==c),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new vu;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Rb extends Po{constructor(e,t,n,i,a,c,u,h,g,y){if((y=void 0!==y?y:D)!==D&&y!==A)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&y===D&&(n=gr),void 0===n&&y===A&&(n=us),super(null,i,a,c,u,h,y,n,g),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==u?u:mr,this.minFilter=void 0!==h?h:mr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class bx extends Tl{constructor(e,t){super();const n=this;let i=null,a=1,c=null,u="local-floor",h=1,g=null,y=null,E=null,C=null,T=null,R=null;const B=t.getContextAttributes();let L=null,O=null;const q=[],j=[],Z=new Rr;Z.layers.enable(1),Z.viewport=new er;const ie=new Rr;ie.layers.enable(2),ie.viewport=new er;const oe=[Z,ie],re=new ZM;re.layers.enable(1),re.layers.enable(2);let pe=null,te=null;function ae(Le){const ut=j.indexOf(Le.inputSource);if(-1===ut)return;const Ht=q[ut];void 0!==Ht&&(Ht.update(Le.inputSource,Le.frame,g||c),Ht.dispatchEvent({type:Le.type,data:Le.inputSource}))}function ze(){i.removeEventListener("select",ae),i.removeEventListener("selectstart",ae),i.removeEventListener("selectend",ae),i.removeEventListener("squeeze",ae),i.removeEventListener("squeezestart",ae),i.removeEventListener("squeezeend",ae),i.removeEventListener("end",ze),i.removeEventListener("inputsourceschange",dt);for(let Le=0;Le<q.length;Le++){const ut=j[Le];null!==ut&&(j[Le]=null,q[Le].disconnect(ut))}pe=null,te=null,e.setRenderTarget(L),T=null,C=null,E=null,i=null,O=null,wt.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function dt(Le){for(let ut=0;ut<Le.removed.length;ut++){const Ht=Le.removed[ut],Lt=j.indexOf(Ht);Lt>=0&&(j[Lt]=null,q[Lt].disconnect(Ht))}for(let ut=0;ut<Le.added.length;ut++){const Ht=Le.added[ut];let Lt=j.indexOf(Ht);if(-1===Lt){for(let In=0;In<q.length;In++){if(In>=j.length){j.push(Ht),Lt=In;break}if(null===j[In]){j[In]=Ht,Lt=In;break}}if(-1===Lt)break}const ln=q[Lt];ln&&ln.connect(Ht)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Le){let ut=q[Le];return void 0===ut&&(ut=new _v,q[Le]=ut),ut.getTargetRaySpace()},this.getControllerGrip=function(Le){let ut=q[Le];return void 0===ut&&(ut=new _v,q[Le]=ut),ut.getGripSpace()},this.getHand=function(Le){let ut=q[Le];return void 0===ut&&(ut=new _v,q[Le]=ut),ut.getHandSpace()},this.setFramebufferScaleFactor=function(Le){a=Le,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Le){u=Le,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return g||c},this.setReferenceSpace=function(Le){g=Le},this.getBaseLayer=function(){return null!==C?C:T},this.getBinding=function(){return E},this.getFrame=function(){return R},this.getSession=function(){return i},this.setSession=function(){var Le=function If(s){return function(){var e=this,t=arguments;return new Promise(function(n,i){var a=s.apply(e,t);function c(h){Md(a,n,i,c,u,"next",h)}function u(h){Md(a,n,i,c,u,"throw",h)}c(void 0)})}}(function*(ut){if(i=ut,null!==i){if(L=e.getRenderTarget(),i.addEventListener("select",ae),i.addEventListener("selectstart",ae),i.addEventListener("selectend",ae),i.addEventListener("squeeze",ae),i.addEventListener("squeezestart",ae),i.addEventListener("squeezeend",ae),i.addEventListener("end",ze),i.addEventListener("inputsourceschange",dt),!0!==B.xrCompatible&&(yield t.makeXRCompatible()),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2)T=new XRWebGLLayer(i,t,{antialias:void 0!==i.renderState.layers||B.antialias,alpha:!0,depth:B.depth,stencil:B.stencil,framebufferScaleFactor:a}),i.updateRenderState({baseLayer:T}),O=new va(T.framebufferWidth,T.framebufferHeight,{format:vo,type:Sl,colorSpace:e.outputColorSpace,stencilBuffer:B.stencil});else{let Ht=null,Lt=null,ln=null;B.depth&&(ln=B.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ht=B.stencil?A:D,Lt=B.stencil?us:gr);const In={colorFormat:t.RGBA8,depthFormat:ln,scaleFactor:a};E=new XRWebGLBinding(i,t),C=E.createProjectionLayer(In),i.updateRenderState({layers:[C]}),O=new va(C.textureWidth,C.textureHeight,{format:vo,type:Sl,depthTexture:new Rb(C.textureWidth,C.textureHeight,Lt,void 0,void 0,void 0,void 0,void 0,void 0,Ht),stencilBuffer:B.stencil,colorSpace:e.outputColorSpace,samples:B.antialias?4:0}),e.properties.get(O).__ignoreDepthValues=C.ignoreDepthValues}O.isXRRenderTarget=!0,this.setFoveation(h),g=null,c=yield i.requestReferenceSpace(u),wt.setContext(i),wt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(ut){return Le.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const bt=new ce,De=new ce;function Ne(Le,ut){null===ut?Le.matrixWorld.copy(Le.matrix):Le.matrixWorld.multiplyMatrices(ut.matrixWorld,Le.matrix),Le.matrixWorldInverse.copy(Le.matrixWorld).invert()}this.updateCamera=function(Le){if(null===i)return;re.near=ie.near=Z.near=Le.near,re.far=ie.far=Z.far=Le.far,(pe!==re.near||te!==re.far)&&(i.updateRenderState({depthNear:re.near,depthFar:re.far}),pe=re.near,te=re.far);const ut=Le.parent,Ht=re.cameras;Ne(re,ut);for(let Lt=0;Lt<Ht.length;Lt++)Ne(Ht[Lt],ut);2===Ht.length?function Ke(Le,ut,Ht){bt.setFromMatrixPosition(ut.matrixWorld),De.setFromMatrixPosition(Ht.matrixWorld);const Lt=bt.distanceTo(De),ln=ut.projectionMatrix.elements,In=Ht.projectionMatrix.elements,un=ln[14]/(ln[10]-1),xn=ln[14]/(ln[10]+1),Jn=(ln[9]+1)/ln[5],Ni=(ln[9]-1)/ln[5],Bn=(ln[8]-1)/ln[0],Ce=(In[8]+1)/In[0],en=un*Bn,Tt=un*Ce,Wt=Lt/(-Bn+Ce),Ot=Wt*-Bn;ut.matrixWorld.decompose(Le.position,Le.quaternion,Le.scale),Le.translateX(Ot),Le.translateZ(Wt),Le.matrixWorld.compose(Le.position,Le.quaternion,Le.scale),Le.matrixWorldInverse.copy(Le.matrixWorld).invert();const Gn=un+Wt,Tn=xn+Wt;Le.projectionMatrix.makePerspective(en-Ot,Tt+(Lt-Ot),Jn*xn/Tn*Gn,Ni*xn/Tn*Gn,Gn,Tn),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert()}(re,Z,ie):re.projectionMatrix.copy(Z.projectionMatrix),function Ve(Le,ut,Ht){null===Ht?Le.matrix.copy(ut.matrixWorld):(Le.matrix.copy(Ht.matrixWorld),Le.matrix.invert(),Le.matrix.multiply(ut.matrixWorld)),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.updateMatrixWorld(!0),Le.projectionMatrix.copy(ut.projectionMatrix),Le.projectionMatrixInverse.copy(ut.projectionMatrixInverse),Le.isPerspectiveCamera&&(Le.fov=2*Ld*Math.atan(1/Le.projectionMatrix.elements[5]),Le.zoom=1)}(Le,re,ut)},this.getCamera=function(){return re},this.getFoveation=function(){if(null!==C||null!==T)return h},this.setFoveation=function(Le){h=Le,null!==C&&(C.fixedFoveation=Le),null!==T&&void 0!==T.fixedFoveation&&(T.fixedFoveation=Le)};let rt=null;const wt=new s0;wt.setAnimationLoop(function Xe(Le,ut){if(y=ut.getViewerPose(g||c),R=ut,null!==y){const Ht=y.views;null!==T&&(e.setRenderTargetFramebuffer(O,T.framebuffer),e.setRenderTarget(O));let Lt=!1;Ht.length!==re.cameras.length&&(re.cameras.length=0,Lt=!0);for(let ln=0;ln<Ht.length;ln++){const In=Ht[ln];let un=null;if(null!==T)un=T.getViewport(In);else{const Jn=E.getViewSubImage(C,In);un=Jn.viewport,0===ln&&(e.setRenderTargetTextures(O,Jn.colorTexture,C.ignoreDepthValues?void 0:Jn.depthStencilTexture),e.setRenderTarget(O))}let xn=oe[ln];void 0===xn&&(xn=new Rr,xn.layers.enable(ln),xn.viewport=new er,oe[ln]=xn),xn.matrix.fromArray(In.transform.matrix),xn.matrix.decompose(xn.position,xn.quaternion,xn.scale),xn.projectionMatrix.fromArray(In.projectionMatrix),xn.projectionMatrixInverse.copy(xn.projectionMatrix).invert(),xn.viewport.set(un.x,un.y,un.width,un.height),0===ln&&(re.matrix.copy(xn.matrix),re.matrix.decompose(re.position,re.quaternion,re.scale)),!0===Lt&&re.cameras.push(xn)}}for(let Ht=0;Ht<q.length;Ht++){const Lt=j[Ht],ln=q[Ht];null!==Lt&&void 0!==ln&&ln.update(Lt,ut,g||c)}rt&&rt(Le,ut),ut.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:ut}),R=null}),this.setAnimationLoop=function(Le){rt=Le},this.dispose=function(){}}}function vv(s,e){function t(L,O){!0===L.matrixAutoUpdate&&L.updateMatrix(),O.value.copy(L.matrix)}function a(L,O){L.opacity.value=O.opacity,O.color&&L.diffuse.value.copy(O.color),O.emissive&&L.emissive.value.copy(O.emissive).multiplyScalar(O.emissiveIntensity),O.map&&(L.map.value=O.map,t(O.map,L.mapTransform)),O.alphaMap&&(L.alphaMap.value=O.alphaMap,t(O.alphaMap,L.alphaMapTransform)),O.bumpMap&&(L.bumpMap.value=O.bumpMap,t(O.bumpMap,L.bumpMapTransform),L.bumpScale.value=O.bumpScale,1===O.side&&(L.bumpScale.value*=-1)),O.normalMap&&(L.normalMap.value=O.normalMap,t(O.normalMap,L.normalMapTransform),L.normalScale.value.copy(O.normalScale),1===O.side&&L.normalScale.value.negate()),O.displacementMap&&(L.displacementMap.value=O.displacementMap,t(O.displacementMap,L.displacementMapTransform),L.displacementScale.value=O.displacementScale,L.displacementBias.value=O.displacementBias),O.emissiveMap&&(L.emissiveMap.value=O.emissiveMap,t(O.emissiveMap,L.emissiveMapTransform)),O.specularMap&&(L.specularMap.value=O.specularMap,t(O.specularMap,L.specularMapTransform)),O.alphaTest>0&&(L.alphaTest.value=O.alphaTest);const q=e.get(O).envMap;if(q&&(L.envMap.value=q,L.flipEnvMap.value=q.isCubeTexture&&!1===q.isRenderTargetTexture?-1:1,L.reflectivity.value=O.reflectivity,L.ior.value=O.ior,L.refractionRatio.value=O.refractionRatio),O.lightMap){L.lightMap.value=O.lightMap;const j=!0===s._useLegacyLights?Math.PI:1;L.lightMapIntensity.value=O.lightMapIntensity*j,t(O.lightMap,L.lightMapTransform)}O.aoMap&&(L.aoMap.value=O.aoMap,L.aoMapIntensity.value=O.aoMapIntensity,t(O.aoMap,L.aoMapTransform))}return{refreshFogUniforms:function n(L,O){O.color.getRGB(L.fogColor.value,e0(s)),O.isFog?(L.fogNear.value=O.near,L.fogFar.value=O.far):O.isFogExp2&&(L.fogDensity.value=O.density)},refreshMaterialUniforms:function i(L,O,q,j,Z){O.isMeshBasicMaterial||O.isMeshLambertMaterial?a(L,O):O.isMeshToonMaterial?(a(L,O),function E(L,O){O.gradientMap&&(L.gradientMap.value=O.gradientMap)}(L,O)):O.isMeshPhongMaterial?(a(L,O),function y(L,O){L.specular.value.copy(O.specular),L.shininess.value=Math.max(O.shininess,1e-4)}(L,O)):O.isMeshStandardMaterial?(a(L,O),function C(L,O){L.metalness.value=O.metalness,O.metalnessMap&&(L.metalnessMap.value=O.metalnessMap,t(O.metalnessMap,L.metalnessMapTransform)),L.roughness.value=O.roughness,O.roughnessMap&&(L.roughnessMap.value=O.roughnessMap,t(O.roughnessMap,L.roughnessMapTransform)),e.get(O).envMap&&(L.envMapIntensity.value=O.envMapIntensity)}(L,O),O.isMeshPhysicalMaterial&&function T(L,O,q){L.ior.value=O.ior,O.sheen>0&&(L.sheenColor.value.copy(O.sheenColor).multiplyScalar(O.sheen),L.sheenRoughness.value=O.sheenRoughness,O.sheenColorMap&&(L.sheenColorMap.value=O.sheenColorMap,t(O.sheenColorMap,L.sheenColorMapTransform)),O.sheenRoughnessMap&&(L.sheenRoughnessMap.value=O.sheenRoughnessMap,t(O.sheenRoughnessMap,L.sheenRoughnessMapTransform))),O.clearcoat>0&&(L.clearcoat.value=O.clearcoat,L.clearcoatRoughness.value=O.clearcoatRoughness,O.clearcoatMap&&(L.clearcoatMap.value=O.clearcoatMap,t(O.clearcoatMap,L.clearcoatMapTransform)),O.clearcoatRoughnessMap&&(L.clearcoatRoughnessMap.value=O.clearcoatRoughnessMap,t(O.clearcoatRoughnessMap,L.clearcoatRoughnessMapTransform)),O.clearcoatNormalMap&&(L.clearcoatNormalMap.value=O.clearcoatNormalMap,t(O.clearcoatNormalMap,L.clearcoatNormalMapTransform),L.clearcoatNormalScale.value.copy(O.clearcoatNormalScale),1===O.side&&L.clearcoatNormalScale.value.negate())),O.iridescence>0&&(L.iridescence.value=O.iridescence,L.iridescenceIOR.value=O.iridescenceIOR,L.iridescenceThicknessMinimum.value=O.iridescenceThicknessRange[0],L.iridescenceThicknessMaximum.value=O.iridescenceThicknessRange[1],O.iridescenceMap&&(L.iridescenceMap.value=O.iridescenceMap,t(O.iridescenceMap,L.iridescenceMapTransform)),O.iridescenceThicknessMap&&(L.iridescenceThicknessMap.value=O.iridescenceThicknessMap,t(O.iridescenceThicknessMap,L.iridescenceThicknessMapTransform))),O.transmission>0&&(L.transmission.value=O.transmission,L.transmissionSamplerMap.value=q.texture,L.transmissionSamplerSize.value.set(q.width,q.height),O.transmissionMap&&(L.transmissionMap.value=O.transmissionMap,t(O.transmissionMap,L.transmissionMapTransform)),L.thickness.value=O.thickness,O.thicknessMap&&(L.thicknessMap.value=O.thicknessMap,t(O.thicknessMap,L.thicknessMapTransform)),L.attenuationDistance.value=O.attenuationDistance,L.attenuationColor.value.copy(O.attenuationColor)),O.anisotropy>0&&(L.anisotropyVector.value.set(O.anisotropy*Math.cos(O.anisotropyRotation),O.anisotropy*Math.sin(O.anisotropyRotation)),O.anisotropyMap&&(L.anisotropyMap.value=O.anisotropyMap,t(O.anisotropyMap,L.anisotropyMapTransform))),L.specularIntensity.value=O.specularIntensity,L.specularColor.value.copy(O.specularColor),O.specularColorMap&&(L.specularColorMap.value=O.specularColorMap,t(O.specularColorMap,L.specularColorMapTransform)),O.specularIntensityMap&&(L.specularIntensityMap.value=O.specularIntensityMap,t(O.specularIntensityMap,L.specularIntensityMapTransform))}(L,O,Z)):O.isMeshMatcapMaterial?(a(L,O),function R(L,O){O.matcap&&(L.matcap.value=O.matcap)}(L,O)):O.isMeshDepthMaterial?a(L,O):O.isMeshDistanceMaterial?(a(L,O),function B(L,O){const q=e.get(O).light;L.referencePosition.value.setFromMatrixPosition(q.matrixWorld),L.nearDistance.value=q.shadow.camera.near,L.farDistance.value=q.shadow.camera.far}(L,O)):O.isMeshNormalMaterial?a(L,O):O.isLineBasicMaterial?(function c(L,O){L.diffuse.value.copy(O.color),L.opacity.value=O.opacity,O.map&&(L.map.value=O.map,t(O.map,L.mapTransform))}(L,O),O.isLineDashedMaterial&&function u(L,O){L.dashSize.value=O.dashSize,L.totalSize.value=O.dashSize+O.gapSize,L.scale.value=O.scale}(L,O)):O.isPointsMaterial?function h(L,O,q,j){L.diffuse.value.copy(O.color),L.opacity.value=O.opacity,L.size.value=O.size*q,L.scale.value=.5*j,O.map&&(L.map.value=O.map,t(O.map,L.uvTransform)),O.alphaMap&&(L.alphaMap.value=O.alphaMap,t(O.alphaMap,L.alphaMapTransform)),O.alphaTest>0&&(L.alphaTest.value=O.alphaTest)}(L,O,q,j):O.isSpriteMaterial?function g(L,O){L.diffuse.value.copy(O.color),L.opacity.value=O.opacity,L.rotation.value=O.rotation,O.map&&(L.map.value=O.map,t(O.map,L.mapTransform)),O.alphaMap&&(L.alphaMap.value=O.alphaMap,t(O.alphaMap,L.alphaMapTransform)),O.alphaTest>0&&(L.alphaTest.value=O.alphaTest)}(L,O):O.isShadowMaterial?(L.color.value.copy(O.color),L.opacity.value=O.opacity):O.isShaderMaterial&&(O.uniformsNeedUpdate=!1)}}}function yv(s,e,t,n){let i={},a={},c=[];const u=t.isWebGL2?s.getParameter(s.MAX_UNIFORM_BUFFER_BINDINGS):0;function T(q,j,Z){const ie=q.value;if(void 0===Z[j]){if("number"==typeof ie)Z[j]=ie;else{const oe=Array.isArray(ie)?ie:[ie],re=[];for(let pe=0;pe<oe.length;pe++)re.push(oe[pe].clone());Z[j]=re}return!0}if("number"==typeof ie){if(Z[j]!==ie)return Z[j]=ie,!0}else{const oe=Array.isArray(Z[j])?Z[j]:[Z[j]],re=Array.isArray(ie)?ie:[ie];for(let pe=0;pe<oe.length;pe++){const te=oe[pe];if(!1===te.equals(re[pe]))return te.copy(re[pe]),!0}}return!1}function B(q){const j={boundary:0,storage:0};return"number"==typeof q?(j.boundary=4,j.storage=4):q.isVector2?(j.boundary=8,j.storage=8):q.isVector3||q.isColor?(j.boundary=16,j.storage=12):q.isVector4?(j.boundary=16,j.storage=16):q.isMatrix3?(j.boundary=48,j.storage=48):q.isMatrix4?(j.boundary=64,j.storage=64):q.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",q),j}function L(q){const j=q.target;j.removeEventListener("dispose",L);const Z=c.indexOf(j.__bindingPointIndex);c.splice(Z,1),s.deleteBuffer(i[j.id]),delete i[j.id],delete a[j.id]}return{bind:function h(q,j){n.uniformBlockBinding(q,j.program)},update:function g(q,j){let Z=i[q.id];void 0===Z&&(function R(q){const j=q.uniforms;let Z=0;let oe=0;for(let re=0,pe=j.length;re<pe;re++){const te=j[re],ae={boundary:0,storage:0},ze=Array.isArray(te.value)?te.value:[te.value];for(let dt=0,bt=ze.length;dt<bt;dt++){const Ke=B(ze[dt]);ae.boundary+=Ke.boundary,ae.storage+=Ke.storage}if(te.__data=new Float32Array(ae.storage/Float32Array.BYTES_PER_ELEMENT),te.__offset=Z,re>0){oe=Z%16;const dt=16-oe;0!==oe&&dt-ae.boundary<0&&(Z+=16-oe,te.__offset=Z)}Z+=ae.storage}oe=Z%16,oe>0&&(Z+=16-oe),q.__size=Z,q.__cache={}}(q),Z=function y(q){const j=function E(){for(let q=0;q<u;q++)if(-1===c.indexOf(q))return c.push(q),q;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();q.__bindingPointIndex=j;const Z=s.createBuffer(),ie=q.__size,oe=q.usage;return s.bindBuffer(s.UNIFORM_BUFFER,Z),s.bufferData(s.UNIFORM_BUFFER,ie,oe),s.bindBuffer(s.UNIFORM_BUFFER,null),s.bindBufferBase(s.UNIFORM_BUFFER,j,Z),Z}(q),i[q.id]=Z,q.addEventListener("dispose",L)),n.updateUBOMapping(q,j.program);const oe=e.render.frame;a[q.id]!==oe&&(function C(q){const Z=q.uniforms,ie=q.__cache;s.bindBuffer(s.UNIFORM_BUFFER,i[q.id]);for(let oe=0,re=Z.length;oe<re;oe++){const pe=Z[oe];if(!0===T(pe,oe,ie)){const te=pe.__offset,ae=Array.isArray(pe.value)?pe.value:[pe.value];let ze=0;for(let dt=0;dt<ae.length;dt++){const bt=ae[dt],De=B(bt);"number"==typeof bt?(pe.__data[0]=bt,s.bufferSubData(s.UNIFORM_BUFFER,te+ze,pe.__data)):bt.isMatrix3?(pe.__data[0]=bt.elements[0],pe.__data[1]=bt.elements[1],pe.__data[2]=bt.elements[2],pe.__data[3]=bt.elements[0],pe.__data[4]=bt.elements[3],pe.__data[5]=bt.elements[4],pe.__data[6]=bt.elements[5],pe.__data[7]=bt.elements[0],pe.__data[8]=bt.elements[6],pe.__data[9]=bt.elements[7],pe.__data[10]=bt.elements[8],pe.__data[11]=bt.elements[0]):(bt.toArray(pe.__data,ze),ze+=De.storage/Float32Array.BYTES_PER_ELEMENT)}s.bufferSubData(s.UNIFORM_BUFFER,te,pe.__data)}}s.bindBuffer(s.UNIFORM_BUFFER,null)}(q),a[q.id]=oe)},dispose:function O(){for(const q in i)s.deleteBuffer(i[q]);c=[],i={},a={}}}}class Gl{constructor(e={}){const{canvas:t=Tm(),context:n=null,depth:i=!0,stencil:a=!0,alpha:c=!1,antialias:u=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:g=!1,powerPreference:y="default",failIfMajorPerformanceCaveat:E=!1}=e;let C;this.isWebGLRenderer=!0,C=null!==n?n.getContextAttributes().alpha:c;const T=new Uint32Array(4),R=new Int32Array(4);let B=null,L=null;const O=[],q=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Pr,this._useLegacyLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const j=this;let Z=!1,ie=0,oe=0,re=null,pe=-1,te=null;const ae=new er,ze=new er;let dt=null;const bt=new Rt(0);let De=0,Ke=t.width,Ne=t.height,Ve=1,rt=null,Xe=null;const wt=new er(0,0,Ke,Ne),Le=new er(0,0,Ke,Ne);let ut=!1;const Ht=new N_;let Lt=!1,ln=!1,In=null;const un=new Kn,xn=new yt,Jn=new ce,Ni={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Bn(){return null===re?Ve:1}let Tt,Wt,Ot,Gn,Tn,An,ti,Gi,fs,me,se,nt,zt,Ut,$t,kn,qt,mn,Te,Zt,It,ii,zn,qn,Ce=n;function en(fe,Je){for(let _t=0;_t<fe.length;_t++){const vt=t.getContext(fe[_t],Je);if(null!==vt)return vt}return null}try{const fe={alpha:!0,depth:i,stencil:a,antialias:u,premultipliedAlpha:h,preserveDrawingBuffer:g,powerPreference:y,failIfMajorPerformanceCaveat:E};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r157"),t.addEventListener("webglcontextlost",nn,!1),t.addEventListener("webglcontextrestored",Kt,!1),t.addEventListener("webglcontextcreationerror",fn,!1),null===Ce){const Je=["webgl2","webgl","experimental-webgl"];if(!0===j.isWebGL1Renderer&&Je.shift(),Ce=en(Je,fe),null===Ce)throw en(Je)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Ce instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===Ce.getShaderPrecisionFormat&&(Ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(fe){throw console.error("THREE.WebGLRenderer: "+fe.message),fe}function Un(){Tt=new _x(Ce),Wt=new xM(Ce,Tt,e),Tt.init(Wt),ii=new nf(Ce,Tt,Wt),Ot=new Tb(Ce,Tt,Wt),Gn=new X0(Ce),Tn=new yb,An=new Db(Ce,Tt,Ot,Tn,Wt,ii,Gn),ti=new U0(j),Gi=new J_(j),fs=new Ul(Ce,Wt),zn=new CM(Ce,Tt,fs,Wt),me=new $0(Ce,fs,Gn,zn),se=new Qm(Ce,me,fs,Gn),Te=new _u(Ce,Wt,An),kn=new TM(Tn),nt=new vb(j,ti,Gi,Tt,Wt,zn,kn),zt=new vv(j,Tn),Ut=new wb,$t=new Ws(Tt,Wt),mn=new k0(j,ti,Gi,Ot,se,C,h),qt=new qM(j,se,Wt),qn=new yv(Ce,Gn,Wt,Ot),Zt=new B0(Ce,Tt,Gn,Wt),It=new Y0(Ce,Tt,Gn,Wt),Gn.programs=nt.programs,j.capabilities=Wt,j.extensions=Tt,j.properties=Tn,j.renderLists=Ut,j.shadowMap=qt,j.state=Ot,j.info=Gn}Un();const Ee=new bx(j,Ce);function nn(fe){fe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Z=!0}function Kt(){console.log("THREE.WebGLRenderer: Context Restored."),Z=!1;const fe=Gn.autoReset,Je=qt.enabled,_t=qt.autoUpdate,et=qt.needsUpdate,vt=qt.type;Un(),Gn.autoReset=fe,qt.enabled=Je,qt.autoUpdate=_t,qt.needsUpdate=et,qt.type=vt}function fn(fe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",fe.statusMessage)}function sn(fe){const Je=fe.target;Je.removeEventListener("dispose",sn),function Ft(fe){(function Fn(fe){const Je=Tn.get(fe).programs;void 0!==Je&&(Je.forEach(function(_t){nt.releaseProgram(_t)}),fe.isShaderMaterial&&nt.releaseShaderCache(fe))})(fe),Tn.remove(fe)}(Je)}this.xr=Ee,this.getContext=function(){return Ce},this.getContextAttributes=function(){return Ce.getContextAttributes()},this.forceContextLoss=function(){const fe=Tt.get("WEBGL_lose_context");fe&&fe.loseContext()},this.forceContextRestore=function(){const fe=Tt.get("WEBGL_lose_context");fe&&fe.restoreContext()},this.getPixelRatio=function(){return Ve},this.setPixelRatio=function(fe){void 0!==fe&&(Ve=fe,this.setSize(Ke,Ne,!1))},this.getSize=function(fe){return fe.set(Ke,Ne)},this.setSize=function(fe,Je,_t=!0){Ee.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ke=fe,Ne=Je,t.width=Math.floor(fe*Ve),t.height=Math.floor(Je*Ve),!0===_t&&(t.style.width=fe+"px",t.style.height=Je+"px"),this.setViewport(0,0,fe,Je))},this.getDrawingBufferSize=function(fe){return fe.set(Ke*Ve,Ne*Ve).floor()},this.setDrawingBufferSize=function(fe,Je,_t){Ke=fe,Ne=Je,Ve=_t,t.width=Math.floor(fe*_t),t.height=Math.floor(Je*_t),this.setViewport(0,0,fe,Je)},this.getCurrentViewport=function(fe){return fe.copy(ae)},this.getViewport=function(fe){return fe.copy(wt)},this.setViewport=function(fe,Je,_t,et){fe.isVector4?wt.set(fe.x,fe.y,fe.z,fe.w):wt.set(fe,Je,_t,et),Ot.viewport(ae.copy(wt).multiplyScalar(Ve).floor())},this.getScissor=function(fe){return fe.copy(Le)},this.setScissor=function(fe,Je,_t,et){fe.isVector4?Le.set(fe.x,fe.y,fe.z,fe.w):Le.set(fe,Je,_t,et),Ot.scissor(ze.copy(Le).multiplyScalar(Ve).floor())},this.getScissorTest=function(){return ut},this.setScissorTest=function(fe){Ot.setScissorTest(ut=fe)},this.setOpaqueSort=function(fe){rt=fe},this.setTransparentSort=function(fe){Xe=fe},this.getClearColor=function(fe){return fe.copy(mn.getClearColor())},this.setClearColor=function(){mn.setClearColor.apply(mn,arguments)},this.getClearAlpha=function(){return mn.getClearAlpha()},this.setClearAlpha=function(){mn.setClearAlpha.apply(mn,arguments)},this.clear=function(fe=!0,Je=!0,_t=!0){let et=0;if(fe){let vt=!1;if(null!==re){const Nn=re.texture.format;vt=1033===Nn||1031===Nn||1029===Nn}if(vt){const Nn=re.texture.type,Qn=Nn===Sl||Nn===gr||1012===Nn||Nn===us||1017===Nn||1018===Nn,mi=mn.getClearColor(),gi=mn.getClearAlpha(),zi=mi.r,di=mi.g,Pi=mi.b;Qn?(T[0]=zi,T[1]=di,T[2]=Pi,T[3]=gi,Ce.clearBufferuiv(Ce.COLOR,0,T)):(R[0]=zi,R[1]=di,R[2]=Pi,R[3]=gi,Ce.clearBufferiv(Ce.COLOR,0,R))}else et|=Ce.COLOR_BUFFER_BIT}Je&&(et|=Ce.DEPTH_BUFFER_BIT),_t&&(et|=Ce.STENCIL_BUFFER_BIT),Ce.clear(et)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",nn,!1),t.removeEventListener("webglcontextrestored",Kt,!1),t.removeEventListener("webglcontextcreationerror",fn,!1),Ut.dispose(),$t.dispose(),Tn.dispose(),ti.dispose(),Gi.dispose(),se.dispose(),zn.dispose(),qn.dispose(),nt.dispose(),Ee.dispose(),Ee.removeEventListener("sessionstart",as),Ee.removeEventListener("sessionend",vd),In&&(In.dispose(),In=null),ba.stop()},this.renderBufferDirect=function(fe,Je,_t,et,vt,Nn){null===Je&&(Je=Ni);const Qn=vt.isMesh&&vt.matrixWorld.determinant()<0,mi=function xR(fe,Je,_t,et,vt){!0!==Je.isScene&&(Je=Ni),An.resetTextureUnits();const Nn=Je.fog,mi=null===re?j.outputColorSpace:!0===re.isXRRenderTarget?re.texture.colorSpace:oo,gi=(et.isMeshStandardMaterial?Gi:ti).get(et.envMap||(et.isMeshStandardMaterial?Je.environment:null)),zi=!0===et.vertexColors&&!!_t.attributes.color&&4===_t.attributes.color.itemSize,di=!!_t.attributes.tangent&&(!!et.normalMap||et.anisotropy>0),Pi=!!_t.morphAttributes.position,Is=!!_t.morphAttributes.normal,Ys=!!_t.morphAttributes.color;let Rc=0;et.toneMapped&&(null===re||!0===re.isXRRenderTarget)&&(Rc=j.toneMapping);const gh=_t.morphAttributes.position||_t.morphAttributes.normal||_t.morphAttributes.color,fo=void 0!==gh?gh.length:0,$i=Tn.get(et),RC=L.state.lights;!0!==Lt||!0!==ln&&fe===te||kn.setState(et,fe,fe===te&&et.id===pe);let po=!1;et.version===$i.__version?($i.needsLights&&$i.lightsStateVersion!==RC.state.version||$i.outputColorSpace!==mi||vt.isInstancedMesh&&!1===$i.instancing||!vt.isInstancedMesh&&!0===$i.instancing||vt.isSkinnedMesh&&!1===$i.skinning||!vt.isSkinnedMesh&&!0===$i.skinning||vt.isInstancedMesh&&!0===$i.instancingColor&&null===vt.instanceColor||vt.isInstancedMesh&&!1===$i.instancingColor&&null!==vt.instanceColor||$i.envMap!==gi||!0===et.fog&&$i.fog!==Nn||void 0!==$i.numClippingPlanes&&($i.numClippingPlanes!==kn.numPlanes||$i.numIntersection!==kn.numIntersection)||$i.vertexAlphas!==zi||$i.vertexTangents!==di||$i.morphTargets!==Pi||$i.morphNormals!==Is||$i.morphColors!==Ys||$i.toneMapping!==Rc||!0===Wt.isWebGL2&&$i.morphTargetsCount!==fo)&&(po=!0):(po=!0,$i.__version=et.version);let nm=$i.currentProgram;!0===po&&(nm=AE(et,Je,vt));let fT=!1,Hy=!1,IC=!1;const wa=nm.getUniforms(),im=$i.uniforms;if(Ot.useProgram(nm.program)&&(fT=!0,Hy=!0,IC=!0),et.id!==pe&&(pe=et.id,Hy=!0),fT||te!==fe){wa.setValue(Ce,"projectionMatrix",fe.projectionMatrix),wa.setValue(Ce,"viewMatrix",fe.matrixWorldInverse);const Yl=wa.map.cameraPosition;void 0!==Yl&&Yl.setValue(Ce,Jn.setFromMatrixPosition(fe.matrixWorld)),Wt.logarithmicDepthBuffer&&wa.setValue(Ce,"logDepthBufFC",2/(Math.log(fe.far+1)/Math.LN2)),(et.isMeshPhongMaterial||et.isMeshToonMaterial||et.isMeshLambertMaterial||et.isMeshBasicMaterial||et.isMeshStandardMaterial||et.isShaderMaterial)&&wa.setValue(Ce,"isOrthographic",!0===fe.isOrthographicCamera),te!==fe&&(te=fe,Hy=!0,IC=!0)}if(vt.isSkinnedMesh){wa.setOptional(Ce,vt,"bindMatrix"),wa.setOptional(Ce,vt,"bindMatrixInverse");const Yl=vt.skeleton;Yl&&(Wt.floatVertexTextures?(null===Yl.boneTexture&&Yl.computeBoneTexture(),wa.setValue(Ce,"boneTexture",Yl.boneTexture,An),wa.setValue(Ce,"boneTextureSize",Yl.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const OC=_t.morphAttributes;if((void 0!==OC.position||void 0!==OC.normal||void 0!==OC.color&&!0===Wt.isWebGL2)&&Te.update(vt,_t,nm),(Hy||$i.receiveShadow!==vt.receiveShadow)&&($i.receiveShadow=vt.receiveShadow,wa.setValue(Ce,"receiveShadow",vt.receiveShadow)),et.isMeshGouraudMaterial&&null!==et.envMap&&(im.envMap.value=gi,im.flipEnvMap.value=gi.isCubeTexture&&!1===gi.isRenderTargetTexture?-1:1),Hy&&(wa.setValue(Ce,"toneMappingExposure",j.toneMappingExposure),$i.needsLights&&function TR(fe,Je){fe.ambientLightColor.needsUpdate=Je,fe.lightProbe.needsUpdate=Je,fe.directionalLights.needsUpdate=Je,fe.directionalLightShadows.needsUpdate=Je,fe.pointLights.needsUpdate=Je,fe.pointLightShadows.needsUpdate=Je,fe.spotLights.needsUpdate=Je,fe.spotLightShadows.needsUpdate=Je,fe.rectAreaLights.needsUpdate=Je,fe.hemisphereLights.needsUpdate=Je}(im,IC),Nn&&!0===et.fog&&zt.refreshFogUniforms(im,Nn),zt.refreshMaterialUniforms(im,et,Ve,Ne,In),sg.upload(Ce,$i.uniformsList,im,An)),et.isShaderMaterial&&!0===et.uniformsNeedUpdate&&(sg.upload(Ce,$i.uniformsList,im,An),et.uniformsNeedUpdate=!1),et.isSpriteMaterial&&wa.setValue(Ce,"center",vt.center),wa.setValue(Ce,"modelViewMatrix",vt.modelViewMatrix),wa.setValue(Ce,"normalMatrix",vt.normalMatrix),wa.setValue(Ce,"modelMatrix",vt.matrixWorld),et.isShaderMaterial||et.isRawShaderMaterial){const Yl=et.uniformsGroups;for(let NC=0,AR=Yl.length;NC<AR;NC++)if(Wt.isWebGL2){const pT=Yl[NC];qn.update(pT,nm),qn.bind(pT,nm)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return nm}(fe,Je,_t,et,vt);Ot.setMaterial(et,Qn);let gi=_t.index,zi=1;if(!0===et.wireframe){if(gi=me.getWireframeAttribute(_t),void 0===gi)return;zi=2}const di=_t.drawRange,Pi=_t.attributes.position;let Is=di.start*zi,Ys=(di.start+di.count)*zi;null!==Nn&&(Is=Math.max(Is,Nn.start*zi),Ys=Math.min(Ys,(Nn.start+Nn.count)*zi)),null!==gi?(Is=Math.max(Is,0),Ys=Math.min(Ys,gi.count)):null!=Pi&&(Is=Math.max(Is,0),Ys=Math.min(Ys,Pi.count));const Rc=Ys-Is;if(Rc<0||Rc===1/0)return;zn.setup(vt,et,mi,_t,gi);let gh,fo=Zt;if(null!==gi&&(gh=fs.get(gi),fo=It,fo.setIndex(gh)),vt.isMesh)!0===et.wireframe?(Ot.setLineWidth(et.wireframeLinewidth*Bn()),fo.setMode(Ce.LINES)):fo.setMode(Ce.TRIANGLES);else if(vt.isLine){let $i=et.linewidth;void 0===$i&&($i=1),Ot.setLineWidth($i*Bn()),fo.setMode(vt.isLineSegments?Ce.LINES:vt.isLineLoop?Ce.LINE_LOOP:Ce.LINE_STRIP)}else vt.isPoints?fo.setMode(Ce.POINTS):vt.isSprite&&fo.setMode(Ce.TRIANGLES);if(vt.isInstancedMesh)fo.renderInstances(Is,Rc,vt.count);else if(_t.isInstancedBufferGeometry){const RC=Math.min(_t.instanceCount,void 0!==_t._maxInstanceCount?_t._maxInstanceCount:1/0);fo.renderInstances(Is,Rc,RC)}else fo.render(Is,Rc)},this.compile=function(fe,Je){function _t(et,vt,Nn){!0===et.transparent&&2===et.side&&!1===et.forceSinglePass?(et.side=1,et.needsUpdate=!0,AE(et,vt,Nn),et.side=0,et.needsUpdate=!0,AE(et,vt,Nn),et.side=2):AE(et,vt,Nn)}L=$t.get(fe),L.init(),q.push(L),fe.traverseVisible(function(et){et.isLight&&et.layers.test(Je.layers)&&(L.pushLight(et),et.castShadow&&L.pushShadow(et))}),L.setupLights(j._useLegacyLights),fe.traverse(function(et){const vt=et.material;if(vt)if(Array.isArray(vt))for(let Nn=0;Nn<vt.length;Nn++)_t(vt[Nn],fe,et);else _t(vt,fe,et)}),q.pop(),L=null};let si=null;function as(){ba.stop()}function vd(){ba.start()}const ba=new s0;function cT(fe,Je,_t,et){if(!1===fe.visible)return;if(fe.layers.test(Je.layers))if(fe.isGroup)_t=fe.renderOrder;else if(fe.isLOD)!0===fe.autoUpdate&&fe.update(Je);else if(fe.isLight)L.pushLight(fe),fe.castShadow&&L.pushShadow(fe);else if(fe.isSprite){if(!fe.frustumCulled||Ht.intersectsSprite(fe)){et&&Jn.setFromMatrixPosition(fe.matrixWorld).applyMatrix4(un);const Qn=se.update(fe),mi=fe.material;mi.visible&&B.push(fe,Qn,mi,_t,Jn.z,null)}}else if((fe.isMesh||fe.isLine||fe.isPoints)&&(!fe.frustumCulled||Ht.intersectsObject(fe))){const Qn=se.update(fe),mi=fe.material;if(et&&(void 0!==fe.boundingSphere?(null===fe.boundingSphere&&fe.computeBoundingSphere(),Jn.copy(fe.boundingSphere.center)):(null===Qn.boundingSphere&&Qn.computeBoundingSphere(),Jn.copy(Qn.boundingSphere.center)),Jn.applyMatrix4(fe.matrixWorld).applyMatrix4(un)),Array.isArray(mi)){const gi=Qn.groups;for(let zi=0,di=gi.length;zi<di;zi++){const Pi=gi[zi],Is=mi[Pi.materialIndex];Is&&Is.visible&&B.push(fe,Qn,Is,_t,Jn.z,Pi)}}else mi.visible&&B.push(fe,Qn,mi,_t,Jn.z,null)}const Nn=fe.children;for(let Qn=0,mi=Nn.length;Qn<mi;Qn++)cT(Nn[Qn],Je,_t,et)}function uT(fe,Je,_t,et){const vt=fe.opaque,Nn=fe.transmissive,Qn=fe.transparent;L.setupLightsView(_t),!0===Lt&&kn.setGlobalState(j.clippingPlanes,_t),Nn.length>0&&function CR(fe,Je,_t,et){const vt=Wt.isWebGL2;null===In&&(In=new va(1,1,{generateMipmaps:!0,type:Tt.has("EXT_color_buffer_half_float")?za:Sl,minFilter:Ga,samples:vt?4:0})),j.getDrawingBufferSize(xn),vt?In.setSize(xn.x,xn.y):In.setSize(Ih(xn.x),Ih(xn.y));const Nn=j.getRenderTarget();j.setRenderTarget(In),j.getClearColor(bt),De=j.getClearAlpha(),De<1&&j.setClearColor(16777215,.5),j.clear();const Qn=j.toneMapping;j.toneMapping=0,DE(fe,_t,et),An.updateMultisampleRenderTarget(In),An.updateRenderTargetMipmap(In);let mi=!1;for(let gi=0,zi=Je.length;gi<zi;gi++){const di=Je[gi],Pi=di.object,Is=di.geometry,Ys=di.material,Rc=di.group;if(2===Ys.side&&Pi.layers.test(et.layers)){const gh=Ys.side;Ys.side=1,Ys.needsUpdate=!0,dT(Pi,_t,et,Is,Ys,Rc),Ys.side=gh,Ys.needsUpdate=!0,mi=!0}}!0===mi&&(An.updateMultisampleRenderTarget(In),An.updateRenderTargetMipmap(In)),j.setRenderTarget(Nn),j.setClearColor(bt,De),j.toneMapping=Qn}(vt,Nn,Je,_t),et&&Ot.viewport(ae.copy(et)),vt.length>0&&DE(vt,Je,_t),Nn.length>0&&DE(Nn,Je,_t),Qn.length>0&&DE(Qn,Je,_t),Ot.buffers.depth.setTest(!0),Ot.buffers.depth.setMask(!0),Ot.buffers.color.setMask(!0),Ot.setPolygonOffset(!1)}function DE(fe,Je,_t){const et=!0===Je.isScene?Je.overrideMaterial:null;for(let vt=0,Nn=fe.length;vt<Nn;vt++){const Qn=fe[vt],mi=Qn.object,gi=Qn.geometry,zi=null===et?Qn.material:et,di=Qn.group;mi.layers.test(_t.layers)&&dT(mi,Je,_t,gi,zi,di)}}function dT(fe,Je,_t,et,vt,Nn){fe.onBeforeRender(j,Je,_t,et,vt,Nn),fe.modelViewMatrix.multiplyMatrices(_t.matrixWorldInverse,fe.matrixWorld),fe.normalMatrix.getNormalMatrix(fe.modelViewMatrix),vt.onBeforeRender(j,Je,_t,et,fe,Nn),!0===vt.transparent&&2===vt.side&&!1===vt.forceSinglePass?(vt.side=1,vt.needsUpdate=!0,j.renderBufferDirect(_t,Je,et,vt,fe,Nn),vt.side=0,vt.needsUpdate=!0,j.renderBufferDirect(_t,Je,et,vt,fe,Nn),vt.side=2):j.renderBufferDirect(_t,Je,et,vt,fe,Nn),fe.onAfterRender(j,Je,_t,et,vt,Nn)}function AE(fe,Je,_t){!0!==Je.isScene&&(Je=Ni);const et=Tn.get(fe),vt=L.state.lights,Qn=vt.state.version,mi=nt.getParameters(fe,vt.state,L.state.shadowsArray,Je,_t),gi=nt.getProgramCacheKey(mi);let zi=et.programs;et.environment=fe.isMeshStandardMaterial?Je.environment:null,et.fog=Je.fog,et.envMap=(fe.isMeshStandardMaterial?Gi:ti).get(fe.envMap||et.environment),void 0===zi&&(fe.addEventListener("dispose",sn),zi=new Map,et.programs=zi);let di=zi.get(gi);if(void 0!==di){if(et.currentProgram===di&&et.lightsStateVersion===Qn)return hT(fe,mi),di}else mi.uniforms=nt.getUniforms(fe),fe.onBuild(_t,mi,j),fe.onBeforeCompile(mi,j),di=nt.acquireProgram(mi,gi),zi.set(gi,di),et.uniforms=mi.uniforms;const Pi=et.uniforms;(!fe.isShaderMaterial&&!fe.isRawShaderMaterial||!0===fe.clipping)&&(Pi.clippingPlanes=kn.uniform),hT(fe,mi),et.needsLights=function DR(fe){return fe.isMeshLambertMaterial||fe.isMeshToonMaterial||fe.isMeshPhongMaterial||fe.isMeshStandardMaterial||fe.isShadowMaterial||fe.isShaderMaterial&&!0===fe.lights}(fe),et.lightsStateVersion=Qn,et.needsLights&&(Pi.ambientLightColor.value=vt.state.ambient,Pi.lightProbe.value=vt.state.probe,Pi.directionalLights.value=vt.state.directional,Pi.directionalLightShadows.value=vt.state.directionalShadow,Pi.spotLights.value=vt.state.spot,Pi.spotLightShadows.value=vt.state.spotShadow,Pi.rectAreaLights.value=vt.state.rectArea,Pi.ltc_1.value=vt.state.rectAreaLTC1,Pi.ltc_2.value=vt.state.rectAreaLTC2,Pi.pointLights.value=vt.state.point,Pi.pointLightShadows.value=vt.state.pointShadow,Pi.hemisphereLights.value=vt.state.hemi,Pi.directionalShadowMap.value=vt.state.directionalShadowMap,Pi.directionalShadowMatrix.value=vt.state.directionalShadowMatrix,Pi.spotShadowMap.value=vt.state.spotShadowMap,Pi.spotLightMatrix.value=vt.state.spotLightMatrix,Pi.spotLightMap.value=vt.state.spotLightMap,Pi.pointShadowMap.value=vt.state.pointShadowMap,Pi.pointShadowMatrix.value=vt.state.pointShadowMatrix);const Is=di.getUniforms(),Ys=sg.seqWithValue(Is.seq,Pi);return et.currentProgram=di,et.uniformsList=Ys,di}function hT(fe,Je){const _t=Tn.get(fe);_t.outputColorSpace=Je.outputColorSpace,_t.instancing=Je.instancing,_t.instancingColor=Je.instancingColor,_t.skinning=Je.skinning,_t.morphTargets=Je.morphTargets,_t.morphNormals=Je.morphNormals,_t.morphColors=Je.morphColors,_t.morphTargetsCount=Je.morphTargetsCount,_t.numClippingPlanes=Je.numClippingPlanes,_t.numIntersection=Je.numClipIntersection,_t.vertexAlphas=Je.vertexAlphas,_t.vertexTangents=Je.vertexTangents,_t.toneMapping=Je.toneMapping}ba.setAnimationLoop(function ho(fe){si&&si(fe)}),typeof self<"u"&&ba.setContext(self),this.setAnimationLoop=function(fe){si=fe,Ee.setAnimationLoop(fe),null===fe?ba.stop():ba.start()},Ee.addEventListener("sessionstart",as),Ee.addEventListener("sessionend",vd),this.render=function(fe,Je){if(void 0===Je||!0===Je.isCamera){if(!0!==Z){if(!0===fe.matrixWorldAutoUpdate&&fe.updateMatrixWorld(),null===Je.parent&&!0===Je.matrixWorldAutoUpdate&&Je.updateMatrixWorld(),!0===Ee.enabled&&!0===Ee.isPresenting&&(!0===Ee.cameraAutoUpdate&&Ee.updateCamera(Je),Je=Ee.getCamera()),!0===fe.isScene&&fe.onBeforeRender(j,fe,Je,re),L=$t.get(fe,q.length),L.init(),q.push(L),un.multiplyMatrices(Je.projectionMatrix,Je.matrixWorldInverse),Ht.setFromProjectionMatrix(un),ln=this.localClippingEnabled,Lt=kn.init(this.clippingPlanes,ln),B=Ut.get(fe,O.length),B.init(),O.push(B),cT(fe,Je,0,j.sortObjects),B.finish(),!0===j.sortObjects&&B.sort(rt,Xe),this.info.render.frame++,!0===Lt&&kn.beginShadows(),qt.render(L.state.shadowsArray,fe,Je),!0===Lt&&kn.endShadows(),!0===this.info.autoReset&&this.info.reset(),mn.render(B,fe),L.setupLights(j._useLegacyLights),Je.isArrayCamera){const et=Je.cameras;for(let vt=0,Nn=et.length;vt<Nn;vt++){const Qn=et[vt];uT(B,fe,Qn,Qn.viewport)}}else uT(B,fe,Je);null!==re&&(An.updateMultisampleRenderTarget(re),An.updateRenderTargetMipmap(re)),!0===fe.isScene&&fe.onAfterRender(j,fe,Je),zn.resetDefaultState(),pe=-1,te=null,q.pop(),L=q.length>0?q[q.length-1]:null,O.pop(),B=O.length>0?O[O.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return ie},this.getActiveMipmapLevel=function(){return oe},this.getRenderTarget=function(){return re},this.setRenderTargetTextures=function(fe,Je,_t){Tn.get(fe.texture).__webglTexture=Je,Tn.get(fe.depthTexture).__webglTexture=_t;const et=Tn.get(fe);et.__hasExternalTextures=!0,et.__hasExternalTextures&&(et.__autoAllocateDepthBuffer=void 0===_t,et.__autoAllocateDepthBuffer||!0===Tt.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),et.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(fe,Je){const _t=Tn.get(fe);_t.__webglFramebuffer=Je,_t.__useDefaultFramebuffer=void 0===Je},this.setRenderTarget=function(fe,Je=0,_t=0){re=fe,ie=Je,oe=_t;let et=!0,vt=null,Nn=!1,Qn=!1;if(fe){const gi=Tn.get(fe);void 0!==gi.__useDefaultFramebuffer?(Ot.bindFramebuffer(Ce.FRAMEBUFFER,null),et=!1):void 0===gi.__webglFramebuffer?An.setupRenderTarget(fe):gi.__hasExternalTextures&&An.rebindTextures(fe,Tn.get(fe.texture).__webglTexture,Tn.get(fe.depthTexture).__webglTexture);const zi=fe.texture;(zi.isData3DTexture||zi.isDataArrayTexture||zi.isCompressedArrayTexture)&&(Qn=!0);const di=Tn.get(fe).__webglFramebuffer;fe.isWebGLCubeRenderTarget?(vt=Array.isArray(di[Je])?di[Je][_t]:di[Je],Nn=!0):vt=Wt.isWebGL2&&fe.samples>0&&!1===An.useMultisampledRTT(fe)?Tn.get(fe).__webglMultisampledFramebuffer:Array.isArray(di)?di[_t]:di,ae.copy(fe.viewport),ze.copy(fe.scissor),dt=fe.scissorTest}else ae.copy(wt).multiplyScalar(Ve).floor(),ze.copy(Le).multiplyScalar(Ve).floor(),dt=ut;if(Ot.bindFramebuffer(Ce.FRAMEBUFFER,vt)&&Wt.drawBuffers&&et&&Ot.drawBuffers(fe,vt),Ot.viewport(ae),Ot.scissor(ze),Ot.setScissorTest(dt),Nn){const gi=Tn.get(fe.texture);Ce.framebufferTexture2D(Ce.FRAMEBUFFER,Ce.COLOR_ATTACHMENT0,Ce.TEXTURE_CUBE_MAP_POSITIVE_X+Je,gi.__webglTexture,_t)}else if(Qn){const gi=Tn.get(fe.texture);Ce.framebufferTextureLayer(Ce.FRAMEBUFFER,Ce.COLOR_ATTACHMENT0,gi.__webglTexture,_t||0,Je||0)}pe=-1},this.readRenderTargetPixels=function(fe,Je,_t,et,vt,Nn,Qn){if(!fe||!fe.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let mi=Tn.get(fe).__webglFramebuffer;if(fe.isWebGLCubeRenderTarget&&void 0!==Qn&&(mi=mi[Qn]),mi){Ot.bindFramebuffer(Ce.FRAMEBUFFER,mi);try{const gi=fe.texture,zi=gi.format,di=gi.type;if(zi!==vo&&ii.convert(zi)!==Ce.getParameter(Ce.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Pi=di===za&&(Tt.has("EXT_color_buffer_half_float")||Wt.isWebGL2&&Tt.has("EXT_color_buffer_float"));if(!(di===Sl||ii.convert(di)===Ce.getParameter(Ce.IMPLEMENTATION_COLOR_READ_TYPE)||di===aa&&(Wt.isWebGL2||Tt.has("OES_texture_float")||Tt.has("WEBGL_color_buffer_float"))||Pi))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Je>=0&&Je<=fe.width-et&&_t>=0&&_t<=fe.height-vt&&Ce.readPixels(Je,_t,et,vt,ii.convert(zi),ii.convert(di),Nn)}finally{const gi=null!==re?Tn.get(re).__webglFramebuffer:null;Ot.bindFramebuffer(Ce.FRAMEBUFFER,gi)}}},this.copyFramebufferToTexture=function(fe,Je,_t=0){const et=Math.pow(2,-_t),vt=Math.floor(Je.image.width*et),Nn=Math.floor(Je.image.height*et);An.setTexture2D(Je,0),Ce.copyTexSubImage2D(Ce.TEXTURE_2D,_t,0,0,fe.x,fe.y,vt,Nn),Ot.unbindTexture()},this.copyTextureToTexture=function(fe,Je,_t,et=0){const vt=Je.image.width,Nn=Je.image.height,Qn=ii.convert(_t.format),mi=ii.convert(_t.type);An.setTexture2D(_t,0),Ce.pixelStorei(Ce.UNPACK_FLIP_Y_WEBGL,_t.flipY),Ce.pixelStorei(Ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_t.premultiplyAlpha),Ce.pixelStorei(Ce.UNPACK_ALIGNMENT,_t.unpackAlignment),Je.isDataTexture?Ce.texSubImage2D(Ce.TEXTURE_2D,et,fe.x,fe.y,vt,Nn,Qn,mi,Je.image.data):Je.isCompressedTexture?Ce.compressedTexSubImage2D(Ce.TEXTURE_2D,et,fe.x,fe.y,Je.mipmaps[0].width,Je.mipmaps[0].height,Qn,Je.mipmaps[0].data):Ce.texSubImage2D(Ce.TEXTURE_2D,et,fe.x,fe.y,Qn,mi,Je.image),0===et&&_t.generateMipmaps&&Ce.generateMipmap(Ce.TEXTURE_2D),Ot.unbindTexture()},this.copyTextureToTexture3D=function(fe,Je,_t,et,vt=0){if(j.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Nn=fe.max.x-fe.min.x+1,Qn=fe.max.y-fe.min.y+1,mi=fe.max.z-fe.min.z+1,gi=ii.convert(et.format),zi=ii.convert(et.type);let di;if(et.isData3DTexture)An.setTexture3D(et,0),di=Ce.TEXTURE_3D;else{if(!et.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");An.setTexture2DArray(et,0),di=Ce.TEXTURE_2D_ARRAY}Ce.pixelStorei(Ce.UNPACK_FLIP_Y_WEBGL,et.flipY),Ce.pixelStorei(Ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,et.premultiplyAlpha),Ce.pixelStorei(Ce.UNPACK_ALIGNMENT,et.unpackAlignment);const Pi=Ce.getParameter(Ce.UNPACK_ROW_LENGTH),Is=Ce.getParameter(Ce.UNPACK_IMAGE_HEIGHT),Ys=Ce.getParameter(Ce.UNPACK_SKIP_PIXELS),Rc=Ce.getParameter(Ce.UNPACK_SKIP_ROWS),gh=Ce.getParameter(Ce.UNPACK_SKIP_IMAGES),fo=_t.isCompressedTexture?_t.mipmaps[0]:_t.image;Ce.pixelStorei(Ce.UNPACK_ROW_LENGTH,fo.width),Ce.pixelStorei(Ce.UNPACK_IMAGE_HEIGHT,fo.height),Ce.pixelStorei(Ce.UNPACK_SKIP_PIXELS,fe.min.x),Ce.pixelStorei(Ce.UNPACK_SKIP_ROWS,fe.min.y),Ce.pixelStorei(Ce.UNPACK_SKIP_IMAGES,fe.min.z),_t.isDataTexture||_t.isData3DTexture?Ce.texSubImage3D(di,vt,Je.x,Je.y,Je.z,Nn,Qn,mi,gi,zi,fo.data):_t.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ce.compressedTexSubImage3D(di,vt,Je.x,Je.y,Je.z,Nn,Qn,mi,gi,fo.data)):Ce.texSubImage3D(di,vt,Je.x,Je.y,Je.z,Nn,Qn,mi,gi,zi,fo),Ce.pixelStorei(Ce.UNPACK_ROW_LENGTH,Pi),Ce.pixelStorei(Ce.UNPACK_IMAGE_HEIGHT,Is),Ce.pixelStorei(Ce.UNPACK_SKIP_PIXELS,Ys),Ce.pixelStorei(Ce.UNPACK_SKIP_ROWS,Rc),Ce.pixelStorei(Ce.UNPACK_SKIP_IMAGES,gh),0===vt&&et.generateMipmaps&&Ce.generateMipmap(di),Ot.unbindTexture()},this.initTexture=function(fe){fe.isCubeTexture?An.setTextureCube(fe,0):fe.isData3DTexture?An.setTexture3D(fe,0):fe.isDataArrayTexture||fe.isCompressedArrayTexture?An.setTexture2DArray(fe,0):An.setTexture2D(fe,0),Ot.unbindTexture()},this.resetState=function(){ie=0,oe=0,re=null,Ot.reset(),zn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return xl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Hf?"display-p3":"srgb",t.unpackColorSpace=Zi.workingColorSpace===gm?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Pr?Uu:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Uu?Pr:oo}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class KM extends Gl{}).prototype.isWebGL1Renderer=!0;class Qa extends M{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class ya{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Oo()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Oo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Oo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Fo=new ce;class ld{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Fo.fromBufferAttribute(this,t),Fo.applyMatrix4(e),this.setXYZ(t,Fo.x,Fo.y,Fo.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Fo.fromBufferAttribute(this,t),Fo.applyNormalMatrix(e),this.setXYZ(t,Fo.x,Fo.y,Fo.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Fo.fromBufferAttribute(this,t),Fo.transformDirection(e),this.setXYZ(t,Fo.x,Fo.y,Fo.z);return this}setX(e,t){return this.normalized&&(t=fi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=fi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=fi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=fi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=No(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=No(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=No(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=No(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=fi(t,this.array),n=fi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=fi(t,this.array),n=fi(n,this.array),i=fi(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=fi(t,this.array),n=fi(n,this.array),i=fi(i,this.array),a=fi(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new Bi(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ld(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Sv=new ce,Cv=new er,xv=new er,Pb=new ce,Tv=new Kn,eh=new ce,hg=new As,Lb=new Kn,Dv=new Yu;class Fb extends zs{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Kn,this.bindMatrixInverse=new Kn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Il),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)eh.fromBufferAttribute(t,n),this.applyBoneTransform(n,eh),this.boundingBox.expandByPoint(eh)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new As),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)eh.fromBufferAttribute(t,n),this.applyBoneTransform(n,eh),this.boundingSphere.expandByPoint(eh)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),hg.copy(this.boundingSphere),hg.applyMatrix4(i),!1!==e.ray.intersectsSphere(hg)&&(Lb.copy(i).invert(),Dv.copy(e.ray).applyMatrix4(Lb),(null===this.boundingBox||!1!==Dv.intersectsBox(this.boundingBox))&&this._computeIntersections(e,t,Dv)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new er,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;Cv.fromBufferAttribute(i.attributes.skinIndex,e),xv.fromBufferAttribute(i.attributes.skinWeight,e),Sv.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const c=xv.getComponent(a);if(0!==c){const u=Cv.getComponent(a);Tv.multiplyMatrices(n.bones[u].matrixWorld,n.boneInverses[u]),t.addScaledVector(Pb.copy(Sv).applyMatrix4(Tv),c)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Av extends M{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Dp extends Po{constructor(e=null,t=1,n=1,i,a,c,u,h,g=mr,y=mr,E,C){super(null,c,u,h,g,y,i,a,E,C),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const kb=new Kn,JM=new Kn;class fg{constructor(e=[],t=[]){this.uuid=Oo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Kn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Kn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let a=0,c=e.length;a<c;a++)kb.multiplyMatrices(e[a]?e[a].matrixWorld:JM,t[a]),kb.toArray(n,16*a);null!==i&&(i.needsUpdate=!0)}clone(){return new fg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=xm(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Dp(t,e,e,vo,aa);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const a=e.bones[n];let c=t[a];void 0===c&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),c=new Av),this.bones.push(c),this.boneInverses.push((new Kn).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,a=t.length;i<a;i++)e.bones.push(t[i].uuid),e.boneInverses.push(n[i].toArray());return e}}class Ap extends Bi{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const cf=new Kn,Bb=new Kn,pg=[],Ub=new Il,QM=new Kn,Rp=new zs,Ip=new As;class Vb extends zs{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ap(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,QM)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Il),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,cf),Ub.copy(e.boundingBox).applyMatrix4(cf),this.boundingBox.union(Ub)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new As),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,cf),Ip.copy(e.boundingSphere).applyMatrix4(cf),this.boundingSphere.union(Ip)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Rp.geometry=this.geometry,Rp.material=this.material,void 0!==Rp.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Ip.copy(this.boundingSphere),Ip.applyMatrix4(n),!1!==e.ray.intersectsSphere(Ip)))for(let a=0;a<i;a++){this.getMatrixAt(a,cf),Bb.multiplyMatrices(n,cf),Rp.matrixWorld=Bb,Rp.raycast(e,pg);for(let c=0,u=pg.length;c<u;c++){const h=pg[c];h.instanceId=a,h.object=this,t.push(h)}pg.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Ap(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Zo extends $n{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Rt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Rv=new ce,Iv=new ce,Ov=new Kn,mg=new Yu,Op=new As;class ud extends M{constructor(e=new Ti,t=new Zo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let i=1,a=t.count;i<a;i++)Rv.fromBufferAttribute(t,i-1),Iv.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Rv.distanceTo(Iv);e.setAttribute("lineDistance",new En(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,c=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Op.copy(n.boundingSphere),Op.applyMatrix4(i),Op.radius+=a,!1===e.ray.intersectsSphere(Op))return;Ov.copy(i).invert(),mg.copy(e.ray).applyMatrix4(Ov);const u=a/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,g=new ce,y=new ce,E=new ce,C=new ce,T=this.isLineSegments?2:1,R=n.index,L=n.attributes.position;if(null!==R)for(let j=Math.max(0,c.start),Z=Math.min(R.count,c.start+c.count)-1;j<Z;j+=T){const ie=R.getX(j),oe=R.getX(j+1);if(g.fromBufferAttribute(L,ie),y.fromBufferAttribute(L,oe),mg.distanceSqToSegment(g,y,C,E)>h)continue;C.applyMatrix4(this.matrixWorld);const pe=e.ray.origin.distanceTo(C);pe<e.near||pe>e.far||t.push({distance:pe,point:E.clone().applyMatrix4(this.matrixWorld),index:j,face:null,faceIndex:null,object:this})}else for(let j=Math.max(0,c.start),Z=Math.min(L.count,c.start+c.count)-1;j<Z;j+=T){if(g.fromBufferAttribute(L,j),y.fromBufferAttribute(L,j+1),mg.distanceSqToSegment(g,y,C,E)>h)continue;C.applyMatrix4(this.matrixWorld);const oe=e.ray.origin.distanceTo(C);oe<e.near||oe>e.far||t.push({distance:oe,point:E.clone().applyMatrix4(this.matrixWorld),index:j,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,c=i.length;a<c;a++){const u=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=a}}}}}const Nv=new ce,Pv=new ce;class th extends ud{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let i=0,a=t.count;i<a;i+=2)Nv.fromBufferAttribute(t,i),Pv.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Nv.distanceTo(Pv);e.setAttribute("lineDistance",new En(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class gg extends ud{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class yu extends $n{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Rt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Hb=new Kn,Lv=new Yu,bu=new As,Fv=new ce;class _g extends M{constructor(e=new Ti,t=new yu){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,c=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),bu.copy(n.boundingSphere),bu.applyMatrix4(i),bu.radius+=a,!1===e.ray.intersectsSphere(bu))return;Hb.copy(i).invert(),Lv.copy(e.ray).applyMatrix4(Hb);const u=a/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,g=n.index,E=n.attributes.position;if(null!==g)for(let R=Math.max(0,c.start),B=Math.min(g.count,c.start+c.count);R<B;R++){const L=g.getX(R);Fv.fromBufferAttribute(E,L),eS(Fv,L,h,i,e,t,this)}else for(let R=Math.max(0,c.start),B=Math.min(E.count,c.start+c.count);R<B;R++)Fv.fromBufferAttribute(E,R),eS(Fv,R,h,i,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,c=i.length;a<c;a++){const u=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=a}}}}}function eS(s,e,t,n,i,a,c){const u=Lv.distanceSqToPoint(s);if(u<t){const h=new ce;Lv.closestPointToPoint(s,h),h.applyMatrix4(n);const g=i.ray.origin.distanceTo(h);if(g<i.near||g>i.far)return;a.push({distance:g,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,object:c})}}class oh extends $n{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Rt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zl extends oh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new yt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Mr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Rt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Rt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Rt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function fd(s,e,t){return!s||!t&&s.constructor===e?s:"number"==typeof e.BYTES_PER_ELEMENT?new e(s):Array.prototype.slice.call(s)}function fw(s){const t=s.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(function e(i,a){return s[i]-s[a]}),n}function jp(s,e,t){const n=s.length,i=new s.constructor(n);for(let a=0,c=0;c!==n;++a){const u=t[a]*e;for(let h=0;h!==e;++h)i[c++]=s[u+h]}return i}function Zv(s,e,t,n){let i=1,a=s[0];for(;void 0!==a&&void 0===a[n];)a=s[i++];if(void 0===a)return;let c=a[n];if(void 0!==c)if(Array.isArray(c))do{c=a[n],void 0!==c&&(e.push(a.time),t.push.apply(t,c)),a=s[i++]}while(void 0!==a);else if(void 0!==c.toArray)do{c=a[n],void 0!==c&&(e.push(a.time),c.toArray(t,t.length)),a=s[i++]}while(void 0!==a);else do{c=a[n],void 0!==c&&(e.push(a.time),t.push(c)),a=s[i++]}while(void 0!==a)}class _f{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],a=t[n-1];e:{t:{let c;n:{i:if(!(e<i)){for(let u=n+2;;){if(void 0===i){if(e<a)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===u)break;if(a=i,i=t[++n],e<i)break t}c=t.length;break n}if(e>=a)break e;{const u=t[1];e<u&&(n=2,a=u);for(let h=n-2;;){if(void 0===a)return this._cachedIndex=0,this.copySampleValue_(0);if(n===h)break;if(i=a,a=t[--n-1],e>=a)break t}c=n,n=0}}for(;n<c;){const u=n+c>>>1;e<t[u]?c=u:n=u+1}if(i=t[n],a=t[n-1],void 0===a)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,i)}return this.interpolate_(n,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=e*i;for(let c=0;c!==i;++c)t[c]=n[a+c];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class mw extends _f{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:cc,endingEnd:cc}}intervalChanged_(e,t,n){const i=this.parameterPositions;let a=e-2,c=e+1,u=i[a],h=i[c];if(void 0===u)switch(this.getSettings_().endingStart){case eu:a=e,u=2*t-n;break;case 2402:a=i.length-2,u=t+i[a]-i[a+1];break;default:a=e,u=n}if(void 0===h)switch(this.getSettings_().endingEnd){case eu:c=e,h=2*n-t;break;case 2402:c=1,h=n+i[1]-i[0];break;default:c=e-1,h=t}const g=.5*(n-t),y=this.valueSize;this._weightPrev=g/(t-u),this._weightNext=g/(h-n),this._offsetPrev=a*y,this._offsetNext=c*y}interpolate_(e,t,n,i){const a=this.resultBuffer,c=this.sampleValues,u=this.valueSize,h=e*u,g=h-u,y=this._offsetPrev,E=this._offsetNext,C=this._weightPrev,T=this._weightNext,R=(n-t)/(i-t),B=R*R,L=B*R,O=-C*L+2*C*B-C*R,q=(1+C)*L+(-1.5-2*C)*B+(-.5+C)*R+1,j=(-1-T)*L+(1.5+T)*B+.5*R,Z=T*L-T*B;for(let ie=0;ie!==u;++ie)a[ie]=O*c[y+ie]+q*c[g+ie]+j*c[h+ie]+Z*c[E+ie];return a}}class Jv extends _f{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const a=this.resultBuffer,c=this.sampleValues,u=this.valueSize,h=e*u,g=h-u,y=(n-t)/(i-t),E=1-y;for(let C=0;C!==u;++C)a[C]=c[g+C]*E+c[h+C]*y;return a}}class ES extends _f{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Mc{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=fd(t,this.TimeBufferType),this.values=fd(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:fd(e.times,Array),values:fd(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new ES(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Jv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new mw(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Bu:t=this.InterpolantFactoryMethodDiscrete;break;case lc:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Bu;case this.InterpolantFactoryMethodLinear:return lc;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let a=0,c=i-1;for(;a!==i&&n[a]<e;)++a;for(;-1!==c&&n[c]>t;)--c;if(++c,0!==a||c!==i){a>=c&&(c=Math.max(c,1),a=c-1);const u=this.getValueSize();this.times=n.slice(a,c),this.values=this.values.slice(a*u,c*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,a=n.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let c=null;for(let u=0;u!==a;u++){const h=n[u];if("number"==typeof h&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,h),e=!1;break}if(null!==c&&c>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,h,c),e=!1;break}c=h}if(void 0!==i&&function Ng(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}(i))for(let u=0,h=i.length;u!==h;++u){const g=i[u];if(isNaN(g)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,g),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=2302===this.getInterpolation(),a=e.length-1;let c=1;for(let u=1;u<a;++u){let h=!1;const g=e[u];if(g!==e[u+1]&&(1!==u||g!==e[0]))if(i)h=!0;else{const E=u*n,C=E-n,T=E+n;for(let R=0;R!==n;++R){const B=t[E+R];if(B!==t[C+R]||B!==t[T+R]){h=!0;break}}}if(h){if(u!==c){e[c]=e[u];const E=u*n,C=c*n;for(let T=0;T!==n;++T)t[C+T]=t[E+T]}++c}}if(a>0){e[c]=e[a];for(let u=a*n,h=c*n,g=0;g!==n;++g)t[h+g]=t[u+g];++c}return c!==e.length?(this.times=e.slice(0,c),this.values=t.slice(0,c*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Mc.prototype.TimeBufferType=Float32Array,Mc.prototype.ValueBufferType=Float32Array,Mc.prototype.DefaultInterpolation=lc;class vf extends Mc{}vf.prototype.ValueTypeName="bool",vf.prototype.ValueBufferType=Array,vf.prototype.DefaultInterpolation=Bu,vf.prototype.InterpolantFactoryMethodLinear=void 0,vf.prototype.InterpolantFactoryMethodSmooth=void 0;class gw extends Mc{}gw.prototype.ValueTypeName="color";class ah extends Mc{}ah.prototype.ValueTypeName="number";class xx extends _f{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const a=this.resultBuffer,c=this.sampleValues,u=this.valueSize,h=(n-t)/(i-t);let g=e*u;for(let y=g+u;g!==y;g+=4)Ds.slerpFlat(a,0,c,g-u,c,g,h);return a}}class pd extends Mc{InterpolantFactoryMethodLinear(e){return new xx(this.times,this.values,this.getValueSize(),e)}}pd.prototype.ValueTypeName="quaternion",pd.prototype.DefaultInterpolation=lc,pd.prototype.InterpolantFactoryMethodSmooth=void 0;class yf extends Mc{}yf.prototype.ValueTypeName="string",yf.prototype.ValueBufferType=Array,yf.prototype.DefaultInterpolation=Bu,yf.prototype.InterpolantFactoryMethodLinear=void 0,yf.prototype.InterpolantFactoryMethodSmooth=void 0;class bf extends Mc{}bf.prototype.ValueTypeName="vector";class Pg{constructor(e,t=-1,n,i=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Oo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let c=0,u=n.length;c!==u;++c)t.push(MS(n[c]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,c=n.length;a!==c;++a)t.push(Mc.toJSON(n[a]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const a=t.length,c=[];for(let u=0;u<a;u++){let h=[],g=[];h.push((u+a-1)%a,u,(u+1)%a),g.push(0,1,0);const y=fw(h);h=jp(h,1,y),g=jp(g,1,y),!i&&0===h[0]&&(h.push(a),g.push(g[0])),c.push(new ah(".morphTargetInfluences["+t[u].name+"]",h,g).scale(1/n))}return new this(e,-1,c)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},a=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const g=e[u],y=g.name.match(a);if(y&&y.length>1){const E=y[1];let C=i[E];C||(i[E]=C=[]),C.push(g)}}const c=[];for(const u in i)c.push(this.CreateFromMorphTargetSequence(u,i[u],t,n));return c}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(E,C,T,R,B){if(0!==T.length){const L=[],O=[];Zv(T,L,O,R),0!==L.length&&B.push(new E(C,L,O))}},i=[],a=e.name||"default",c=e.fps||30,u=e.blendMode;let h=e.length||-1;const g=e.hierarchy||[];for(let E=0;E<g.length;E++){const C=g[E].keys;if(C&&0!==C.length)if(C[0].morphTargets){const T={};let R;for(R=0;R<C.length;R++)if(C[R].morphTargets)for(let B=0;B<C[R].morphTargets.length;B++)T[C[R].morphTargets[B]]=-1;for(const B in T){const L=[],O=[];for(let q=0;q!==C[R].morphTargets.length;++q){const j=C[R];L.push(j.time),O.push(j.morphTarget===B?1:0)}i.push(new ah(".morphTargetInfluence["+B+"]",L,O))}h=T.length*c}else{const T=".bones["+t[E].name+"]";n(bf,T+".position",C,"pos",i),n(pd,T+".quaternion",C,"rot",i),n(bf,T+".scale",C,"scl",i)}}return 0===i.length?null:new this(a,h,i,u)}resetDuration(){let t=0;for(let n=0,i=this.tracks.length;n!==i;++n){const a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function MS(s){if(void 0===s.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Tx(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ah;case"vector":case"vector2":case"vector3":case"vector4":return bf;case"color":return gw;case"quaternion":return pd;case"bool":case"boolean":return vf;case"string":return yf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+s)}(s.type);if(void 0===s.times){const t=[],n=[];Zv(s.keys,t,n,"value"),s.times=t,s.values=n}return void 0!==e.parse?e.parse(s):new e(s.name,s.times,s.values,s.interpolation)}const wf={enabled:!1,files:{},add:function(s,e){!1!==this.enabled&&(this.files[s]=e)},get:function(s){if(!1!==this.enabled)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class _w{constructor(e,t,n){const i=this;let h,a=!1,c=0,u=0;const g=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(y){u++,!1===a&&void 0!==i.onStart&&i.onStart(y,c,u),a=!0},this.itemEnd=function(y){c++,void 0!==i.onProgress&&i.onProgress(y,c,u),c===u&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(y){void 0!==i.onError&&i.onError(y)},this.resolveURL=function(y){return h?h(y):y},this.setURLModifier=function(y){return h=y,this},this.addHandler=function(y,E){return g.push(y,E),this},this.removeHandler=function(y){const E=g.indexOf(y);return-1!==E&&g.splice(E,2),this},this.getHandler=function(y){for(let E=0,C=g.length;E<C;E+=2){const T=g[E],R=g[E+1];if(T.global&&(T.lastIndex=0),T.test(y))return R}return null}}}const vw=new _w;let Ef=(()=>{class s{constructor(t){this.manager=void 0!==t?t:vw,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,n){const i=this;return new Promise(function(a,c){i.load(t,a,n,c)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return s.DEFAULT_MATERIAL_NAME="__DEFAULT",s})();const Sc={};class SS extends Error{constructor(e,t){super(e),this.response=t}}class Cc extends Ef{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const a=wf.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(void 0!==Sc[e])return void Sc[e].push({onLoad:t,onProgress:n,onError:i});Sc[e]=[],Sc[e].push({onLoad:t,onProgress:n,onError:i});const c=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(c).then(g=>{if(200===g.status||0===g.status){if(0===g.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===g.body||void 0===g.body.getReader)return g;const y=Sc[e],E=g.body.getReader(),C=g.headers.get("Content-Length")||g.headers.get("X-File-Size"),T=C?parseInt(C):0,R=0!==T;let B=0;const L=new ReadableStream({start(O){!function q(){E.read().then(({done:j,value:Z})=>{if(j)O.close();else{B+=Z.byteLength;const ie=new ProgressEvent("progress",{lengthComputable:R,loaded:B,total:T});for(let oe=0,re=y.length;oe<re;oe++){const pe=y[oe];pe.onProgress&&pe.onProgress(ie)}O.enqueue(Z),q()}})}()}});return new Response(L)}throw new SS(`fetch for "${g.url}" responded with ${g.status}: ${g.statusText}`,g)}).then(g=>{switch(h){case"arraybuffer":return g.arrayBuffer();case"blob":return g.blob();case"document":return g.text().then(y=>(new DOMParser).parseFromString(y,u));case"json":return g.json();default:if(void 0===u)return g.text();{const E=/charset="?([^;"\s]*)"?/i.exec(u),C=E&&E[1]?E[1].toLowerCase():void 0,T=new TextDecoder(C);return g.arrayBuffer().then(R=>T.decode(R))}}}).then(g=>{wf.add(e,g);const y=Sc[e];delete Sc[e];for(let E=0,C=y.length;E<C;E++){const T=y[E];T.onLoad&&T.onLoad(g)}}).catch(g=>{const y=Sc[e];if(void 0===y)throw this.manager.itemError(e),g;delete Sc[e];for(let E=0,C=y.length;E<C;E++){const T=y[E];T.onError&&T.onError(g)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Lg extends Ef{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,c=wf.get(e);if(void 0!==c)return a.manager.itemStart(e),setTimeout(function(){t&&t(c),a.manager.itemEnd(e)},0),c;const u=ru("img");function h(){y(),wf.add(e,this),t&&t(this),a.manager.itemEnd(e)}function g(E){y(),i&&i(E),a.manager.itemError(e),a.manager.itemEnd(e)}function y(){u.removeEventListener("load",h,!1),u.removeEventListener("error",g,!1)}return u.addEventListener("load",h,!1),u.addEventListener("error",g,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(u.crossOrigin=this.crossOrigin),a.manager.itemStart(e),u.src=e,u}}class yw extends Ef{constructor(e){super(e)}load(e,t,n,i){const a=new Po,c=new Lg(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(e,function(u){a.image=u,a.needsUpdate=!0,void 0!==t&&t(a)},n,i),a}}class Wp extends M{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Rt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const kg=new Kn,Qv=new ce,ww=new ce;class ey{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new yt(512,512),this.map=null,this.mapPass=null,this.matrix=new Kn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new N_,this._frameExtents=new yt(1,1),this._viewportCount=1,this._viewports=[new er(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Qv.setFromMatrixPosition(e.matrixWorld),t.position.copy(Qv),ww.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ww),t.updateMatrixWorld(),kg.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kg),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(kg)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Ix extends ey{constructor(){super(new Rr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*Ld*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(n!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Bg extends Wp{constructor(e,t,n=0,i=Math.PI/3,a=0,c=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(M.DEFAULT_UP),this.updateMatrix(),this.target=new M,this.distance=n,this.angle=i,this.penumbra=a,this.decay=c,this.map=null,this.shadow=new Ix}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Ew=new Kn,$p=new ce,ty=new ce;class CS extends ey{constructor(){super(new Rr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new yt(4,2),this._viewportCount=6,this._viewports=[new er(2,1,1,1),new er(0,1,1,1),new er(3,1,1,1),new er(1,1,1,1),new er(3,0,1,1),new er(1,0,1,1)],this._cubeDirections=[new ce(1,0,0),new ce(-1,0,0),new ce(0,0,1),new ce(0,0,-1),new ce(0,1,0),new ce(0,-1,0)],this._cubeUps=[new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,0,1),new ce(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),$p.setFromMatrixPosition(e.matrixWorld),n.position.copy($p),ty.copy(n.position),ty.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ty),n.updateMatrixWorld(),i.makeTranslation(-$p.x,-$p.y,-$p.z),Ew.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ew)}}class Mf extends Wp{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new CS}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class xS extends ey{constructor(){super(new gp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Sf extends Wp{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(M.DEFAULT_UP),this.updateMatrix(),this.target=new M,this.shadow=new xS}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class jl extends Wp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Xp{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Sw extends Ef{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,c=wf.get(e);if(void 0!==c)return a.manager.itemStart(e),setTimeout(function(){t&&t(c),a.manager.itemEnd(e)},0),c;const u={};u.credentials="anonymous"===this.crossOrigin?"same-origin":"include",u.headers=this.requestHeader,fetch(e,u).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(h){wf.add(e,h),t&&t(h),a.manager.itemEnd(e)}).catch(function(h){i&&i(h),a.manager.itemError(e),a.manager.itemEnd(e)}),a.manager.itemStart(e)}}class Rw{constructor(e,t,n){let i,a,c;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,a=this._slerpAdditive,c=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,c=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,a=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,a=e*i+i;let c=this.cumulativeWeight;if(0===c){for(let u=0;u!==i;++u)n[a+u]=n[u];c=t}else c+=t,this._mixBufferRegion(n,a,0,t/c,i);this.cumulativeWeight=c}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,a=this.cumulativeWeight,c=this.cumulativeWeightAdditive,u=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1&&this._mixBufferRegion(n,i,t*this._origIndex,1-a,t),c>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let h=t,g=t+t;h!==g;++h)if(n[h]!==n[h+t]){u.setValue(n,i);break}}saveOriginalState(){const t=this.buffer,n=this.valueSize,i=n*this._origIndex;this.binding.getValue(t,i);for(let a=n,c=i;a!==c;++a)t[a]=t[i+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,a){if(i>=.5)for(let c=0;c!==a;++c)e[t+c]=e[n+c]}_slerp(e,t,n,i){Ds.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,a){const c=this._workIndex*a;Ds.multiplyQuaternionsFlat(e,c,e,t,e,n),Ds.slerpFlat(e,t,e,t,e,c,i)}_lerp(e,t,n,i,a){const c=1-i;for(let u=0;u!==a;++u){const h=t+u;e[h]=e[h]*c+e[n+u]*i}}_lerpAdditive(e,t,n,i,a){for(let c=0;c!==a;++c){const u=t+c;e[u]=e[u]+e[n+c]*i}}}const Gg="\\[\\]\\.:\\/",PS=new RegExp("["+Gg+"]","g"),zg="[^"+Gg+"]",Iw="[^"+Gg.replace("\\.","")+"]",Lx=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",zg)+/(WCOD+)?/.source.replace("WCOD",Iw)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",zg)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",zg)+"$"),Fx=["material","materials","bones","map"];class Ow{constructor(e,t,n){const i=n||Sr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=n.length;i!==a;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}let Sr=(()=>{class s{constructor(t,n,i){this.path=n,this.parsedPath=i||s.parseTrackName(n),this.node=s.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,i){return t&&t.isAnimationObjectGroup?new s.Composite(t,n,i):new s(t,n,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(PS,"")}static parseTrackName(t){const n=Lx.exec(t);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},a=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==a&&-1!==a){const c=i.nodeName.substring(a+1);-1!==Fx.indexOf(c)&&(i.nodeName=i.nodeName.substring(0,a),i.objectName=c)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,n){if(void 0===n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(n);if(void 0!==i)return i}if(t.children){const i=function(c){for(let u=0;u<c.length;u++){const h=c[u];if(h.name===n||h.uuid===n)return h;const g=i(h.children);if(g)return g}return null},a=i(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const i=this.resolvedProperty;for(let a=0,c=i.length;a!==c;++a)t[n++]=i[a]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const i=this.resolvedProperty;for(let a=0,c=i.length;a!==c;++a)i[a]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const i=this.resolvedProperty;for(let a=0,c=i.length;a!==c;++a)i[a]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const i=this.resolvedProperty;for(let a=0,c=i.length;a!==c;++a)i[a]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,i=n.objectName,a=n.propertyName;let c=n.propertyIndex;if(t||(t=s.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(i){let y=n.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let E=0;E<t.length;E++)if(t[E].name===y){y=E;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==y){if(void 0===t[y])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[y]}}const u=t[a];if(void 0===u)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+a+" but it wasn't found.",t);let h=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?h=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(h=this.Versioning.MatrixWorldNeedsUpdate);let g=this.BindingType.Direct;if(void 0!==c){if("morphTargetInfluences"===a){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[c]&&(c=t.morphTargetDictionary[c])}g=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=c}else void 0!==u.fromArray&&void 0!==u.toArray?(g=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(g=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=a;this.getValue=this.GetterByBindingType[g],this.setValue=this.SetterByBindingTypeAndVersioning[g][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return s.Composite=Ow,s})();Sr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Sr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Sr.prototype.GetterByBindingType=[Sr.prototype._getValue_direct,Sr.prototype._getValue_array,Sr.prototype._getValue_arrayElement,Sr.prototype._getValue_toArray],Sr.prototype.SetterByBindingTypeAndVersioning=[[Sr.prototype._setValue_direct,Sr.prototype._setValue_direct_setNeedsUpdate,Sr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Sr.prototype._setValue_array,Sr.prototype._setValue_array_setNeedsUpdate,Sr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Sr.prototype._setValue_arrayElement,Sr.prototype._setValue_arrayElement_setNeedsUpdate,Sr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Sr.prototype._setValue_fromArray,Sr.prototype._setValue_fromArray_setNeedsUpdate,Sr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class kS{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const a=t.tracks,c=a.length,u=new Array(c),h={endingStart:cc,endingEnd:cc};for(let g=0;g!==c;++g){const y=a[g].createInterpolant(null);u[g]=y,y.settings=h}this._interpolantSettings=h,this._interpolants=u,this._propertyBindings=new Array(c),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,a=e._clip.duration,u=i/a;e.warp(1,a/i,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,a=i.time,c=this.timeScale;let u=this._timeScaleInterpolant;null===u&&(u=i._lendControlInterpolant(),this._timeScaleInterpolant=u);const h=u.parameterPositions,g=u.sampleValues;return h[0]=a,h[1]=a+n,g[0]=e/c,g[1]=t/c,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const a=this._startTime;if(null!==a){const h=(e-a)*n;h<0||0===n?t=0:(this._startTime=null,t=n*h)}t*=this._updateTimeScale(e);const c=this._updateTime(t),u=this._updateWeight(e);if(u>0){const h=this._interpolants,g=this._propertyBindings;if(2501===this.blendMode)for(let y=0,E=h.length;y!==E;++y)h[y].evaluate(c),g[y].accumulateAdditive(u);else for(let y=0,E=h.length;y!==E;++y)h[y].evaluate(c),g[y].accumulate(i,u)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,a=this._loopCount;const c=2202===n;if(0===e)return-1===a?i:c&&1==(1&a)?t-i:i;if(2200===n){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===a&&(e>=0?(a=0,this._setEndings(!0,0===this.repetitions,c)):this._setEndings(0===this.repetitions,!0,c)),i>=t||i<0){const u=Math.floor(i/t);i-=t*u,a+=Math.abs(u);const h=this.repetitions-a;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===h){const g=e<0;this._setEndings(g,!g,c)}else this._setEndings(!1,!1,c);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=i;if(c&&1==(1&a))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=eu,i.endingEnd=eu):(i.endingStart=e?this.zeroSlopeAtStart?eu:cc:2402,i.endingEnd=t?this.zeroSlopeAtEnd?eu:cc:2402)}_scheduleFading(e,t,n){const i=this._mixer,a=i.time;let c=this._weightInterpolant;null===c&&(c=i._lendControlInterpolant(),this._weightInterpolant=c);const u=c.parameterPositions,h=c.sampleValues;return u[0]=a,h[0]=t,u[1]=a+e,h[1]=n,this}}const ay=new Float32Array(1);class BS extends Tl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,a=i.length,c=e._propertyBindings,u=e._interpolants,h=n.uuid,g=this._bindingsByRootAndName;let y=g[h];void 0===y&&(y={},g[h]=y);for(let E=0;E!==a;++E){const C=i[E],T=C.name;let R=y[T];if(void 0!==R)++R.referenceCount,c[E]=R;else{if(R=c[E],void 0!==R){null===R._cacheIndex&&(++R.referenceCount,this._addInactiveBinding(R,h,T));continue}R=new Rw(Sr.create(n,T,t&&t._propertyBindings[E].binding.parsedPath),C.ValueTypeName,C.getValueSize()),++R.referenceCount,this._addInactiveBinding(R,h,T),c[E]=R}u[E].resultBuffer=R.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];0==a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];0==--a.useCount&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,a=this._actionsByClip;let c=a[t];if(void 0===c)c={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=c;else{const u=c.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=i.length,i.push(e),c.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,c=this._actionsByClip,u=c[a],h=u.knownActions,g=h[h.length-1],y=e._byClipCacheIndex;g._byClipCacheIndex=y,h[y]=g,h.pop(),e._byClipCacheIndex=null,delete u.actionByRoot[(e._localRoot||this._root).uuid],0===h.length&&delete c[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const a=t[n];0==--a.referenceCount&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,a=this._bindings;let c=i[t];void 0===c&&(c={},i[t]=c),c[n]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,a=n.path,c=this._bindingsByRootAndName,u=c[i],h=t[t.length-1],g=e._cacheIndex;h._cacheIndex=g,t[g]=h,t.pop(),delete u[a],0===Object.keys(u).length&&delete c[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Jv(new Float32Array(2),new Float32Array(2),1,ay),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=n,t[n]=a}clipAction(e,t,n){const i=t||this._root,a=i.uuid;let c="string"==typeof e?Pg.findByName(i,e):e;const u=null!==c?c.uuid:e,h=this._actionsByClip[u];let g=null;if(void 0===n&&(n=null!==c?c.blendMode:2500),void 0!==h){const E=h.actionByRoot[a];if(void 0!==E&&E.blendMode===n)return E;g=h.knownActions[0],null===c&&(c=g._clip)}if(null===c)return null;const y=new kS(this,c,t,n);return this._bindAction(y,g),this._addInactiveAction(y,u,a),y}existingAction(e,t){const n=t||this._root,i=n.uuid,a="string"==typeof e?Pg.findByName(n,e):e,u=this._actionsByClip[a?a.uuid:e];return void 0!==u&&u.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let n=this._nActiveActions-1;n>=0;--n)e[n].stop();return this}update(e){const t=this._actions,n=this._nActiveActions,i=this.time+=e*=this.timeScale,a=Math.sign(e),c=this._accuIndex^=1;for(let g=0;g!==n;++g)t[g]._update(i,e,a,c);const u=this._bindings,h=this._nActiveBindings;for(let g=0;g!==h;++g)u[g].apply(c);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,a=i[n];if(void 0!==a){const c=a.knownActions;for(let u=0,h=c.length;u!==h;++u){const g=c[u];this._deactivateAction(g);const y=g._cacheIndex,E=t[t.length-1];g._cacheIndex=null,g._byClipCacheIndex=null,E._cacheIndex=y,t[y]=E,t.pop(),this._removeInactiveBindingsForAction(g)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const c in n){const h=n[c].actionByRoot[t];void 0!==h&&(this._deactivateAction(h),this._removeInactiveAction(h))}const a=this._bindingsByRootAndName[t];if(void 0!==a)for(const c in a){const u=a[c];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Pw{constructor(e,t,n=0,i=1/0){this.ray=new Yu(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new A_,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return Tf(e,this,n,t),n.sort(cy),n}intersectObjects(e,t=!0,n=[]){for(let i=0,a=e.length;i<a;i++)Tf(e[i],this,n,t);return n.sort(cy),n}}function cy(s,e){return s.distance-e.distance}function Tf(s,e,t,n){if(s.layers.test(e.layers)&&s.raycast(e,t),!0===n){const i=s.children;for(let a=0,c=i.length;a<c;a++)Tf(i[a],e,t,!0)}}class Wg{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Mr(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Zp=new ce,os=new rd;class Gw extends th{constructor(e){const t=new Ti,n=new Zo({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],c={};function u(R,B){h(R),h(B)}function h(R){i.push(0,0,0),a.push(0,0,0),void 0===c[R]&&(c[R]=[]),c[R].push(i.length/3-1)}u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4"),t.setAttribute("position",new En(i,3)),t.setAttribute("color",new En(a,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=c,this.update();const g=new Rt(16755200),y=new Rt(16711680),E=new Rt(43775),C=new Rt(16777215),T=new Rt(3355443);this.setColors(g,y,E,C,T)}setColors(e,t,n,i,a){const u=this.geometry.getAttribute("color");u.setXYZ(0,e.r,e.g,e.b),u.setXYZ(1,e.r,e.g,e.b),u.setXYZ(2,e.r,e.g,e.b),u.setXYZ(3,e.r,e.g,e.b),u.setXYZ(4,e.r,e.g,e.b),u.setXYZ(5,e.r,e.g,e.b),u.setXYZ(6,e.r,e.g,e.b),u.setXYZ(7,e.r,e.g,e.b),u.setXYZ(8,e.r,e.g,e.b),u.setXYZ(9,e.r,e.g,e.b),u.setXYZ(10,e.r,e.g,e.b),u.setXYZ(11,e.r,e.g,e.b),u.setXYZ(12,e.r,e.g,e.b),u.setXYZ(13,e.r,e.g,e.b),u.setXYZ(14,e.r,e.g,e.b),u.setXYZ(15,e.r,e.g,e.b),u.setXYZ(16,e.r,e.g,e.b),u.setXYZ(17,e.r,e.g,e.b),u.setXYZ(18,e.r,e.g,e.b),u.setXYZ(19,e.r,e.g,e.b),u.setXYZ(20,e.r,e.g,e.b),u.setXYZ(21,e.r,e.g,e.b),u.setXYZ(22,e.r,e.g,e.b),u.setXYZ(23,e.r,e.g,e.b),u.setXYZ(24,t.r,t.g,t.b),u.setXYZ(25,t.r,t.g,t.b),u.setXYZ(26,t.r,t.g,t.b),u.setXYZ(27,t.r,t.g,t.b),u.setXYZ(28,t.r,t.g,t.b),u.setXYZ(29,t.r,t.g,t.b),u.setXYZ(30,t.r,t.g,t.b),u.setXYZ(31,t.r,t.g,t.b),u.setXYZ(32,n.r,n.g,n.b),u.setXYZ(33,n.r,n.g,n.b),u.setXYZ(34,n.r,n.g,n.b),u.setXYZ(35,n.r,n.g,n.b),u.setXYZ(36,n.r,n.g,n.b),u.setXYZ(37,n.r,n.g,n.b),u.setXYZ(38,i.r,i.g,i.b),u.setXYZ(39,i.r,i.g,i.b),u.setXYZ(40,a.r,a.g,a.b),u.setXYZ(41,a.r,a.g,a.b),u.setXYZ(42,a.r,a.g,a.b),u.setXYZ(43,a.r,a.g,a.b),u.setXYZ(44,a.r,a.g,a.b),u.setXYZ(45,a.r,a.g,a.b),u.setXYZ(46,a.r,a.g,a.b),u.setXYZ(47,a.r,a.g,a.b),u.setXYZ(48,a.r,a.g,a.b),u.setXYZ(49,a.r,a.g,a.b),u.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;os.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ms("c",t,e,os,0,0,-1),Ms("t",t,e,os,0,0,1),Ms("n1",t,e,os,-1,-1,-1),Ms("n2",t,e,os,1,-1,-1),Ms("n3",t,e,os,-1,1,-1),Ms("n4",t,e,os,1,1,-1),Ms("f1",t,e,os,-1,-1,1),Ms("f2",t,e,os,1,-1,1),Ms("f3",t,e,os,-1,1,1),Ms("f4",t,e,os,1,1,1),Ms("u1",t,e,os,.7,1.1,-1),Ms("u2",t,e,os,-.7,1.1,-1),Ms("u3",t,e,os,0,2,-1),Ms("cf1",t,e,os,-1,0,1),Ms("cf2",t,e,os,1,0,1),Ms("cf3",t,e,os,0,-1,1),Ms("cf4",t,e,os,0,1,1),Ms("cn1",t,e,os,-1,0,-1),Ms("cn2",t,e,os,1,0,-1),Ms("cn3",t,e,os,0,-1,-1),Ms("cn4",t,e,os,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ms(s,e,t,n,i,a,c){Zp.set(i,a,c).unproject(n);const u=e[s];if(void 0!==u){const h=t.getAttribute("position");for(let g=0,y=u.length;g<y;g++)h.setXYZ(u[g],Zp.x,Zp.y,Zp.z)}}class jx extends th{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new Ti;i.setAttribute("position",new En(t,3)),i.setAttribute("color",new En([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(i,new Zo({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const i=new Rt,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(t),i.toArray(a,6),i.toArray(a,9),i.set(n),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function gy(s,e){if(0===e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),s;if(2===e||1===e){let t=s.getIndex();if(null===t){const c=[],u=s.getAttribute("position");if(void 0===u)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s;for(let h=0;h<u.count;h++)c.push(h);s.setIndex(c),t=s.getIndex()}const n=t.count-2,i=[];if(2===e)for(let c=1;c<=n;c++)i.push(t.getX(0)),i.push(t.getX(c)),i.push(t.getX(c+1));else for(let c=0;c<n;c++)c%2==0?(i.push(t.getX(c)),i.push(t.getX(c+1)),i.push(t.getX(c+2))):(i.push(t.getX(c+2)),i.push(t.getX(c+1)),i.push(t.getX(c)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=s.clone();return a.setIndex(i),a.clearGroups(),a}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),s}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"157"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="157");class _y extends Ef{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new XS(t)}),this.register(function(t){return new Wl(t)}),this.register(function(t){return new JS(t)}),this.register(function(t){return new vy(t)}),this.register(function(t){return new ZS(t)}),this.register(function(t){return new Kx(t)}),this.register(function(t){return new KS(t)}),this.register(function(t){return new $w(t)}),this.register(function(t){return new Zx(t)}),this.register(function(t){return new Yw(t)}),this.register(function(t){return new qS(t)}),this.register(function(t){return new Jx(t)}),this.register(function(t){return new Xx(t)}),this.register(function(t){return new QS(t)}),this.register(function(t){return new el(t)})}load(e,t,n,i){const a=this;let c;c=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Xp.extractUrlBase(e),this.manager.itemStart(e);const u=function(g){i?i(g):console.error(g),a.manager.itemError(e),a.manager.itemEnd(e)},h=new Cc(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(g){try{a.parse(g,c,function(y){t(y),a.manager.itemEnd(e)},u)}catch(y){u(y)}},n,u)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let a;const c={},u={},h=new TextDecoder;if("string"==typeof e)a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(h.decode(new Uint8Array(e,0,4))===Xw){try{c[Hi.KHR_BINARY_GLTF]=new eC(e)}catch(E){return void(i&&i(E))}a=JSON.parse(c[Hi.KHR_BINARY_GLTF].content)}else a=JSON.parse(h.decode(e));else a=e;if(void 0===a.asset||a.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const g=new e1(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});g.fileLoader.setRequestHeader(this.requestHeader);for(let y=0;y<this.pluginCallbacks.length;y++){const E=this.pluginCallbacks[y](g);u[E.name]=E,c[E.name]=!0}if(a.extensionsUsed)for(let y=0;y<a.extensionsUsed.length;++y){const E=a.extensionsUsed[y],C=a.extensionsRequired||[];switch(E){case Hi.KHR_MATERIALS_UNLIT:c[E]=new qx;break;case Hi.KHR_DRACO_MESH_COMPRESSION:c[E]=new yy(a,this.dracoLoader);break;case Hi.KHR_TEXTURE_TRANSFORM:c[E]=new Zw;break;case Hi.KHR_MESH_QUANTIZATION:c[E]=new Kw;break;default:C.indexOf(E)>=0&&void 0===u[E]&&console.warn('THREE.GLTFLoader: Unknown extension "'+E+'".')}}g.setExtensions(c),g.setPlugins(u),g.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,a){n.parse(e,t,i,a)})}}function Zg(){let s={};return{get:function(e){return s[e]},add:function(e,t){s[e]=t},remove:function(e){delete s[e]},removeAll:function(){s={}}}}const Hi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Xx{constructor(e){this.parser=e,this.name=Hi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const a=t[n];a.extensions&&a.extensions[this.name]&&void 0!==a.extensions[this.name].light&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const a=t.json,h=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let g;const y=new Rt(16777215);void 0!==h.color&&y.setRGB(h.color[0],h.color[1],h.color[2],oo);const E=void 0!==h.range?h.range:0;switch(h.type){case"directional":g=new Sf(y),g.target.position.set(0,0,-1),g.add(g.target);break;case"point":g=new Mf(y),g.distance=E;break;case"spot":g=new Bg(y),g.distance=E,h.spot=h.spot||{},h.spot.innerConeAngle=void 0!==h.spot.innerConeAngle?h.spot.innerConeAngle:0,h.spot.outerConeAngle=void 0!==h.spot.outerConeAngle?h.spot.outerConeAngle:Math.PI/4,g.angle=h.spot.outerConeAngle,g.penumbra=1-h.spot.innerConeAngle/h.spot.outerConeAngle,g.target.position.set(0,0,-1),g.add(g.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+h.type)}return g.position.set(0,0,0),g.decay=2,gd(g,h),void 0!==h.intensity&&(g.intensity=h.intensity),g.name=t.createUniqueName(h.name||"light_"+e),i=Promise.resolve(g),t.cache.add(n,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,a=n.json.nodes[e],u=(a.extensions&&a.extensions[this.name]||{}).light;return void 0===u?null:this._loadLight(u).then(function(h){return n._getNodeRef(t.cache,u,h)})}}class qx{constructor(){this.name=Hi.KHR_MATERIALS_UNLIT}getMaterialType(){return xi}extendParams(e,t,n){const i=[];e.color=new Rt(1,1,1),e.opacity=1;const a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const c=a.baseColorFactor;e.color.setRGB(c[0],c[1],c[2],oo),e.opacity=c[3]}void 0!==a.baseColorTexture&&i.push(n.assignTexture(e,"map",a.baseColorTexture,Pr))}return Promise.all(i)}}class Zx{constructor(e){this.parser=e,this.name=Hi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=i.extensions[this.name].emissiveStrength;return void 0!==a&&(t.emissiveIntensity=a),Promise.resolve()}}class XS{constructor(e){this.parser=e,this.name=Hi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?zl:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],c=i.extensions[this.name];if(void 0!==c.clearcoatFactor&&(t.clearcoat=c.clearcoatFactor),void 0!==c.clearcoatTexture&&a.push(n.assignTexture(t,"clearcoatMap",c.clearcoatTexture)),void 0!==c.clearcoatRoughnessFactor&&(t.clearcoatRoughness=c.clearcoatRoughnessFactor),void 0!==c.clearcoatRoughnessTexture&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",c.clearcoatRoughnessTexture)),void 0!==c.clearcoatNormalTexture&&(a.push(n.assignTexture(t,"clearcoatNormalMap",c.clearcoatNormalTexture)),void 0!==c.clearcoatNormalTexture.scale)){const u=c.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new yt(u,u)}return Promise.all(a)}}class qS{constructor(e){this.parser=e,this.name=Hi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?zl:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],c=i.extensions[this.name];return void 0!==c.iridescenceFactor&&(t.iridescence=c.iridescenceFactor),void 0!==c.iridescenceTexture&&a.push(n.assignTexture(t,"iridescenceMap",c.iridescenceTexture)),void 0!==c.iridescenceIor&&(t.iridescenceIOR=c.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==c.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=c.iridescenceThicknessMinimum),void 0!==c.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=c.iridescenceThicknessMaximum),void 0!==c.iridescenceThicknessTexture&&a.push(n.assignTexture(t,"iridescenceThicknessMap",c.iridescenceThicknessTexture)),Promise.all(a)}}class ZS{constructor(e){this.parser=e,this.name=Hi.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?zl:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[];t.sheenColor=new Rt(0,0,0),t.sheenRoughness=0,t.sheen=1;const c=i.extensions[this.name];if(void 0!==c.sheenColorFactor){const u=c.sheenColorFactor;t.sheenColor.setRGB(u[0],u[1],u[2],oo)}return void 0!==c.sheenRoughnessFactor&&(t.sheenRoughness=c.sheenRoughnessFactor),void 0!==c.sheenColorTexture&&a.push(n.assignTexture(t,"sheenColorMap",c.sheenColorTexture,Pr)),void 0!==c.sheenRoughnessTexture&&a.push(n.assignTexture(t,"sheenRoughnessMap",c.sheenRoughnessTexture)),Promise.all(a)}}class Kx{constructor(e){this.parser=e,this.name=Hi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?zl:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],c=i.extensions[this.name];return void 0!==c.transmissionFactor&&(t.transmission=c.transmissionFactor),void 0!==c.transmissionTexture&&a.push(n.assignTexture(t,"transmissionMap",c.transmissionTexture)),Promise.all(a)}}class KS{constructor(e){this.parser=e,this.name=Hi.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?zl:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],c=i.extensions[this.name];t.thickness=void 0!==c.thicknessFactor?c.thicknessFactor:0,void 0!==c.thicknessTexture&&a.push(n.assignTexture(t,"thicknessMap",c.thicknessTexture)),t.attenuationDistance=c.attenuationDistance||1/0;const u=c.attenuationColor||[1,1,1];return t.attenuationColor=(new Rt).setRGB(u[0],u[1],u[2],oo),Promise.all(a)}}class $w{constructor(e){this.parser=e,this.name=Hi.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?zl:null}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=i.extensions[this.name];return t.ior=void 0!==a.ior?a.ior:1.5,Promise.resolve()}}class Yw{constructor(e){this.parser=e,this.name=Hi.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?zl:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],c=i.extensions[this.name];t.specularIntensity=void 0!==c.specularFactor?c.specularFactor:1,void 0!==c.specularTexture&&a.push(n.assignTexture(t,"specularIntensityMap",c.specularTexture));const u=c.specularColorFactor||[1,1,1];return t.specularColor=(new Rt).setRGB(u[0],u[1],u[2],oo),void 0!==c.specularColorTexture&&a.push(n.assignTexture(t,"specularColorMap",c.specularColorTexture,Pr)),Promise.all(a)}}class Jx{constructor(e){this.parser=e,this.name=Hi.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?zl:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],c=i.extensions[this.name];return void 0!==c.anisotropyStrength&&(t.anisotropy=c.anisotropyStrength),void 0!==c.anisotropyRotation&&(t.anisotropyRotation=c.anisotropyRotation),void 0!==c.anisotropyTexture&&a.push(n.assignTexture(t,"anisotropyMap",c.anisotropyTexture)),Promise.all(a)}}class Wl{constructor(e){this.parser=e,this.name=Hi.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const a=i.extensions[this.name],c=t.options.ktx2Loader;if(!c){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,c)}}class JS{constructor(e){this.parser=e,this.name=Hi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,a=i.textures[e];if(!a.extensions||!a.extensions[t])return null;const c=a.extensions[t],u=i.images[c.source];let h=n.textureLoader;if(u.uri){const g=n.options.manager.getHandler(u.uri);null!==g&&(h=g)}return this.detectSupport().then(function(g){if(g)return n.loadTextureImage(e,c.source,h);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class vy{constructor(e){this.parser=e,this.name=Hi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,a=i.textures[e];if(!a.extensions||!a.extensions[t])return null;const c=a.extensions[t],u=i.images[c.source];let h=n.textureLoader;if(u.uri){const g=n.options.manager.getHandler(u.uri);null!==g&&(h=g)}return this.detectSupport().then(function(g){if(g)return n.loadTextureImage(e,c.source,h);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class QS{constructor(e){this.name=Hi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],a=this.parser.getDependency("buffer",i.buffer),c=this.parser.options.meshoptDecoder;if(!c||!c.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(u){const y=i.count,E=i.byteStride,C=new Uint8Array(u,i.byteOffset||0,i.byteLength||0);return c.decodeGltfBufferAsync?c.decodeGltfBufferAsync(y,E,C,i.mode,i.filter).then(function(T){return T.buffer}):c.ready.then(function(){const T=new ArrayBuffer(y*E);return c.decodeGltfBuffer(new Uint8Array(T),y,E,C,i.mode,i.filter),T})})}return null}}class el{constructor(e){this.name=Hi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=t.meshes[n.mesh];for(const g of i.primitives)if(g.mode!==tl.TRIANGLES&&g.mode!==tl.TRIANGLE_STRIP&&g.mode!==tl.TRIANGLE_FAN&&void 0!==g.mode)return null;const c=n.extensions[this.name].attributes,u=[],h={};for(const g in c)u.push(this.parser.getDependency("accessor",c[g]).then(y=>(h[g]=y,h[g])));return u.length<1?null:(u.push(this.parser.createNodeMesh(e)),Promise.all(u).then(g=>{const y=g.pop(),E=y.isGroup?y.children:[y],C=g[0].count,T=[];for(const R of E){const B=new Kn,L=new ce,O=new Ds,q=new ce(1,1,1),j=new Vb(R.geometry,R.material,C);for(let Z=0;Z<C;Z++)h.TRANSLATION&&L.fromBufferAttribute(h.TRANSLATION,Z),h.ROTATION&&O.fromBufferAttribute(h.ROTATION,Z),h.SCALE&&q.fromBufferAttribute(h.SCALE,Z),j.setMatrixAt(Z,B.compose(L,O,q));for(const Z in h)"TRANSLATION"!==Z&&"ROTATION"!==Z&&"SCALE"!==Z&&R.geometry.setAttribute(Z,h[Z]);M.prototype.copy.call(j,R),this.parser.assignFinalMaterial(j),T.push(j)}return y.isGroup?(y.clear(),y.add(...T),y):T[0]}))}}const Xw="glTF";class eC{constructor(e){this.name=Hi.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Xw)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,a=new DataView(e,12);let c=0;for(;c<i;){const u=a.getUint32(c,!0);c+=4;const h=a.getUint32(c,!0);if(c+=4,1313821514===h){const g=new Uint8Array(e,12+c,u);this.content=n.decode(g)}else if(5130562===h){const g=12+c;this.body=e.slice(g,g+u)}c+=u}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class yy{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Hi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,a=e.extensions[this.name].bufferView,c=e.extensions[this.name].attributes,u={},h={},g={};for(const y in c){const E=Jg[y]||y.toLowerCase();u[E]=c[y]}for(const y in e.attributes){const E=Jg[y]||y.toLowerCase();if(void 0!==c[y]){const C=n.accessors[e.attributes[y]];g[E]=dh[C.componentType].name,h[E]=!0===C.normalized}}return t.getDependency("bufferView",a).then(function(y){return new Promise(function(E){i.decodeDracoFile(y,function(C){for(const T in C.attributes){const R=C.attributes[T],B=h[T];void 0!==B&&(R.normalized=B)}E(C)},u,g)})})}}class Zw{constructor(){this.name=Hi.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Kw{constructor(){this.name=Hi.KHR_MESH_QUANTIZATION}}class Jw extends _f{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=e*i*3+i;for(let c=0;c!==i;c++)t[c]=n[a+c];return t}interpolate_(e,t,n,i){const a=this.resultBuffer,c=this.sampleValues,u=this.valueSize,h=2*u,g=3*u,y=i-t,E=(n-t)/y,C=E*E,T=C*E,R=e*g,B=R-g,L=-2*T+3*C,O=T-C,q=1-L,j=O-C+E;for(let Z=0;Z!==u;Z++)a[Z]=q*c[B+Z+u]+j*(c[B+Z+h]*y)+L*c[R+Z+u]+O*(c[R+Z]*y);return a}}const Qw=new Ds;class eE extends Jw{interpolate_(e,t,n,i){const a=super.interpolate_(e,t,n,i);return Qw.fromArray(a).normalize().toArray(a),a}}const tl={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},dh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tE={9728:mr,9729:sr,9984:1004,9985:1007,9986:1005,9987:Ga},Kg={33071:pr,33648:1002,10497:Vs},xc={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Jg={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Tc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},xu={CUBICSPLINE:void 0,LINEAR:lc,STEP:Bu};function hh(s,e,t){for(const n in t.extensions)void 0===s[n]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function gd(s,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(s.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function nC(s,e){if(s.updateMorphTargets(),void 0!==e.weights)for(let t=0,n=e.weights.length;t<n;t++)s.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(s.morphTargetInfluences.length===t.length){s.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++)s.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function nE(s){let e;const t=s.extensions&&s.extensions[Hi.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+iE(t.attributes):s.indices+":"+iE(s.attributes)+":"+s.mode,void 0!==s.targets)for(let n=0,i=s.targets.length;n<i;n++)e+=":"+iE(s.targets[n]);return e}function iE(s){let e="";const t=Object.keys(s).sort();for(let n=0,i=t.length;n<i;n++)e+=t[n]+":"+s[t[n]]+";";return e}function Qg(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const rE=new Kn;class e1{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Zg,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,a=-1;typeof navigator<"u"&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,a=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||n||i&&a<98?new yw(this.options.manager):new Sw(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Cc(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(c){return c._markDefs&&c._markDefs()}),Promise.all(this._invokeAll(function(c){return c.beforeRoot&&c.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(c){const u={scene:c[0][i.scene||0],scenes:c[0],animations:c[1],cameras:c[2],asset:i.asset,parser:n,userData:{}};return hh(a,u,i),gd(u,i),Promise.all(n._invokeAll(function(h){return h.afterRoot&&h.afterRoot(u)})).then(function(){e(u)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,a=t.length;i<a;i++){const c=t[i].joints;for(let u=0,h=c.length;u<h;u++)e[c[u]].isBone=!0}for(let i=0,a=e.length;i<a;i++){const c=e[i];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),a=(c,u)=>{const h=this.associations.get(c);null!=h&&this.associations.set(u,h);for(const[g,y]of c.children.entries())a(y,u.children[g])};return a(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const a=e(t[i]);a&&n.push(a)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(a){return a.loadNode&&a.loadNode(t)});break;case"mesh":i=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(a,c){return n.getDependency(e,c)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Hi.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(a,c){n.load(Xp.resolveURL(t.uri,i.path),a,void 0,function(){c(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const a=t.byteOffset||0;return n.slice(a,a+(t.byteLength||0))})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){const c=xc[i.type],h=!0===i.normalized,g=new(0,dh[i.componentType])(i.count*c);return Promise.resolve(new Bi(g,c,h))}const a=[];return a.push(void 0!==i.bufferView?this.getDependency("bufferView",i.bufferView):null),void 0!==i.sparse&&(a.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(a).then(function(c){const u=c[0],h=xc[i.type],g=dh[i.componentType],y=g.BYTES_PER_ELEMENT,C=i.byteOffset||0,T=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,R=!0===i.normalized;let B,L;if(T&&T!==y*h){const O=Math.floor(C/T),q="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+O+":"+i.count;let j=t.cache.get(q);j||(B=new g(u,O*T,i.count*T/y),j=new ya(B,T/y),t.cache.add(q,j)),L=new ld(j,h,C%T/y,R)}else B=null===u?new g(i.count*h):new g(u,C,i.count*h),L=new Bi(B,h,R);if(void 0!==i.sparse){const Z=i.sparse.values.byteOffset||0,ie=new(0,dh[i.sparse.indices.componentType])(c[1],i.sparse.indices.byteOffset||0,i.sparse.count*xc.SCALAR),oe=new g(c[2],Z,i.sparse.count*h);null!==u&&(L=new Bi(L.array.slice(),L.itemSize,L.normalized));for(let re=0,pe=ie.length;re<pe;re++){const te=ie[re];if(L.setX(te,oe[re*h]),h>=2&&L.setY(te,oe[re*h+1]),h>=3&&L.setZ(te,oe[re*h+2]),h>=4&&L.setW(te,oe[re*h+3]),h>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return L})}loadTexture(e){const t=this.json,a=t.textures[e].source,c=t.images[a];let u=this.textureLoader;if(c.uri){const h=this.options.manager.getHandler(c.uri);null!==h&&(u=h)}return this.loadTextureImage(e,a,u)}loadTextureImage(e,t,n){const i=this,a=this.json,c=a.textures[e],u=a.images[t],h=(u.uri||u.bufferView)+":"+c.sampler;if(this.textureCache[h])return this.textureCache[h];const g=this.loadImageSource(t,n).then(function(y){y.flipY=!1,y.name=c.name||u.name||"",""===y.name&&"string"==typeof u.uri&&!1===u.uri.startsWith("data:image/")&&(y.name=u.uri);const C=(a.samplers||{})[c.sampler]||{};return y.magFilter=tE[C.magFilter]||sr,y.minFilter=tE[C.minFilter]||Ga,y.wrapS=Kg[C.wrapS]||Vs,y.wrapT=Kg[C.wrapT]||Vs,i.associations.set(y,{textures:e}),y}).catch(function(){return null});return this.textureCache[h]=g,g}loadImageSource(e,t){const i=this.json,a=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(E=>E.clone());const c=i.images[e],u=self.URL||self.webkitURL;let h=c.uri||"",g=!1;if(void 0!==c.bufferView)h=this.getDependency("bufferView",c.bufferView).then(function(E){g=!0;const C=new Blob([E],{type:c.mimeType});return h=u.createObjectURL(C),h});else if(void 0===c.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const y=Promise.resolve(h).then(function(E){return new Promise(function(C,T){let R=C;!0===t.isImageBitmapLoader&&(R=function(B){const L=new Po(B);L.needsUpdate=!0,C(L)}),t.load(Xp.resolveURL(E,a.path),R,void 0,T)})}).then(function(E){return!0===g&&u.revokeObjectURL(h),E.userData.mimeType=c.mimeType||function iC(s){return s.search(/\.jpe?g($|\?)/i)>0||0===s.search(/^data\:image\/jpeg/)?"image/jpeg":s.search(/\.webp($|\?)/i)>0||0===s.search(/^data\:image\/webp/)?"image/webp":"image/png"}(c.uri),E}).catch(function(E){throw console.error("THREE.GLTFLoader: Couldn't load texture",h),E});return this.sourceCache[e]=y,y}assignTexture(e,t,n,i){const a=this;return this.getDependency("texture",n.index).then(function(c){if(!c)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((c=c.clone()).channel=n.texCoord),a.extensions[Hi.KHR_TEXTURE_TRANSFORM]){const u=void 0!==n.extensions?n.extensions[Hi.KHR_TEXTURE_TRANSFORM]:void 0;if(u){const h=a.associations.get(c);c=a.extensions[Hi.KHR_TEXTURE_TRANSFORM].extendTexture(c,u),a.associations.set(c,h)}}return void 0!==i&&(c.colorSpace=i),e[t]=c,c})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,c=void 0===t.attributes.normal;if(e.isPoints){const u="PointsMaterial:"+n.uuid;let h=this.cache.get(u);h||(h=new yu,$n.prototype.copy.call(h,n),h.color.copy(n.color),h.map=n.map,h.sizeAttenuation=!1,this.cache.add(u,h)),n=h}else if(e.isLine){const u="LineBasicMaterial:"+n.uuid;let h=this.cache.get(u);h||(h=new Zo,$n.prototype.copy.call(h,n),h.color.copy(n.color),h.map=n.map,this.cache.add(u,h)),n=h}if(i||a||c){let u="ClonedMaterial:"+n.uuid+":";i&&(u+="derivative-tangents:"),a&&(u+="vertex-colors:"),c&&(u+="flat-shading:");let h=this.cache.get(u);h||(h=n.clone(),a&&(h.vertexColors=!0),c&&(h.flatShading=!0),i&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(u,h),this.associations.set(h,this.associations.get(n))),n=h}e.material=n}getMaterialType(){return oh}loadMaterial(e){const t=this,i=this.extensions,a=this.json.materials[e];let c;const u={},g=[];if((a.extensions||{})[Hi.KHR_MATERIALS_UNLIT]){const E=i[Hi.KHR_MATERIALS_UNLIT];c=E.getMaterialType(),g.push(E.extendParams(u,a,t))}else{const E=a.pbrMetallicRoughness||{};if(u.color=new Rt(1,1,1),u.opacity=1,Array.isArray(E.baseColorFactor)){const C=E.baseColorFactor;u.color.setRGB(C[0],C[1],C[2],oo),u.opacity=C[3]}void 0!==E.baseColorTexture&&g.push(t.assignTexture(u,"map",E.baseColorTexture,Pr)),u.metalness=void 0!==E.metallicFactor?E.metallicFactor:1,u.roughness=void 0!==E.roughnessFactor?E.roughnessFactor:1,void 0!==E.metallicRoughnessTexture&&(g.push(t.assignTexture(u,"metalnessMap",E.metallicRoughnessTexture)),g.push(t.assignTexture(u,"roughnessMap",E.metallicRoughnessTexture))),c=this._invokeOne(function(C){return C.getMaterialType&&C.getMaterialType(e)}),g.push(Promise.all(this._invokeAll(function(C){return C.extendMaterialParams&&C.extendMaterialParams(e,u)})))}!0===a.doubleSided&&(u.side=2);const y=a.alphaMode||"OPAQUE";if("BLEND"===y?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,"MASK"===y&&(u.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&c!==xi&&(g.push(t.assignTexture(u,"normalMap",a.normalTexture)),u.normalScale=new yt(1,1),void 0!==a.normalTexture.scale)){const E=a.normalTexture.scale;u.normalScale.set(E,E)}if(void 0!==a.occlusionTexture&&c!==xi&&(g.push(t.assignTexture(u,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(u.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&c!==xi){const E=a.emissiveFactor;u.emissive=(new Rt).setRGB(E[0],E[1],E[2],oo)}return void 0!==a.emissiveTexture&&c!==xi&&g.push(t.assignTexture(u,"emissiveMap",a.emissiveTexture,Pr)),Promise.all(g).then(function(){const E=new c(u);return a.name&&(E.name=a.name),gd(E,a),t.associations.set(E,{materials:e}),a.extensions&&hh(i,E,a),E})}createUniqueName(e){const t=Sr.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function a(u){return n[Hi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(u,t).then(function(h){return Ey(h,u,t)})}const c=[];for(let u=0,h=e.length;u<h;u++){const g=e[u],y=nE(g),E=i[y];if(E)c.push(E.promise);else{let C;C=g.extensions&&g.extensions[Hi.KHR_DRACO_MESH_COMPRESSION]?a(g):Ey(new Ti,g,t),i[y]={primitive:g,promise:C},c.push(C)}}return Promise.all(c)}loadMesh(e){const t=this,i=this.extensions,a=this.json.meshes[e],c=a.primitives,u=[];for(let h=0,g=c.length;h<g;h++){const y=void 0===c[h].material?(void 0===(s=this.cache).DefaultMaterial&&(s.DefaultMaterial=new oh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),s.DefaultMaterial):this.getDependency("material",c[h].material);u.push(y)}var s;return u.push(t.loadGeometries(c)),Promise.all(u).then(function(h){const g=h.slice(0,h.length-1),y=h[h.length-1],E=[];for(let T=0,R=y.length;T<R;T++){const B=y[T],L=c[T];let O;const q=g[T];if(L.mode===tl.TRIANGLES||L.mode===tl.TRIANGLE_STRIP||L.mode===tl.TRIANGLE_FAN||void 0===L.mode)O=!0===a.isSkinnedMesh?new Fb(B,q):new zs(B,q),!0===O.isSkinnedMesh&&O.normalizeSkinWeights(),L.mode===tl.TRIANGLE_STRIP?O.geometry=gy(O.geometry,1):L.mode===tl.TRIANGLE_FAN&&(O.geometry=gy(O.geometry,2));else if(L.mode===tl.LINES)O=new th(B,q);else if(L.mode===tl.LINE_STRIP)O=new ud(B,q);else if(L.mode===tl.LINE_LOOP)O=new gg(B,q);else{if(L.mode!==tl.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+L.mode);O=new _g(B,q)}Object.keys(O.geometry.morphAttributes).length>0&&nC(O,a),O.name=t.createUniqueName(a.name||"mesh_"+e),gd(O,a),L.extensions&&hh(i,O,L),t.assignFinalMaterial(O),E.push(O)}for(let T=0,R=E.length;T<R;T++)t.associations.set(E[T],{meshes:e,primitives:T});if(1===E.length)return a.extensions&&hh(i,E[0],a),E[0];const C=new vu;a.extensions&&hh(i,C,a),t.associations.set(C,{meshes:e});for(let T=0,R=E.length;T<R;T++)C.add(E[T]);return C})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new Rr(Al_radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new gp(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),gd(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,a=t.joints.length;i<a;i++)n.push(this._loadNodeShallow(t.joints[i]));return n.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(n).then(function(i){const a=i.pop(),c=i,u=[],h=[];for(let g=0,y=c.length;g<y;g++){const E=c[g];if(E){u.push(E);const C=new Kn;null!==a&&C.fromArray(a.array,16*g),h.push(C)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[g])}return new fg(u,h)})}loadAnimation(e){const n=this,i=this.json.animations[e],a=i.name?i.name:"animation_"+e,c=[],u=[],h=[],g=[],y=[];for(let E=0,C=i.channels.length;E<C;E++){const T=i.channels[E],R=i.samplers[T.sampler],B=T.target,L=B.node,O=void 0!==i.parameters?i.parameters[R.input]:R.input,q=void 0!==i.parameters?i.parameters[R.output]:R.output;void 0!==B.node&&(c.push(this.getDependency("node",L)),u.push(this.getDependency("accessor",O)),h.push(this.getDependency("accessor",q)),g.push(R),y.push(B))}return Promise.all([Promise.all(c),Promise.all(u),Promise.all(h),Promise.all(g),Promise.all(y)]).then(function(E){const C=E[0],T=E[1],R=E[2],B=E[3],L=E[4],O=[];for(let q=0,j=C.length;q<j;q++){const Z=C[q],ie=T[q],oe=R[q],re=B[q],pe=L[q];if(void 0===Z)continue;Z.updateMatrix&&Z.updateMatrix();const te=n._createAnimationTracks(Z,ie,oe,re,pe);if(te)for(let ae=0;ae<te.length;ae++)O.push(te[ae])}return new Pg(a,void 0,O)})}createNodeMesh(e){const n=this,i=this.json.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then(function(a){const c=n._getNodeRef(n.meshCache,i.mesh,a);return void 0!==i.weights&&c.traverse(function(u){if(u.isMesh)for(let h=0,g=i.weights.length;h<g;h++)u.morphTargetInfluences[h]=i.weights[h]}),c})}loadNode(e){const n=this,i=this.json.nodes[e],a=n._loadNodeShallow(e),c=[],u=i.children||[];for(let g=0,y=u.length;g<y;g++)c.push(n.getDependency("node",u[g]));const h=void 0===i.skin?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([a,Promise.all(c),h]).then(function(g){const y=g[0],E=g[1],C=g[2];null!==C&&y.traverse(function(T){!T.isSkinnedMesh||T.bind(C,rE)});for(let T=0,R=E.length;T<R;T++)y.add(E[T]);return y})}_loadNodeShallow(e){const n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const a=this.json.nodes[e],c=a.name?i.createUniqueName(a.name):"",u=[],h=i._invokeOne(function(g){return g.createNodeMesh&&g.createNodeMesh(e)});return h&&u.push(h),void 0!==a.camera&&u.push(i.getDependency("camera",a.camera).then(function(g){return i._getNodeRef(i.cameraCache,a.camera,g)})),i._invokeAll(function(g){return g.createNodeAttachment&&g.createNodeAttachment(e)}).forEach(function(g){u.push(g)}),this.nodeCache[e]=Promise.all(u).then(function(g){let y;if(y=!0===a.isBone?new Av:g.length>1?new vu:1===g.length?g[0]:new M,y!==g[0])for(let E=0,C=g.length;E<C;E++)y.add(g[E]);if(a.name&&(y.userData.name=a.name,y.name=c),gd(y,a),a.extensions&&hh(n,y,a),void 0!==a.matrix){const E=new Kn;E.fromArray(a.matrix),y.applyMatrix4(E)}else void 0!==a.translation&&y.position.fromArray(a.translation),void 0!==a.rotation&&y.quaternion.fromArray(a.rotation),void 0!==a.scale&&y.scale.fromArray(a.scale);return i.associations.has(y)||i.associations.set(y,{}),i.associations.get(y).nodes=e,y}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,a=new vu;n.name&&(a.name=i.createUniqueName(n.name)),gd(a,n),n.extensions&&hh(t,a,n);const c=n.nodes||[],u=[];for(let h=0,g=c.length;h<g;h++)u.push(i.getDependency("node",c[h]));return Promise.all(u).then(function(h){for(let y=0,E=h.length;y<E;y++)a.add(h[y]);return i.associations=(y=>{const E=new Map;for(const[C,T]of i.associations)(C instanceof $n||C instanceof Po)&&E.set(C,T);return y.traverse(C=>{const T=i.associations.get(C);null!=T&&E.set(C,T)}),E})(a),a})}_createAnimationTracks(e,t,n,i,a){const c=[],u=e.name?e.name:e.uuid,h=[];let g;switch(Tc[a.path]===Tc.weights?e.traverse(function(C){C.morphTargetInfluences&&h.push(C.name?C.name:C.uuid)}):h.push(u),Tc[a.path]){case Tc.weights:g=ah;break;case Tc.rotation:g=pd;break;case Tc.position:case Tc.scale:g=bf;break;default:g=1===n.itemSize?ah:bf}const y=void 0!==i.interpolation?xu[i.interpolation]:lc,E=this._getArrayFromAccessor(n);for(let C=0,T=h.length;C<T;C++){const R=new g(h[C]+"."+Tc[a.path],t.array,E,y);"CUBICSPLINE"===i.interpolation&&this._createCubicSplineTrackInterpolant(R),c.push(R)}return c}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=Qg(t.constructor),i=new Float32Array(t.length);for(let a=0,c=t.length;a<c;a++)i[a]=t[a]*n;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){return new(this instanceof pd?eE:Jw)(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Ey(s,e,t){const n=e.attributes,i=[];function a(c,u){return t.getDependency("accessor",c).then(function(h){s.setAttribute(u,h)})}for(const c in n){const u=Jg[c]||c.toLowerCase();u in s.attributes||i.push(a(n[c],u))}if(void 0!==e.indices&&!s.index){const c=t.getDependency("accessor",e.indices).then(function(u){s.setIndex(u)});i.push(c)}return Zi.workingColorSpace!==oo&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Zi.workingColorSpace}" not supported.`),gd(s,e),function wy(s,e,t){const n=e.attributes,i=new Il;if(void 0===n.POSITION)return;{const u=t.json.accessors[n.POSITION],h=u.min,g=u.max;if(void 0===h||void 0===g)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new ce(h[0],h[1],h[2]),new ce(g[0],g[1],g[2])),u.normalized){const y=Qg(dh[u.componentType]);i.min.multiplyScalar(y),i.max.multiplyScalar(y)}}const a=e.targets;if(void 0!==a){const u=new ce,h=new ce;for(let g=0,y=a.length;g<y;g++){const E=a[g];if(void 0!==E.POSITION){const C=t.json.accessors[E.POSITION],T=C.min,R=C.max;if(void 0!==T&&void 0!==R){if(h.setX(Math.max(Math.abs(T[0]),Math.abs(R[0]))),h.setY(Math.max(Math.abs(T[1]),Math.abs(R[1]))),h.setZ(Math.max(Math.abs(T[2]),Math.abs(R[2]))),C.normalized){const B=Qg(dh[C.componentType]);h.multiplyScalar(B)}u.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(u)}s.boundingBox=i;const c=new As;i.getCenter(c.center),c.radius=i.min.distanceTo(i.max)/2,s.boundingSphere=c}(s,e,t),Promise.all(i).then(function(){return void 0!==e.targets?function tC(s,e,t){let n=!1,i=!1,a=!1;for(let g=0,y=e.length;g<y;g++){const E=e[g];if(void 0!==E.POSITION&&(n=!0),void 0!==E.NORMAL&&(i=!0),void 0!==E.COLOR_0&&(a=!0),n&&i&&a)break}if(!n&&!i&&!a)return Promise.resolve(s);const c=[],u=[],h=[];for(let g=0,y=e.length;g<y;g++){const E=e[g];if(n){const C=void 0!==E.POSITION?t.getDependency("accessor",E.POSITION):s.attributes.position;c.push(C)}if(i){const C=void 0!==E.NORMAL?t.getDependency("accessor",E.NORMAL):s.attributes.normal;u.push(C)}if(a){const C=void 0!==E.COLOR_0?t.getDependency("accessor",E.COLOR_0):s.attributes.color;h.push(C)}}return Promise.all([Promise.all(c),Promise.all(u),Promise.all(h)]).then(function(g){const E=g[1],C=g[2];return n&&(s.morphAttributes.position=g[0]),i&&(s.morphAttributes.normal=E),a&&(s.morphAttributes.color=C),s.morphTargetsRelative=!0,s})}(s,e.targets,t):s})}const My={type:"change"},e_={type:"start"},Sy={type:"end"},Kp=new Yu,Jp=new pu,t_=Math.cos(70*Al_DEG2RAD);class sE extends Tl{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ce,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Te){Te.addEventListener("keydown",se),this._domElementKeyEvents=Te},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",se),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(My),n.update(),a=i.NONE},this.update=function(){const Te=new ce,Zt=(new Ds).setFromUnitVectors(e.up,new ce(0,1,0)),It=Zt.clone().invert(),ii=new ce,zn=new Ds,qn=new ce,Un=2*Math.PI;return function(nn=null){const Kt=n.object.position;Te.copy(Kt).sub(n.target),Te.applyQuaternion(Zt),u.setFromVector3(Te),n.autoRotate&&a===i.NONE&&ze(function te(Te){return null!==Te?2*Math.PI/60*n.autoRotateSpeed*Te:2*Math.PI/60/60*n.autoRotateSpeed}(nn)),n.enableDamping?(u.theta+=h.theta*n.dampingFactor,u.phi+=h.phi*n.dampingFactor):(u.theta+=h.theta,u.phi+=h.phi);let fn=n.minAzimuthAngle,sn=n.maxAzimuthAngle;isFinite(fn)&&isFinite(sn)&&(fn<-Math.PI?fn+=Un:fn>Math.PI&&(fn-=Un),sn<-Math.PI?sn+=Un:sn>Math.PI&&(sn-=Un),u.theta=fn<=sn?Math.max(fn,Math.min(sn,u.theta)):u.theta>(fn+sn)/2?Math.max(fn,u.theta):Math.min(sn,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),u.radius=Xe(n.zoomToCursor&&oe||n.object.isOrthographicCamera?u.radius:u.radius*g),Te.setFromSpherical(u),Te.applyQuaternion(It),Kt.copy(n.target).add(Te),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),y.set(0,0,0));let Ft=!1;if(n.zoomToCursor&&oe){let Fn=null;if(n.object.isPerspectiveCamera){const si=Te.length();Fn=Xe(si*g),n.object.position.addScaledVector(Z,si-Fn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const si=new ce(ie.x,ie.y,0);si.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/g)),n.object.updateProjectionMatrix(),Ft=!0;const ho=new ce(ie.x,ie.y,0);ho.unproject(n.object),n.object.position.sub(ho).add(si),n.object.updateMatrixWorld(),Fn=Te.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==Fn&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Fn).add(n.object.position):(Kp.origin.copy(n.object.position),Kp.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Kp.direction))<t_?e.lookAt(n.target):(Jp.setFromNormalAndCoplanarPoint(n.object.up,n.target),Kp.intersectPlane(Jp,n.target))))}else n.object.isOrthographicCamera&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/g)),n.object.updateProjectionMatrix(),Ft=!0);return g=1,oe=!1,!!(Ft||ii.distanceToSquared(n.object.position)>c||8*(1-zn.dot(n.object.quaternion))>c||qn.distanceToSquared(n.target)>0)&&(n.dispatchEvent(My),ii.copy(n.object.position),zn.copy(n.object.quaternion),qn.copy(n.target),Ft=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Ut),n.domElement.removeEventListener("pointerdown",Tn),n.domElement.removeEventListener("pointercancel",ti),n.domElement.removeEventListener("wheel",me),n.domElement.removeEventListener("pointermove",An),n.domElement.removeEventListener("pointerup",ti),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",se),n._domElementKeyEvents=null)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=i.NONE;const c=1e-6,u=new Wg,h=new Wg;let g=1;const y=new ce,E=new yt,C=new yt,T=new yt,R=new yt,B=new yt,L=new yt,O=new yt,q=new yt,j=new yt,Z=new ce,ie=new yt;let oe=!1;const re=[],pe={};function ae(){return Math.pow(.95,n.zoomSpeed)}function ze(Te){h.theta-=Te}function dt(Te){h.phi-=Te}const bt=function(){const Te=new ce;return function(It,ii){Te.setFromMatrixColumn(ii,0),Te.multiplyScalar(-It),y.add(Te)}}(),De=function(){const Te=new ce;return function(It,ii){!0===n.screenSpacePanning?Te.setFromMatrixColumn(ii,1):(Te.setFromMatrixColumn(ii,0),Te.crossVectors(n.object.up,Te)),Te.multiplyScalar(It),y.add(Te)}}(),Ke=function(){const Te=new ce;return function(It,ii){const zn=n.domElement;if(n.object.isPerspectiveCamera){Te.copy(n.object.position).sub(n.target);let Un=Te.length();Un*=Math.tan(n.object.fov/2*Math.PI/180),bt(2*It*Un/zn.clientHeight,n.object.matrix),De(2*ii*Un/zn.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(bt(It*(n.object.right-n.object.left)/n.object.zoom/zn.clientWidth,n.object.matrix),De(ii*(n.object.top-n.object.bottom)/n.object.zoom/zn.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function Ne(Te){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?g/=Te:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Ve(Te){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?g*=Te:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function rt(Te){if(!n.zoomToCursor)return;oe=!0;const Zt=n.domElement.getBoundingClientRect(),ii=Te.clientY-Zt.top,qn=Zt.height;ie.x=(Te.clientX-Zt.left)/Zt.width*2-1,ie.y=-ii/qn*2+1,Z.set(ie.x,ie.y,1).unproject(n.object).sub(n.object.position).normalize()}function Xe(Te){return Math.max(n.minDistance,Math.min(n.maxDistance,Te))}function wt(Te){E.set(Te.clientX,Te.clientY)}function ut(Te){R.set(Te.clientX,Te.clientY)}function xn(){1===re.length?E.set(re[0].pageX,re[0].pageY):E.set(.5*(re[0].pageX+re[1].pageX),.5*(re[0].pageY+re[1].pageY))}function Jn(){1===re.length?R.set(re[0].pageX,re[0].pageY):R.set(.5*(re[0].pageX+re[1].pageX),.5*(re[0].pageY+re[1].pageY))}function Ni(){const Te=re[0].pageX-re[1].pageX,Zt=re[0].pageY-re[1].pageY,It=Math.sqrt(Te*Te+Zt*Zt);O.set(0,It)}function en(Te){if(1==re.length)C.set(Te.pageX,Te.pageY);else{const It=mn(Te);C.set(.5*(Te.pageX+It.x),.5*(Te.pageY+It.y))}T.subVectors(C,E).multiplyScalar(n.rotateSpeed);const Zt=n.domElement;ze(2*Math.PI*T.x/Zt.clientHeight),dt(2*Math.PI*T.y/Zt.clientHeight),E.copy(C)}function Tt(Te){if(1===re.length)B.set(Te.pageX,Te.pageY);else{const Zt=mn(Te);B.set(.5*(Te.pageX+Zt.x),.5*(Te.pageY+Zt.y))}L.subVectors(B,R).multiplyScalar(n.panSpeed),Ke(L.x,L.y),R.copy(B)}function Wt(Te){const Zt=mn(Te),It=Te.pageX-Zt.x,ii=Te.pageY-Zt.y,zn=Math.sqrt(It*It+ii*ii);q.set(0,zn),j.set(0,Math.pow(q.y/O.y,n.zoomSpeed)),Ne(j.y),O.copy(q)}function Tn(Te){!1!==n.enabled&&(0===re.length&&(n.domElement.setPointerCapture(Te.pointerId),n.domElement.addEventListener("pointermove",An),n.domElement.addEventListener("pointerup",ti)),function $t(Te){re.push(Te)}(Te),"touch"===Te.pointerType?function nt(Te){switch(qt(Te),re.length){case 1:switch(n.touches.ONE){case 0:if(!1===n.enableRotate)return;xn(),a=i.TOUCH_ROTATE;break;case 1:if(!1===n.enablePan)return;Jn(),a=i.TOUCH_PAN;break;default:a=i.NONE}break;case 2:switch(n.touches.TWO){case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;(function Bn(){n.enableZoom&&Ni(),n.enablePan&&Jn()})(),a=i.TOUCH_DOLLY_PAN;break;case 3:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function Ce(){n.enableZoom&&Ni(),n.enableRotate&&xn()})(),a=i.TOUCH_DOLLY_ROTATE;break;default:a=i.NONE}break;default:a=i.NONE}a!==i.NONE&&n.dispatchEvent(e_)}(Te):function Gi(Te){let Zt;switch(Te.button){case 0:Zt=n.mouseButtons.LEFT;break;case 1:Zt=n.mouseButtons.MIDDLE;break;case 2:Zt=n.mouseButtons.RIGHT;break;default:Zt=-1}switch(Zt){case 1:if(!1===n.enableZoom)return;(function Le(Te){rt(Te),O.set(Te.clientX,Te.clientY)})(Te),a=i.DOLLY;break;case 0:if(Te.ctrlKey||Te.metaKey||Te.shiftKey){if(!1===n.enablePan)return;ut(Te),a=i.PAN}else{if(!1===n.enableRotate)return;wt(Te),a=i.ROTATE}break;case 2:if(Te.ctrlKey||Te.metaKey||Te.shiftKey){if(!1===n.enableRotate)return;wt(Te),a=i.ROTATE}else{if(!1===n.enablePan)return;ut(Te),a=i.PAN}break;default:a=i.NONE}a!==i.NONE&&n.dispatchEvent(e_)}(Te))}function An(Te){!1!==n.enabled&&("touch"===Te.pointerType?function zt(Te){switch(qt(Te),a){case i.TOUCH_ROTATE:if(!1===n.enableRotate)return;en(Te),n.update();break;case i.TOUCH_PAN:if(!1===n.enablePan)return;Tt(Te),n.update();break;case i.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;(function Ot(Te){n.enableZoom&&Wt(Te),n.enablePan&&Tt(Te)})(Te),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function Gn(Te){n.enableZoom&&Wt(Te),n.enableRotate&&en(Te)})(Te),n.update();break;default:a=i.NONE}}(Te):function fs(Te){switch(a){case i.ROTATE:if(!1===n.enableRotate)return;!function Ht(Te){C.set(Te.clientX,Te.clientY),T.subVectors(C,E).multiplyScalar(n.rotateSpeed);const Zt=n.domElement;ze(2*Math.PI*T.x/Zt.clientHeight),dt(2*Math.PI*T.y/Zt.clientHeight),E.copy(C),n.update()}(Te);break;case i.DOLLY:if(!1===n.enableZoom)return;!function Lt(Te){q.set(Te.clientX,Te.clientY),j.subVectors(q,O),j.y>0?Ne(ae()):j.y<0&&Ve(ae()),O.copy(q),n.update()}(Te);break;case i.PAN:if(!1===n.enablePan)return;!function ln(Te){B.set(Te.clientX,Te.clientY),L.subVectors(B,R).multiplyScalar(n.panSpeed),Ke(L.x,L.y),R.copy(B),n.update()}(Te)}}(Te))}function ti(Te){(function kn(Te){delete pe[Te.pointerId];for(let Zt=0;Zt<re.length;Zt++)if(re[Zt].pointerId==Te.pointerId)return void re.splice(Zt,1)})(Te),0===re.length&&(n.domElement.releasePointerCapture(Te.pointerId),n.domElement.removeEventListener("pointermove",An),n.domElement.removeEventListener("pointerup",ti)),n.dispatchEvent(Sy),a=i.NONE}function me(Te){!1===n.enabled||!1===n.enableZoom||a!==i.NONE||(Te.preventDefault(),n.dispatchEvent(e_),function In(Te){rt(Te),Te.deltaY<0?Ve(ae()):Te.deltaY>0&&Ne(ae()),n.update()}(Te),n.dispatchEvent(Sy))}function se(Te){!1===n.enabled||!1===n.enablePan||function un(Te){let Zt=!1;switch(Te.code){case n.keys.UP:Te.ctrlKey||Te.metaKey||Te.shiftKey?dt(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Ke(0,n.keyPanSpeed),Zt=!0;break;case n.keys.BOTTOM:Te.ctrlKey||Te.metaKey||Te.shiftKey?dt(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Ke(0,-n.keyPanSpeed),Zt=!0;break;case n.keys.LEFT:Te.ctrlKey||Te.metaKey||Te.shiftKey?ze(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Ke(n.keyPanSpeed,0),Zt=!0;break;case n.keys.RIGHT:Te.ctrlKey||Te.metaKey||Te.shiftKey?ze(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Ke(-n.keyPanSpeed,0),Zt=!0}Zt&&(Te.preventDefault(),n.update())}(Te)}function Ut(Te){!1!==n.enabled&&Te.preventDefault()}function qt(Te){let Zt=pe[Te.pointerId];void 0===Zt&&(Zt=new yt,pe[Te.pointerId]=Zt),Zt.set(Te.pageX,Te.pageY)}function mn(Te){return pe[(Te.pointerId===re[0].pointerId?re[1]:re[0]).pointerId]}n.domElement.addEventListener("contextmenu",Ut),n.domElement.addEventListener("pointerdown",Tn),n.domElement.addEventListener("pointercancel",ti),n.domElement.addEventListener("wheel",me,{passive:!1}),this.update()}}class rC{constructor(e){this.animations=[],this.scene=e.scene,this.animations=e.animations,this.mixer=new BS(e.scene)}playAnimation(e){this.mixer&&this.animations[e]&&(this.mixer.stopAllAction(),this.mixer.clipAction(this.animations[e]).play())}}var Cy=K(4460);let xy=(()=>{class s{constructor(){this.selectedObject=null,this.hoveredMesh=null,this.originalEmissiveHover=[],this.axesHelper=new jx(1),this.models={},this.storedModels=[],this.addedObjects=[],this.scene=new Qa,this.scene.background=new Rt(16053231),this.renderer=new Gl({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0;const t=new jl(4210752,1);t.intensity=4,this.scene.add(t);const n=new Sf(16777215,2),i=new Sf(16777215,1);n.position.set(1,1,1).normalize(),i.position.set(-1,1,1).normalize(),this.scene.add(n),this.scene.add(i),this.spotLight=new Bg(16777215,20,void 0,void 0,void 0,4),this.spotLight.position.set(6.1,3.3,-10.3),this.spotLight.castShadow=!0,this.scene.add(this.spotLight),this.camera=new Rr(50,350/300,.1,1e3),this.camera.position.x=224,this.camera.position.y=101,this.camera.position.z=183,this.controls=new sE(this.camera,this.renderer.domElement),this.controls.autoRotate=!1,this.controls.enableDamping=!0,this.controls.target.set(150,0,0),this.controlEventDispatcher=new Tl,this.controls.addEventListener("change",()=>{console.log("Camera position changed:",this.camera.position)}),this.axesHelper.setColors(new Rt(15416628),new Rt(4844340),new Rt(6007292)),this.scene.add(this.axesHelper),this.raycaster=new Pw,this.loader=new _y}loadLight(t,n){return new Promise((i,a)=>{(new _y).load(t,u=>{const h=u.scene;console.log("light"),console.log(h);const g=new Bg(16777215,20,void 0,void 0,void 0,4);this.scene.add(g),this.lightHelper=new Gw(g.shadow.camera),this.scene.add(this.lightHelper),i(g)},void 0,u=>{console.error("Error loading light:",u),a(u)})})}loadCamera(t,n,i){(new _y).load(t,c=>{const u=c.scene.children[0];u.position.set(n.x,n.y,n.z),u.rotation.set(Al_degToRad(i.x),Al_degToRad(i.y),Al_degToRad(i.z)),this.scene.add(u)})}loadModel(t,n,i){return new Promise((a,c)=>{this.loader.load(i,u=>{if("dynamic"==n){const h=new rC(u);this.models[t]=h,this.scene.add(h.scene),a(u.scene)}else"memory"==n?this.storedModels.push({name:t,gltf:u}):(this.scene.add(u.scene),a(u.scene))},void 0,u=>{console.error("Error loading model:",u),c(u)})})}updateScene(t,n,i,a){this.removeAllAddedObjects();let c=0;for(var u=1;u<=i;u++){if(u%2!=0){let y=this.storedModels[0].gltf.scene.clone();y.position.set(c,0,0),this.scene.add(y),this.addedObjects.push(y),c+=39.5}if(u%2==0){let y=this.storedModels[1].gltf.scene.clone();y.position.set(c,0,0),this.scene.add(y),this.addedObjects.push(y),c+=39.5}}const h=new ce(t.x,t.y,t.z),g=new ce(n.x,n.y,n.z);console.log("newOCTargetVector"),console.log(g),this.animateCameraToPosition(this.camera,h,g,1e3)}removeAllAddedObjects(){for(;this.addedObjects.length>0;){let t=this.addedObjects.pop();this.scene.remove(t)}}animateCameraToPosition(t,n,i,a){const c=t.position.clone();new Cy.Tween(c).to(n,a).onUpdate(()=>{t.position.copy(c),t.lookAt(n)}).start(),this.controls.target.set(i.x,i.y,i.z)}playModelAnimation(t,n){const i=this.models[t];i&&i.playAnimation(n)}setObjectSpotLightTarget(t){this.spotLight.target=t}enableShadow(){this.renderer.shadowMap.enabled=!0,this.render()}render(){this.renderer.render(this.scene,this.camera)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var sC=K(9646),n_=K(9751),t1=K(4351),i_=K(9300),Dc=K(4004);class oE{}class aE{}class Tu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const n=t.indexOf(":");if(n>0){const i=t.slice(0,n),a=i.toLowerCase(),c=t.slice(n+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const i=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Tu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Tu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Tu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...n),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(u=>-1===a.indexOf(u)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class n1{encodeKey(e){return lE(e)}encodeValue(e){return lE(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const s1=/%(\d[a-f0-9])/gi,o1={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function lE(s){return encodeURIComponent(s).replace(s1,(e,t)=>o1[t]??e)}function fh(s){return`${s}`}class _d{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new n1,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function r1(s,e){const t=new Map;return s.length>0&&s.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[c,u]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],h=t.get(c)||[];h.push(u),t.set(c,h)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t],i=Array.isArray(n)?n.map(fh):[fh(n)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const i=e[n];Array.isArray(i)?i.forEach(a=>{t.push({param:n,value:a,op:"a"})}):t.push({param:n,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new _d({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(fh(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let n=this.map.get(e.param)||[];const i=n.indexOf(fh(e.value));-1!==i&&n.splice(i,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class cE{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Ty(s){return typeof ArrayBuffer<"u"&&s instanceof ArrayBuffer}function r_(s){return typeof Blob<"u"&&s instanceof Blob}function s_(s){return typeof FormData<"u"&&s instanceof FormData}class mh{constructor(e,t,n,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function ph(s){switch(s){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,a=i):a=n,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Tu),this.context||(this.context=new cE),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const u=t.indexOf("?");this.urlWithParams=t+(-1===u?"?":u<t.length-1?"&":"")+c}}else this.params=new _d,this.urlWithParams=t}serializeBody(){return null===this.body?null:Ty(this.body)||r_(this.body)||s_(this.body)||function oC(s){return typeof URLSearchParams<"u"&&s instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof _d?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||s_(this.body)?null:r_(this.body)?this.body.type||null:Ty(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof _d?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,u=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let h=e.headers||this.headers,g=e.params||this.params;const y=e.context??this.context;return void 0!==e.setHeaders&&(h=Object.keys(e.setHeaders).reduce((E,C)=>E.set(C,e.setHeaders[C]),h)),e.setParams&&(g=Object.keys(e.setParams).reduce((E,C)=>E.set(C,e.setParams[C]),g)),new mh(t,n,a,{params:g,headers:h,context:y,reportProgress:u,responseType:i,withCredentials:c})}}var hs=(()=>((hs=hs||{})[hs.Sent=0]="Sent",hs[hs.UploadProgress=1]="UploadProgress",hs[hs.ResponseHeader=2]="ResponseHeader",hs[hs.DownloadProgress=3]="DownloadProgress",hs[hs.Response=4]="Response",hs[hs.User=5]="User",hs))();class Df{constructor(e,t=200,n="OK"){this.headers=e.headers||new Tu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class uE extends Df{constructor(e={}){super(e),this.type=hs.ResponseHeader}clone(e={}){return new uE({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Dy extends Df{constructor(e={}){super(e),this.type=hs.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Dy({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class aC extends Df{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function dE(s,e){return{body:e,headers:s.headers,context:s.context,observe:s.observe,params:s.params,reportProgress:s.reportProgress,responseType:s.responseType,withCredentials:s.withCredentials}}let Ay=(()=>{class s{constructor(t){this.handler=t}request(t,n,i={}){let a;if(t instanceof mh)a=t;else{let h,g;h=i.headers instanceof Tu?i.headers:new Tu(i.headers),i.params&&(g=i.params instanceof _d?i.params:new _d({fromObject:i.params})),a=new mh(t,n,void 0!==i.body?i.body:null,{headers:h,context:i.context,params:g,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=(0,sC.of)(a).pipe((0,t1.b)(h=>this.handler.handle(h)));if(t instanceof mh||"events"===i.observe)return c;const u=c.pipe((0,i_.h)(h=>h instanceof Dy));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return u.pipe((0,Dc.U)(h=>{if(null!==h.body&&!(h.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return h.body}));case"blob":return u.pipe((0,Dc.U)(h=>{if(null!==h.body&&!(h.body instanceof Blob))throw new Error("Response is not a Blob.");return h.body}));case"text":return u.pipe((0,Dc.U)(h=>{if(null!==h.body&&"string"!=typeof h.body)throw new Error("Response is not a string.");return h.body}));default:return u.pipe((0,Dc.U)(h=>h.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,n={}){return this.request("DELETE",t,n)}get(t,n={}){return this.request("GET",t,n)}head(t,n={}){return this.request("HEAD",t,n)}jsonp(t,n){return this.request("JSONP",t,{params:(new _d).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,n={}){return this.request("OPTIONS",t,n)}patch(t,n,i={}){return this.request("PATCH",t,dE(i,n))}post(t,n,i={}){return this.request("POST",t,dE(i,n))}put(t,n,i={}){return this.request("PUT",t,dE(i,n))}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(oE))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac}),s})();class hE{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const fE=new b.OlP("HTTP_INTERCEPTORS");let lC=(()=>{class s{intercept(t,n){return n.handle(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac}),s})();const mE=/^\)\]\}',?\n/;let gE=(()=>{class s{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new n_.y(n=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((T,R)=>i.setRequestHeader(T,R.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const T=t.detectContentTypeHeader();null!==T&&i.setRequestHeader("Content-Type",T)}if(t.responseType){const T=t.responseType.toLowerCase();i.responseType="json"!==T?T:"text"}const a=t.serializeBody();let c=null;const u=()=>{if(null!==c)return c;const T=i.statusText||"OK",R=new Tu(i.getAllResponseHeaders()),B=function Ry(s){return"responseURL"in s&&s.responseURL?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new uE({headers:R,status:i.status,statusText:T,url:B}),c},h=()=>{let{headers:T,status:R,statusText:B,url:L}=u(),O=null;204!==R&&(O=typeof i.response>"u"?i.responseText:i.response),0===R&&(R=O?200:0);let q=R>=200&&R<300;if("json"===t.responseType&&"string"==typeof O){const j=O;O=O.replace(mE,"");try{O=""!==O?JSON.parse(O):null}catch(Z){O=j,q&&(q=!1,O={error:Z,text:O})}}q?(n.next(new Dy({body:O,headers:T,status:R,statusText:B,url:L||void 0})),n.complete()):n.error(new aC({error:O,headers:T,status:R,statusText:B,url:L||void 0}))},g=T=>{const{url:R}=u(),B=new aC({error:T,status:i.status||0,statusText:i.statusText||"Unknown Error",url:R||void 0});n.error(B)};let y=!1;const E=T=>{y||(n.next(u()),y=!0);let R={type:hs.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(R.total=T.total),"text"===t.responseType&&!!i.responseText&&(R.partialText=i.responseText),n.next(R)},C=T=>{let R={type:hs.UploadProgress,loaded:T.loaded};T.lengthComputable&&(R.total=T.total),n.next(R)};return i.addEventListener("load",h),i.addEventListener("error",g),i.addEventListener("timeout",g),i.addEventListener("abort",g),t.reportProgress&&(i.addEventListener("progress",E),null!==a&&i.upload&&i.upload.addEventListener("progress",C)),i.send(a),n.next({type:hs.Sent}),()=>{i.removeEventListener("error",g),i.removeEventListener("abort",g),i.removeEventListener("load",h),i.removeEventListener("timeout",g),t.reportProgress&&(i.removeEventListener("progress",E),null!==a&&i.upload&&i.upload.removeEventListener("progress",C)),i.readyState!==i.DONE&&i.abort()}})}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(Jt.JF))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac}),s})();const Iy=new b.OlP("XSRF_COOKIE_NAME"),_E=new b.OlP("XSRF_HEADER_NAME");class fC{}let pC=(()=>{class s{constructor(t,n,i){this.doc=t,this.platform=n,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,Jt.Mx)(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(Jt.K0),b.LFG(b.Lbi),b.LFG(Iy))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac}),s})(),Oy=(()=>{class s{constructor(t,n){this.tokenService=t,this.headerName=n}intercept(t,n){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return n.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),n.handle(t)}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(fC),b.LFG(_E))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac}),s})(),mC=(()=>{class s{constructor(t,n){this.backend=t,this.injector=n,this.chain=null}handle(t){if(null===this.chain){const n=this.injector.get(fE,[]);this.chain=n.reduceRight((i,a)=>new hE(i,a),this.backend)}return this.chain.handle(t)}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(aE),b.LFG(b.zs3))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac}),s})(),d1=(()=>{class s{static disable(){return{ngModule:s,providers:[{provide:Oy,useClass:lC}]}}static withOptions(t={}){return{ngModule:s,providers:[t.cookieName?{provide:Iy,useValue:t.cookieName}:[],t.headerName?{provide:_E,useValue:t.headerName}:[]]}}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({providers:[Oy,{provide:fE,useExisting:Oy,multi:!0},{provide:fC,useClass:pC},{provide:Iy,useValue:"XSRF-TOKEN"},{provide:_E,useValue:"X-XSRF-TOKEN"}]}),s})(),h1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({providers:[Ay,{provide:oE,useClass:mC},gE,{provide:aE,useExisting:gE}],imports:[d1.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),s})(),gC=(()=>{class s{constructor(t,n,i,a){this.el=t,this.ngZone=n,this.threejsService=i,this.http=a,this.frameId=null,this.mouse=new yt,this.isContextMenuVisible=!1,this.contextMenuPosition=null,this.objectName=""}ngOnInit(){this.threejsService.renderer.setSize(350,300),this.el.nativeElement.appendChild(this.threejsService.renderer.domElement),this.threejsService.renderer.domElement.classList.add("threejs-canvas"),this.el.nativeElement.addEventListener("click",this.onMouseClick.bind(this),!1),this.loadModelsFromConfig(),this.ngZone.runOutsideAngular(()=>{window.addEventListener("resize",this.onWindowResize.bind(this),!1)}),this.animate()}ngAfterViewInit(){this.el.nativeElement.addEventListener("mousemove",this.onMouseMove.bind(this),!1)}animate(){this.frameId=requestAnimationFrame(()=>{Cy.update();for(let t in this.threejsService.models){const n=this.threejsService.models[t];n.mixer&&n.mixer.update(.01)}this.animate()}),this.threejsService.controls.update(),this.threejsService.render()}loadModelsFromConfig(){this.http.get("/assets/sceneconfig.json").subscribe(t=>{for(const i in t.models){const a=t.models[i];a.path||console.log("%cALERT:  Model "+a.name+" has no source path","background: #f2847e; color: white;"),a.position||console.log("%cALERT:  Model "+a.name+" has no position coordinates","background: #f2847e; color: white;"),a.name||console.log("%cALERT:  Model  has no name"+a,"background: #f2847e; color: white;"),a.type||console.log("%cALERT:  Model "+a.name+" has no type","background: #f2847e; color: white;"),this.threejsService.loadModel(a.name,a.type,"assets/models/"+a.path).then(c=>{c&&(c.position.set(a.position.x,a.position.y,a.position.z),c.userData={objectName:a.name,objectType:a.type,objectID:a.id,position:a.position},1==a.castShadow&&(c.children[0].castShadow=!0),1==a.receiveShadow&&(c.children[0].receiveShadow=!0),a.scale&&c.scale.set(a.scale.x,a.scale.y,a.scale.z),a.rotation&&c.rotation.set(Al_degToRad(a.rotation.x),Al_degToRad(a.rotation.y),Al_degToRad(a.rotation.z)),1==a.clickable&&(c.userData.clickable=a.clickable),1==a.castShadow&&(c.castShadow=a.castShadow),1==a.receiveShadow&&(c.receiveShadow=a.receiveShadow))})}})}updateScene(t,n){this.http.get("/assets/cameraconfig.json").subscribe(i=>{const a=i.consoles[t][n];this.threejsService.updateScene(a.cameraPosition,a.OCTarget,a.partsCount,a.wallScale)})}onMouseClick(t){if(this.isContextMenuVisible)this.isContextMenuVisible=!1;else{this.mouse.x=t.clientX/window.innerWidth*2-1,this.mouse.y=-t.clientY/window.innerHeight*2+1,this.threejsService.raycaster.setFromCamera(this.mouse,this.threejsService.camera);const n=this.threejsService.raycaster.intersectObjects(this.threejsService.scene.children,!0);if(n.length>0){const i=n[0].object;this.threejsService.selectedObject=this.getParentMesh(i);const a=this.getParentMesh(i);1==a?.userData.clickable&&(console.log("clicked object > parent mesh: "),console.log(a)),"dynamic"==a?.userData.objectType&&this.threejsService.playModelAnimation(a?.userData.objectName,0)}else this.threejsService.selectedObject=null;this.threejsService.selectedObject?(this.isContextMenuVisible=!0,this.contextMenuPosition={x:t.clientX,y:t.clientY},this.objectName=this.threejsService.selectedObject.userData.objectName):this.isContextMenuVisible=!1}}onMouseMove(t){this.mouse.x=t.clientX/window.innerWidth*2-1,this.mouse.y=-t.clientY/window.innerHeight*2+1,this.threejsService.raycaster.setFromCamera(this.mouse,this.threejsService.camera);const n=this.threejsService.raycaster.intersectObjects(this.threejsService.scene.children,!0);if(this.threejsService.hoveredMesh&&(Array.isArray(this.threejsService.hoveredMesh.material)?this.threejsService.hoveredMesh.material.forEach((i,a)=>{i instanceof oh&&this.threejsService.originalEmissiveHover[a]&&i.emissive.copy(this.threejsService.originalEmissiveHover[a])}):this.threejsService.originalEmissiveHover[0]&&this.threejsService.hoveredMesh.material.emissive.copy(this.threejsService.originalEmissiveHover[0]),this.threejsService.originalEmissiveHover=[],this.threejsService.hoveredMesh=null),n.length>0){const a=this.getParentMesh(n[0].object);a&&a.userData.clickable&&this.applyHoverEffectToObject(a)}}applyHoverEffectToObject(t){t instanceof zs&&t.material?(Array.isArray(t.material)?t.material.forEach((n,i)=>{n instanceof oh&&(this.threejsService.originalEmissiveHover.push(n.emissive.clone()),n.emissive.setHex(8947848))}):t.material instanceof oh&&(this.threejsService.originalEmissiveHover[0]=t.material.emissive.clone(),t.material.emissive.setHex(8947848)),this.threejsService.hoveredMesh=t):t.children.length>0&&t.children.forEach(n=>this.applyHoverEffectToObject(n))}getParentMesh(t){return t instanceof vu?t:t.parent?this.getParentMesh(t.parent):null}onWindowResize(){this.threejsService.camera.aspect=this.el.nativeElement.clientWidth/this.el.nativeElement.clientHeight,this.threejsService.camera.updateProjectionMatrix(),this.threejsService.renderer.setSize(this.el.nativeElement.clientWidth,this.el.nativeElement.clientHeight)}ngOnDestroy(){null!==this.frameId&&cancelAnimationFrame(this.frameId),window.removeEventListener("resize",this.onWindowResize.bind(this),!1),this.el.nativeElement.removeEventListener("click",this.onMouseClick.bind(this),!1),this.el.nativeElement.removeEventListener("mousemove",this.onMouseMove.bind(this),!1)}}return s.\u0275fac=function(t){return new(t||s)(b.Y36(b.SBq),b.Y36(b.R0b),b.Y36(xy),b.Y36(Ay))},s.\u0275cmp=b.Xpm({type:s,selectors:[["app-console1-viewer"]],decls:0,vars:0,template:function(t,n){}}),s})();function nl(s){return null!=s&&"false"!=`${s}`}function vE(s,e=0){return function p1(s){return!isNaN(parseFloat(s))&&!isNaN(Number(s))}(s)?Number(s):e}function o_(s){return Array.isArray(s)?s:[s]}function $s(s){return null==s?"":"string"==typeof s?s:`${s}px`}function r(s){return s instanceof b.SBq?s.nativeElement:s}var l=K(7579),d=K(4986),p=K(4482),v=K(5403);function S(s,e=d.z){return(0,p.e)((t,n)=>{let i=null,a=null,c=null;const u=()=>{if(i){i.unsubscribe(),i=null;const g=a;a=null,n.next(g)}};function h(){const g=c+s,y=e.now();if(y<g)return i=this.schedule(void 0,g-y),void n.add(i);u()}t.subscribe((0,v.x)(n,g=>{a=g,c=e.now(),i||(i=e.schedule(h,s),n.add(i))},()=>{u(),n.complete()},void 0,()=>{a=i=null}))})}let le,I=(()=>{class s{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),F=(()=>{class s{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,n)=>this._cleanupObserver(n))}observe(t){const n=r(t);return new n_.y(i=>{const c=this._observeElement(n).subscribe(i);return()=>{c.unsubscribe(),this._unobserveElement(n)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const n=new l.x,i=this._mutationObserverFactory.create(a=>n.next(a));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:n,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:n,stream:i}=this._observedElements.get(t);n&&n.disconnect(),i.complete(),this._observedElements.delete(t)}}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(I))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),$=(()=>{class s{constructor(t,n,i){this._contentObserver=t,this._elementRef=n,this._ngZone=i,this.event=new b.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=nl(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=vE(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(S(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(b.Y36(F),b.Y36(b.SBq),b.Y36(b.R0b))},s.\u0275dir=b.lG2({type:s,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),s})(),ee=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({providers:[I]}),s})();try{le=typeof Intl<"u"&&Intl.v8BreakIterator}catch{le=!1}let hn,ki,be=(()=>{class s{constructor(t){this._platformId=t,this.isBrowser=this._platformId?(0,Jt.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!le)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(b.Lbi))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function At(s){return function Ln(){if(null==hn&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>hn=!0}))}finally{hn=hn||!1}return hn}()?s:!!s.capture}function jr(){if(null==ki){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ki=!1,ki;if("scrollBehavior"in document.documentElement.style)ki=!0;else{const s=Element.prototype.scrollTo;ki=!!s&&!/\{\s*\[native code\]\s*\}/.test(s.toString())}}return ki}function a_(s){return s.composedPath?s.composedPath()[0]:s.target}function em(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Ac=K(727);function Py(s,...e){return e.length?e.some(t=>s[t]):s.altKey||s.shiftKey||s.ctrlKey||s.metaKey}var GT=K(8505),zT=K(9841),jT=K(7272),l_=K(5698),WT=K(5684),c_=K(8675),$l=K(2722);const v1=new Set;let u_,$T=(()=>{class s{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):XT}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function YT(s){if(!v1.has(s))try{u_||(u_=document.createElement("style"),u_.setAttribute("type","text/css"),document.head.appendChild(u_)),u_.sheet&&(u_.sheet.insertRule(`@media ${s} {body{ }}`,0),v1.add(s))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(be))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function XT(s){return{matches:"all"===s||""===s,media:s,addListener:()=>{},removeListener:()=>{}}}let qT=(()=>{class s{constructor(t,n){this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new l.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return y1(o_(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){const i=y1(o_(t)).map(c=>this._registerQuery(c).observable);let a=(0,zT.a)(i);return a=(0,jT.z)(a.pipe((0,l_.q)(1)),a.pipe((0,WT.T)(1),S(0))),a.pipe((0,Dc.U)(c=>{const u={matches:!1,breakpoints:{}};return c.forEach(({matches:h,query:g})=>{u.matches=u.matches||h,u.breakpoints[g]=h}),u}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const n=this._mediaMatcher.matchMedia(t),a={observable:new n_.y(c=>{const u=h=>this._zone.run(()=>c.next(h));return n.addListener(u),()=>{n.removeListener(u)}}).pipe((0,c_.O)(n),(0,Dc.U)(({matches:c})=>({query:t,matches:c})),(0,$l.R)(this._destroySubject)),mql:n};return this._queries.set(t,a),a}}return s.\u0275fac=function(t){return new(t||s)(b.LFG($T),b.LFG(b.R0b))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function y1(s){return s.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class QT extends class JT{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new l.x,this._typeaheadSubscription=Ac.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new l.x,this.change=new l.x,e instanceof b.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,GT.b)(t=>this._pressedLetters.push(t)),S(e),(0,i_.h)(()=>this._pressedLetters.length>0),(0,Dc.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const n=this._getItemsArray();for(let i=1;i<n.length+1;i++){const a=(this._activeItemIndex+i)%n.length,c=n[a];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(a);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(a=>!e[a]||this._allowedModifierKeys.indexOf(a)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||Py(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e);this._activeItem=t[n]??null,this._activeItemIndex=n}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const i=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof b.n_E?this._items.toArray():this._items}}{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}const aD=new b.OlP("liveAnnouncerElement",{providedIn:"root",factory:function lD(){return null}}),cD=new b.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let uD=(()=>{class s{constructor(t,n,i,a){this._ngZone=n,this._defaultOptions=a,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...n){const i=this._defaultOptions;let a,c;return 1===n.length&&"number"==typeof n[0]?c=n[0]:[a,c]=n,this.clear(),clearTimeout(this._previousTimeout),a||(a=i&&i.politeness?i.politeness:"polite"),null==c&&i&&(c=i.duration),this._liveElement.setAttribute("aria-live",a),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(u=>this._currentResolve=u)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof c&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",n=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let a=0;a<n.length;a++)n[a].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(aD,8),b.LFG(b.R0b),b.LFG(Jt.K0),b.LFG(cD,8))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const M1="cdk-high-contrast-black-on-white",S1="cdk-high-contrast-white-on-black",wC="cdk-high-contrast-active";let dD=(()=>{class s{constructor(t,n){this._platform=t,this._document=n,this._breakpointSubscription=(0,b.f3M)(qT).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const n=this._document.defaultView||window,i=n&&n.getComputedStyle?n.getComputedStyle(t):null,a=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(wC,M1,S1),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?t.add(wC,M1):2===n&&t.add(wC,S1)}}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(be),b.LFG(Jt.K0))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const hD=new b.OlP("cdk-dir-doc",{providedIn:"root",factory:function fD(){return(0,b.f3M)(Jt.K0)}}),pD=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ME=(()=>{class s{constructor(t){if(this.value="ltr",this.change=new b.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function mD(s){const e=s?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?pD.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(hD,8))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ly=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({}),s})();function gD(s,e){if(1&s&&b._UZ(0,"mat-pseudo-checkbox",4),2&s){const t=b.oxw();b.Q6J("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function _D(s,e){if(1&s&&(b.TgZ(0,"span",5),b._uU(1),b.qZA()),2&s){const t=b.oxw();b.xp6(1),b.hij("(",t.group.label,")")}}const vD=["*"],bD=new b.OlP("mat-sanity-checks",{providedIn:"root",factory:function yD(){return!0}});let Rf=(()=>{class s{constructor(t,n,i){this._sanityChecks=n,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!em()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(dD),b.LFG(bD,8),b.LFG(Jt.K0))},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({imports:[Ly,Ly]}),s})();function wD(s){return class extends s{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=nl(e)}}}function ED(s,e){return class extends s{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const n=t||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function MD(s){return class extends s{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=nl(e)}}}function SD(s,e=0){return class extends s{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?vE(t):this.defaultTabIndex}}}function CD(s){return class extends s{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,a=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);a!==e&&(this.errorState=a,this.stateChanges.next())}}}let TD=(()=>{class s{isErrorState(t,n){return!!(t&&t.invalid&&(t.touched||n&&n.submitted))}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class DD{constructor(e,t,n,i=!1){this._renderer=e,this.element=t,this.config=n,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const T1={enterDuration:225,exitDuration:150},EC=At({passive:!0}),D1=["mousedown","touchstart"],A1=["mouseup","mouseleave","touchend","touchcancel"];class RD{constructor(e,t,n,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=r(n))}fadeInRipple(e,t,n={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a={...T1,...n.animation};n.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const c=n.radius||function ID(s,e,t){const n=Math.max(Math.abs(s-t.left),Math.abs(s-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(n*n+i*i)}(e,t,i),u=e-i.left,h=t-i.top,g=a.enterDuration,y=document.createElement("div");y.classList.add("mat-ripple-element"),y.style.left=u-c+"px",y.style.top=h-c+"px",y.style.height=2*c+"px",y.style.width=2*c+"px",null!=n.color&&(y.style.backgroundColor=n.color),y.style.transitionDuration=`${g}ms`,this._containerElement.appendChild(y);const E=window.getComputedStyle(y),T=E.transitionDuration,R="none"===E.transitionProperty||"0s"===T||"0s, 0s"===T,B=new DD(this,y,n,R);y.style.transform="scale3d(1, 1, 1)",B.state=0,n.persistent||(this._mostRecentTransientRipple=B);let L=null;return!R&&(g||a.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const O=()=>this._finishRippleTransition(B),q=()=>this._destroyRipple(B);y.addEventListener("transitionend",O),y.addEventListener("transitioncancel",q),L={onTransitionEnd:O,onTransitionCancel:q}}),this._activeRipples.set(B,L),(R||!g)&&this._finishRippleTransition(B),B}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,n={...T1,...e.config.animation};t.style.transitionDuration=`${n.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=r(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(D1))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(A1),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=1,!n&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function sD(s){return 0===s.buttons||0===s.offsetX&&0===s.offsetY}(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function oD(s){const e=s.touches&&s.touches[0]||s.changedTouches&&s.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let n=0;n<t.length;n++)this.fadeInRipple(t[n].clientX,t[n].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,EC)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(D1.forEach(e=>{this._triggerElement.removeEventListener(e,this,EC)}),this._pointerUpEventsRegistered&&A1.forEach(e=>{this._triggerElement.removeEventListener(e,this,EC)}))}}const OD=new b.OlP("mat-ripple-global-options");let ND=(()=>{class s{constructor(t,n,i,a,c){this._elementRef=t,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new RD(this,n,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,n=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,n,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return s.\u0275fac=function(t){return new(t||s)(b.Y36(b.SBq),b.Y36(b.R0b),b.Y36(be),b.Y36(OD,8),b.Y36(b.QbO,8))},s.\u0275dir=b.lG2({type:s,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,n){2&t&&b.ekj("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),s})(),PD=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({imports:[Rf,Rf]}),s})(),LD=(()=>{class s{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return s.\u0275fac=function(t){return new(t||s)(b.Y36(b.QbO,8))},s.\u0275cmp=b.Xpm({type:s,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,n){2&t&&b.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===n.state)("mat-pseudo-checkbox-checked","checked"===n.state)("mat-pseudo-checkbox-disabled",n.disabled)("_mat-animation-noopable","NoopAnimations"===n._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,n){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),s})(),FD=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({imports:[Rf]}),s})();const R1=new b.OlP("MAT_OPTION_PARENT_COMPONENT"),I1=new b.OlP("MatOptgroup");let kD=0;class BD{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let UD=(()=>{class s{constructor(t,n,i,a){this._element=t,this._changeDetectorRef=n,this._parent=i,this.group=a,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+kD++,this.onSelectionChange=new b.vpe,this._stateChanges=new l.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=nl(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,n){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!Py(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new BD(this,t))}}return s.\u0275fac=function(t){b.$Z()},s.\u0275dir=b.lG2({type:s,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),s})(),O1=(()=>{class s extends UD{constructor(t,n,i,a){super(t,n,i,a)}}return s.\u0275fac=function(t){return new(t||s)(b.Y36(b.SBq),b.Y36(b.sBO),b.Y36(R1,8),b.Y36(I1,8))},s.\u0275cmp=b.Xpm({type:s,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,n){1&t&&b.NdJ("click",function(){return n._selectViaInteraction()})("keydown",function(a){return n._handleKeydown(a)}),2&t&&(b.Ikx("id",n.id),b.uIk("tabindex",n._getTabIndex())("aria-selected",n._getAriaSelected())("aria-disabled",n.disabled.toString()),b.ekj("mat-selected",n.selected)("mat-option-multiple",n.multiple)("mat-active",n.active)("mat-option-disabled",n.disabled))},exportAs:["matOption"],features:[b.qOj],ngContentSelectors:vD,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,n){1&t&&(b.F$t(),b.YNc(0,gD,1,2,"mat-pseudo-checkbox",0),b.TgZ(1,"span",1),b.Hsn(2),b.qZA(),b.YNc(3,_D,2,1,"span",2),b._UZ(4,"div",3)),2&t&&(b.Q6J("ngIf",n.multiple),b.xp6(3),b.Q6J("ngIf",n.group&&n.group._inert),b.xp6(1),b.Q6J("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disabled||n.disableRipple))},dependencies:[ND,Jt.O5,LD],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),s})();function N1(s,e,t){if(t.length){let n=e.toArray(),i=t.toArray(),a=0;for(let c=0;c<s+1;c++)n[c].group&&n[c].group===i[a]&&a++;return a}return 0}let P1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({imports:[PD,Jt.ez,Rf,FD]}),s})();var ky=K(6451),L1=K(4968);const HD=["connectionContainer"],GD=["inputContainer"],zD=["label"];function jD(s,e){1&s&&(b.ynx(0),b.TgZ(1,"div",14),b._UZ(2,"div",15)(3,"div",16)(4,"div",17),b.qZA(),b.TgZ(5,"div",18),b._UZ(6,"div",15)(7,"div",16)(8,"div",17),b.qZA(),b.BQk())}function WD(s,e){if(1&s){const t=b.EpF();b.TgZ(0,"div",19),b.NdJ("cdkObserveContent",function(){b.CHM(t);const i=b.oxw();return b.KtG(i.updateOutlineGap())}),b.Hsn(1,1),b.qZA()}if(2&s){const t=b.oxw();b.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function $D(s,e){if(1&s&&(b.ynx(0),b.Hsn(1,2),b.TgZ(2,"span"),b._uU(3),b.qZA(),b.BQk()),2&s){const t=b.oxw(2);b.xp6(3),b.Oqu(t._control.placeholder)}}function YD(s,e){1&s&&b.Hsn(0,3,["*ngSwitchCase","true"])}function XD(s,e){1&s&&(b.TgZ(0,"span",23),b._uU(1," *"),b.qZA())}function qD(s,e){if(1&s){const t=b.EpF();b.TgZ(0,"label",20,21),b.NdJ("cdkObserveContent",function(){b.CHM(t);const i=b.oxw();return b.KtG(i.updateOutlineGap())}),b.YNc(2,$D,4,1,"ng-container",12),b.YNc(3,YD,1,0,"ng-content",12),b.YNc(4,XD,2,0,"span",22),b.qZA()}if(2&s){const t=b.oxw();b.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),b.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),b.uIk("for",t._control.id)("aria-owns",t._control.id),b.xp6(2),b.Q6J("ngSwitchCase",!1),b.xp6(1),b.Q6J("ngSwitchCase",!0),b.xp6(1),b.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function ZD(s,e){1&s&&(b.TgZ(0,"div",24),b.Hsn(1,4),b.qZA())}function KD(s,e){if(1&s&&(b.TgZ(0,"div",25),b._UZ(1,"span",26),b.qZA()),2&s){const t=b.oxw();b.xp6(1),b.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function JD(s,e){if(1&s&&(b.TgZ(0,"div"),b.Hsn(1,5),b.qZA()),2&s){const t=b.oxw();b.Q6J("@transitionMessages",t._subscriptAnimationState)}}function QD(s,e){if(1&s&&(b.TgZ(0,"div",30),b._uU(1),b.qZA()),2&s){const t=b.oxw(2);b.Q6J("id",t._hintLabelId),b.xp6(1),b.Oqu(t.hintLabel)}}function eA(s,e){if(1&s&&(b.TgZ(0,"div",27),b.YNc(1,QD,2,2,"div",28),b.Hsn(2,6),b._UZ(3,"div",29),b.Hsn(4,7),b.qZA()),2&s){const t=b.oxw();b.Q6J("@transitionMessages",t._subscriptAnimationState),b.xp6(1),b.Q6J("ngIf",t.hintLabel)}}const tA=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],nA=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],iA=new b.OlP("MatError"),rA={transitionMessages:(0,X.X$)("transitionMessages",[(0,X.SB)("enter",(0,X.oB)({opacity:1,transform:"translateY(0%)"})),(0,X.eR)("void => enter",[(0,X.oB)({opacity:0,transform:"translateY(-5px)"}),(0,X.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let MC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275dir=b.lG2({type:s}),s})();const sA=new b.OlP("MatHint");let SC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275dir=b.lG2({type:s,selectors:[["mat-label"]]}),s})(),oA=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275dir=b.lG2({type:s,selectors:[["mat-placeholder"]]}),s})();const aA=new b.OlP("MatPrefix"),lA=new b.OlP("MatSuffix");let F1=0;const uA=ED(class{constructor(s){this._elementRef=s}},"primary"),dA=new b.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),B1=new b.OlP("MatFormField");let hA=(()=>{class s extends uA{constructor(t,n,i,a,c,u,h){super(t),this._changeDetectorRef=n,this._dir=i,this._defaults=a,this._platform=c,this._ngZone=u,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new l.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+F1++,this._labelId="mat-form-field-label-"+F1++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==h,this.appearance=a?.appearance||"legacy",a&&(this._hideRequiredMarker=Boolean(a.hideRequiredMarker),a.color&&(this.color=this.defaultColor=a.color))}get appearance(){return this._appearance}set appearance(t){const n=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&n!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=nl(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe((0,c_.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe((0,$l.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,$l.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,ky.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,c_.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,c_.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,$l.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const n=this._control?this._control.ngControl:null;return n&&n[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,L1.R)(this._label.nativeElement,"transitionend").pipe((0,l_.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const n=this._hintChildren?this._hintChildren.find(a=>"start"===a.align):null,i=this._hintChildren?this._hintChildren.find(a=>"end"===a.align):null;n?t.push(n.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,n=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",a=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const y=n.querySelectorAll(`${i}, ${a}`);for(let E=0;E<y.length;E++)y[E].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,u=0;const h=n.querySelectorAll(i),g=n.querySelectorAll(a);if(this._label&&this._label.nativeElement.children.length){const y=n.getBoundingClientRect();if(0===y.width&&0===y.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const E=this._getStartEnd(y),C=t.children,T=this._getStartEnd(C[0].getBoundingClientRect());let R=0;for(let B=0;B<C.length;B++)R+=C[B].offsetWidth;c=Math.abs(T-E)-5,u=R>0?.75*R+10:0}for(let y=0;y<h.length;y++)h[y].style.width=`${c}px`;for(let y=0;y<g.length;y++)g[y].style.width=`${u}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const n=t.getRootNode();return n&&n!==t}return document.documentElement.contains(t)}}return s.\u0275fac=function(t){return new(t||s)(b.Y36(b.SBq),b.Y36(b.sBO),b.Y36(ME,8),b.Y36(dA,8),b.Y36(be),b.Y36(b.R0b),b.Y36(b.QbO,8))},s.\u0275cmp=b.Xpm({type:s,selectors:[["mat-form-field"]],contentQueries:function(t,n,i){if(1&t&&(b.Suo(i,MC,5),b.Suo(i,MC,7),b.Suo(i,SC,5),b.Suo(i,SC,7),b.Suo(i,oA,5),b.Suo(i,iA,5),b.Suo(i,sA,5),b.Suo(i,aA,5),b.Suo(i,lA,5)),2&t){let a;b.iGM(a=b.CRH())&&(n._controlNonStatic=a.first),b.iGM(a=b.CRH())&&(n._controlStatic=a.first),b.iGM(a=b.CRH())&&(n._labelChildNonStatic=a.first),b.iGM(a=b.CRH())&&(n._labelChildStatic=a.first),b.iGM(a=b.CRH())&&(n._placeholderChild=a.first),b.iGM(a=b.CRH())&&(n._errorChildren=a),b.iGM(a=b.CRH())&&(n._hintChildren=a),b.iGM(a=b.CRH())&&(n._prefixChildren=a),b.iGM(a=b.CRH())&&(n._suffixChildren=a)}},viewQuery:function(t,n){if(1&t&&(b.Gf(HD,7),b.Gf(GD,5),b.Gf(zD,5)),2&t){let i;b.iGM(i=b.CRH())&&(n._connectionContainerRef=i.first),b.iGM(i=b.CRH())&&(n._inputContainerRef=i.first),b.iGM(i=b.CRH())&&(n._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,n){2&t&&b.ekj("mat-form-field-appearance-standard","standard"==n.appearance)("mat-form-field-appearance-fill","fill"==n.appearance)("mat-form-field-appearance-outline","outline"==n.appearance)("mat-form-field-appearance-legacy","legacy"==n.appearance)("mat-form-field-invalid",n._control.errorState)("mat-form-field-can-float",n._canLabelFloat())("mat-form-field-should-float",n._shouldLabelFloat())("mat-form-field-has-label",n._hasFloatingLabel())("mat-form-field-hide-placeholder",n._hideControlPlaceholder())("mat-form-field-disabled",n._control.disabled)("mat-form-field-autofilled",n._control.autofilled)("mat-focused",n._control.focused)("ng-untouched",n._shouldForward("untouched"))("ng-touched",n._shouldForward("touched"))("ng-pristine",n._shouldForward("pristine"))("ng-dirty",n._shouldForward("dirty"))("ng-valid",n._shouldForward("valid"))("ng-invalid",n._shouldForward("invalid"))("ng-pending",n._shouldForward("pending"))("_mat-animation-noopable",!n._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[b._Bn([{provide:B1,useExisting:s}]),b.qOj],ngContentSelectors:nA,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,n){1&t&&(b.F$t(tA),b.TgZ(0,"div",0)(1,"div",1,2),b.NdJ("click",function(a){return n._control.onContainerClick&&n._control.onContainerClick(a)}),b.YNc(3,jD,9,0,"ng-container",3),b.YNc(4,WD,2,1,"div",4),b.TgZ(5,"div",5,6),b.Hsn(7),b.TgZ(8,"span",7),b.YNc(9,qD,5,16,"label",8),b.qZA()(),b.YNc(10,ZD,2,0,"div",9),b.qZA(),b.YNc(11,KD,2,4,"div",10),b.TgZ(12,"div",11),b.YNc(13,JD,2,1,"div",12),b.YNc(14,eA,5,2,"div",13),b.qZA()()),2&t&&(b.xp6(3),b.Q6J("ngIf","outline"==n.appearance),b.xp6(1),b.Q6J("ngIf",n._prefixChildren.length),b.xp6(5),b.Q6J("ngIf",n._hasFloatingLabel()),b.xp6(1),b.Q6J("ngIf",n._suffixChildren.length),b.xp6(1),b.Q6J("ngIf","outline"!=n.appearance),b.xp6(1),b.Q6J("ngSwitch",n._getDisplayedMessages()),b.xp6(1),b.Q6J("ngSwitchCase","error"),b.xp6(1),b.Q6J("ngSwitchCase","hint"))},dependencies:[Jt.O5,Jt.RF,Jt.n9,$],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[rA.transitionMessages]},changeDetection:0}),s})(),fA=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({imports:[Jt.ez,Rf,ee,Rf]}),s})();var U1=K(4408);const By={schedule(s){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:n}=By;n&&(e=n.requestAnimationFrame,t=n.cancelAnimationFrame);const i=e(a=>{t=void 0,s(a)});return new Ac.w0(()=>t?.(i))},requestAnimationFrame(...s){const{delegate:e}=By;return(e?.requestAnimationFrame||requestAnimationFrame)(...s)},cancelAnimationFrame(...s){const{delegate:e}=By;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...s)},delegate:void 0};var V1=K(640);new class mA extends V1.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let i;e=e||n.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,i){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw i}}}(class pA extends U1.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=By.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,n=0){var i;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(e,t,n);const{actions:a}=e;null!=t&&(null===(i=a[a.length-1])||void 0===i?void 0:i.id)!==t&&(By.cancelAnimationFrame(t),e._scheduled=void 0)}});let CC,_A=1;const SE={};function H1(s){return s in SE&&(delete SE[s],!0)}const vA={setImmediate(s){const e=_A++;return SE[e]=!0,CC||(CC=Promise.resolve()),CC.then(()=>H1(e)&&s()),e},clearImmediate(s){H1(s)}},{setImmediate:yA,clearImmediate:bA}=vA,CE={setImmediate(...s){const{delegate:e}=CE;return(e?.setImmediate||yA)(...s)},clearImmediate(s){const{delegate:e}=CE;return(e?.clearImmediate||bA)(s)},delegate:void 0};new class EA extends V1.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let i;e=e||n.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,i){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw i}}}(class wA extends U1.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=CE.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,n=0){var i;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(e,t,n);const{actions:a}=e;null!=t&&(null===(i=a[a.length-1])||void 0===i?void 0:i.id)!==t&&(CE.clearImmediate(t),e._scheduled=void 0)}});var SA=K(8421),xA=K(5963);function G1(s,e=d.z){return function CA(s){return(0,p.e)((e,t)=>{let n=!1,i=null,a=null,c=!1;const u=()=>{if(a?.unsubscribe(),a=null,n){n=!1;const g=i;i=null,t.next(g)}c&&t.complete()},h=()=>{a=null,c&&t.complete()};e.subscribe((0,v.x)(t,g=>{n=!0,i=g,a||(0,SA.Xf)(s(g)).subscribe(a=(0,v.x)(t,u,h))},()=>{c=!0,(!n||!a||a.closed)&&t.complete()}))})}(()=>(0,xA.H)(s,e))}let DA=(()=>{class s{constructor(t,n,i){this._ngZone=t,this._platform=n,this._scrolled=new l.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const n=this.scrollContainers.get(t);n&&(n.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new n_.y(n=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(G1(t)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,sC.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(t,n){const i=this.getAncestorScrollContainers(t);return this.scrolled(n).pipe((0,i_.h)(a=>!a||i.indexOf(a)>-1))}getAncestorScrollContainers(t){const n=[];return this.scrollContainers.forEach((i,a)=>{this._scrollableContainsElement(a,t)&&n.push(a)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,n){let i=r(n),a=t.getElementRef().nativeElement;do{if(i==a)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const t=this._getWindow();return(0,L1.R)(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(b.R0b),b.LFG(be),b.LFG(Jt.K0,8))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),xC=(()=>{class s{constructor(t,n,i){this._platform=t,this._change=new l.x,this._changeListener=a=>{this._change.next(a)},this._document=i,n.runOutsideAngular(()=>{if(t.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:n,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+n,height:i,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,n=this._getWindow(),i=t.documentElement,a=i.getBoundingClientRect();return{top:-a.top||t.body.scrollTop||n.scrollY||i.scrollTop||0,left:-a.left||t.body.scrollLeft||n.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(G1(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(be),b.LFG(b.R0b),b.LFG(Jt.K0,8))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),TC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({}),s})(),z1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({imports:[Ly,TC,Ly,TC]}),s})();class DC{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class RA extends DC{constructor(e,t,n,i){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=i}}class j1 extends DC{constructor(e,t,n,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class IA extends DC{constructor(e){super(),this.element=e instanceof b.SBq?e.nativeElement:e}}class NA extends class OA{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof RA?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof j1?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof IA?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,n,i,a){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=i,this.attachDomPortal=c=>{const u=c.element,h=this._document.createComment("dom-portal");u.parentNode.insertBefore(h,u),this.outletElement.appendChild(u),this._attachedPortal=c,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(u,h)})},this._document=a}attachComponentPortal(e){const n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(n,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=n.create(e.injector||this._defaultInjector||b.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(i=>this.outletElement.appendChild(i)),n.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(n);-1!==i&&t.remove(i)}),this._attachedPortal=e,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let PA=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({}),s})();var LA=K(2529);const W1=jr();class FA{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=$s(-this._previousScrollPosition.left),e.style.top=$s(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,n=e.style,i=this._document.body.style,a=n.scrollBehavior||"",c=i.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),W1&&(n.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),W1&&(n.scrollBehavior=a,i.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,n=this._viewportRuler.getViewportSize();return t.scrollHeight>n.height||t.scrollWidth>n.width}}class kA{constructor(e,t,n,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class $1{enable(){}disable(){}attach(){}}function AC(s,e){return e.some(t=>s.bottom<t.top||s.top>t.bottom||s.right<t.left||s.left>t.right)}function Y1(s,e){return e.some(t=>s.top<t.top||s.bottom>t.bottom||s.left<t.left||s.right>t.right)}class BA{constructor(e,t,n,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:i}=this._viewportRuler.getViewportSize();AC(t,[{width:n,height:i,bottom:i,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let UA=(()=>{class s{constructor(t,n,i,a){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=i,this.noop=()=>new $1,this.close=c=>new kA(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new FA(this._viewportRuler,this._document),this.reposition=c=>new BA(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=a}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(DA),b.LFG(xC),b.LFG(b.R0b),b.LFG(Jt.K0))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class X1{constructor(e){if(this.scrollStrategy=new $1,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class VA{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let q1=(()=>{class s{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const n=this._attachedOverlays.indexOf(t);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(Jt.K0))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),HA=(()=>{class s extends q1{constructor(t,n){super(t),this._ngZone=n,this._keydownListener=i=>{const a=this._attachedOverlays;for(let c=a.length-1;c>-1;c--)if(a[c]._keydownEvents.observers.length>0){const u=a[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(i)):u.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(Jt.K0),b.LFG(b.R0b,8))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),GA=(()=>{class s extends q1{constructor(t,n,i){super(t),this._platform=n,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=a_(a)},this._clickListener=a=>{const c=a_(a),u="click"===a.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const h=this._attachedOverlays.slice();for(let g=h.length-1;g>-1;g--){const y=h[g];if(y._outsidePointerEvents.observers.length<1||!y.hasAttached())continue;if(y.overlayElement.contains(c)||y.overlayElement.contains(u))break;const E=y._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>E.next(a)):E.next(a)}}}add(t){if(super.add(t),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(Jt.K0),b.LFG(be),b.LFG(b.R0b,8))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Z1=(()=>{class s{constructor(t,n){this._platform=n,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||em()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let a=0;a<i.length;a++)i[a].remove()}const n=this._document.createElement("div");n.classList.add(t),em()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(Jt.K0),b.LFG(be))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class zA{constructor(e,t,n,i,a,c,u,h,g,y=!1){this._portalOutlet=e,this._host=t,this._pane=n,this._config=i,this._ngZone=a,this._keyboardDispatcher=c,this._document=u,this._location=h,this._outsideClickDispatcher=g,this._animationsDisabled=y,this._backdropElement=null,this._backdropClick=new l.x,this._attachments=new l.x,this._detachments=new l.x,this._locationChanges=Ac.w0.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._backdropTransitionendHandler=E=>{this._disposeBackdrop(E.target)},this._keydownEvents=new l.x,this._outsidePointerEvents=new l.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,l_.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=$s(this._config.width),e.height=$s(this._config.height),e.minWidth=$s(this._config.minWidth),e.minHeight=$s(this._config.minHeight),e.maxWidth=$s(this._config.maxWidth),e.maxHeight=$s(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,n){const i=o_(t||[]).filter(a=>!!a);i.length&&(n?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe((0,$l.R)((0,ky.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const K1="cdk-overlay-connected-position-bounding-box",jA=/([A-Za-z%]+)$/;class WA{constructor(e,t,n,i,a){this._viewportRuler=t,this._document=n,this._platform=i,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new l.x,this._resizeSubscription=Ac.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(K1),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,i=this._containerRect,a=[];let c;for(let u of this._preferredPositions){let h=this._getOriginPoint(e,i,u),g=this._getOverlayPoint(h,t,u),y=this._getOverlayFit(g,t,n,u);if(y.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(u,h);this._canFitWithFlexibleDimensions(y,g,n)?a.push({position:u,origin:h,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(h,u)}):(!c||c.overlayFit.visibleArea<y.visibleArea)&&(c={overlayFit:y,overlayPoint:g,originPoint:h,position:u,overlayRect:t})}if(a.length){let u=null,h=-1;for(const g of a){const y=g.boundingBoxRect.width*g.boundingBoxRect.height*(g.position.weight||1);y>h&&(h=y,u=g)}return this._isPushed=!1,void this._applyPosition(u.position,u.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&tm(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(K1),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,n){let i,a;if("center"==n.originX)i=e.left+e.width/2;else{const c=this._isRtl()?e.right:e.left,u=this._isRtl()?e.left:e.right;i="start"==n.originX?c:u}return t.left<0&&(i-=t.left),a="center"==n.originY?e.top+e.height/2:"top"==n.originY?e.top:e.bottom,t.top<0&&(a-=t.top),{x:i,y:a}}_getOverlayPoint(e,t,n){let i,a;return i="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,a="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+i,y:e.y+a}}_getOverlayFit(e,t,n,i){const a=Q1(t);let{x:c,y:u}=e,h=this._getOffset(i,"x"),g=this._getOffset(i,"y");h&&(c+=h),g&&(u+=g);let C=0-u,T=u+a.height-n.height,R=this._subtractOverflows(a.width,0-c,c+a.width-n.width),B=this._subtractOverflows(a.height,C,T),L=R*B;return{visibleArea:L,isCompletelyWithinViewport:a.width*a.height===L,fitsInViewportVertically:B===a.height,fitsInViewportHorizontally:R==a.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const i=n.bottom-t.y,a=n.right-t.x,c=J1(this._overlayRef.getConfig().minHeight),u=J1(this._overlayRef.getConfig().minWidth),g=e.fitsInViewportHorizontally||null!=u&&u<=a;return(e.fitsInViewportVertically||null!=c&&c<=i)&&g}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=Q1(t),a=this._viewportRect,c=Math.max(e.x+i.width-a.width,0),u=Math.max(e.y+i.height-a.height,0),h=Math.max(a.top-n.top-e.y,0),g=Math.max(a.left-n.left-e.x,0);let y=0,E=0;return y=i.width<=a.width?g||-c:e.x<this._viewportMargin?a.left-n.left-e.x:0,E=i.height<=a.height?h||-u:e.y<this._viewportMargin?a.top-n.top-e.y:0,this._previousPushAmount={x:y,y:E},{x:e.x+y,y:e.y+E}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const n=this._getScrollVisibility(),i=new VA(e,n);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,i=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let a=0;a<t.length;a++)t[a].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,i=this._isRtl();let a,c,u,y,E,C;if("top"===t.overlayY)c=e.y,a=n.height-c+this._viewportMargin;else if("bottom"===t.overlayY)u=n.height-e.y+2*this._viewportMargin,a=n.height-u+this._viewportMargin;else{const T=Math.min(n.bottom-e.y+n.top,e.y),R=this._lastBoundingBoxSize.height;a=2*T,c=e.y-T,a>R&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.y-R/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)C=n.width-e.x+this._viewportMargin,y=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)E=e.x,y=n.right-e.x;else{const T=Math.min(n.right-e.x+n.left,e.x),R=this._lastBoundingBoxSize.width;y=2*T,E=e.x-T,y>R&&!this._isInitialRender&&!this._growAfterOpen&&(E=e.x-R/2)}return{top:c,left:E,bottom:u,right:C,width:y,height:a}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const a=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;i.height=$s(n.height),i.top=$s(n.top),i.bottom=$s(n.bottom),i.width=$s(n.width),i.left=$s(n.left),i.right=$s(n.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",a&&(i.maxHeight=$s(a)),c&&(i.maxWidth=$s(c))}this._lastBoundingBoxSize=n,tm(this._boundingBox.style,i)}_resetBoundingBoxStyles(){tm(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){tm(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},i=this._hasExactPosition(),a=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(i){const y=this._viewportRuler.getViewportScrollPosition();tm(n,this._getExactOverlayY(t,e,y)),tm(n,this._getExactOverlayX(t,e,y))}else n.position="static";let u="",h=this._getOffset(t,"x"),g=this._getOffset(t,"y");h&&(u+=`translateX(${h}px) `),g&&(u+=`translateY(${g}px)`),n.transform=u.trim(),c.maxHeight&&(i?n.maxHeight=$s(c.maxHeight):a&&(n.maxHeight="")),c.maxWidth&&(i?n.maxWidth=$s(c.maxWidth):a&&(n.maxWidth="")),tm(this._pane.style,n)}_getExactOverlayY(e,t,n){let i={top:"",bottom:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,n)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(a.y+this._overlayRect.height)+"px":i.top=$s(a.y),i}_getExactOverlayX(e,t,n){let c,i={left:"",right:""},a=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,n)),c=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===c?i.right=this._document.documentElement.clientWidth-(a.x+this._overlayRect.width)+"px":i.left=$s(a.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Y1(e,n),isOriginOutsideView:AC(e,n),isOverlayClipped:Y1(t,n),isOverlayOutsideView:AC(t,n)}}_subtractOverflows(e,...t){return t.reduce((n,i)=>n-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&o_(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof b.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function tm(s,e){for(let t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);return s}function J1(s){if("number"!=typeof s&&null!=s){const[e,t]=s.split(jA);return t&&"px"!==t?null:parseFloat(e)}return s||null}function Q1(s){return{top:Math.floor(s.top),right:Math.floor(s.right),bottom:Math.floor(s.bottom),left:Math.floor(s.left),width:Math.floor(s.width),height:Math.floor(s.height)}}const eT="cdk-global-overlay-wrapper";class $A{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(eT),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:i,height:a,maxWidth:c,maxHeight:u}=n,h=!("100%"!==i&&"100vw"!==i||c&&"100%"!==c&&"100vw"!==c),g=!("100%"!==a&&"100vh"!==a||u&&"100%"!==u&&"100vh"!==u),y=this._xPosition,E=this._xOffset,C="rtl"===this._overlayRef.getConfig().direction;let T="",R="",B="";h?B="flex-start":"center"===y?(B="center",C?R=E:T=E):C?"left"===y||"end"===y?(B="flex-end",T=E):("right"===y||"start"===y)&&(B="flex-start",R=E):"left"===y||"start"===y?(B="flex-start",T=E):("right"===y||"end"===y)&&(B="flex-end",R=E),e.position=this._cssPosition,e.marginLeft=h?"0":T,e.marginTop=g?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=h?"0":R,t.justifyContent=B,t.alignItems=g?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(eT),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let YA=(()=>{class s{constructor(t,n,i,a){this._viewportRuler=t,this._document=n,this._platform=i,this._overlayContainer=a}global(){return new $A}flexibleConnectedTo(t){return new WA(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(xC),b.LFG(Jt.K0),b.LFG(be),b.LFG(Z1))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),XA=0,xE=(()=>{class s{constructor(t,n,i,a,c,u,h,g,y,E,C,T){this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=i,this._positionBuilder=a,this._keyboardDispatcher=c,this._injector=u,this._ngZone=h,this._document=g,this._directionality=y,this._location=E,this._outsideClickDispatcher=C,this._animationsModuleType=T}create(t){const n=this._createHostElement(),i=this._createPaneElement(n),a=this._createPortalOutlet(i),c=new X1(t);return c.direction=c.direction||this._directionality.value,new zA(a,n,i,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const n=this._document.createElement("div");return n.id="cdk-overlay-"+XA++,n.classList.add("cdk-overlay-pane"),t.appendChild(n),n}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(b.z2F)),new NA(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return s.\u0275fac=function(t){return new(t||s)(b.LFG(UA),b.LFG(Z1),b.LFG(b._Vd),b.LFG(YA),b.LFG(HA),b.LFG(b.zs3),b.LFG(b.R0b),b.LFG(Jt.K0),b.LFG(ME),b.LFG(Jt.Ye),b.LFG(GA),b.LFG(b.QbO,8))},s.\u0275prov=b.Yz7({token:s,factory:s.\u0275fac}),s})();const qA=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],tT=new b.OlP("cdk-connected-overlay-scroll-strategy");let nT=(()=>{class s{constructor(t){this.elementRef=t}}return s.\u0275fac=function(t){return new(t||s)(b.Y36(b.SBq))},s.\u0275dir=b.lG2({type:s,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),s})(),iT=(()=>{class s{constructor(t,n,i,a,c){this._overlay=t,this._dir=c,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Ac.w0.EMPTY,this._attachSubscription=Ac.w0.EMPTY,this._detachSubscription=Ac.w0.EMPTY,this._positionSubscription=Ac.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new b.vpe,this.positionChange=new b.vpe,this.attach=new b.vpe,this.detach=new b.vpe,this.overlayKeydown=new b.vpe,this.overlayOutsideClick=new b.vpe,this._templatePortal=new j1(n,i),this._scrollStrategyFactory=a,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=nl(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=nl(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=nl(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=nl(t)}get push(){return this._push}set push(t){this._push=nl(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=qA);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),27===n.keyCode&&!this.disableClose&&!Py(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{this.overlayOutsideClick.next(n)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),n=new X1({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(t){const n=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof nT?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe((0,LA.o)(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(b.Y36(xE),b.Y36(b.Rgc),b.Y36(b.s_b),b.Y36(tT),b.Y36(ME,8))},s.\u0275dir=b.lG2({type:s,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[b.TTD]}),s})();const KA={provide:tT,deps:[xE],useFactory:function ZA(s){return()=>s.scrollStrategies.reposition()}};let JA=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({providers:[xE,KA],imports:[Ly,PA,z1,z1]}),s})();class QA{constructor(e=!1,t,n=!0,i){this._multiple=e,this._emitChanges=n,this.compareWith=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new l.x,t&&t.length&&(e?t.forEach(a=>this._markSelected(a)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(n=>this._markSelected(n));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(n=>this._unmarkSelected(n));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,n=new Set(e);e.forEach(a=>this._markSelected(a)),t.filter(a=>!n.has(a)).forEach(a=>this._unmarkSelected(a));const i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}var Uy=K(433),eR=K(9770),rT=K(3900),tR=K(1884);const nR=["trigger"],iR=["panel"];function rR(s,e){if(1&s&&(b.TgZ(0,"span",8),b._uU(1),b.qZA()),2&s){const t=b.oxw();b.xp6(1),b.Oqu(t.placeholder)}}function sR(s,e){if(1&s&&(b.TgZ(0,"span",12),b._uU(1),b.qZA()),2&s){const t=b.oxw(2);b.xp6(1),b.Oqu(t.triggerValue)}}function oR(s,e){1&s&&b.Hsn(0,0,["*ngSwitchCase","true"])}function aR(s,e){if(1&s&&(b.TgZ(0,"span",9),b.YNc(1,sR,2,1,"span",10),b.YNc(2,oR,1,0,"ng-content",11),b.qZA()),2&s){const t=b.oxw();b.Q6J("ngSwitch",!!t.customTrigger),b.xp6(2),b.Q6J("ngSwitchCase",!0)}}function lR(s,e){if(1&s){const t=b.EpF();b.TgZ(0,"div",13)(1,"div",14,15),b.NdJ("@transformPanel.done",function(i){b.CHM(t);const a=b.oxw();return b.KtG(a._panelDoneAnimatingStream.next(i.toState))})("keydown",function(i){b.CHM(t);const a=b.oxw();return b.KtG(a._handleKeydown(i))}),b.Hsn(3,1),b.qZA()()}if(2&s){const t=b.oxw();b.Q6J("@transformPanelWrap",void 0),b.xp6(1),b.Gre("mat-select-panel ",t._getPanelTheme(),""),b.Udp("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),b.Q6J("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),b.uIk("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const cR=[[["mat-select-trigger"]],"*"],uR=["mat-select-trigger","*"],sT={transformPanelWrap:(0,X.X$)("transformPanelWrap",[(0,X.eR)("* => void",(0,X.IO)("@transformPanel",[(0,X.pV)()],{optional:!0}))]),transformPanel:(0,X.X$)("transformPanel",[(0,X.SB)("void",(0,X.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,X.SB)("showing",(0,X.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,X.SB)("showing-multiple",(0,X.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,X.eR)("void => *",(0,X.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,X.eR)("* => void",(0,X.jt)("100ms 25ms linear",(0,X.oB)({opacity:0})))])};let oT=0;const lT=new b.OlP("mat-select-scroll-strategy"),pR=new b.OlP("MAT_SELECT_CONFIG"),mR={provide:lT,deps:[xE],useFactory:function fR(s){return()=>s.scrollStrategies.reposition()}};class gR{constructor(e,t){this.source=e,this.value=t}}const _R=MD(SD(wD(CD(class{constructor(s,e,t,n,i){this._elementRef=s,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=i,this.stateChanges=new l.x}})))),vR=new b.OlP("MatSelectTrigger");let yR=(()=>{class s extends _R{constructor(t,n,i,a,c,u,h,g,y,E,C,T,R,B){super(c,a,h,g,E),this._viewportRuler=t,this._changeDetectorRef=n,this._ngZone=i,this._dir=u,this._parentFormField=y,this._liveAnnouncer=R,this._defaultOptions=B,this._panelOpen=!1,this._compareWith=(L,O)=>L===O,this._uid="mat-select-"+oT++,this._triggerAriaLabelledBy=null,this._destroy=new l.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+oT++,this._panelDoneAnimatingStream=new l.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=(0,eR.P)(()=>{const L=this.options;return L?L.changes.pipe((0,c_.O)(L),(0,rT.w)(()=>(0,ky.T)(...L.map(O=>O.onSelectionChange)))):this._ngZone.onStable.pipe((0,l_.q)(1),(0,rT.w)(()=>this.optionSelectionChanges))}),this.openedChange=new b.vpe,this._openedStream=this.openedChange.pipe((0,i_.h)(L=>L),(0,Dc.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,i_.h)(L=>!L),(0,Dc.U)(()=>{})),this.selectionChange=new b.vpe,this.valueChange=new b.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=B?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=B.typeaheadDebounceInterval),this._scrollStrategyFactory=T,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(C)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Uy.kI.required)??!1}set required(t){this._required=nl(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=nl(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=nl(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=vE(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new QA(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,tR.x)(),(0,$l.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,$l.R)(this._destroy)).subscribe(t=>{t.added.forEach(n=>n.select()),t.removed.forEach(n=>n.deselect())}),this.options.changes.pipe((0,c_.O)(null),(0,$l.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),n=this.ngControl;if(t!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?i.setAttribute("aria-labelledby",t):i.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const n=t.keyCode,i=40===n||38===n||37===n||39===n,a=13===n||32===n,c=this._keyManager;if(!c.isTyping()&&a&&!Py(t)||(this.multiple||t.altKey)&&i)t.preventDefault(),this.open();else if(!this.multiple){const u=this.selected;c.onKeydown(t);const h=this.selected;h&&u!==h&&this._liveAnnouncer.announce(h.viewValue,1e4)}}_handleOpenKeydown(t){const n=this._keyManager,i=t.keyCode,a=40===i||38===i,c=n.isTyping();if(a&&t.altKey)t.preventDefault(),this.close();else if(c||13!==i&&32!==i||!n.activeItem||Py(t))if(!c&&this._multiple&&65===i&&t.ctrlKey){t.preventDefault();const u=this.options.some(h=>!h.disabled&&!h.selected);this.options.forEach(h=>{h.disabled||(u?h.select():h.deselect())})}else{const u=n.activeItemIndex;n.onKeydown(t),this._multiple&&a&&t.shiftKey&&n.activeItem&&n.activeItemIndex!==u&&n.activeItem._selectViaInteraction()}else t.preventDefault(),n.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,l_.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(t);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const n=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return null!=i.value&&this._compareWith(i.value,t)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new QT(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe((0,$l.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe((0,$l.R)(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=(0,ky.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,$l.R)(t)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,ky.T)(...this.options.map(n=>n._stateChanges)).pipe((0,$l.R)(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,n){const i=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(i!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),n&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),n&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),i!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((n,i)=>this.sortComparator?this.sortComparator(n,i,t):t.indexOf(n)-t.indexOf(i)),this.stateChanges.next()}}_propagateChanges(t){let n=null;n=this.multiple?this.selected.map(i=>i.value):this.selected?this.selected.value:t,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();let n=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return s.\u0275fac=function(t){return new(t||s)(b.Y36(xC),b.Y36(b.sBO),b.Y36(b.R0b),b.Y36(TD),b.Y36(b.SBq),b.Y36(ME,8),b.Y36(Uy.F,8),b.Y36(Uy.sg,8),b.Y36(B1,8),b.Y36(Uy.a5,10),b.$8M("tabindex"),b.Y36(lT),b.Y36(uD),b.Y36(pR,8))},s.\u0275dir=b.lG2({type:s,viewQuery:function(t,n){if(1&t&&(b.Gf(nR,5),b.Gf(iR,5),b.Gf(iT,5)),2&t){let i;b.iGM(i=b.CRH())&&(n.trigger=i.first),b.iGM(i=b.CRH())&&(n.panel=i.first),b.iGM(i=b.CRH())&&(n._overlayDir=i.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[b.qOj,b.TTD]}),s})(),bR=(()=>{class s extends yR{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,n,i){const a=this._getItemHeight();return Math.min(Math.max(0,a*t-n+a/2),i)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,$l.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,l_.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const n=N1(t,this.options,this.optionGroups),i=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===n?0:function VD(s,e,t,n){return s<t?s:s+e>t+n?Math.max(0,s-n+e):t}((t+n)*i,i,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new gR(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),i=this._isRtl(),a=this.multiple?56:32;let c;if(this.multiple)c=40;else if(this.disableOptionCentering)c=16;else{let g=this._selectionModel.selected[0]||this.options.first;c=g&&g.group?32:16}i||(c*=-1);const u=0-(t.left+c-(i?a:0)),h=t.right+c-n.width+(i?0:a);u>0?c+=u+8:h>0&&(c-=h+8),this._overlayDir.offsetX=Math.round(c),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,n,i){const a=this._getItemHeight(),c=(a-this._triggerRect.height)/2,u=Math.floor(256/a);let h;return this.disableOptionCentering?0:(h=0===this._scrollTop?t*a:this._scrollTop===i?(t-(this._getItemCount()-u))*a+(a-(this._getItemCount()*a-256)%a):n-a/2,Math.round(-1*h-c))}_checkOverlayWithinViewport(t){const n=this._getItemHeight(),i=this._viewportRuler.getViewportSize(),a=this._triggerRect.top-8,c=i.height-this._triggerRect.bottom-8,u=Math.abs(this._offsetY),g=Math.min(this._getItemCount()*n,256)-u-this._triggerRect.height;g>c?this._adjustPanelUp(g,c):u>a?this._adjustPanelDown(u,a,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,n){const i=Math.round(t-n);this._scrollTop-=i,this._offsetY-=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,n,i){const a=Math.round(t-n);if(this._scrollTop+=a,this._offsetY+=a,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=i)return this._scrollTop=i,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),n=this._getItemCount(),i=Math.min(n*t,256),c=n*t-i;let u;u=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),u+=N1(u,this.options,this.optionGroups);const h=i/2;this._scrollTop=this._calculateOverlayScroll(u,h,c),this._offsetY=this._calculateOverlayOffsetY(u,h,c),this._checkOverlayWithinViewport(c)}_getOriginBasedOnOption(){const t=this._getItemHeight(),n=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-n+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return s.\u0275fac=function(){let e;return function(n){return(e||(e=b.n5z(s)))(n||s)}}(),s.\u0275cmp=b.Xpm({type:s,selectors:[["mat-select"]],contentQueries:function(t,n,i){if(1&t&&(b.Suo(i,vR,5),b.Suo(i,O1,5),b.Suo(i,I1,5)),2&t){let a;b.iGM(a=b.CRH())&&(n.customTrigger=a.first),b.iGM(a=b.CRH())&&(n.options=a),b.iGM(a=b.CRH())&&(n.optionGroups=a)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(t,n){1&t&&b.NdJ("keydown",function(a){return n._handleKeydown(a)})("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()}),2&t&&(b.uIk("id",n.id)("tabindex",n.tabIndex)("aria-controls",n.panelOpen?n.id+"-panel":null)("aria-expanded",n.panelOpen)("aria-label",n.ariaLabel||null)("aria-required",n.required.toString())("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-activedescendant",n._getAriaActiveDescendant()),b.ekj("mat-select-disabled",n.disabled)("mat-select-invalid",n.errorState)("mat-select-required",n.required)("mat-select-empty",n.empty)("mat-select-multiple",n.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[b._Bn([{provide:MC,useExisting:s},{provide:R1,useExisting:s}]),b.qOj],ngContentSelectors:uR,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,n){if(1&t&&(b.F$t(cR),b.TgZ(0,"div",0,1),b.NdJ("click",function(){return n.toggle()}),b.TgZ(3,"div",2),b.YNc(4,rR,2,1,"span",3),b.YNc(5,aR,3,2,"span",4),b.qZA(),b.TgZ(6,"div",5),b._UZ(7,"div",6),b.qZA()(),b.YNc(8,lR,4,14,"ng-template",7),b.NdJ("backdropClick",function(){return n.close()})("attach",function(){return n._onAttached()})("detach",function(){return n.close()})),2&t){const i=b.MAs(1);b.uIk("aria-owns",n.panelOpen?n.id+"-panel":null),b.xp6(3),b.Q6J("ngSwitch",n.empty),b.uIk("id",n._valueId),b.xp6(1),b.Q6J("ngSwitchCase",!0),b.xp6(1),b.Q6J("ngSwitchCase",!1),b.xp6(3),b.Q6J("cdkConnectedOverlayPanelClass",n._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",n._scrollStrategy)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayOpen",n.panelOpen)("cdkConnectedOverlayPositions",n._positions)("cdkConnectedOverlayMinWidth",null==n._triggerRect?null:n._triggerRect.width)("cdkConnectedOverlayOffsetY",n._offsetY)}},dependencies:[Jt.mk,Jt.RF,Jt.n9,Jt.ED,iT,nT],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[sT.transformPanelWrap,sT.transformPanel]},changeDetection:0}),s})(),wR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s}),s.\u0275inj=b.cJS({providers:[mR],imports:[Jt.ez,JA,P1,Rf,TC,fA,P1,Rf]}),s})();const ER=[{path:"",redirectTo:"console1",pathMatch:"full"},{path:"",component:vh,children:[{path:"console1",component:(()=>{class s{constructor(){}ngOnInit(){}onSelectChange(t){this.console1Viewer.updateScene("28_30",t.value)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=b.Xpm({type:s,selectors:[["app-console1-page"]],viewQuery:function(t,n){if(1&t&&b.Gf(gC,5),2&t){let i;b.iGM(i=b.CRH())&&(n.console1Viewer=i.first)}},decls:25,vars:0,consts:[[1,"mx-auto","text-center","mb-5"],[1,"mx-auto","text-center"],[3,"selectionChange"],["value","200"],["value","300"],["value","400"],["value","440"],["value","500"],["value","600"],["value","750"],["value","900"]],template:function(t,n){1&t&&(b.TgZ(0,"div",0)(1,"h4"),b._uU(2,"Konzola ALK 28/30"),b.qZA()(),b._UZ(3,"app-console1-viewer"),b.TgZ(4,"div",1)(5,"mat-form-field")(6,"mat-label"),b._uU(7,"D\xe9lka profilu"),b.qZA(),b.TgZ(8,"mat-select",2),b.NdJ("selectionChange",function(a){return n.onSelectChange(a)}),b.TgZ(9,"mat-option",3),b._uU(10,"200 mm"),b.qZA(),b.TgZ(11,"mat-option",4),b._uU(12,"300 mm"),b.qZA(),b.TgZ(13,"mat-option",5),b._uU(14,"400 mm"),b.qZA(),b.TgZ(15,"mat-option",6),b._uU(16,"440 mm"),b.qZA(),b.TgZ(17,"mat-option",7),b._uU(18,"500 mm"),b.qZA(),b.TgZ(19,"mat-option",8),b._uU(20,"600 mm"),b.qZA(),b.TgZ(21,"mat-option",9),b._uU(22,"750 mm"),b.qZA(),b.TgZ(23,"mat-option",10),b._uU(24,"900 mm"),b.qZA()()()())},dependencies:[hA,SC,bR,O1,gC],styles:[".threejs-canvas[_ngcontent-%COMP%]{border:1px solid black}"]}),s})()},{path:"",loadChildren:()=>K.e(14).then(K.bind(K,5014)).then(s=>s.AdminLayoutModule)}]}];let MR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=b.oAB({type:s,bootstrap:[Wc]}),s.\u0275inj=b.cJS({providers:[xy],imports:[m.b2,fl,no.Bz.forRoot(ER,{useHash:!0}),pl,tc,Ru.Rh.forRoot(),ml,jc,h1,wR,Uy.u5]}),s})();(0,b.G48)(),m.q6().bootstrapModule(MR)},1135:(gn,it,K)=>{"use strict";K.d(it,{X:()=>b});var m=K(7579);class b extends m.x{constructor(Me){super(),this._value=Me}get value(){return this.getValue()}_subscribe(Me){const ye=super._subscribe(Me);return!ye.closed&&Me.next(this._value),ye}getValue(){const{hasError:Me,thrownError:ye,_value:Oe}=this;if(Me)throw ye;return this._throwIfClosed(),Oe}next(Me){super.next(this._value=Me)}}},9751:(gn,it,K)=>{"use strict";K.d(it,{y:()=>st});var m=K(930),b=K(727),X=K(8822),Me=K(9635),ye=K(2416),Oe=K(576),Ae=K(2806);let st=(()=>{class ot{constructor(Ct){Ct&&(this._subscribe=Ct)}lift(Ct){const mt=new ot;return mt.source=this,mt.operator=Ct,mt}subscribe(Ct,mt,Et){const Yt=function $e(ot){return ot&&ot instanceof m.Lv||function je(ot){return ot&&(0,Oe.m)(ot.next)&&(0,Oe.m)(ot.error)&&(0,Oe.m)(ot.complete)}(ot)&&(0,b.Nn)(ot)}(Ct)?Ct:new m.Hp(Ct,mt,Et);return(0,Ae.x)(()=>{const{operator:Dn,source:Gt}=this;Yt.add(Dn?Dn.call(Yt,Gt):Gt?this._subscribe(Yt):this._trySubscribe(Yt))}),Yt}_trySubscribe(Ct){try{return this._subscribe(Ct)}catch(mt){Ct.error(mt)}}forEach(Ct,mt){return new(mt=qe(mt))((Et,Yt)=>{const Dn=new m.Hp({next:Gt=>{try{Ct(Gt)}catch(ei){Yt(ei),Dn.unsubscribe()}},error:Yt,complete:Et});this.subscribe(Dn)})}_subscribe(Ct){var mt;return null===(mt=this.source)||void 0===mt?void 0:mt.subscribe(Ct)}[X.L](){return this}pipe(...Ct){return(0,Me.U)(Ct)(this)}toPromise(Ct){return new(Ct=qe(Ct))((mt,Et)=>{let Yt;this.subscribe(Dn=>Yt=Dn,Dn=>Et(Dn),()=>mt(Yt))})}}return ot.create=tn=>new ot(tn),ot})();function qe(ot){var tn;return null!==(tn=ot??ye.v.Promise)&&void 0!==tn?tn:Promise}},7579:(gn,it,K)=>{"use strict";K.d(it,{x:()=>Ae});var m=K(9751),b=K(727);const Me=(0,K(3888).d)(qe=>function(){qe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ye=K(8737),Oe=K(2806);let Ae=(()=>{class qe extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($e){const ot=new st(this,this);return ot.operator=$e,ot}_throwIfClosed(){if(this.closed)throw new Me}next($e){(0,Oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ot of this.currentObservers)ot.next($e)}})}error($e){(0,Oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$e;const{observers:ot}=this;for(;ot.length;)ot.shift().error($e)}})}complete(){(0,Oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$e}=this;for(;$e.length;)$e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $e;return(null===($e=this.observers)||void 0===$e?void 0:$e.length)>0}_trySubscribe($e){return this._throwIfClosed(),super._trySubscribe($e)}_subscribe($e){return this._throwIfClosed(),this._checkFinalizedStatuses($e),this._innerSubscribe($e)}_innerSubscribe($e){const{hasError:ot,isStopped:tn,observers:Ct}=this;return ot||tn?b.Lc:(this.currentObservers=null,Ct.push($e),new b.w0(()=>{this.currentObservers=null,(0,ye.P)(Ct,$e)}))}_checkFinalizedStatuses($e){const{hasError:ot,thrownError:tn,isStopped:Ct}=this;ot?$e.error(tn):Ct&&$e.complete()}asObservable(){const $e=new m.y;return $e.source=this,$e}}return qe.create=(je,$e)=>new st(je,$e),qe})();class st extends Ae{constructor(je,$e){super(),this.destination=je,this.source=$e}next(je){var $e,ot;null===(ot=null===($e=this.destination)||void 0===$e?void 0:$e.next)||void 0===ot||ot.call($e,je)}error(je){var $e,ot;null===(ot=null===($e=this.destination)||void 0===$e?void 0:$e.error)||void 0===ot||ot.call($e,je)}complete(){var je,$e;null===($e=null===(je=this.destination)||void 0===je?void 0:je.complete)||void 0===$e||$e.call(je)}_subscribe(je){var $e,ot;return null!==(ot=null===($e=this.source)||void 0===$e?void 0:$e.subscribe(je))&&void 0!==ot?ot:b.Lc}}},930:(gn,it,K)=>{"use strict";K.d(it,{Hp:()=>Et,Lv:()=>ot});var m=K(576),b=K(727),X=K(2416),Me=K(7849),ye=K(5032);const Oe=qe("C",void 0,void 0);function qe(Ue,ve,xt){return{kind:Ue,value:ve,error:xt}}var je=K(3410),$e=K(2806);class ot extends b.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,b.Nn)(ve)&&ve.add(this)):this.destination=ei}static create(ve,xt,Dt){return new Et(ve,xt,Dt)}next(ve){this.isStopped?Gt(function st(Ue){return qe("N",Ue,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Gt(function Ae(Ue){return qe("E",void 0,Ue)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Gt(Oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const tn=Function.prototype.bind;function Ct(Ue,ve){return tn.call(Ue,ve)}class mt{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:xt}=this;if(xt.next)try{xt.next(ve)}catch(Dt){Yt(Dt)}}error(ve){const{partialObserver:xt}=this;if(xt.error)try{xt.error(ve)}catch(Dt){Yt(Dt)}else Yt(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(xt){Yt(xt)}}}class Et extends ot{constructor(ve,xt,Dt){let ft;if(super(),(0,m.m)(ve)||!ve)ft={next:ve??void 0,error:xt??void 0,complete:Dt??void 0};else{let Mt;this&&X.v.useDeprecatedNextContext?(Mt=Object.create(ve),Mt.unsubscribe=()=>this.unsubscribe(),ft={next:ve.next&&Ct(ve.next,Mt),error:ve.error&&Ct(ve.error,Mt),complete:ve.complete&&Ct(ve.complete,Mt)}):ft=ve}this.destination=new mt(ft)}}function Yt(Ue){X.v.useDeprecatedSynchronousErrorHandling?(0,$e.O)(Ue):(0,Me.h)(Ue)}function Gt(Ue,ve){const{onStoppedNotification:xt}=X.v;xt&&je.z.setTimeout(()=>xt(Ue,ve))}const ei={closed:!0,next:ye.Z,error:function Dn(Ue){throw Ue},complete:ye.Z}},727:(gn,it,K)=>{"use strict";K.d(it,{Lc:()=>Oe,w0:()=>ye,Nn:()=>Ae});var m=K(576);const X=(0,K(3888).d)(qe=>function($e){qe(this),this.message=$e?`${$e.length} errors occurred during unsubscription:\n${$e.map((ot,tn)=>`${tn+1}) ${ot.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$e});var Me=K(8737);class ye{constructor(je){this.initialTeardown=je,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let je;if(!this.closed){this.closed=!0;const{_parentage:$e}=this;if($e)if(this._parentage=null,Array.isArray($e))for(const Ct of $e)Ct.remove(this);else $e.remove(this);const{initialTeardown:ot}=this;if((0,m.m)(ot))try{ot()}catch(Ct){je=Ct instanceof X?Ct.errors:[Ct]}const{_finalizers:tn}=this;if(tn){this._finalizers=null;for(const Ct of tn)try{st(Ct)}catch(mt){je=je??[],mt instanceof X?je=[...je,...mt.errors]:je.push(mt)}}if(je)throw new X(je)}}add(je){var $e;if(je&&je!==this)if(this.closed)st(je);else{if(je instanceof ye){if(je.closed||je._hasParent(this))return;je._addParent(this)}(this._finalizers=null!==($e=this._finalizers)&&void 0!==$e?$e:[]).push(je)}}_hasParent(je){const{_parentage:$e}=this;return $e===je||Array.isArray($e)&&$e.includes(je)}_addParent(je){const{_parentage:$e}=this;this._parentage=Array.isArray($e)?($e.push(je),$e):$e?[$e,je]:je}_removeParent(je){const{_parentage:$e}=this;$e===je?this._parentage=null:Array.isArray($e)&&(0,Me.P)($e,je)}remove(je){const{_finalizers:$e}=this;$e&&(0,Me.P)($e,je),je instanceof ye&&je._removeParent(this)}}ye.EMPTY=(()=>{const qe=new ye;return qe.closed=!0,qe})();const Oe=ye.EMPTY;function Ae(qe){return qe instanceof ye||qe&&"closed"in qe&&(0,m.m)(qe.remove)&&(0,m.m)(qe.add)&&(0,m.m)(qe.unsubscribe)}function st(qe){(0,m.m)(qe)?qe():qe.unsubscribe()}},2416:(gn,it,K)=>{"use strict";K.d(it,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(gn,it,K)=>{"use strict";K.d(it,{a:()=>je});var m=K(9751),b=K(4742),X=K(2076),Me=K(4671),ye=K(3268),Oe=K(3269),Ae=K(1810),st=K(5403),qe=K(9672);function je(...tn){const Ct=(0,Oe.yG)(tn),mt=(0,Oe.jO)(tn),{args:Et,keys:Yt}=(0,b.D)(tn);if(0===Et.length)return(0,X.D)([],Ct);const Dn=new m.y(function $e(tn,Ct,mt=Me.y){return Et=>{ot(Ct,()=>{const{length:Yt}=tn,Dn=new Array(Yt);let Gt=Yt,ei=Yt;for(let Ue=0;Ue<Yt;Ue++)ot(Ct,()=>{const ve=(0,X.D)(tn[Ue],Ct);let xt=!1;ve.subscribe((0,st.x)(Et,Dt=>{Dn[Ue]=Dt,xt||(xt=!0,ei--),ei||Et.next(mt(Dn.slice()))},()=>{--Gt||Et.complete()}))},Et)},Et)}}(Et,Ct,Yt?Gt=>(0,Ae.n)(Yt,Gt):Me.y));return mt?Dn.pipe((0,ye.Z)(mt)):Dn}function ot(tn,Ct,mt){tn?(0,qe.f)(mt,tn,Ct):Ct()}},7272:(gn,it,K)=>{"use strict";K.d(it,{z:()=>ye});var m=K(8189),X=K(3269),Me=K(2076);function ye(...Oe){return function b(){return(0,m.J)(1)}()((0,Me.D)(Oe,(0,X.yG)(Oe)))}},9770:(gn,it,K)=>{"use strict";K.d(it,{P:()=>X});var m=K(9751),b=K(8421);function X(Me){return new m.y(ye=>{(0,b.Xf)(Me()).subscribe(ye)})}},515:(gn,it,K)=>{"use strict";K.d(it,{E:()=>b});const b=new(K(9751).y)(ye=>ye.complete())},2076:(gn,it,K)=>{"use strict";K.d(it,{D:()=>Dt});var m=K(8421),b=K(9672),X=K(4482),Me=K(5403);function ye(ft,Mt=0){return(0,X.e)((kt,Fe)=>{kt.subscribe((0,Me.x)(Fe,ke=>(0,b.f)(Fe,ft,()=>Fe.next(ke),Mt),()=>(0,b.f)(Fe,ft,()=>Fe.complete(),Mt),ke=>(0,b.f)(Fe,ft,()=>Fe.error(ke),Mt)))})}function Oe(ft,Mt=0){return(0,X.e)((kt,Fe)=>{Fe.add(ft.schedule(()=>kt.subscribe(Fe),Mt))})}var qe=K(9751),$e=K(2202),ot=K(576);function Ct(ft,Mt){if(!ft)throw new Error("Iterable cannot be null");return new qe.y(kt=>{(0,b.f)(kt,Mt,()=>{const Fe=ft[Symbol.asyncIterator]();(0,b.f)(kt,Mt,()=>{Fe.next().then(ke=>{ke.done?kt.complete():kt.next(ke.value)})},0,!0)})})}var mt=K(3670),Et=K(8239),Yt=K(1144),Dn=K(6495),Gt=K(2206),ei=K(4532),Ue=K(3260);function Dt(ft,Mt){return Mt?function xt(ft,Mt){if(null!=ft){if((0,mt.c)(ft))return function Ae(ft,Mt){return(0,m.Xf)(ft).pipe(Oe(Mt),ye(Mt))}(ft,Mt);if((0,Yt.z)(ft))return function je(ft,Mt){return new qe.y(kt=>{let Fe=0;return Mt.schedule(function(){Fe===ft.length?kt.complete():(kt.next(ft[Fe++]),kt.closed||this.schedule())})})}(ft,Mt);if((0,Et.t)(ft))return function st(ft,Mt){return(0,m.Xf)(ft).pipe(Oe(Mt),ye(Mt))}(ft,Mt);if((0,Gt.D)(ft))return Ct(ft,Mt);if((0,Dn.T)(ft))return function tn(ft,Mt){return new qe.y(kt=>{let Fe;return(0,b.f)(kt,Mt,()=>{Fe=ft[$e.h](),(0,b.f)(kt,Mt,()=>{let ke,at;try{({value:ke,done:at}=Fe.next())}catch(Ge){return void kt.error(Ge)}at?kt.complete():kt.next(ke)},0,!0)}),()=>(0,ot.m)(Fe?.return)&&Fe.return()})}(ft,Mt);if((0,Ue.L)(ft))return function ve(ft,Mt){return Ct((0,Ue.Q)(ft),Mt)}(ft,Mt)}throw(0,ei.z)(ft)}(ft,Mt):(0,m.Xf)(ft)}},4968:(gn,it,K)=>{"use strict";K.d(it,{R:()=>je});var m=K(8421),b=K(9751),X=K(5577),Me=K(1144),ye=K(576),Oe=K(3268);const Ae=["addListener","removeListener"],st=["addEventListener","removeEventListener"],qe=["on","off"];function je(mt,Et,Yt,Dn){if((0,ye.m)(Yt)&&(Dn=Yt,Yt=void 0),Dn)return je(mt,Et,Yt).pipe((0,Oe.Z)(Dn));const[Gt,ei]=function Ct(mt){return(0,ye.m)(mt.addEventListener)&&(0,ye.m)(mt.removeEventListener)}(mt)?st.map(Ue=>ve=>mt[Ue](Et,ve,Yt)):function ot(mt){return(0,ye.m)(mt.addListener)&&(0,ye.m)(mt.removeListener)}(mt)?Ae.map($e(mt,Et)):function tn(mt){return(0,ye.m)(mt.on)&&(0,ye.m)(mt.off)}(mt)?qe.map($e(mt,Et)):[];if(!Gt&&(0,Me.z)(mt))return(0,X.z)(Ue=>je(Ue,Et,Yt))((0,m.Xf)(mt));if(!Gt)throw new TypeError("Invalid event target");return new b.y(Ue=>{const ve=(...xt)=>Ue.next(1<xt.length?xt:xt[0]);return Gt(ve),()=>ei(ve)})}function $e(mt,Et){return Yt=>Dn=>mt[Yt](Et,Dn)}},8421:(gn,it,K)=>{"use strict";K.d(it,{Xf:()=>tn});var m=K(655),b=K(1144),X=K(8239),Me=K(9751),ye=K(3670),Oe=K(2206),Ae=K(4532),st=K(6495),qe=K(3260),je=K(576),$e=K(7849),ot=K(8822);function tn(Ue){if(Ue instanceof Me.y)return Ue;if(null!=Ue){if((0,ye.c)(Ue))return function Ct(Ue){return new Me.y(ve=>{const xt=Ue[ot.L]();if((0,je.m)(xt.subscribe))return xt.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ue);if((0,b.z)(Ue))return function mt(Ue){return new Me.y(ve=>{for(let xt=0;xt<Ue.length&&!ve.closed;xt++)ve.next(Ue[xt]);ve.complete()})}(Ue);if((0,X.t)(Ue))return function Et(Ue){return new Me.y(ve=>{Ue.then(xt=>{ve.closed||(ve.next(xt),ve.complete())},xt=>ve.error(xt)).then(null,$e.h)})}(Ue);if((0,Oe.D)(Ue))return Dn(Ue);if((0,st.T)(Ue))return function Yt(Ue){return new Me.y(ve=>{for(const xt of Ue)if(ve.next(xt),ve.closed)return;ve.complete()})}(Ue);if((0,qe.L)(Ue))return function Gt(Ue){return Dn((0,qe.Q)(Ue))}(Ue)}throw(0,Ae.z)(Ue)}function Dn(Ue){return new Me.y(ve=>{(function ei(Ue,ve){var xt,Dt,ft,Mt;return(0,m.mG)(this,void 0,void 0,function*(){try{for(xt=(0,m.KL)(Ue);!(Dt=yield xt.next()).done;)if(ve.next(Dt.value),ve.closed)return}catch(kt){ft={error:kt}}finally{try{Dt&&!Dt.done&&(Mt=xt.return)&&(yield Mt.call(xt))}finally{if(ft)throw ft.error}}ve.complete()})})(Ue,ve).catch(xt=>ve.error(xt))})}},6451:(gn,it,K)=>{"use strict";K.d(it,{T:()=>Oe});var m=K(8189),b=K(8421),X=K(515),Me=K(3269),ye=K(2076);function Oe(...Ae){const st=(0,Me.yG)(Ae),qe=(0,Me._6)(Ae,1/0),je=Ae;return je.length?1===je.length?(0,b.Xf)(je[0]):(0,m.J)(qe)((0,ye.D)(je,st)):X.E}},9646:(gn,it,K)=>{"use strict";K.d(it,{of:()=>X});var m=K(3269),b=K(2076);function X(...Me){const ye=(0,m.yG)(Me);return(0,b.D)(Me,ye)}},5963:(gn,it,K)=>{"use strict";K.d(it,{H:()=>ye});var m=K(9751),b=K(4986),X=K(3532);function ye(Oe=0,Ae,st=b.P){let qe=-1;return null!=Ae&&((0,X.K)(Ae)?st=Ae:qe=Ae),new m.y(je=>{let $e=function Me(Oe){return Oe instanceof Date&&!isNaN(Oe)}(Oe)?+Oe-st.now():Oe;$e<0&&($e=0);let ot=0;return st.schedule(function(){je.closed||(je.next(ot++),0<=qe?this.schedule(void 0,qe):je.complete())},$e)})}},5403:(gn,it,K)=>{"use strict";K.d(it,{x:()=>b});var m=K(930);function b(Me,ye,Oe,Ae,st){return new X(Me,ye,Oe,Ae,st)}class X extends m.Lv{constructor(ye,Oe,Ae,st,qe,je){super(ye),this.onFinalize=qe,this.shouldUnsubscribe=je,this._next=Oe?function($e){try{Oe($e)}catch(ot){ye.error(ot)}}:super._next,this._error=st?function($e){try{st($e)}catch(ot){ye.error(ot)}finally{this.unsubscribe()}}:super._error,this._complete=Ae?function(){try{Ae()}catch($e){ye.error($e)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ye;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Oe}=this;super.unsubscribe(),!Oe&&(null===(ye=this.onFinalize)||void 0===ye||ye.call(this))}}}},4351:(gn,it,K)=>{"use strict";K.d(it,{b:()=>X});var m=K(5577),b=K(576);function X(Me,ye){return(0,b.m)(ye)?(0,m.z)(Me,ye,1):(0,m.z)(Me,1)}},1884:(gn,it,K)=>{"use strict";K.d(it,{x:()=>Me});var m=K(4671),b=K(4482),X=K(5403);function Me(Oe,Ae=m.y){return Oe=Oe??ye,(0,b.e)((st,qe)=>{let je,$e=!0;st.subscribe((0,X.x)(qe,ot=>{const tn=Ae(ot);($e||!Oe(je,tn))&&($e=!1,je=tn,qe.next(ot))}))})}function ye(Oe,Ae){return Oe===Ae}},9300:(gn,it,K)=>{"use strict";K.d(it,{h:()=>X});var m=K(4482),b=K(5403);function X(Me,ye){return(0,m.e)((Oe,Ae)=>{let st=0;Oe.subscribe((0,b.x)(Ae,qe=>Me.call(ye,qe,st++)&&Ae.next(qe)))})}},4004:(gn,it,K)=>{"use strict";K.d(it,{U:()=>X});var m=K(4482),b=K(5403);function X(Me,ye){return(0,m.e)((Oe,Ae)=>{let st=0;Oe.subscribe((0,b.x)(Ae,qe=>{Ae.next(Me.call(ye,qe,st++))}))})}},9718:(gn,it,K)=>{"use strict";K.d(it,{h:()=>b});var m=K(4004);function b(X){return(0,m.U)(()=>X)}},8189:(gn,it,K)=>{"use strict";K.d(it,{J:()=>X});var m=K(5577),b=K(4671);function X(Me=1/0){return(0,m.z)(b.y,Me)}},5577:(gn,it,K)=>{"use strict";K.d(it,{z:()=>st});var m=K(4004),b=K(8421),X=K(4482),Me=K(9672),ye=K(5403),Ae=K(576);function st(qe,je,$e=1/0){return(0,Ae.m)(je)?st((ot,tn)=>(0,m.U)((Ct,mt)=>je(ot,Ct,tn,mt))((0,b.Xf)(qe(ot,tn))),$e):("number"==typeof je&&($e=je),(0,X.e)((ot,tn)=>function Oe(qe,je,$e,ot,tn,Ct,mt,Et){const Yt=[];let Dn=0,Gt=0,ei=!1;const Ue=()=>{ei&&!Yt.length&&!Dn&&je.complete()},ve=Dt=>Dn<ot?xt(Dt):Yt.push(Dt),xt=Dt=>{Ct&&je.next(Dt),Dn++;let ft=!1;(0,b.Xf)($e(Dt,Gt++)).subscribe((0,ye.x)(je,Mt=>{tn?.(Mt),Ct?ve(Mt):je.next(Mt)},()=>{ft=!0},void 0,()=>{if(ft)try{for(Dn--;Yt.length&&Dn<ot;){const Mt=Yt.shift();mt?(0,Me.f)(je,mt,()=>xt(Mt)):xt(Mt)}Ue()}catch(Mt){je.error(Mt)}}))};return qe.subscribe((0,ye.x)(je,ve,()=>{ei=!0,Ue()})),()=>{Et?.()}}(ot,tn,qe,$e)))}},5684:(gn,it,K)=>{"use strict";K.d(it,{T:()=>b});var m=K(9300);function b(X){return(0,m.h)((Me,ye)=>X<=ye)}},8675:(gn,it,K)=>{"use strict";K.d(it,{O:()=>Me});var m=K(7272),b=K(3269),X=K(4482);function Me(...ye){const Oe=(0,b.yG)(ye);return(0,X.e)((Ae,st)=>{(Oe?(0,m.z)(ye,Ae,Oe):(0,m.z)(ye,Ae)).subscribe(st)})}},3900:(gn,it,K)=>{"use strict";K.d(it,{w:()=>Me});var m=K(8421),b=K(4482),X=K(5403);function Me(ye,Oe){return(0,b.e)((Ae,st)=>{let qe=null,je=0,$e=!1;const ot=()=>$e&&!qe&&st.complete();Ae.subscribe((0,X.x)(st,tn=>{qe?.unsubscribe();let Ct=0;const mt=je++;(0,m.Xf)(ye(tn,mt)).subscribe(qe=(0,X.x)(st,Et=>st.next(Oe?Oe(tn,Et,mt,Ct++):Et),()=>{qe=null,ot()}))},()=>{$e=!0,ot()}))})}},5698:(gn,it,K)=>{"use strict";K.d(it,{q:()=>Me});var m=K(515),b=K(4482),X=K(5403);function Me(ye){return ye<=0?()=>m.E:(0,b.e)((Oe,Ae)=>{let st=0;Oe.subscribe((0,X.x)(Ae,qe=>{++st<=ye&&(Ae.next(qe),ye<=st&&Ae.complete())}))})}},2722:(gn,it,K)=>{"use strict";K.d(it,{R:()=>ye});var m=K(4482),b=K(5403),X=K(8421),Me=K(5032);function ye(Oe){return(0,m.e)((Ae,st)=>{(0,X.Xf)(Oe).subscribe((0,b.x)(st,()=>st.complete(),Me.Z)),!st.closed&&Ae.subscribe(st)})}},2529:(gn,it,K)=>{"use strict";K.d(it,{o:()=>X});var m=K(4482),b=K(5403);function X(Me,ye=!1){return(0,m.e)((Oe,Ae)=>{let st=0;Oe.subscribe((0,b.x)(Ae,qe=>{const je=Me(qe,st++);(je||ye)&&Ae.next(qe),!je&&Ae.complete()}))})}},8505:(gn,it,K)=>{"use strict";K.d(it,{b:()=>ye});var m=K(576),b=K(4482),X=K(5403),Me=K(4671);function ye(Oe,Ae,st){const qe=(0,m.m)(Oe)||Ae||st?{next:Oe,error:Ae,complete:st}:Oe;return qe?(0,b.e)((je,$e)=>{var ot;null===(ot=qe.subscribe)||void 0===ot||ot.call(qe);let tn=!0;je.subscribe((0,X.x)($e,Ct=>{var mt;null===(mt=qe.next)||void 0===mt||mt.call(qe,Ct),$e.next(Ct)},()=>{var Ct;tn=!1,null===(Ct=qe.complete)||void 0===Ct||Ct.call(qe),$e.complete()},Ct=>{var mt;tn=!1,null===(mt=qe.error)||void 0===mt||mt.call(qe,Ct),$e.error(Ct)},()=>{var Ct,mt;tn&&(null===(Ct=qe.unsubscribe)||void 0===Ct||Ct.call(qe)),null===(mt=qe.finalize)||void 0===mt||mt.call(qe)}))}):Me.y}},4408:(gn,it,K)=>{"use strict";K.d(it,{o:()=>ye});var m=K(727);class b extends m.w0{constructor(Ae,st){super()}schedule(Ae,st=0){return this}}const X={setInterval(Oe,Ae,...st){const{delegate:qe}=X;return qe?.setInterval?qe.setInterval(Oe,Ae,...st):setInterval(Oe,Ae,...st)},clearInterval(Oe){const{delegate:Ae}=X;return(Ae?.clearInterval||clearInterval)(Oe)},delegate:void 0};var Me=K(8737);class ye extends b{constructor(Ae,st){super(Ae,st),this.scheduler=Ae,this.work=st,this.pending=!1}schedule(Ae,st=0){var qe;if(this.closed)return this;this.state=Ae;const je=this.id,$e=this.scheduler;return null!=je&&(this.id=this.recycleAsyncId($e,je,st)),this.pending=!0,this.delay=st,this.id=null!==(qe=this.id)&&void 0!==qe?qe:this.requestAsyncId($e,this.id,st),this}requestAsyncId(Ae,st,qe=0){return X.setInterval(Ae.flush.bind(Ae,this),qe)}recycleAsyncId(Ae,st,qe=0){if(null!=qe&&this.delay===qe&&!1===this.pending)return st;null!=st&&X.clearInterval(st)}execute(Ae,st){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const qe=this._execute(Ae,st);if(qe)return qe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ae,st){let je,qe=!1;try{this.work(Ae)}catch($e){qe=!0,je=$e||new Error("Scheduled action threw falsy error")}if(qe)return this.unsubscribe(),je}unsubscribe(){if(!this.closed){const{id:Ae,scheduler:st}=this,{actions:qe}=st;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Me.P)(qe,this),null!=Ae&&(this.id=this.recycleAsyncId(st,Ae,null)),this.delay=null,super.unsubscribe()}}}},640:(gn,it,K)=>{"use strict";K.d(it,{v:()=>X});const m={now:()=>(m.delegate||Date).now(),delegate:void 0};class b{constructor(ye,Oe=b.now){this.schedulerActionCtor=ye,this.now=Oe}schedule(ye,Oe=0,Ae){return new this.schedulerActionCtor(this,ye).schedule(Ae,Oe)}}b.now=m.now;class X extends b{constructor(ye,Oe=b.now){super(ye,Oe),this.actions=[],this._active=!1}flush(ye){const{actions:Oe}=this;if(this._active)return void Oe.push(ye);let Ae;this._active=!0;do{if(Ae=ye.execute(ye.state,ye.delay))break}while(ye=Oe.shift());if(this._active=!1,Ae){for(;ye=Oe.shift();)ye.unsubscribe();throw Ae}}}},4986:(gn,it,K)=>{"use strict";K.d(it,{P:()=>Me,z:()=>X});var m=K(4408);const X=new(K(640).v)(m.o),Me=X},3410:(gn,it,K)=>{"use strict";K.d(it,{z:()=>m});const m={setTimeout(b,X,...Me){const{delegate:ye}=m;return ye?.setTimeout?ye.setTimeout(b,X,...Me):setTimeout(b,X,...Me)},clearTimeout(b){const{delegate:X}=m;return(X?.clearTimeout||clearTimeout)(b)},delegate:void 0}},2202:(gn,it,K)=>{"use strict";K.d(it,{h:()=>b});const b=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gn,it,K)=>{"use strict";K.d(it,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(gn,it,K)=>{"use strict";K.d(it,{_6:()=>Oe,jO:()=>Me,yG:()=>ye});var m=K(576),b=K(3532);function X(Ae){return Ae[Ae.length-1]}function Me(Ae){return(0,m.m)(X(Ae))?Ae.pop():void 0}function ye(Ae){return(0,b.K)(X(Ae))?Ae.pop():void 0}function Oe(Ae,st){return"number"==typeof X(Ae)?Ae.pop():st}},4742:(gn,it,K)=>{"use strict";K.d(it,{D:()=>ye});const{isArray:m}=Array,{getPrototypeOf:b,prototype:X,keys:Me}=Object;function ye(Ae){if(1===Ae.length){const st=Ae[0];if(m(st))return{args:st,keys:null};if(function Oe(Ae){return Ae&&"object"==typeof Ae&&b(Ae)===X}(st)){const qe=Me(st);return{args:qe.map(je=>st[je]),keys:qe}}}return{args:Ae,keys:null}}},8737:(gn,it,K)=>{"use strict";function m(b,X){if(b){const Me=b.indexOf(X);0<=Me&&b.splice(Me,1)}}K.d(it,{P:()=>m})},3888:(gn,it,K)=>{"use strict";function m(b){const Me=b(ye=>{Error.call(ye),ye.stack=(new Error).stack});return Me.prototype=Object.create(Error.prototype),Me.prototype.constructor=Me,Me}K.d(it,{d:()=>m})},1810:(gn,it,K)=>{"use strict";function m(b,X){return b.reduce((Me,ye,Oe)=>(Me[ye]=X[Oe],Me),{})}K.d(it,{n:()=>m})},2806:(gn,it,K)=>{"use strict";K.d(it,{O:()=>Me,x:()=>X});var m=K(2416);let b=null;function X(ye){if(m.v.useDeprecatedSynchronousErrorHandling){const Oe=!b;if(Oe&&(b={errorThrown:!1,error:null}),ye(),Oe){const{errorThrown:Ae,error:st}=b;if(b=null,Ae)throw st}}else ye()}function Me(ye){m.v.useDeprecatedSynchronousErrorHandling&&b&&(b.errorThrown=!0,b.error=ye)}},9672:(gn,it,K)=>{"use strict";function m(b,X,Me,ye=0,Oe=!1){const Ae=X.schedule(function(){Me(),Oe?b.add(this.schedule(null,ye)):this.unsubscribe()},ye);if(b.add(Ae),!Oe)return Ae}K.d(it,{f:()=>m})},4671:(gn,it,K)=>{"use strict";function m(b){return b}K.d(it,{y:()=>m})},1144:(gn,it,K)=>{"use strict";K.d(it,{z:()=>m});const m=b=>b&&"number"==typeof b.length&&"function"!=typeof b},2206:(gn,it,K)=>{"use strict";K.d(it,{D:()=>b});var m=K(576);function b(X){return Symbol.asyncIterator&&(0,m.m)(X?.[Symbol.asyncIterator])}},576:(gn,it,K)=>{"use strict";function m(b){return"function"==typeof b}K.d(it,{m:()=>m})},3670:(gn,it,K)=>{"use strict";K.d(it,{c:()=>X});var m=K(8822),b=K(576);function X(Me){return(0,b.m)(Me[m.L])}},6495:(gn,it,K)=>{"use strict";K.d(it,{T:()=>X});var m=K(2202),b=K(576);function X(Me){return(0,b.m)(Me?.[m.h])}},8239:(gn,it,K)=>{"use strict";K.d(it,{t:()=>b});var m=K(576);function b(X){return(0,m.m)(X?.then)}},3260:(gn,it,K)=>{"use strict";K.d(it,{L:()=>Me,Q:()=>X});var m=K(655),b=K(576);function X(ye){return(0,m.FC)(this,arguments,function*(){const Ae=ye.getReader();try{for(;;){const{value:st,done:qe}=yield(0,m.qq)(Ae.read());if(qe)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(st)}}finally{Ae.releaseLock()}})}function Me(ye){return(0,b.m)(ye?.getReader)}},3532:(gn,it,K)=>{"use strict";K.d(it,{K:()=>b});var m=K(576);function b(X){return X&&(0,m.m)(X.schedule)}},4482:(gn,it,K)=>{"use strict";K.d(it,{A:()=>b,e:()=>X});var m=K(576);function b(Me){return(0,m.m)(Me?.lift)}function X(Me){return ye=>{if(b(ye))return ye.lift(function(Oe){try{return Me(Oe,this)}catch(Ae){this.error(Ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(gn,it,K)=>{"use strict";K.d(it,{Z:()=>Me});var m=K(4004);const{isArray:b}=Array;function Me(ye){return(0,m.U)(Oe=>function X(ye,Oe){return b(Oe)?ye(...Oe):ye(Oe)}(ye,Oe))}},5032:(gn,it,K)=>{"use strict";function m(){}K.d(it,{Z:()=>m})},9635:(gn,it,K)=>{"use strict";K.d(it,{U:()=>X,z:()=>b});var m=K(4671);function b(...Me){return X(Me)}function X(Me){return 0===Me.length?m.y:1===Me.length?Me[0]:function(Oe){return Me.reduce((Ae,st)=>st(Ae),Oe)}}},7849:(gn,it,K)=>{"use strict";K.d(it,{h:()=>X});var m=K(2416),b=K(3410);function X(Me){b.z.setTimeout(()=>{const{onUnhandledError:ye}=m.v;if(!ye)throw Me;ye(Me)})}},4532:(gn,it,K)=>{"use strict";function m(b){return new TypeError(`You provided ${null!==b&&"object"==typeof b?"an invalid object":`'${b}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}K.d(it,{z:()=>m})},4460:function(gn,it){var m,X,b=b||(X=[],{getAll:function(){return X},removeAll:function(){X=[]},add:function(Me){X.push(Me)},remove:function(Me){var ye=X.indexOf(Me);-1!==ye&&X.splice(ye,1)},update:function(Me,ye){if(0===X.length)return!1;var Oe=0;for(Me=void 0!==Me?Me:b.now();Oe<X.length;)X[Oe].update(Me)||ye?Oe++:X.splice(Oe,1);return!0}});b.now=typeof window>"u"&&typeof process<"u"?function(){var X=process.hrtime();return 1e3*X[0]+X[1]/1e6}:typeof window<"u"&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now.bind(window.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},b.Tween=function(X){var je,Me=X,ye={},Oe={},Ae={},st=1e3,qe=0,$e=!1,ot=!1,tn=!1,Ct=0,mt=null,Et=b.Easing.Linear.None,Yt=b.Interpolation.Linear,Dn=[],Gt=null,ei=!1,Ue=null,ve=null,xt=null;this.to=function(Dt,ft){return Oe=Dt,void 0!==ft&&(st=ft),this},this.start=function(Dt){for(var ft in b.add(this),ot=!0,ei=!1,mt=void 0!==Dt?Dt:b.now(),mt+=Ct,Oe){if(Oe[ft]instanceof Array){if(0===Oe[ft].length)continue;Oe[ft]=[Me[ft]].concat(Oe[ft])}void 0!==Me[ft]&&(ye[ft]=Me[ft],ye[ft]instanceof Array||(ye[ft]*=1),Ae[ft]=ye[ft]||0)}return this},this.stop=function(){return ot?(b.remove(this),ot=!1,null!==xt&&xt.call(Me,Me),this.stopChainedTweens(),this):this},this.end=function(){return this.update(mt+st),this},this.stopChainedTweens=function(){for(var Dt=0,ft=Dn.length;Dt<ft;Dt++)Dn[Dt].stop()},this.delay=function(Dt){return Ct=Dt,this},this.repeat=function(Dt){return qe=Dt,this},this.repeatDelay=function(Dt){return je=Dt,this},this.yoyo=function(Dt){return $e=Dt,this},this.easing=function(Dt){return Et=Dt,this},this.interpolation=function(Dt){return Yt=Dt,this},this.chain=function(){return Dn=arguments,this},this.onStart=function(Dt){return Gt=Dt,this},this.onUpdate=function(Dt){return Ue=Dt,this},this.onComplete=function(Dt){return ve=Dt,this},this.onStop=function(Dt){return xt=Dt,this},this.update=function(Dt){var ft,Mt,kt;if(Dt<mt)return!0;for(ft in!1===ei&&(null!==Gt&&Gt.call(Me,Me),ei=!0),kt=Et(Mt=(Mt=(Dt-mt)/st)>1?1:Mt),Oe)if(void 0!==ye[ft]){var Fe=ye[ft]||0,ke=Oe[ft];ke instanceof Array?Me[ft]=Yt(ke,kt):("string"==typeof ke&&(ke="+"===ke.charAt(0)||"-"===ke.charAt(0)?Fe+parseFloat(ke):parseFloat(ke)),"number"==typeof ke&&(Me[ft]=Fe+(ke-Fe)*kt))}if(null!==Ue&&Ue.call(Me,kt),1===Mt){if(qe>0){for(ft in isFinite(qe)&&qe--,Ae){if("string"==typeof Oe[ft]&&(Ae[ft]=Ae[ft]+parseFloat(Oe[ft])),$e){var at=Ae[ft];Ae[ft]=Oe[ft],Oe[ft]=at}ye[ft]=Ae[ft]}return $e&&(tn=!tn),mt=void 0!==je?Dt+je:Dt+Ct,!0}null!==ve&&ve.call(Me,Me);for(var Ge=0,Vt=Dn.length;Ge<Vt;Ge++)Dn[Ge].start(mt+st);return!1}return!0}},b.Easing={Linear:{None:function(X){return X}},Quadratic:{In:function(X){return X*X},Out:function(X){return X*(2-X)},InOut:function(X){return(X*=2)<1?.5*X*X:-.5*(--X*(X-2)-1)}},Cubic:{In:function(X){return X*X*X},Out:function(X){return--X*X*X+1},InOut:function(X){return(X*=2)<1?.5*X*X*X:.5*((X-=2)*X*X+2)}},Quartic:{In:function(X){return X*X*X*X},Out:function(X){return 1- --X*X*X*X},InOut:function(X){return(X*=2)<1?.5*X*X*X*X:-.5*((X-=2)*X*X*X-2)}},Quintic:{In:function(X){return X*X*X*X*X},Out:function(X){return--X*X*X*X*X+1},InOut:function(X){return(X*=2)<1?.5*X*X*X*X*X:.5*((X-=2)*X*X*X*X+2)}},Sinusoidal:{In:function(X){return 1-Math.cos(X*Math.PI/2)},Out:function(X){return Math.sin(X*Math.PI/2)},InOut:function(X){return.5*(1-Math.cos(Math.PI*X))}},Exponential:{In:function(X){return 0===X?0:Math.pow(1024,X-1)},Out:function(X){return 1===X?1:1-Math.pow(2,-10*X)},InOut:function(X){return 0===X?0:1===X?1:(X*=2)<1?.5*Math.pow(1024,X-1):.5*(2-Math.pow(2,-10*(X-1)))}},Circular:{In:function(X){return 1-Math.sqrt(1-X*X)},Out:function(X){return Math.sqrt(1- --X*X)},InOut:function(X){return(X*=2)<1?-.5*(Math.sqrt(1-X*X)-1):.5*(Math.sqrt(1-(X-=2)*X)+1)}},Elastic:{In:function(X){return 0===X?0:1===X?1:-Math.pow(2,10*(X-1))*Math.sin(5*(X-1.1)*Math.PI)},Out:function(X){return 0===X?0:1===X?1:Math.pow(2,-10*X)*Math.sin(5*(X-.1)*Math.PI)+1},InOut:function(X){return 0===X?0:1===X?1:(X*=2)<1?-.5*Math.pow(2,10*(X-1))*Math.sin(5*(X-1.1)*Math.PI):.5*Math.pow(2,-10*(X-1))*Math.sin(5*(X-1.1)*Math.PI)+1}},Back:{In:function(X){return X*X*(2.70158*X-1.70158)},Out:function(X){return--X*X*(2.70158*X+1.70158)+1},InOut:function(X){var Me=2.5949095;return(X*=2)<1?X*X*((Me+1)*X-Me)*.5:.5*((X-=2)*X*((Me+1)*X+Me)+2)}},Bounce:{In:function(X){return 1-b.Easing.Bounce.Out(1-X)},Out:function(X){return X<1/2.75?7.5625*X*X:X<2/2.75?7.5625*(X-=1.5/2.75)*X+.75:X<2.5/2.75?7.5625*(X-=2.25/2.75)*X+.9375:7.5625*(X-=2.625/2.75)*X+.984375},InOut:function(X){return X<.5?.5*b.Easing.Bounce.In(2*X):.5*b.Easing.Bounce.Out(2*X-1)+.5}}},b.Interpolation={Linear:function(X,Me){var ye=X.length-1,Oe=ye*Me,Ae=Math.floor(Oe),st=b.Interpolation.Utils.Linear;return Me<0?st(X[0],X[1],Oe):Me>1?st(X[ye],X[ye-1],ye-Oe):st(X[Ae],X[Ae+1>ye?ye:Ae+1],Oe-Ae)},Bezier:function(X,Me){for(var ye=0,Oe=X.length-1,Ae=Math.pow,st=b.Interpolation.Utils.Bernstein,qe=0;qe<=Oe;qe++)ye+=Ae(1-Me,Oe-qe)*Ae(Me,qe)*X[qe]*st(Oe,qe);return ye},CatmullRom:function(X,Me){var ye=X.length-1,Oe=ye*Me,Ae=Math.floor(Oe),st=b.Interpolation.Utils.CatmullRom;return X[0]===X[ye]?(Me<0&&(Ae=Math.floor(Oe=ye*(1+Me))),st(X[(Ae-1+ye)%ye],X[Ae],X[(Ae+1)%ye],X[(Ae+2)%ye],Oe-Ae)):Me<0?X[0]-(st(X[0],X[0],X[1],X[1],-Oe)-X[0]):Me>1?X[ye]-(st(X[ye],X[ye],X[ye-1],X[ye-1],Oe-ye)-X[ye]):st(X[Ae?Ae-1:0],X[Ae],X[ye<Ae+1?ye:Ae+1],X[ye<Ae+2?ye:Ae+2],Oe-Ae)},Utils:{Linear:function(X,Me,ye){return(Me-X)*ye+X},Bernstein:function(X,Me){var ye=b.Interpolation.Utils.Factorial;return ye(X)/ye(Me)/ye(X-Me)},Factorial:function(){var X=[1];return function(Me){var ye=1;if(X[Me])return X[Me];for(var Oe=Me;Oe>1;Oe--)ye*=Oe;return X[Me]=ye,ye}}(),CatmullRom:function(X,Me,ye,Oe,Ae){var st=.5*(ye-X),qe=.5*(Oe-Me),je=Ae*Ae;return(2*Me-2*ye+st+qe)*(Ae*je)+(-3*Me+3*ye-2*st-qe)*je+st*Ae+Me}}},void 0!==(m=function(){return b}.apply(it,[]))&&(gn.exports=m)},655:(gn,it,K)=>{"use strict";function st(Fe,ke,at,Ge){return new(at||(at=Promise))(function(Bt,Mn){function Li(yr){try{Wn(Ge.next(yr))}catch(ps){Mn(ps)}}function ar(yr){try{Wn(Ge.throw(yr))}catch(ps){Mn(ps)}}function Wn(yr){yr.done?Bt(yr.value):function Vt(Bt){return Bt instanceof at?Bt:new at(function(Mn){Mn(Bt)})}(yr.value).then(Li,ar)}Wn((Ge=Ge.apply(Fe,ke||[])).next())})}function Yt(Fe){return this instanceof Yt?(this.v=Fe,this):new Yt(Fe)}function Dn(Fe,ke,at){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Vt,Ge=at.apply(Fe,ke||[]),Bt=[];return Vt={},Mn("next"),Mn("throw"),Mn("return"),Vt[Symbol.asyncIterator]=function(){return this},Vt;function Mn(lt){Ge[lt]&&(Vt[lt]=function(pt){return new Promise(function(Be,We){Bt.push([lt,pt,Be,We])>1||Li(lt,pt)})})}function Li(lt,pt){try{!function ar(lt){lt.value instanceof Yt?Promise.resolve(lt.value.v).then(Wn,yr):ps(Bt[0][2],lt)}(Ge[lt](pt))}catch(Be){ps(Bt[0][3],Be)}}function Wn(lt){Li("next",lt)}function yr(lt){Li("throw",lt)}function ps(lt,pt){lt(pt),Bt.shift(),Bt.length&&Li(Bt[0][0],Bt[0][1])}}function ei(Fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var at,ke=Fe[Symbol.asyncIterator];return ke?ke.call(Fe):(Fe=function ot(Fe){var ke="function"==typeof Symbol&&Symbol.iterator,at=ke&&Fe[ke],Ge=0;if(at)return at.call(Fe);if(Fe&&"number"==typeof Fe.length)return{next:function(){return Fe&&Ge>=Fe.length&&(Fe=void 0),{value:Fe&&Fe[Ge++],done:!Fe}}};throw new TypeError(ke?"Object is not iterable.":"Symbol.iterator is not defined.")}(Fe),at={},Ge("next"),Ge("throw"),Ge("return"),at[Symbol.asyncIterator]=function(){return this},at);function Ge(Bt){at[Bt]=Fe[Bt]&&function(Mn){return new Promise(function(Li,ar){!function Vt(Bt,Mn,Li,ar){Promise.resolve(ar).then(function(Wn){Bt({value:Wn,done:Li})},Mn)}(Li,ar,(Mn=Fe[Bt](Mn)).done,Mn.value)})}}}K.d(it,{FC:()=>Dn,KL:()=>ei,mG:()=>st,qq:()=>Yt})},7340:(gn,it,K)=>{"use strict";K.d(it,{IO:()=>mt,LC:()=>b,SB:()=>qe,X$:()=>Me,ZE:()=>Gt,ZN:()=>Dn,_j:()=>m,eR:()=>$e,jt:()=>ye,k1:()=>ei,l3:()=>X,oB:()=>st,pV:()=>tn,vP:()=>Ae});class m{}class b{}const X="*";function Me(Ue,ve){return{type:7,name:Ue,definitions:ve,options:{}}}function ye(Ue,ve=null){return{type:4,styles:ve,timings:Ue}}function Ae(Ue,ve=null){return{type:2,steps:Ue,options:ve}}function st(Ue){return{type:6,styles:Ue,offset:null}}function qe(Ue,ve,xt){return{type:0,name:Ue,styles:ve,options:xt}}function $e(Ue,ve,xt=null){return{type:1,expr:Ue,animation:ve,options:xt}}function tn(Ue=null){return{type:9,options:Ue}}function mt(Ue,ve,xt=null){return{type:11,selector:Ue,animation:ve,options:xt}}function Yt(Ue){Promise.resolve().then(Ue)}class Dn{constructor(ve=0,xt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ve+xt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ve=>ve()),this._onDoneFns=[])}onStart(ve){this._originalOnStartFns.push(ve),this._onStartFns.push(ve)}onDone(ve){this._originalOnDoneFns.push(ve),this._onDoneFns.push(ve)}onDestroy(ve){this._onDestroyFns.push(ve)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Yt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ve=>ve()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ve=>ve()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(ve){this._position=this.totalTime?ve*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ve){const xt="start"==ve?this._onStartFns:this._onDoneFns;xt.forEach(Dt=>Dt()),xt.length=0}}class Gt{constructor(ve){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ve;let xt=0,Dt=0,ft=0;const Mt=this.players.length;0==Mt?Yt(()=>this._onFinish()):this.players.forEach(kt=>{kt.onDone(()=>{++xt==Mt&&this._onFinish()}),kt.onDestroy(()=>{++Dt==Mt&&this._onDestroy()}),kt.onStart(()=>{++ft==Mt&&this._onStart()})}),this.totalTime=this.players.reduce((kt,Fe)=>Math.max(kt,Fe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ve=>ve()),this._onDoneFns=[])}init(){this.players.forEach(ve=>ve.init())}onStart(ve){this._onStartFns.push(ve)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ve=>ve()),this._onStartFns=[])}onDone(ve){this._onDoneFns.push(ve)}onDestroy(ve){this._onDestroyFns.push(ve)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ve=>ve.play())}pause(){this.players.forEach(ve=>ve.pause())}restart(){this.players.forEach(ve=>ve.restart())}finish(){this._onFinish(),this.players.forEach(ve=>ve.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ve=>ve.destroy()),this._onDestroyFns.forEach(ve=>ve()),this._onDestroyFns=[])}reset(){this.players.forEach(ve=>ve.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ve){const xt=ve*this.totalTime;this.players.forEach(Dt=>{const ft=Dt.totalTime?Math.min(1,xt/Dt.totalTime):1;Dt.setPosition(ft)})}getPosition(){const ve=this.players.reduce((xt,Dt)=>null===xt||Dt.totalTime>xt.totalTime?Dt:xt,null);return null!=ve?ve.getPosition():0}beforeDestroy(){this.players.forEach(ve=>{ve.beforeDestroy&&ve.beforeDestroy()})}triggerCallback(ve){const xt="start"==ve?this._onStartFns:this._onDoneFns;xt.forEach(Dt=>Dt()),xt.length=0}}const ei="!"},6895:(gn,it,K)=>{"use strict";K.d(it,{Do:()=>ei,ED:()=>wr,EM:()=>Tr,HT:()=>ye,JF:()=>Bc,K0:()=>Ae,Mx:()=>Ks,NF:()=>Ra,O5:()=>Ma,RF:()=>cr,S$:()=>Yt,V_:()=>je,Ye:()=>Ue,b0:()=>Gt,bD:()=>Zl,ez:()=>na,mk:()=>Fs,n9:()=>Qr,q:()=>X,sg:()=>Js,tP:()=>xs,w_:()=>Oe});var m=K(1571);let b=null;function X(){return b}function ye(P){b||(b=P)}class Oe{}const Ae=new m.OlP("DocumentToken");let st=(()=>{class P{historyGo(U){throw new Error("Not implemented")}}return P.\u0275fac=function(U){return new(U||P)},P.\u0275prov=m.Yz7({token:P,factory:function(){return function qe(){return(0,m.LFG)($e)}()},providedIn:"platform"}),P})();const je=new m.OlP("Location Initialized");let $e=(()=>{class P extends st{constructor(U){super(),this._doc=U,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return X().getBaseHref(this._doc)}onPopState(U){const J=X().getGlobalEventTarget(this._doc,"window");return J.addEventListener("popstate",U,!1),()=>J.removeEventListener("popstate",U)}onHashChange(U){const J=X().getGlobalEventTarget(this._doc,"window");return J.addEventListener("hashchange",U,!1),()=>J.removeEventListener("hashchange",U)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(U){this.location.pathname=U}pushState(U,J,_e){ot()?this._history.pushState(U,J,_e):this.location.hash=_e}replaceState(U,J,_e){ot()?this._history.replaceState(U,J,_e):this.location.hash=_e}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}}return P.\u0275fac=function(U){return new(U||P)(m.LFG(Ae))},P.\u0275prov=m.Yz7({token:P,factory:function(){return function tn(){return new $e((0,m.LFG)(Ae))}()},providedIn:"platform"}),P})();function ot(){return!!window.history.pushState}function Ct(P,Y){if(0==P.length)return Y;if(0==Y.length)return P;let U=0;return P.endsWith("/")&&U++,Y.startsWith("/")&&U++,2==U?P+Y.substring(1):1==U?P+Y:P+"/"+Y}function mt(P){const Y=P.match(/#|\?|$/),U=Y&&Y.index||P.length;return P.slice(0,U-("/"===P[U-1]?1:0))+P.slice(U)}function Et(P){return P&&"?"!==P[0]?"?"+P:P}let Yt=(()=>{class P{historyGo(U){throw new Error("Not implemented")}}return P.\u0275fac=function(U){return new(U||P)},P.\u0275prov=m.Yz7({token:P,factory:function(){return(0,m.f3M)(Gt)},providedIn:"root"}),P})();const Dn=new m.OlP("appBaseHref");let Gt=(()=>{class P extends Yt{constructor(U,J){super(),this._platformLocation=U,this._removeListenerFns=[],this._baseHref=J??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(Ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return Ct(this._baseHref,U)}path(U=!1){const J=this._platformLocation.pathname+Et(this._platformLocation.search),_e=this._platformLocation.hash;return _e&&U?`${J}${_e}`:J}pushState(U,J,_e,Qe){const gt=this.prepareExternalUrl(_e+Et(Qe));this._platformLocation.pushState(U,J,gt)}replaceState(U,J,_e,Qe){const gt=this.prepareExternalUrl(_e+Et(Qe));this._platformLocation.replaceState(U,J,gt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}}return P.\u0275fac=function(U){return new(U||P)(m.LFG(st),m.LFG(Dn,8))},P.\u0275prov=m.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),ei=(()=>{class P extends Yt{constructor(U,J){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=J&&(this._baseHref=J)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let J=this._platformLocation.hash;return null==J&&(J="#"),J.length>0?J.substring(1):J}prepareExternalUrl(U){const J=Ct(this._baseHref,U);return J.length>0?"#"+J:J}pushState(U,J,_e,Qe){let gt=this.prepareExternalUrl(_e+Et(Qe));0==gt.length&&(gt=this._platformLocation.pathname),this._platformLocation.pushState(U,J,gt)}replaceState(U,J,_e,Qe){let gt=this.prepareExternalUrl(_e+Et(Qe));0==gt.length&&(gt=this._platformLocation.pathname),this._platformLocation.replaceState(U,J,gt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}}return P.\u0275fac=function(U){return new(U||P)(m.LFG(st),m.LFG(Dn,8))},P.\u0275prov=m.Yz7({token:P,factory:P.\u0275fac}),P})(),Ue=(()=>{class P{constructor(U){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=U;const J=this._locationStrategy.getBaseHref();this._baseHref=mt(Dt(J)),this._locationStrategy.onPopState(_e=>{this._subject.emit({url:this.path(!0),pop:!0,state:_e.state,type:_e.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(U=!1){return this.normalize(this._locationStrategy.path(U))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(U,J=""){return this.path()==this.normalize(U+Et(J))}normalize(U){return P.stripTrailingSlash(function xt(P,Y){return P&&Y.startsWith(P)?Y.substring(P.length):Y}(this._baseHref,Dt(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._locationStrategy.prepareExternalUrl(U)}go(U,J="",_e=null){this._locationStrategy.pushState(_e,"",U,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Et(J)),_e)}replaceState(U,J="",_e=null){this._locationStrategy.replaceState(_e,"",U,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Et(J)),_e)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(U=0){this._locationStrategy.historyGo?.(U)}onUrlChange(U){return this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(J=>{this._notifyUrlChangeListeners(J.url,J.state)})),()=>{const J=this._urlChangeListeners.indexOf(U);this._urlChangeListeners.splice(J,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(U="",J){this._urlChangeListeners.forEach(_e=>_e(U,J))}subscribe(U,J,_e){return this._subject.subscribe({next:U,error:J,complete:_e})}}return P.normalizeQueryParams=Et,P.joinWithSlash=Ct,P.stripTrailingSlash=mt,P.\u0275fac=function(U){return new(U||P)(m.LFG(Yt))},P.\u0275prov=m.Yz7({token:P,factory:function(){return function ve(){return new Ue((0,m.LFG)(Yt))}()},providedIn:"root"}),P})();function Dt(P){return P.replace(/\/index.html$/,"")}function Ks(P,Y){Y=encodeURIComponent(Y);for(const U of P.split(";")){const J=U.indexOf("="),[_e,Qe]=-1==J?[U,""]:[U.slice(0,J),U.slice(J+1)];if(_e.trim()===Y)return decodeURIComponent(Qe)}return null}let Fs=(()=>{class P{constructor(U,J,_e,Qe){this._iterableDiffers=U,this._keyValueDiffers=J,this._ngEl=_e,this._renderer=Qe,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(U){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof U?U.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(U){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof U?U.split(/\s+/):U,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const U=this._iterableDiffer.diff(this._rawClass);U&&this._applyIterableChanges(U)}else if(this._keyValueDiffer){const U=this._keyValueDiffer.diff(this._rawClass);U&&this._applyKeyValueChanges(U)}}_applyKeyValueChanges(U){U.forEachAddedItem(J=>this._toggleClass(J.key,J.currentValue)),U.forEachChangedItem(J=>this._toggleClass(J.key,J.currentValue)),U.forEachRemovedItem(J=>{J.previousValue&&this._toggleClass(J.key,!1)})}_applyIterableChanges(U){U.forEachAddedItem(J=>{if("string"!=typeof J.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(J.item)}`);this._toggleClass(J.item,!0)}),U.forEachRemovedItem(J=>this._toggleClass(J.item,!1))}_applyClasses(U){U&&(Array.isArray(U)||U instanceof Set?U.forEach(J=>this._toggleClass(J,!0)):Object.keys(U).forEach(J=>this._toggleClass(J,!!U[J])))}_removeClasses(U){U&&(Array.isArray(U)||U instanceof Set?U.forEach(J=>this._toggleClass(J,!1)):Object.keys(U).forEach(J=>this._toggleClass(J,!1)))}_toggleClass(U,J){(U=U.trim())&&U.split(/\s+/g).forEach(_e=>{J?this._renderer.addClass(this._ngEl.nativeElement,_e):this._renderer.removeClass(this._ngEl.nativeElement,_e)})}}return P.\u0275fac=function(U){return new(U||P)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},P.\u0275dir=m.lG2({type:P,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),P})();class Di{constructor(Y,U,J,_e){this.$implicit=Y,this.ngForOf=U,this.index=J,this.count=_e}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Js=(()=>{class P{constructor(U,J,_e){this._viewContainer=U,this._template=J,this._differs=_e,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(U){this._ngForOf=U,this._ngForOfDirty=!0}set ngForTrackBy(U){this._trackByFn=U}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(U){U&&(this._template=U)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const U=this._ngForOf;!this._differ&&U&&(this._differ=this._differs.find(U).create(this.ngForTrackBy))}if(this._differ){const U=this._differ.diff(this._ngForOf);U&&this._applyChanges(U)}}_applyChanges(U){const J=this._viewContainer;U.forEachOperation((_e,Qe,gt)=>{if(null==_e.previousIndex)J.createEmbeddedView(this._template,new Di(_e.item,this._ngForOf,-1,-1),null===gt?void 0:gt);else if(null==gt)J.remove(null===Qe?void 0:Qe);else if(null!==Qe){const yn=J.get(Qe);J.move(yn,gt),il(yn,_e)}});for(let _e=0,Qe=J.length;_e<Qe;_e++){const yn=J.get(_e).context;yn.index=_e,yn.count=Qe,yn.ngForOf=this._ngForOf}U.forEachIdentityChange(_e=>{il(J.get(_e.currentIndex),_e)})}static ngTemplateContextGuard(U,J){return!0}}return P.\u0275fac=function(U){return new(U||P)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},P.\u0275dir=m.lG2({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),P})();function il(P,Y){P.context.$implicit=Y.item}let Ma=(()=>{class P{constructor(U,J){this._viewContainer=U,this._context=new Qs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=J}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){mo("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){mo("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,J){return!0}}return P.\u0275fac=function(U){return new(U||P)(m.Y36(m.s_b),m.Y36(m.Rgc))},P.\u0275dir=m.lG2({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),P})();class Qs{constructor(){this.$implicit=null,this.ngIf=null}}function mo(P,Y){if(Y&&!Y.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,m.AaK)(Y)}'.`)}class xr{constructor(Y,U){this._viewContainerRef=Y,this._templateRef=U,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(Y){Y&&!this._created?this.create():!Y&&this._created&&this.destroy()}}let cr=(()=>{class P{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(U){this._ngSwitch=U,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(U){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(U)}_matchCase(U){const J=U==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||J,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),J}_updateDefaultCases(U){if(this._defaultViews&&U!==this._defaultUsed){this._defaultUsed=U;for(let J=0;J<this._defaultViews.length;J++)this._defaultViews[J].enforceState(U)}}}return P.\u0275fac=function(U){return new(U||P)},P.\u0275dir=m.lG2({type:P,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),P})(),Qr=(()=>{class P{constructor(U,J,_e){this.ngSwitch=_e,_e._addCase(),this._view=new xr(U,J)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return P.\u0275fac=function(U){return new(U||P)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(cr,9))},P.\u0275dir=m.lG2({type:P,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),P})(),wr=(()=>{class P{constructor(U,J,_e){_e._addDefault(new xr(U,J))}}return P.\u0275fac=function(U){return new(U||P)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(cr,9))},P.\u0275dir=m.lG2({type:P,selectors:[["","ngSwitchDefault",""]],standalone:!0}),P})(),xs=(()=>{class P{constructor(U){this._viewContainerRef=U,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(U){if(U.ngTemplateOutlet||U.ngTemplateOutletInjector){const J=this._viewContainerRef;if(this._viewRef&&J.remove(J.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:_e,ngTemplateOutletContext:Qe,ngTemplateOutletInjector:gt}=this;this._viewRef=J.createEmbeddedView(_e,Qe,gt?{injector:gt}:void 0)}else this._viewRef=null}else this._viewRef&&U.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return P.\u0275fac=function(U){return new(U||P)(m.Y36(m.s_b))},P.\u0275dir=m.lG2({type:P,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[m.TTD]}),P})(),na=(()=>{class P{}return P.\u0275fac=function(U){return new(U||P)},P.\u0275mod=m.oAB({type:P}),P.\u0275inj=m.cJS({}),P})();const Zl="browser";function Ra(P){return P===Zl}let Tr=(()=>{class P{}return P.\u0275prov=(0,m.Yz7)({token:P,providedIn:"root",factory:()=>new Ia((0,m.LFG)(Ae),window)}),P})();class Ia{constructor(Y,U){this.document=Y,this.window=U,this.offset=()=>[0,0]}setOffset(Y){this.offset=Array.isArray(Y)?()=>Y:Y}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Y){this.supportsScrolling()&&this.window.scrollTo(Y[0],Y[1])}scrollToAnchor(Y){if(!this.supportsScrolling())return;const U=function nr(P,Y){const U=P.getElementById(Y)||P.getElementsByName(Y)[0];if(U)return U;if("function"==typeof P.createTreeWalker&&P.body&&(P.body.createShadowRoot||P.body.attachShadow)){const J=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let _e=J.currentNode;for(;_e;){const Qe=_e.shadowRoot;if(Qe){const gt=Qe.getElementById(Y)||Qe.querySelector(`[name="${Y}"]`);if(gt)return gt}_e=J.nextNode()}}return null}(this.document,Y);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(Y){if(this.supportScrollRestoration()){const U=this.window.history;U&&U.scrollRestoration&&(U.scrollRestoration=Y)}}scrollToElement(Y){const U=Y.getBoundingClientRect(),J=U.left+this.window.pageXOffset,_e=U.top+this.window.pageYOffset,Qe=this.offset();this.window.scrollTo(J-Qe[0],_e-Qe[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Y=ha(this.window.history)||ha(Object.getPrototypeOf(this.window.history));return!(!Y||!Y.writable&&!Y.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ha(P){return Object.getOwnPropertyDescriptor(P,"scrollRestoration")}class Bc{}},1571:(gn,it,K)=>{"use strict";K.d(it,{QbO:()=>$x,tb:()=>YS,AFp:()=>qg,ip1:()=>WS,CZH:()=>my,hGG:()=>Oy,z2F:()=>Jp,sBO:()=>oE,Sil:()=>qS,_Vd:()=>co,EJc:()=>Hi,Xts:()=>Ei,SBq:()=>Bl,lqb:()=>qa,qLn:()=>vc,vpe:()=>jl,XFs:()=>vn,OlP:()=>Qi,zs3:()=>qd,ZZ4:()=>pE,aQg:()=>Ry,soG:()=>Zg,YKP:()=>hw,h0i:()=>gf,PXZ:()=>gd,R0b:()=>el,FiY:()=>Rd,Lbi:()=>Wx,g9A:()=>gy,n_E:()=>Ug,Qsj:()=>up,FYo:()=>td,JOm:()=>$o,q3G:()=>z,tp0:()=>Id,Rgc:()=>Yp,dDg:()=>tl,eoX:()=>dh,GfV:()=>hp,s_b:()=>iy,ifc:()=>Wr,LMc:()=>o_,MMx:()=>jp,Lck:()=>bS,eFA:()=>Qg,G48:()=>n_,Gpc:()=>mt,f3M:()=>Ch,_c5:()=>pC,c2e:()=>Yx,zSh:()=>la,wAp:()=>Yn,vHH:()=>Gt,lri:()=>Qw,rWj:()=>eE,EiD:()=>f,mCW:()=>ap,qzn:()=>Yo,JVY:()=>sp,pB0:()=>Lm,eBb:()=>Pm,L6k:()=>Ll,LAX:()=>op,D6c:()=>mC,cg1:()=>_g,kL8:()=>tS,dqk:()=>vi,Z0I:()=>_i,sIi:()=>bp,CqO:()=>db,QGY:()=>Mp,QP$:()=>xe,F4k:()=>ub,RDi:()=>ou,AaK:()=>ot,z3N:()=>As,qOj:()=>tv,TTD:()=>Vo,_Bn:()=>dw,jDz:()=>pw,xp6:()=>l0,uIk:()=>rv,Tol:()=>ug,Gre:()=>hg,ekj:()=>yv,Suo:()=>md,Xpm:()=>Yr,lG2:()=>fr,Yz7:()=>bn,cJS:()=>dr,oAB:()=>qs,Yjl:()=>Zr,Y36:()=>Gh,_UZ:()=>lv,BQk:()=>Ep,ynx:()=>ad,qZA:()=>lg,TgZ:()=>ag,EpF:()=>cb,n5z:()=>Mh,Ikx:()=>th,SDv:()=>uw,QtT:()=>Ig,pQV:()=>zp,LFG:()=>is,$8M:()=>ro,$Z:()=>w0,NdJ:()=>uv,CRH:()=>NS,oxw:()=>pb,Hsn:()=>gb,F$t:()=>mb,Q6J:()=>av,s9C:()=>fv,MGl:()=>cg,VKq:()=>vw,WLB:()=>Ef,kEZ:()=>Sc,iGM:()=>oy,MAs:()=>lb,KtG:()=>Hc,CHM:()=>fa,oJD:()=>he,LSH:()=>we,Udp:()=>vv,d8E:()=>gg,YNc:()=>ov,W1O:()=>Iw,_uU:()=>Ob,Oqu:()=>lf,hij:()=>Qd,Gf:()=>Aw});var m=K(7579),b=K(727),X=K(9751),Me=K(6451),ye=K(8421),Oe=K(930),Ae=K(4482);function qe(r,o,...l){if(!0===o)return void r();if(!1===o)return;const d=new Oe.Hp({next:()=>{d.unsubscribe(),r()}});return o(...l).subscribe(d)}function je(r){for(let o in r)if(r[o]===je)return o;throw Error("Could not find renamed property on target object.")}function $e(r,o){for(const l in o)o.hasOwnProperty(l)&&!r.hasOwnProperty(l)&&(r[l]=o[l])}function ot(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(ot).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const o=r.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function tn(r,o){return null==r||""===r?null===o?"":o:null==o||""===o?r:r+" "+o}const Ct=je({__forward_ref__:je});function mt(r){return r.__forward_ref__=mt,r.toString=function(){return ot(this())},r}function Et(r){return Yt(r)?r():r}function Yt(r){return"function"==typeof r&&r.hasOwnProperty(Ct)&&r.__forward_ref__===mt}class Gt extends Error{constructor(o,l){super(function ei(r,o){return`NG0${Math.abs(r)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function Ue(r){return"string"==typeof r?r:null==r?"":String(r)}function Mt(r,o){throw new Gt(-201,!1)}function pt(r,o,l,d){throw new Error(`ASSERTION ERROR: ${r}`+(null==d?"":` [Expected=> ${l} ${d} ${o} <=Actual]`))}function bn(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function dr(r){return{providers:r.providers||[],imports:r.imports||[]}}function ji(r){return tr(r,Ai)||tr(r,Or)}function _i(r){return null!==ji(r)}function tr(r,o){return r.hasOwnProperty(o)?r[o]:null}function ms(r){return r&&(r.hasOwnProperty(Ir)||r.hasOwnProperty(Mi))?r[Ir]:null}const Ai=je({\u0275prov:je}),Ir=je({\u0275inj:je}),Or=je({ngInjectableDef:je}),Mi=je({ngInjectorDef:je});var vn=(()=>((vn=vn||{})[vn.Default=0]="Default",vn[vn.Host=1]="Host",vn[vn.Self=2]="Self",vn[vn.SkipSelf=4]="SkipSelf",vn[vn.Optional=8]="Optional",vn))();let ca;function kr(r){const o=ca;return ca=r,o}function Yi(r,o,l){const d=ji(r);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&vn.Optional?null:void 0!==o?o:void Mt(ot(r))}function Pn(r){return{toString:r}.toString()}var ls=(()=>((ls=ls||{})[ls.OnPush=0]="OnPush",ls[ls.Default=1]="Default",ls))(),Wr=(()=>{return(r=Wr||(Wr={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Wr;var r})();const vi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Xi={},dn=[],lr=je({\u0275cmp:je}),Ss=je({\u0275dir:je}),hr=je({\u0275pipe:je}),Br=je({\u0275mod:je}),Ur=je({\u0275fac:je}),$r=je({__NG_ELEMENT_ID__:je});let Vr=0;function Yr(r){return Pn(()=>{const l=!0===r.standalone,d={},p={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===ls.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||dn,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Wr.Emulated,id:"c"+Vr++,styles:r.styles||dn,_:null,setInput:null,schemas:r.schemas||null,tView:null},v=r.dependencies,S=r.features;return p.inputs=qr(r.inputs,d),p.outputs=qr(r.outputs),S&&S.forEach(I=>I(p)),p.directiveDefs=v?()=>("function"==typeof v?v():v).map(Ns).filter(br):null,p.pipeDefs=v?()=>("function"==typeof v?v():v).map(Re).filter(br):null,p})}function Ns(r){return hi(r)||Ji(r)}function br(r){return null!==r}function qs(r){return Pn(()=>({type:r.type,bootstrap:r.bootstrap||dn,declarations:r.declarations||dn,imports:r.imports||dn,exports:r.exports||dn,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function qr(r,o){if(null==r)return Xi;const l={};for(const d in r)if(r.hasOwnProperty(d)){let p=r[d],v=p;Array.isArray(p)&&(v=p[1],p=p[0]),l[p]=d,o&&(o[p]=v)}return l}const fr=Yr;function Zr(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function hi(r){return r[lr]||null}function Ji(r){return r[Ss]||null}function Re(r){return r[hr]||null}function xe(r){const o=hi(r)||Ji(r)||Re(r);return null!==o&&o.standalone}function de(r,o){const l=r[Br]||null;if(!l&&!0===o)throw new Error(`Type ${ot(r)} does not have '\u0275mod' property.`);return l}function wr(r){return Array.isArray(r)&&"object"==typeof r[1]}function ys(r){return Array.isArray(r)&&!0===r[1]}function Mo(r){return 0!=(8&r.flags)}function rl(r){return 2==(2&r.flags)}function sl(r){return 1==(1&r.flags)}function xs(r){return null!==r.template}function Du(r){return 0!=(256&r[2])}function to(r,o){return r.hasOwnProperty(Ur)?r[Ur]:null}class Uo{constructor(o,l,d){this.previousValue=o,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Vo(){return Fc}function Fc(r){return r.type.prototype.ngOnChanges&&(r.setInput=Zl),na}function na(){const r=ia(this),o=r?.current;if(o){const l=r.previous;if(l===Xi)r.previous=o;else for(let d in o)l[d]=o[d];r.current=null,this.ngOnChanges(o)}}function Zl(r,o,l,d){const p=ia(r)||function Aa(r,o){return r[ul]=o}(r,{previous:Xi,current:null}),v=p.current||(p.current={}),S=p.previous,I=this.declaredInputs[l],F=S[I];v[I]=new Uo(F&&F.currentValue,o,S===Xi),r[d]=o}Vo.ngInherit=!0;const ul="__ngSimpleChanges__";function ia(r){return r[ul]||null}function nr(r){for(;Array.isArray(r);)r=r[0];return r}function Oa(r,o){return nr(o[r])}function ws(r,o){return nr(o[r.index])}function Na(r,o){return r.data[o]}function Hr(r,o){const l=o[r];return wr(l)?l:l[0]}function Pa(r){return 64==(64&r[2])}function ir(r,o){return null==o?null:r[o]}function dl(r){r[18]=0}function sa(r,o){r[5]+=o;let l=r,d=r[3];for(;null!==d&&(1===o&&1===l[5]||-1===o&&0===l[5]);)d[5]+=o,l=d,d=d[3]}const Vn={lFrame:wd(null),bindingsEnabled:!0};function go(){return Vn.bindingsEnabled}function St(){return Vn.lFrame.lView}function Jt(){return Vn.lFrame.tView}function fa(r){return Vn.lFrame.contextLView=r,r[8]}function Hc(r){return Vn.lFrame.contextLView=null,r}function Dr(){let r=Gc();for(;null!==r&&64===r.type;)r=r.parent;return r}function Gc(){return Vn.lFrame.currentTNode}function Go(){const r=Vn.lFrame,o=r.currentTNode;return r.isParent?o:o.parent}function Ri(r,o){const l=Vn.lFrame;l.currentTNode=r,l.isParent=o}function W(){return Vn.lFrame.isParent}function H(){Vn.lFrame.isParent=!1}function oi(){const r=Vn.lFrame;let o=r.bindingRootIndex;return-1===o&&(o=r.bindingRootIndex=r.tView.bindingStartIndex),o}function Ts(){return Vn.lFrame.bindingIndex++}function cs(r){const o=Vn.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+r,l}function zc(r){Vn.lFrame.inI18n=r}function Ql(r,o){const l=Vn.lFrame;l.bindingIndex=l.bindingRootIndex=r,no(o)}function no(r){Vn.lFrame.currentDirectiveIndex=r}function Ru(r){const o=Vn.lFrame.currentDirectiveIndex;return-1===o?null:r[o]}function pl(){return Vn.lFrame.currentQueryIndex}function ml(r){Vn.lFrame.currentQueryIndex=r}function pa(r){const o=r[1];return 2===o.type?o.declTNode:1===o.type?r[6]:null}function tc(r,o,l){if(l&vn.SkipSelf){let p=o,v=r;for(;!(p=p.parent,null!==p||l&vn.Host||(p=pa(v),null===p||(v=v[15],10&p.type))););if(null===p)return!1;o=p,r=v}const d=Vn.lFrame=Wc();return d.currentTNode=o,d.lView=r,!0}function jc(r){const o=Wc(),l=r[1];Vn.lFrame=o,o.currentTNode=l.firstChild,o.lView=r,o.tView=l,o.contextLView=r,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Wc(){const r=Vn.lFrame,o=null===r?null:r.child;return null===o?wd(r):o}function wd(r){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=o),o}function Ed(){const r=Vn.lFrame;return Vn.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const gl=Ed;function Iu(){const r=Ed();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function es(){return Vn.lFrame.selectedIndex}function ks(r){Vn.lFrame.selectedIndex=r}function rr(){const r=Vn.lFrame;return Na(r.tView,r.selectedIndex)}function vl(r,o){for(let l=o.directiveStart,d=o.directiveEnd;l<d;l++){const v=r.data[l].type.prototype,{ngAfterContentInit:S,ngAfterContentChecked:I,ngAfterViewInit:F,ngAfterViewChecked:$,ngOnDestroy:ee}=v;S&&(r.contentHooks||(r.contentHooks=[])).push(-l,S),I&&((r.contentHooks||(r.contentHooks=[])).push(l,I),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(l,I)),F&&(r.viewHooks||(r.viewHooks=[])).push(-l,F),$&&((r.viewHooks||(r.viewHooks=[])).push(l,$),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(l,$)),null!=ee&&(r.destroyHooks||(r.destroyHooks=[])).push(l,ee)}}function $c(r,o,l){Of(r,o,3,l)}function Yc(r,o,l,d){(3&r[2])===l&&Of(r,o,l,d)}function Sd(r,o){let l=r[2];(3&l)===o&&(l&=2047,l+=1,r[2]=l)}function Of(r,o,l,d){const v=d??-1,S=o.length-1;let I=0;for(let F=void 0!==d?65535&r[18]:0;F<S;F++)if("number"==typeof o[F+1]){if(I=o[F],null!=d&&I>=d)break}else o[F]<0&&(r[18]+=65536),(I<v||-1==v)&&(yh(r,l,o,F),r[18]=(4294901760&r[18])+F+2),F++}function yh(r,o,l,d){const p=l[d]<0,v=l[d+1],I=r[p?-l[d]:l[d]];if(p){if(r[2]>>11<r[18]>>16&&(3&r[2])===o){r[2]+=2048;try{v.call(I)}finally{}}}else try{v.call(I)}finally{}}class _o{constructor(o,l,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function yn(r,o,l){let d=0;for(;d<l.length;){const p=l[d];if("number"==typeof p){if(0!==p)break;d++;const v=l[d++],S=l[d++],I=l[d++];r.setAttribute(o,S,I,v)}else{const v=p,S=l[++d];ai(v)?r.setProperty(o,v,S):r.setAttribute(o,v,S),d++}}return d}function Fi(r){return 3===r||4===r||6===r}function ai(r){return 64===r.charCodeAt(0)}function ni(r,o){if(null!==o&&0!==o.length)if(null===r||0===r.length)r=o.slice();else{let l=-1;for(let d=0;d<o.length;d++){const p=o[d];"number"==typeof p?l=p:0===l||li(r,l,p,null,-1===l||2===l?o[++d]:null)}}return r}function li(r,o,l,d,p){let v=0,S=r.length;if(-1===o)S=-1;else for(;v<r.length;){const I=r[v++];if("number"==typeof I){if(I===o){S=-1;break}if(I>o){S=v-1;break}}}for(;v<r.length;){const I=r[v];if("number"==typeof I)break;if(I===l){if(null===d)return void(null!==p&&(r[v+1]=p));if(d===r[v+1])return void(r[v+2]=p)}v++,null!==d&&v++,null!==p&&v++}-1!==S&&(r.splice(S,0,o),v=S+1),r.splice(v++,0,l),null!==d&&r.splice(v++,0,d),null!==p&&r.splice(v++,0,p)}function Wi(r){return-1!==r}function Si(r){return 32767&r}function io(r,o){let l=function ts(r){return r>>16}(r),d=o;for(;l>0;)d=d[15],l--;return d}let xo=!0;function To(r){const o=xo;return xo=r,o}let yl=0;const Do={};function bl(r,o){const l=Es(r,o);if(-1!==l)return l;const d=o[1];d.firstCreatePass&&(r.injectorIndex=o.length,wl(d.data,r),wl(o,null),wl(d.blueprint,null));const p=El(r,o),v=r.injectorIndex;if(Wi(p)){const S=Si(p),I=io(p,o),F=I[1].data;for(let $=0;$<8;$++)o[v+$]=I[S+$]|F[S+$]}return o[v+8]=p,v}function wl(r,o){r.push(0,0,0,0,0,0,0,0,o)}function Es(r,o){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===o[r.injectorIndex+8]?-1:r.injectorIndex}function El(r,o){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let l=0,d=null,p=o;for(;null!==p;){if(d=Va(p),null===d)return-1;if(l++,p=p[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function nc(r,o,l){!function Cd(r,o,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty($r)&&(d=l[$r]),null==d&&(d=l[$r]=yl++);const p=255&d;o.data[r+(p>>5)]|=1<<p}(r,o,l)}function qc(r,o,l){if(l&vn.Optional||void 0!==r)return r;Mt()}function wh(r,o,l,d){if(l&vn.Optional&&void 0===d&&(d=null),0==(l&(vn.Self|vn.Host))){const p=r[9],v=kr(void 0);try{return p?p.get(o,d,l&vn.Optional):Yi(o,d,l&vn.Optional)}finally{kr(v)}}return qc(d,0,l)}function Eh(r,o,l,d=vn.Default,p){if(null!==r){if(1024&o[2]){const S=function rc(r,o,l,d,p){let v=r,S=o;for(;null!==v&&null!==S&&1024&S[2]&&!(256&S[2]);){const I=Ba(v,S,l,d|vn.Self,Do);if(I!==Do)return I;let F=v.parent;if(!F){const $=S[21];if($){const ee=$.get(l,Do,d);if(ee!==Do)return ee}F=Va(S),S=S[15]}v=F}return p}(r,o,l,d,Do);if(S!==Do)return S}const v=Ba(r,o,l,d,Do);if(v!==Do)return v}return wh(o,l,d,p)}function Ba(r,o,l,d,p){const v=function xd(r){if("string"==typeof r)return r.charCodeAt(0)||0;const o=r.hasOwnProperty($r)?r[$r]:void 0;return"number"==typeof o?o>=0?255&o:Td:o}(l);if("function"==typeof v){if(!tc(o,r,d))return d&vn.Host?qc(p,0,d):wh(o,l,d,p);try{const S=v(d);if(null!=S||d&vn.Optional)return S;Mt()}finally{gl()}}else if("number"==typeof v){let S=null,I=Es(r,o),F=-1,$=d&vn.Host?o[16][6]:null;for((-1===I||d&vn.SkipSelf)&&(F=-1===I?El(r,o):o[I+8],-1!==F&&Pu(d,!1)?(S=o[1],I=Si(F),o=io(F,o)):I=-1);-1!==I;){const ee=o[1];if(ic(v,I,ee.data)){const le=ns(I,o,l,S,d,$);if(le!==Do)return le}F=o[I+8],-1!==F&&Pu(d,o[1].data[I+8]===$)&&ic(v,I,o)?(S=ee,I=Si(F),o=io(F,o)):I=-1}}return p}function ns(r,o,l,d,p,v){const S=o[1],I=S.data[r+8],ee=Zc(I,S,l,null==d?rl(I)&&xo:d!=S&&0!=(3&I.type),p&vn.Host&&v===I);return null!==ee?Us(o,S,ee,I):Do}function Zc(r,o,l,d,p){const v=r.providerIndexes,S=o.data,I=1048575&v,F=r.directiveStart,ee=v>>20,be=p?I+ee:r.directiveEnd;for(let He=d?I:I+ee;He<be;He++){const ct=S[He];if(He<F&&l===ct||He>=F&&ct.type===l)return He}if(p){const He=S[F];if(He&&xs(He)&&He.type===l)return F}return null}function Us(r,o,l,d){let p=r[l];const v=o.data;if(function zo(r){return r instanceof _o}(p)){const S=p;S.resolving&&function xt(r,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${r}`:"";throw new Gt(-200,`Circular dependency in DI detected for ${r}${l}`)}(function ve(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Ue(r)}(v[l]));const I=To(S.canSeeViewProviders);S.resolving=!0;const F=S.injectImpl?kr(S.injectImpl):null;tc(r,d,vn.Default);try{p=r[l]=S.factory(void 0,v,r,d),o.firstCreatePass&&l>=d.directiveStart&&function _l(r,o,l){const{ngOnChanges:d,ngOnInit:p,ngDoCheck:v}=o.type.prototype;if(d){const S=Fc(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(r,S),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(r,S)}p&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-r,p),v&&((l.preOrderHooks||(l.preOrderHooks=[])).push(r,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(r,v))}(l,v[l],o)}finally{null!==F&&kr(F),To(I),S.resolving=!1,gl()}}return p}function ic(r,o,l){return!!(l[o+(r>>5)]&1<<r)}function Pu(r,o){return!(r&vn.Self||r&vn.Host&&o)}class Kc{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,d){return Eh(this._tNode,this._lView,o,d,l)}}function Td(){return new Kc(Dr(),St())}function Mh(r){return Pn(()=>{const o=r.prototype.constructor,l=o[Ur]||Ua(o),d=Object.prototype;let p=Object.getPrototypeOf(r.prototype).constructor;for(;p&&p!==d;){const v=p[Ur]||Ua(p);if(v&&v!==l)return v;p=Object.getPrototypeOf(p)}return v=>new v})}function Ua(r){return Yt(r)?()=>{const o=Ua(Et(r));return o&&o()}:to(r)}function Va(r){const o=r[1],l=o.type;return 2===l?o.declTNode:1===l?r[6]:null}function ro(r){return function bh(r,o){if("class"===o)return r.classes;if("style"===o)return r.styles;const l=r.attrs;if(l){const d=l.length;let p=0;for(;p<d;){const v=l[p];if(Fi(v))break;if(0===v)p+=2;else if("number"==typeof v)for(p++;p<d&&"string"==typeof l[p];)p++;else{if(v===o)return l[p+1];p+=2}}}return null}(Dr(),r)}const Vs="__parameters__";function Ha(r,o,l){return Pn(()=>{const d=function mr(r){return function(...l){if(r){const d=r(...l);for(const p in d)this[p]=d[p]}}}(o);function p(...v){if(this instanceof p)return d.apply(this,v),this;const S=new p(...v);return I.annotation=S,I;function I(F,$,ee){const le=F.hasOwnProperty(Vs)?F[Vs]:Object.defineProperty(F,Vs,{value:[]})[Vs];for(;le.length<=ee;)le.push(null);return(le[ee]=le[ee]||[]).push(S),F}}return l&&(p.prototype=Object.create(l.prototype)),p.prototype.ngMetadataName=r,p.annotationCls=p,p})}class Qi{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=bn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function us(r,o){void 0===o&&(o=r);for(let l=0;l<r.length;l++){let d=r[l];Array.isArray(d)?(o===r&&(o=r.slice(0,l)),us(d,o)):o!==r&&o.push(d)}return o}function ja(r,o){r.forEach(l=>Array.isArray(l)?ja(l,o):o(l))}function vo(r,o,l){o>=r.length?r.push(l):r.splice(o,0,l)}function Lu(r,o){return o>=r.length-1?r.pop():r.splice(o,1)[0]}function Fu(r,o){const l=[];for(let d=0;d<r;d++)l.push(o);return l}function ue(r,o,l){let d=Ze(r,o);return d>=0?r[1|d]=l:(d=~d,function x(r,o,l,d){let p=r.length;if(p==o)r.push(l,d);else if(1===p)r.push(d,r[0]),r[0]=l;else{for(p--,r.push(r[p-1],r[p]);p>o;)r[p]=r[p-2],p--;r[o]=l,r[o+1]=d}}(r,d,o,l)),d}function ge(r,o){const l=Ze(r,o);if(l>=0)return r[1|l]}function Ze(r,o){return function Zn(r,o,l){let d=0,p=r.length>>l;for(;p!==d;){const v=d+(p-d>>1),S=r[v<<l];if(o===S)return v<<l;S>o?p=v:d=v+1}return~(p<<l)}(r,o,1)}const Ad={},Ff="__NG_DI_FLAG__",oc="ngTempTokenPath",lm=/\n/gm,Bf="__source";let Jc;function ac(r){const o=Jc;return Jc=r,o}function um(r,o=vn.Default){if(void 0===Jc)throw new Gt(-203,!1);return null===Jc?Yi(r,void 0,o):Jc.get(r,o&vn.Optional?null:void 0,o)}function is(r,o=vn.Default){return(function Jo(){return ca}()||um)(Et(r),o)}function Ch(r,o=vn.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),is(r,o)}function xh(r){const o=[];for(let l=0;l<r.length;l++){const d=Et(r[l]);if(Array.isArray(d)){if(0===d.length)throw new Gt(900,!1);let p,v=vn.Default;for(let S=0;S<d.length;S++){const I=d[S],F=h_(I);"number"==typeof F?-1===F?p=I.token:v|=F:p=I}o.push(is(p,v))}else o.push(is(d))}return o}function ku(r,o){return r[Ff]=o,r.prototype[Ff]=o,r}function h_(r){return r[Ff]}const Rd=ku(Ha("Optional"),8),Id=ku(Ha("SkipSelf"),4);var $o=(()=>(($o=$o||{})[$o.Important=1]="Important",$o[$o.DashCase=2]="DashCase",$o))();const ym=/^>|^->|<!--|-->|--!>|<!-$/g,y_=/(<|>)/;const $f=new Map;let Hu=0;const E_="__ngContext__";function Io(r,o){wr(o)?(r[E_]=o[20],function Pd(r){$f.set(r[20],r)}(o)):r[E_]=o}let Oo;function Mr(r,o){return Oo(r,o)}function _a(r){const o=r[3];return ys(o)?o[3]:o}function iu(r){return Jf(r[13])}function Cm(r){return Jf(r[4])}function Jf(r){for(;null!==r&&!ys(r);)r=r[4];return r}function Fd(r,o,l,d,p){if(null!=d){let v,S=!1;ys(d)?v=d:wr(d)&&(S=!0,d=d[0]);const I=nr(d);0===r&&null!==l?null==p?fc(o,l,I):hc(o,l,I,p||null,!0):1===r&&null!==l?hc(o,l,I,p||null,!0):2===r?er(o,I,S):3===r&&o.destroyNode(I),null!=v&&function Rm(r,o,l,d,p){const v=l[7];v!==nr(l)&&Fd(o,r,d,v,p);for(let I=10;I<l.length;I++){const F=l[I];va(F[1],F,r,o,d,v)}}(o,r,v,l,p)}}function Qf(r,o){return r.createText(o)}function ep(r,o,l){r.setValue(o,l)}function S_(r,o){return r.createComment(function bm(r){return r.replace(ym,o=>o.replace(y_,"\u200b$1\u200b"))}(o))}function Dl(r,o,l){return r.createElement(o,l)}function yt(r,o){const l=r[9],d=l.indexOf(o),p=o[3];512&o[2]&&(o[2]&=-513,sa(p,-1)),l.splice(d,1)}function ci(r,o){if(r.length<=10)return;const l=10+o,d=r[l];if(d){const p=d[17];null!==p&&p!==r&&yt(p,d),o>0&&(r[l-1][4]=d[4]);const v=Lu(r,10+o);!function xm(r,o){va(r,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const S=v[19];null!==S&&S.detachView(v[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function Oh(r,o){if(!(128&o[2])){const l=o[11];l.destroyNode&&va(r,o,l,3,null,null),function No(r){let o=r[13];if(!o)return kd(r[1],r);for(;o;){let l=null;if(wr(o))l=o[13];else{const d=o[10];d&&(l=d)}if(!l){for(;o&&!o[4]&&o!==r;)wr(o)&&kd(o[1],o),o=o[3];null===o&&(o=r),wr(o)&&kd(o[1],o),l=o&&o[4]}o=l}}(o)}}function kd(r,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function dc(r,o){let l;if(null!=r&&null!=(l=r.destroyHooks))for(let d=0;d<l.length;d+=2){const p=o[l[d]];if(!(p instanceof _o)){const v=l[d+1];if(Array.isArray(v))for(let S=0;S<v.length;S+=2){const I=p[v[S]],F=v[S+1];try{F.call(I)}finally{}}else try{v.call(p)}finally{}}}}(r,o),function tp(r,o){const l=r.cleanup,d=o[7];let p=-1;if(null!==l)for(let v=0;v<l.length-1;v+=2)if("string"==typeof l[v]){const S=l[v+1],I="function"==typeof S?S(o):nr(o[S]),F=d[p=l[v+2]],$=l[v+3];"boolean"==typeof $?I.removeEventListener(l[v],F,$):$>=0?d[p=$]():d[p=-$].unsubscribe(),v+=2}else{const S=d[p=l[v+1]];l[v].call(S)}if(null!==d){for(let v=p+1;v<d.length;v++)(0,d[v])();o[7]=null}}(r,o),1===o[1].type&&o[11].destroy();const l=o[17];if(null!==l&&ys(o[3])){l!==o[3]&&yt(l,o);const d=o[19];null!==d&&d.detachView(r)}!function w_(r){$f.delete(r[20])}(o)}}function ru(r,o,l){return Tm(r,o.parent,l)}function Tm(r,o,l){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return l[0];if(2&d.flags){const p=r.data[d.directiveStart].encapsulation;if(p===Wr.None||p===Wr.Emulated)return null}return ws(d,l)}function hc(r,o,l,d,p){r.insertBefore(o,l,d,p)}function fc(r,o,l){r.appendChild(o,l)}function Dm(r,o,l,d,p){null!==d?hc(r,o,l,d,p):fc(r,o,l)}function Ph(r,o){return r.parentNode(o)}function pc(r,o,l){return mc(r,o,l)}function Bd(r,o,l){return 40&r.type?ws(r,l):null}let Ud,ce,su,Ya,mc=Bd;function np(r,o){mc=r,Ud=o}function $a(r,o,l,d){const p=ru(r,d,o),v=o[11],I=pc(d.parent||o[6],d,o);if(null!=p)if(Array.isArray(l))for(let F=0;F<l.length;F++)Dm(v,p,l[F],I,!1);else Dm(v,p,l,I,!1);void 0!==Ud&&Ud(v,d,o,l,p)}function Vd(r,o){if(null!==o){const l=o.type;if(3&l)return ws(o,r);if(4&l)return Po(-1,r[o.index]);if(8&l){const d=o.child;if(null!==d)return Vd(r,d);{const p=r[o.index];return ys(p)?Po(-1,p):nr(p)}}if(32&l)return Mr(o,r)()||nr(r[o.index]);{const d=T_(r,o);return null!==d?Array.isArray(d)?d[0]:Vd(_a(r[16]),d):Vd(r,o.next)}}return null}function T_(r,o){return null!==o?r[16][6].projection[o.projection]:null}function Po(r,o){const l=10+r+1;if(l<o.length){const d=o[l],p=d[1].firstChild;if(null!==p)return Vd(d,p)}return o[7]}function er(r,o,l){const d=Ph(r,o);d&&function x_(r,o,l,d){r.removeChild(o,l,d)}(r,d,o,l)}function ip(r,o,l,d,p,v,S){for(;null!=l;){const I=d[l.index],F=l.type;if(S&&0===o&&(I&&Io(nr(I),d),l.flags|=4),64!=(64&l.flags))if(8&F)ip(r,o,l.child,d,p,v,!1),Fd(o,r,p,I,v);else if(32&F){const $=Mr(l,d);let ee;for(;ee=$();)Fd(o,r,p,ee,v);Fd(o,r,p,I,v)}else 16&F?Am(r,o,d,l,p,v):Fd(o,r,p,I,v);l=S?l.projectionNext:l.next}}function va(r,o,l,d,p,v){ip(l,d,r.firstChild,o,p,v,!1)}function Am(r,o,l,d,p,v){const S=l[16],F=S[6].projection[d.projection];if(Array.isArray(F))for(let $=0;$<F.length;$++)Fd(o,r,p,F[$],v);else ip(r,o,F,S[3],p,v,!0)}function qy(r,o,l){r.setAttribute(o,"style",l)}function Ds(r,o,l){""===l?r.removeAttribute(o,"class"):r.setAttribute(o,"class",l)}function Rl(r){return function Lh(){if(void 0===ce&&(ce=null,vi.trustedTypes))try{ce=vi.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return ce}()?.createHTML(r)||r}function ou(r){su=r}function ju(){return void 0!==su?su:typeof document<"u"?document:void 0}function au(r){return function Nl(){if(void 0===Ya&&(Ya=null,vi.trustedTypes))try{Ya=vi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return Ya}()?.createHTML(r)||r}class Pl{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class lu extends Pl{getTypeName(){return"HTML"}}class Im extends Pl{getTypeName(){return"Style"}}class Zy extends Pl{getTypeName(){return"Script"}}class $u extends Pl{getTypeName(){return"URL"}}class Om extends Pl{getTypeName(){return"ResourceURL"}}function As(r){return r instanceof Pl?r.changingThisBreaksApplicationSecurity:r}function Yo(r,o){const l=function Nm(r){return r instanceof Pl&&r.getTypeName()||null}(r);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function sp(r){return new lu(r)}function Ll(r){return new Im(r)}function Pm(r){return new Zy(r)}function op(r){return new $u(r)}function Lm(r){return new Om(r)}function Yu(r){const o=new Gd(r);return function Xa(){try{return!!(new window.DOMParser).parseFromString(Rl(""),"text/html")}catch{return!1}}()?new Kn(o):o}class Kn{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(Rl(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch{return null}}}class Gd{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Rl(o),l;const d=this.inertDocument.createElement("body");return d.innerHTML=Rl(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(o){const l=o.attributes;for(let p=l.length-1;0<p;p--){const S=l.item(p).name;("xmlns:ns1"===S||0===S.indexOf("ns1:"))&&o.removeAttribute(S)}let d=o.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const Ky=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function ap(r){return(r=String(r)).match(Ky)?r:"unsafe:"+r}function ao(r){const o={};for(const l of r.split(","))o[l]=!0;return o}function cu(...r){const o={};for(const l of r)for(const d in l)l.hasOwnProperty(d)&&(o[d]=!0);return o}const Xo=ao("area,br,col,hr,img,wbr"),Fm=ao("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),km=ao("rp,rt"),lp=cu(Xo,cu(Fm,ao("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),cu(km,ao("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),cu(km,Fm)),uu=ao("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zd=cu(uu,ao("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ao("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Jy=ao("script,style,template");class Um{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let p=this.checkClobberedElement(l,l.nextSibling);if(p){l=p;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!lp.hasOwnProperty(l))return this.sanitizedSomething=!0,!Jy.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=o.attributes;for(let p=0;p<d.length;p++){const v=d.item(p),S=v.name,I=S.toLowerCase();if(!zd.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let F=v.value;uu[I]&&(F=ap(F)),this.buf.push(" ",S,'="',_(F),'"')}return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();lp.hasOwnProperty(l)&&!Xo.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(_(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const Vm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hm=/([^\#-~ |!])/g;function _(r){return r.replace(/&/g,"&amp;").replace(Vm,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Hm,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let w;function f(r,o){let l=null;try{w=w||Yu(r);let d=o?String(o):"";l=w.getInertBodyElement(d);let p=5,v=d;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,d=v,v=l.innerHTML,l=w.getInertBodyElement(d)}while(d!==v);return Rl((new Um).sanitizeChildren(M(l)||l))}finally{if(l){const d=M(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function M(r){return"content"in r&&function N(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var z=(()=>((z=z||{})[z.NONE=0]="NONE",z[z.HTML=1]="HTML",z[z.STYLE=2]="STYLE",z[z.SCRIPT=3]="SCRIPT",z[z.URL=4]="URL",z[z.RESOURCE_URL=5]="RESOURCE_URL",z))();function he(r){const o=$n();return o?au(o.sanitize(z.HTML,r)||""):Yo(r,"HTML")?au(As(r)):f(ju(),Ue(r))}function we(r){const o=$n();return o?o.sanitize(z.URL,r)||"":Yo(r,"URL")?As(r):ap(Ue(r))}function $n(){const r=St();return r&&r[12]}const Ei=new Qi("ENVIRONMENT_INITIALIZER"),Vi=new Qi("INJECTOR",-1),ri=new Qi("INJECTOR_DEF_TYPES");class Oi{get(o,l=Ad){if(l===Ad){const d=new Error(`NullInjectorError: No provider for ${ot(o)}!`);throw d.name="NullInjectorError",d}return l}}function Rt(...r){return{\u0275providers:pi(0,r)}}function pi(r,...o){const l=[],d=new Set;let p;return ja(o,v=>{const S=v;ur(S,l,[],d)&&(p||(p=[]),p.push(S))}),void 0!==p&&xi(p,l),l}function xi(r,o){for(let l=0;l<r.length;l++){const{providers:p}=r[l];ja(p,v=>{o.push(v)})}}function ur(r,o,l,d){if(!(r=Et(r)))return!1;let p=null,v=ms(r);const S=!v&&hi(r);if(v||S){if(S&&!S.standalone)return!1;p=r}else{const F=r.ngModule;if(v=ms(F),!v)return!1;p=F}const I=d.has(p);if(S){if(I)return!1;if(d.add(p),S.dependencies){const F="function"==typeof S.dependencies?S.dependencies():S.dependencies;for(const $ of F)ur($,o,l,d)}}else{if(!v)return!1;{if(null!=v.imports&&!I){let $;d.add(p);try{ja(v.imports,ee=>{ur(ee,o,l,d)&&($||($=[]),$.push(ee))})}finally{}void 0!==$&&xi($,o)}if(!I){const $=to(p)||(()=>new p);o.push({provide:p,useFactory:$,deps:dn},{provide:ri,useValue:p,multi:!0},{provide:Ei,useValue:()=>is(p),multi:!0})}const F=v.providers;null==F||I||ja(F,ee=>{o.push(ee)})}}return p!==r&&void 0!==r.providers}const or=je({provide:String,useValue:je});function Gs(r){return null!==r&&"object"==typeof r&&or in r}function lo(r){return"function"==typeof r}const la=new Qi("Set Injector scope."),Xu={},qu={};let jd;function hu(){return void 0===jd&&(jd=new Oi),jd}class qa{}class Zu extends qa{constructor(o,l,d,p){super(),this.parent=l,this.source=d,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rs(o,S=>this.processProvider(S)),this.records.set(Vi,Fr(void 0,this)),p.has("environment")&&this.records.set(qa,Fr(void 0,this));const v=this.records.get(la);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(ri.multi,dn,vn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=ac(this),d=kr(void 0);try{return o()}finally{ac(l),kr(d)}}get(o,l=Ad,d=vn.Default){this.assertNotDestroyed();const p=ac(this),v=kr(void 0);try{if(!(d&vn.SkipSelf)){let I=this.records.get(o);if(void 0===I){const F=function wo(r){return"function"==typeof r||"object"==typeof r&&r instanceof Qi}(o)&&ji(o);I=F&&this.injectableDefInScope(F)?Fr(fu(o),Xu):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(d&vn.Self?hu():this.parent).get(o,l=d&vn.Optional&&l===Ad?null:l)}catch(S){if("NullInjectorError"===S.name){if((S[oc]=S[oc]||[]).unshift(ot(o)),p)throw S;return function dm(r,o,l,d){const p=r[oc];throw o[Bf]&&p.unshift(o[Bf]),r.message=function hm(r,o,l,d=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let p=ot(o);if(Array.isArray(o))p=o.map(ot).join(" -> ");else if("object"==typeof o){let v=[];for(let S in o)if(o.hasOwnProperty(S)){let I=o[S];v.push(S+":"+("string"==typeof I?JSON.stringify(I):ot(I)))}p=`{${v.join(", ")}}`}return`${l}${d?"("+d+")":""}[${p}]: ${r.replace(lm,"\n  ")}`}("\n"+r.message,p,l,d),r.ngTokenPath=p,r[oc]=null,r}(S,o,"R3InjectorError",this.source)}throw S}finally{kr(v),ac(p)}}resolveInjectorInitializers(){const o=ac(this),l=kr(void 0);try{const d=this.get(Ei.multi,dn,vn.Self);for(const p of d)p()}finally{ac(o),kr(l)}}toString(){const o=[],l=this.records;for(const d of l.keys())o.push(ot(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Gt(205,!1)}processProvider(o){let l=lo(o=Et(o))?o:Et(o&&o.provide);const d=function kh(r){return Gs(r)?Fr(void 0,r.useValue):Fr(Wd(r),Xu)}(o);if(lo(o)||!0!==o.multi)this.records.get(l);else{let p=this.records.get(l);p||(p=Fr(void 0,Xu,!0),p.factory=()=>xh(p.multi),this.records.set(l,p)),l=o,p.multi.push(o)}this.records.set(l,d)}hydrate(o,l){return l.value===Xu&&(l.value=qu,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Ku(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=Et(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function fu(r){const o=ji(r),l=null!==o?o.factory:to(r);if(null!==l)return l;if(r instanceof Qi)throw new Gt(204,!1);if(r instanceof Function)return function En(r){const o=r.length;if(o>0)throw Fu(o,"?"),new Gt(204,!1);const l=function Ki(r){const o=r&&(r[Ai]||r[Or]);if(o){const l=function vr(r){if(r.hasOwnProperty("name"))return r.name;const o=(""+r).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(r);return null!==l?()=>l.factory(r):()=>new r}(r);throw new Gt(204,!1)}function Wd(r,o,l){let d;if(lo(r)){const p=Et(r);return to(p)||fu(p)}if(Gs(r))d=()=>Et(r.useValue);else if(function _r(r){return!(!r||!r.useFactory)}(r))d=()=>r.useFactory(...xh(r.deps||[]));else if(function bo(r){return!(!r||!r.useExisting)}(r))d=()=>is(Et(r.useExisting));else{const p=Et(r&&(r.useClass||r.provide));if(!function $d(r){return!!r.deps}(r))return to(p)||fu(p);d=()=>new p(...xh(r.deps))}return d}function Fr(r,o,l=!1){return{factory:r,value:o,multi:l?[]:void 0}}function Yd(r){return!!r.\u0275providers}function rs(r,o){for(const l of r)Array.isArray(l)?rs(l,o):Yd(l)?rs(l.\u0275providers,o):o(l)}class cp{}class Qu{resolveComponentFactory(o){throw function _c(r){const o=Error(`No component factory found for ${ot(r)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=r,o}(o)}}let co=(()=>{class r{}return r.NULL=new Qu,r})();function Fl(){return kl(Dr(),St())}function kl(r,o){return new Bl(ws(r,o))}let Bl=(()=>{class r{constructor(l){this.nativeElement=l}}return r.__NG_ELEMENT_ID__=Fl,r})();function ed(r){return r instanceof Bl?r.nativeElement:r}class td{}let up=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function dp(){const r=St(),l=Hr(Dr().index,r);return(wr(l)?l:r)[11]}(),r})(),Qy=(()=>{class r{}return r.\u0275prov=bn({token:r,providedIn:"root",factory:()=>null}),r})();class hp{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Gm=new hp("14.3.0"),zs={};function nd(r){return r.ngOriginalError}class vc{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&nd(o);for(;l&&nd(l);)l=nd(l);return l||null}}function Rr(r){return r instanceof Function?r():r}function r0(r,o,l){let d=r.length;for(;;){const p=r.indexOf(o,l);if(-1===p)return p;if(0===p||r.charCodeAt(p-1)<=32){const v=o.length;if(p+v===d||r.charCodeAt(p+v)<=32)return p}l=p+1}}const pu="ng-template";function Xd(r,o,l){let d=0;for(;d<r.length;){let p=r[d++];if(l&&"class"===p){if(p=r[d],-1!==r0(p.toLowerCase(),o,0))return!0}else if(1===p){for(;d<r.length&&"string"==typeof(p=r[d++]);)if(p.toLowerCase()===o)return!0;return!1}}return!1}function fp(r){return 4===r.type&&r.value!==pu}function N_(r,o,l){return o===(4!==r.type||l?r.value:pu)}function s0(r,o,l){let d=4;const p=r.attrs||[],v=function BE(r){for(let o=0;o<r.length;o++)if(Fi(r[o]))return o;return r.length}(p);let S=!1;for(let I=0;I<o.length;I++){const F=o[I];if("number"!=typeof F){if(!S)if(4&d){if(d=2|1&d,""!==F&&!N_(r,F,l)||""===F&&1===o.length){if(Ul(d))return!1;S=!0}}else{const $=8&d?F:o[++I];if(8&d&&null!==r.attrs){if(!Xd(r.attrs,$,l)){if(Ul(d))return!1;S=!0}continue}const le=jm(8&d?"class":F,p,fp(r),l);if(-1===le){if(Ul(d))return!1;S=!0;continue}if(""!==$){let be;be=le>v?"":p[le+1].toLowerCase();const He=8&d?be:null;if(He&&-1!==r0(He,$,0)||2&d&&$!==be){if(Ul(d))return!1;S=!0}}}}else{if(!S&&!Ul(d)&&!Ul(F))return!1;if(S&&Ul(F))continue;S=!1,d=F|1&d}}return Ul(d)||S}function Ul(r){return 0==(1&r)}function jm(r,o,l,d){if(null===o)return-1;let p=0;if(d||!l){let v=!1;for(;p<o.length;){const S=o[p];if(S===r)return p;if(3===S||6===S)v=!0;else{if(1===S||2===S){let I=o[++p];for(;"string"==typeof I;)I=o[++p];continue}if(4===S)break;if(0===S){p+=4;continue}}p+=v?1:2}return-1}return function UE(r,o){let l=r.indexOf(4);if(l>-1)for(l++;l<r.length;){const d=r[l];if("number"==typeof d)return-1;if(d===o)return l;l++}return-1}(o,r)}function o0(r,o,l=!1){for(let d=0;d<o.length;d++)if(s0(r,o[d],l))return!0;return!1}function VE(r,o){e:for(let l=0;l<o.length;l++){const d=o[l];if(r.length===d.length){for(let p=0;p<r.length;p++)if(r[p]!==d[p])continue e;return!0}}return!1}function a0(r,o){return r?":not("+o.trim()+")":o}function HE(r){let o=r[0],l=1,d=2,p="",v=!1;for(;l<r.length;){let S=r[l];if("string"==typeof S)if(2&d){const I=r[++l];p+="["+S+(I.length>0?'="'+I+'"':"")+"]"}else 8&d?p+="."+S:4&d&&(p+=" "+S);else""!==p&&!Ul(S)&&(o+=a0(v,p),p=""),d=S,v=v||!Ul(d);l++}return""!==p&&(o+=a0(v,p)),o}const ui={};function l0(r){c0(Jt(),St(),es()+r,!1)}function c0(r,o,l,d){if(!d)if(3==(3&o[2])){const v=r.preOrderCheckHooks;null!==v&&$c(o,v,l)}else{const v=r.preOrderHooks;null!==v&&Yc(o,v,0,l)}ks(l)}function f0(r,o=null,l=null,d){const p=p0(r,o,l,d);return p.resolveInjectorInitializers(),p}function p0(r,o=null,l=null,d,p=new Set){const v=[l||dn,Rt(r)];return d=d||("object"==typeof r?void 0:ot(r)),new Zu(v,o||hu(),d||null,p)}let qd=(()=>{class r{static create(l,d){if(Array.isArray(l))return f0({name:""},d,l,"");{const p=l.name??"";return f0({name:p},l.parent,l.providers,p)}}}return r.THROW_IF_NOT_FOUND=Ad,r.NULL=new Oi,r.\u0275prov=bn({token:r,providedIn:"any",factory:()=>is(Vi)}),r.__NG_ELEMENT_ID__=-1,r})();function Gh(r,o=vn.Default){const l=St();return null===l?is(r,o):Eh(Dr(),l,Et(r),o)}function w0(){throw new Error("invalid")}function $m(r,o){return r<<17|o<<2}function Vl(r){return r>>17&32767}function B_(r){return 2|r}function mu(r){return(131068&r)>>2}function U_(r,o){return-131069&r|o<<2}function V_(r){return 1|r}function _M(r,o){const l=r.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const p=l[d],v=l[d+1];if(-1!==v){const S=r.data[v];ml(p),S.contentQueries(2,o[v],v)}}}function X_(r,o,l,d,p,v,S,I,F,$,ee){const le=o.blueprint.slice();return le[0]=p,le[2]=76|d,(null!==ee||r&&1024&r[2])&&(le[2]|=1024),dl(le),le[3]=le[15]=r,le[8]=l,le[10]=S||r&&r[10],le[11]=I||r&&r[11],le[12]=F||r&&r[12]||null,le[9]=$||r&&r[9]||null,le[6]=v,le[20]=function nu(){return Hu++}(),le[21]=ee,le[16]=2==o.type?r[16]:le,le}function pp(r,o,l,d,p){let v=r.data[o];if(null===v)v=I0(r,o,l,d,p),function fl(){return Vn.lFrame.inI18n}()&&(v.flags|=64);else if(64&v.type){v.type=l,v.value=d,v.attrs=p;const S=Go();v.injectorIndex=null===S?-1:S.injectorIndex}return Ri(v,!0),v}function I0(r,o,l,d,p){const v=Gc(),S=W(),F=r.data[o]=function fx(r,o,l,d,p,v){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,S?v:v&&v.parent,l,o,d,p);return null===r.firstChild&&(r.firstChild=F),null!==v&&(S?null==v.child&&null!==F.parent&&(v.child=F):null===v.next&&(v.next=F)),F}function mp(r,o,l,d){if(0===l)return-1;const p=o.length;for(let v=0;v<l;v++)o.push(d),r.blueprint.push(d),r.data.push(null);return p}function O0(r,o,l){jc(o);try{const d=r.viewQuery;null!==d&&J_(1,d,l);const p=r.template;null!==p&&vM(r,o,p,1,l),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&_M(r,o),r.staticViewQueries&&J_(2,r.viewQuery,l);const v=r.components;null!==v&&function ux(r,o){for(let l=0;l<o.length;l++)j0(r,o[l])}(o,v)}catch(d){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),d}finally{o[2]&=-5,Iu()}}function q_(r,o,l,d){const p=o[2];if(128!=(128&p)){jc(o);try{dl(o),function Co(r){return Vn.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==l&&vM(r,o,l,2,d);const S=3==(3&p);if(S){const $=r.preOrderCheckHooks;null!==$&&$c(o,$,null)}else{const $=r.preOrderHooks;null!==$&&Yc(o,$,0,null),Sd(o,0)}if(function G0(r){for(let o=iu(r);null!==o;o=Cm(o)){if(!o[2])continue;const l=o[9];for(let d=0;d<l.length;d++){const p=l[d],v=p[3];0==(512&p[2])&&sa(v,1),p[2]|=512}}}(o),function jh(r){for(let o=iu(r);null!==o;o=Cm(o))for(let l=10;l<o.length;l++){const d=o[l],p=d[1];Pa(d)&&q_(p,d,p.template,d[8])}}(o),null!==r.contentQueries&&_M(r,o),S){const $=r.contentCheckHooks;null!==$&&$c(o,$)}else{const $=r.contentHooks;null!==$&&Yc(o,$,1),Sd(o,1)}!function lx(r,o){const l=r.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const p=l[d];if(p<0)ks(~p);else{const v=p,S=l[++d],I=l[++d];Ql(S,v),I(2,o[v])}}}finally{ks(-1)}}(r,o);const I=r.components;null!==I&&function cx(r,o){for(let l=0;l<o.length;l++)z0(r,o[l])}(o,I);const F=r.viewQuery;if(null!==F&&J_(2,F,d),S){const $=r.viewCheckHooks;null!==$&&$c(o,$)}else{const $=r.viewHooks;null!==$&&Yc(o,$,2),Sd(o,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,sa(o[3],-1))}finally{Iu()}}}function vM(r,o,l,d,p){const v=es(),S=2&d;try{ks(-1),S&&o.length>22&&c0(r,o,22,!1),l(d,p)}finally{ks(v)}}function yM(r,o,l){if(Mo(o)){const p=o.directiveEnd;for(let v=o.directiveStart;v<p;v++){const S=r.data[v];S.contentQueries&&S.contentQueries(1,l[v],v)}}}function N0(r,o,l){!go()||(function yc(r,o,l,d){const p=l.directiveStart,v=l.directiveEnd;r.firstCreatePass||bl(l,o),Io(d,o);const S=l.initialInputs;for(let I=p;I<v;I++){const F=r.data[I],$=xs(F);$&&zh(o,l,F);const ee=Us(o,r,I,l);Io(ee,o),null!==S&&Z_(0,I-p,ee,F,0,S),$&&(Hr(l.index,o)[8]=ee)}}(r,o,l,ws(l,o)),128==(128&l.flags)&&function qm(r,o,l){const d=l.directiveStart,p=l.directiveEnd,v=l.index,S=function ec(){return Vn.lFrame.currentDirectiveIndex}();try{ks(v);for(let I=d;I<p;I++){const F=r.data[I],$=o[I];no(I),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&k0(F,$)}}finally{ks(-1),no(S)}}(r,o,l))}function P0(r,o,l=ws){const d=o.localNames;if(null!==d){let p=o.index+1;for(let v=0;v<d.length;v+=2){const S=d[v+1],I=-1===S?l(o,r):r[S];r[p++]=I}}}function bM(r){const o=r.tView;return null===o||o.incompleteFirstPass?r.tView=L0(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):o}function L0(r,o,l,d,p,v,S,I,F,$){const ee=22+d,le=ee+p,be=function dx(r,o){const l=[];for(let d=0;d<o;d++)l.push(d<r?null:ui);return l}(ee,le),He="function"==typeof $?$():$;return be[1]={type:r,blueprint:be,template:l,queries:null,viewQuery:I,declTNode:o,data:be.slice().fill(null,ee),bindingStartIndex:ee,expandoStartIndex:le,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof S?S():S,firstChild:null,schemas:F,consts:He,incompleteFirstPass:!1}}function wM(r,o,l,d){const p=$0(o);null===l?p.push(d):(p.push(l),r.firstCreatePass&&Y0(r).push(d,p.length-1))}function EM(r,o,l){for(let d in r)if(r.hasOwnProperty(d)){const p=r[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(o,p):l[d]=[o,p]}return l}function MM(r,o){const d=o.directiveEnd,p=r.data,v=o.attrs,S=[];let I=null,F=null;for(let $=o.directiveStart;$<d;$++){const ee=p[$],le=ee.inputs,be=null===v||fp(o)?null:V0(le,v);S.push(be),I=EM(le,$,I),F=EM(ee.outputs,$,F)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=S,o.inputs=I,o.outputs=F}function Za(r,o,l,d,p,v,S,I){const F=ws(o,l);let ee,$=o.inputs;!I&&null!=$&&(ee=$[d])?(Q_(r,l,ee,d,p),rl(o)&&SM(l,o.index)):3&o.type&&(d=function px(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(d),p=null!=S?S(p,o.value||"",d):p,v.setProperty(F,d,p))}function SM(r,o){const l=Hr(o,r);16&l[2]||(l[2]|=32)}function F0(r,o,l,d){let p=!1;if(go()){const v=function CM(r,o,l){const d=r.directiveRegistry;let p=null;if(d)for(let v=0;v<d.length;v++){const S=d[v];o0(l,S.selectors,!1)&&(p||(p=[]),nc(bl(l,o),r,S.type),xs(S)?(B0(r,l),p.unshift(S)):p.push(S))}return p}(r,o,l),S=null===d?null:{"":-1};if(null!==v){p=!0,U0(l,r.data.length,v.length);for(let ee=0;ee<v.length;ee++){const le=v[ee];le.providersResolver&&le.providersResolver(le)}let I=!1,F=!1,$=mp(r,o,v.length,null);for(let ee=0;ee<v.length;ee++){const le=v[ee];l.mergedAttrs=ni(l.mergedAttrs,le.hostAttrs),gp(r,l,o,$,le),TM($,le,S),null!==le.contentQueries&&(l.flags|=8),(null!==le.hostBindings||null!==le.hostAttrs||0!==le.hostVars)&&(l.flags|=128);const be=le.type.prototype;!I&&(be.ngOnChanges||be.ngOnInit||be.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(l.index),I=!0),!F&&(be.ngOnChanges||be.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(l.index),F=!0),$++}MM(r,l)}S&&function xM(r,o,l){if(o){const d=r.localNames=[];for(let p=0;p<o.length;p+=2){const v=l[o[p+1]];if(null==v)throw new Gt(-301,!1);d.push(o[p],v)}}}(l,d,S)}return l.mergedAttrs=ni(l.mergedAttrs,l.attrs),p}function Ci(r,o,l,d,p,v){const S=v.hostBindings;if(S){let I=r.hostBindingOpCodes;null===I&&(I=r.hostBindingOpCodes=[]);const F=~o.index;(function on(r){let o=r.length;for(;o>0;){const l=r[--o];if("number"==typeof l&&l<0)return l}return 0})(I)!=F&&I.push(F),I.push(d,p,S)}}function k0(r,o){null!==r.hostBindings&&r.hostBindings(1,o)}function B0(r,o){o.flags|=2,(r.components||(r.components=[])).push(o.index)}function TM(r,o,l){if(l){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)l[o.exportAs[d]]=r;xs(o)&&(l[""]=r)}}function U0(r,o,l){r.flags|=1,r.directiveStart=o,r.directiveEnd=o+l,r.providerIndexes=o}function gp(r,o,l,d,p){r.data[d]=p;const v=p.factory||(p.factory=to(p.type)),S=new _o(v,xs(p),Gh);r.blueprint[d]=S,l[d]=S,Ci(r,o,0,d,mp(r,l,p.hostVars,ui),p)}function zh(r,o,l){const d=ws(o,r),p=bM(l),v=r[10],S=Km(r,X_(r,p,null,l.onPush?32:16,d,o,v,v.createRenderer(d,l),null,null,null));r[o.index]=S}function gu(r,o,l,d,p,v,S){if(null==v)r.removeAttribute(o,p,l);else{const I=null==S?Ue(v):S(v,d||"",p);r.setAttribute(o,p,I,l)}}function Z_(r,o,l,d,p,v){const S=v[o];if(null!==S){const I=d.setInput;for(let F=0;F<S.length;){const $=S[F++],ee=S[F++],le=S[F++];null!==I?d.setInput(l,le,$,ee):l[ee]=le}}}function V0(r,o){let l=null,d=0;for(;d<o.length;){const p=o[d];if(0!==p)if(5!==p){if("number"==typeof p)break;r.hasOwnProperty(p)&&(null===l&&(l=[]),l.push(p,r[p],o[d+1])),d+=2}else d+=2;else d+=4}return l}function od(r,o,l,d){return new Array(r,!0,!1,o,null,0,d,l,null,null)}function z0(r,o){const l=Hr(o,r);if(Pa(l)){const d=l[1];48&l[2]?q_(d,l,d.template,l[8]):l[5]>0&&K_(l)}}function K_(r){for(let d=iu(r);null!==d;d=Cm(d))for(let p=10;p<d.length;p++){const v=d[p];if(Pa(v))if(512&v[2]){const S=v[1];q_(S,v,S.template,v[8])}else v[5]>0&&K_(v)}const l=r[1].components;if(null!==l)for(let d=0;d<l.length;d++){const p=Hr(l[d],r);Pa(p)&&p[5]>0&&K_(p)}}function j0(r,o){const l=Hr(o,r),d=l[1];(function Zm(r,o){for(let l=o.length;l<r.blueprint.length;l++)o.push(r.blueprint[l])})(d,l),O0(d,l,l[8])}function Km(r,o){return r[13]?r[14][4]=o:r[13]=o,r[14]=o,o}function Jm(r){for(;r;){r[2]|=32;const o=_a(r);if(Du(r)&&!o)return r;r=o}return null}function _p(r,o,l,d=!0){const p=o[10];p.begin&&p.begin();try{q_(r,o,r.template,l)}catch(S){throw d&&q0(o,S),S}finally{p.end&&p.end()}}function J_(r,o,l){ml(0),o(r,l)}function $0(r){return r[7]||(r[7]=[])}function Y0(r){return r.cleanup||(r.cleanup=[])}function q0(r,o){const l=r[9],d=l?l.get(vc,null):null;d&&d.handleError(o)}function Q_(r,o,l,d,p){for(let v=0;v<l.length;){const S=l[v++],I=l[v++],F=o[S],$=r.data[S];null!==$.setInput?$.setInput(F,p,d,I):F[I]=p}}function Qm(r,o,l){let d=l?r.styles:null,p=l?r.classes:null,v=0;if(null!==o)for(let S=0;S<o.length;S++){const I=o[S];"number"==typeof I?v=I:1==v?p=tn(p,I):2==v&&(d=tn(d,I+": "+o[++S]+";"))}l?r.styles=d:r.stylesWithoutHost=d,l?r.classes=p:r.classesWithoutHost=p}function vp(r,o,l,d,p=!1){for(;null!==l;){const v=o[l.index];if(null!==v&&d.push(nr(v)),ys(v))for(let I=10;I<v.length;I++){const F=v[I],$=F[1].firstChild;null!==$&&vp(F[1],F,$,d)}const S=l.type;if(8&S)vp(r,o,l.child,d);else if(32&S){const I=Mr(l,o);let F;for(;F=I();)d.push(F)}else if(16&S){const I=T_(o,l);if(Array.isArray(I))d.push(...I);else{const F=_a(o[16]);vp(F[1],F,I,d,!0)}}l=p?l.projectionNext:l.next}return d}class Wh{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return vp(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ys(o)){const l=o[8],d=l?l.indexOf(this):-1;d>-1&&(ci(o,d),Lu(l,d))}this._attachedToViewContainer=!1}Oh(this._lView[1],this._lView)}onDestroy(o){wM(this._lView[1],this._lView,null,o)}markForCheck(){Jm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){_p(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Gt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function C_(r,o){va(r,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Gt(902,!1);this._appRef=o}}class Z0 extends Wh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;_p(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class eg extends co{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=hi(o);return new $h(l,this.ngModule)}}function ev(r){const o=[];for(let l in r)r.hasOwnProperty(l)&&o.push({propName:r[l],templateName:l});return o}class J0{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,d){const p=this.injector.get(o,zs,d);return p!==zs||l===zs?p:this.parentInjector.get(o,l,d)}}class $h extends cp{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function GE(r){return r.map(HE).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return ev(this.componentDef.inputs)}get outputs(){return ev(this.componentDef.outputs)}create(o,l,d,p){let v=(p=p||this.ngModule)instanceof qa?p:p?.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const S=v?new J0(o,v):o,I=S.get(td,null);if(null===I)throw new Gt(407,!1);const F=S.get(Qy,null),$=I.createRenderer(null,this.componentDef),ee=this.componentDef.selectors[0][0]||"div",le=d?function hx(r,o,l){return r.selectRootElement(o,l===Wr.ShadowDom)}($,d,this.componentDef.encapsulation):Dl($,ee,function K0(r){const o=r.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(ee)),be=this.componentDef.onPush?288:272,He=L0(0,null,null,1,0,null,null,null,null,null),ct=X_(null,He,null,be,null,null,I,$,F,S,null);let Pt,Qt;jc(ct);try{const hn=function tg(r,o,l,d,p,v){const S=l[1];l[22]=r;const F=pp(S,22,2,"#host",null),$=F.mergedAttrs=o.hostAttrs;null!==$&&(Qm(F,$,!0),null!==r&&(yn(p,r,$),null!==F.classes&&Ds(p,r,F.classes),null!==F.styles&&qy(p,r,F.styles)));const ee=d.createRenderer(r,o),le=X_(l,bM(o),null,o.onPush?32:16,l[22],F,d,ee,v||null,null,null);return S.firstCreatePass&&(nc(bl(F,l),S,o.type),B0(S,F),U0(F,l.length,1)),Km(l,le),l[22]=le}(le,this.componentDef,ct,I,$);if(le)if(d)yn($,le,["ng-version",Gm.full]);else{const{attrs:Ln,classes:At}=function zE(r){const o=[],l=[];let d=1,p=2;for(;d<r.length;){let v=r[d];if("string"==typeof v)2===p?""!==v&&o.push(v,r[++d]):8===p&&l.push(v);else{if(!Ul(p))break;p=v}d++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Ln&&yn($,le,Ln),At&&At.length>0&&Ds($,le,At.join(" "))}if(Qt=Na(He,22),void 0!==l){const Ln=Qt.projection=[];for(let At=0;At<this.ngContentSelectors.length;At++){const jn=l[At];Ln.push(null!=jn?Array.from(jn):null)}}Pt=function DM(r,o,l,d){const p=l[1],v=function gx(r,o,l){const d=Dr();r.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),gp(r,d,o,mp(r,o,1,null),l),MM(r,d));const p=Us(o,r,d.directiveStart,d);Io(p,o);const v=ws(d,o);return v&&Io(v,o),p}(p,l,o);if(r[8]=l[8]=v,null!==d)for(const I of d)I(v,o);if(o.contentQueries){const I=Dr();o.contentQueries(1,v,I.directiveStart)}const S=Dr();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ks(S.index),Ci(l[1],S,0,S.directiveStart,S.directiveEnd,o),k0(o,v)),v}(hn,this.componentDef,ct,[AM]),O0(He,ct,null)}finally{Iu()}return new js(this.componentType,Pt,kl(Qt,ct),ct,Qt)}}class js extends class Ti{}{constructor(o,l,d,p,v){super(),this.location=d,this._rootLView=p,this._tNode=v,this.instance=l,this.hostView=this.changeDetectorRef=new Z0(p),this.componentType=o}setInput(o,l){const d=this._tNode.inputs;let p;if(null!==d&&(p=d[o])){const v=this._rootLView;Q_(v[1],v,p,o,l),SM(v,this._tNode.index)}}get injector(){return new Kc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function AM(){const r=Dr();vl(St()[1],r)}function tv(r){let o=function eb(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),l=!0;const d=[r];for(;o;){let p;if(xs(r))p=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Gt(903,!1);p=o.\u0275dir}if(p){if(l){d.push(p);const S=r;S.inputs=nv(r.inputs),S.declaredInputs=nv(r.declaredInputs),S.outputs=nv(r.outputs);const I=p.hostBindings;I&&NM(r,I);const F=p.viewQuery,$=p.contentQueries;if(F&&IM(r,F),$&&OM(r,$),$e(r.inputs,p.inputs),$e(r.declaredInputs,p.declaredInputs),$e(r.outputs,p.outputs),xs(p)&&p.data.animation){const ee=r.data;ee.animation=(ee.animation||[]).concat(p.data.animation)}}const v=p.features;if(v)for(let S=0;S<v.length;S++){const I=v[S];I&&I.ngInherit&&I(r),I===tv&&(l=!1)}}o=Object.getPrototypeOf(o)}!function RM(r){let o=0,l=null;for(let d=r.length-1;d>=0;d--){const p=r[d];p.hostVars=o+=p.hostVars,p.hostAttrs=ni(p.hostAttrs,l=ni(l,p.hostAttrs))}}(d)}function nv(r){return r===Xi?{}:r===dn?[]:r}function IM(r,o){const l=r.viewQuery;r.viewQuery=l?(d,p)=>{o(d,p),l(d,p)}:o}function OM(r,o){const l=r.contentQueries;r.contentQueries=l?(d,p,v)=>{o(d,p,v),l(d,p,v)}:o}function NM(r,o){const l=r.hostBindings;r.hostBindings=l?(d,p)=>{o(d,p),l(d,p)}:o}let ng=null;function Kd(){if(!ng){const r=vi.Symbol;if(r&&r.iterator)ng=r.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const d=o[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(ng=d)}}}return ng}function bp(r){return!!iv(r)&&(Array.isArray(r)||!(r instanceof Map)&&Kd()in r)}function iv(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function bc(r,o,l){return r[o]=l}function Lo(r,o,l){return!Object.is(r[o],l)&&(r[o]=l,!0)}function Jd(r,o,l,d){const p=Lo(r,o,l);return Lo(r,o+1,d)||p}function rv(r,o,l,d){const p=St();return Lo(p,Ts(),o)&&(Jt(),function Hl(r,o,l,d,p,v){const S=ws(r,o);gu(o[11],S,v,r.value,l,d,p)}(rr(),p,r,o,l,d)),rv}function Xh(r,o,l,d){return Lo(r,Ts(),l)?o+Ue(l)+d:ui}function ov(r,o,l,d,p,v,S,I){const F=St(),$=Jt(),ee=r+22,le=$.firstCreatePass?function sg(r,o,l,d,p,v,S,I,F){const $=o.consts,ee=pp(o,r,4,S||null,ir($,I));F0(o,l,ee,ir($,F)),vl(o,ee);const le=ee.tViews=L0(2,ee,d,p,v,o.directiveRegistry,o.pipeRegistry,null,o.schemas,$);return null!==o.queries&&(o.queries.template(o,ee),le.queries=o.queries.embeddedTView(ee)),ee}(ee,$,F,o,l,d,p,v,S):$.data[ee];Ri(le,!1);const be=F[11].createComment("");$a($,F,be,le),Io(be,F),Km(F,F[ee]=od(be,F,be,le)),sl(le)&&N0($,F,le),null!=S&&P0(F,le,I)}function lb(r){return function Ho(r,o){return r[o]}(function ne(){return Vn.lFrame.contextLView}(),22+r)}function av(r,o,l){const d=St();return Lo(d,Ts(),o)&&Za(Jt(),rr(),d,r,o,d[11],l,!1),av}function og(r,o,l,d,p){const S=p?"class":"style";Q_(r,l,o.inputs[S],S,d)}function ag(r,o,l,d){const p=St(),v=Jt(),S=22+r,I=p[11],F=p[S]=Dl(I,o,function Fa(){return Vn.lFrame.currentNamespace}()),$=v.firstCreatePass?function GM(r,o,l,d,p,v,S){const I=o.consts,$=pp(o,r,2,p,ir(I,v));return F0(o,l,$,ir(I,S)),null!==$.attrs&&Qm($,$.attrs,!1),null!==$.mergedAttrs&&Qm($,$.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,$),$}(S,v,p,0,o,l,d):v.data[S];Ri($,!0);const ee=$.mergedAttrs;null!==ee&&yn(I,F,ee);const le=$.classes;null!==le&&Ds(I,F,le);const be=$.styles;return null!==be&&qy(I,F,be),64!=(64&$.flags)&&$a(v,p,F,$),0===function oa(){return Vn.lFrame.elementDepthCount}()&&Io(F,p),function bd(){Vn.lFrame.elementDepthCount++}(),sl($)&&(N0(v,p,$),yM(v,$,p)),null!==d&&P0(p,$),ag}function lg(){let r=Dr();W()?H():(r=r.parent,Ri(r,!1));const o=r;!function Au(){Vn.lFrame.elementDepthCount--}();const l=Jt();return l.firstCreatePass&&(vl(l,r),Mo(r)&&l.queries.elementEnd(r)),null!=o.classesWithoutHost&&function J(r){return 0!=(16&r.flags)}(o)&&og(l,o,St(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function _e(r){return 0!=(32&r.flags)}(o)&&og(l,o,St(),o.stylesWithoutHost,!1),lg}function lv(r,o,l,d){return ag(r,o,l,d),lg(),lv}function ad(r,o,l){const d=St(),p=Jt(),v=r+22,S=p.firstCreatePass?function zM(r,o,l,d,p){const v=o.consts,S=ir(v,d),I=pp(o,r,8,"ng-container",S);return null!==S&&Qm(I,S,!0),F0(o,l,I,ir(v,p)),null!==o.queries&&o.queries.elementStart(o,I),I}(v,p,d,o,l):p.data[v];Ri(S,!0);const I=d[v]=d[11].createComment("");return $a(p,d,I,S),Io(I,d),sl(S)&&(N0(p,d,S),yM(p,S,d)),null!=l&&P0(d,S),ad}function Ep(){let r=Dr();const o=Jt();return W()?H():(r=r.parent,Ri(r,!1)),o.firstCreatePass&&(vl(o,r),Mo(r)&&o.queries.elementEnd(r)),Ep}function cb(){return St()}function Mp(r){return!!r&&"function"==typeof r.then}function ub(r){return!!r&&"function"==typeof r.subscribe}const db=ub;function uv(r,o,l,d){const p=St(),v=Jt(),S=Dr();return function hv(r,o,l,d,p,v,S,I){const F=sl(d),ee=r.firstCreatePass&&Y0(r),le=o[8],be=$0(o);let He=!0;if(3&d.type||I){const Qt=ws(d,o),hn=I?I(Qt):Qt,Ln=be.length,At=I?ki=>I(nr(ki[d.index])):d.index;let jn=null;if(!I&&F&&(jn=function jM(r,o,l,d){const p=r.cleanup;if(null!=p)for(let v=0;v<p.length-1;v+=2){const S=p[v];if(S===l&&p[v+1]===d){const I=o[7],F=p[v+2];return I.length>F?I[F]:null}"string"==typeof S&&(v+=2)}return null}(r,o,p,d.index)),null!==jn)(jn.__ngLastListenerFn__||jn).__ngNextListenerFn__=v,jn.__ngLastListenerFn__=v,He=!1;else{v=fb(d,o,le,v,!1);const ki=l.listen(hn,p,v);be.push(v,ki),ee&&ee.push(p,At,Ln,Ln+1)}}else v=fb(d,o,le,v,!1);const ct=d.outputs;let Pt;if(He&&null!==ct&&(Pt=ct[p])){const Qt=Pt.length;if(Qt)for(let hn=0;hn<Qt;hn+=2){const jr=o[Pt[hn]][Pt[hn+1]].subscribe(v),Af=be.length;be.push(v,jr),ee&&ee.push(p,d.index,Af,-(Af+1))}}}(v,p,p[11],S,r,o,0,d),uv}function hb(r,o,l,d){try{return!1!==l(d)}catch(p){return q0(r,p),!1}}function fb(r,o,l,d,p){return function v(S){if(S===Function)return d;Jm(2&r.flags?Hr(r.index,o):o);let F=hb(o,0,d,S),$=v.__ngNextListenerFn__;for(;$;)F=hb(o,0,$,S)&&F,$=$.__ngNextListenerFn__;return p&&!1===F&&(S.preventDefault(),S.returnValue=!1),F}}function pb(r=1){return function _h(r){return(Vn.lFrame.contextLView=function Ou(r,o){for(;r>0;)o=o[15],r--;return o}(r,Vn.lFrame.contextLView))[8]}(r)}function WM(r,o){let l=null;const d=function kE(r){const o=r.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(r);for(let p=0;p<o.length;p++){const v=o[p];if("*"!==v){if(null===d?o0(r,v,!0):VE(d,v))return p}else l=p}return l}function mb(r){const o=St()[16][6];if(!o.projection){const d=o.projection=Fu(r?r.length:1,null),p=d.slice();let v=o.child;for(;null!==v;){const S=r?WM(v,r):0;null!==S&&(p[S]?p[S].projectionNext=v:d[S]=v,p[S]=v),v=v.next}}}function gb(r,o=0,l){const d=St(),p=Jt(),v=pp(p,22+r,16,null,l||null);null===v.projection&&(v.projection=o),H(),64!=(64&v.flags)&&function rp(r,o,l){Am(o[11],0,o,l,ru(r,l,o),pc(l.parent||o[6],l,o))}(p,d,v)}function fv(r,o,l){return cg(r,"",o,"",l),fv}function cg(r,o,l,d,p){const v=St(),S=Xh(v,o,l,d);return S!==ui&&Za(Jt(),rr(),v,r,S,v[11],p,!1),cg}function Mb(r,o,l,d,p){const v=r[l+1],S=null===o;let I=d?Vl(v):mu(v),F=!1;for(;0!==I&&(!1===F||S);){const ee=r[I+1];Sb(r[I],o)&&(F=!0,r[I+1]=d?V_(ee):B_(ee)),I=d?Vl(ee):mu(ee)}F&&(r[l+1]=d?B_(v):V_(v))}function Sb(r,o){return null===r||null==o||(Array.isArray(r)?r[1]:r)===o||!(!Array.isArray(r)||"string"!=typeof o)&&Ze(r,o)>=0}const Ws={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function gv(r){return r.substring(Ws.key,Ws.keyEnd)}function xb(r,o){const l=Ws.textEnd;return l===o?-1:(o=Ws.keyEnd=function ZM(r,o,l){for(;o<l&&r.charCodeAt(o)>32;)o++;return o}(r,Ws.key=o,l),nf(r,o,l))}function nf(r,o,l){for(;o<l&&r.charCodeAt(o)<=32;)o++;return o}function vv(r,o,l){return Qa(r,o,l,!1),vv}function yv(r,o){return Qa(r,o,null,!0),yv}function ug(r){ya(ue,Ja,r,!0)}function Ja(r,o){for(let l=function XM(r){return function Db(r){Ws.key=0,Ws.keyEnd=0,Ws.value=0,Ws.valueEnd=0,Ws.textEnd=r.length}(r),xb(r,nf(r,0,Ws.textEnd))}(o);l>=0;l=xb(o,l))ue(r,gv(o),!0)}function Qa(r,o,l,d){const p=St(),v=Jt(),S=cs(2);v.firstUpdatePass&&ld(v,r,S,d),o!==ui&&Lo(p,S,o)&&af(v,v.data[es()],p,p[11],r,p[S+1]=function wv(r,o){return null==r||("string"==typeof o?r+=o:"object"==typeof r&&(r=ot(As(r)))),r}(o,l),d,S)}function ya(r,o,l,d){const p=Jt(),v=cs(2);p.firstUpdatePass&&ld(p,null,v,d);const S=St();if(l!==ui&&Lo(S,v,l)){const I=p.data[es()];if(Ev(I,d)&&!Fo(p,v)){let F=d?I.classesWithoutHost:I.stylesWithoutHost;null!==F&&(l=tn(F,l||"")),og(p,I,S,l,d)}else!function dg(r,o,l,d,p,v,S,I){p===ui&&(p=dn);let F=0,$=0,ee=0<p.length?p[0]:null,le=0<v.length?v[0]:null;for(;null!==ee||null!==le;){const be=F<p.length?p[F+1]:void 0,He=$<v.length?v[$+1]:void 0;let Pt,ct=null;ee===le?(F+=2,$+=2,be!==He&&(ct=le,Pt=He)):null===le||null!==ee&&ee<le?(F+=2,ct=ee):($+=2,ct=le,Pt=He),null!==ct&&af(r,o,l,d,ct,Pt,S,I),ee=F<p.length?p[F]:null,le=$<v.length?v[$]:null}}(p,I,S,S[11],S[v+1],S[v+1]=function Cp(r,o,l){if(null==l||""===l)return dn;const d=[],p=As(l);if(Array.isArray(p))for(let v=0;v<p.length;v++)r(d,p[v],!0);else if("object"==typeof p)for(const v in p)p.hasOwnProperty(v)&&r(d,v,p[v]);else"string"==typeof p&&o(d,p);return d}(r,o,l),d,v)}}function Fo(r,o){return o>=r.expandoStartIndex}function ld(r,o,l,d){const p=r.data;if(null===p[l+1]){const v=p[es()],S=Fo(r,l);Ev(v,d)&&null===o&&!S&&(o=!1),o=function Ib(r,o,l,d){const p=Ru(r);let v=d?o.residualClasses:o.residualStyles;if(null===p)0===(d?o.classBindings:o.styleBindings)&&(l=wc(l=cd(null,r,o,l,d),o.attrs,d),v=null);else{const S=o.directiveStylingLast;if(-1===S||r[S]!==p)if(l=cd(p,r,o,l,d),null===v){let F=function rf(r,o,l){const d=l?o.classBindings:o.styleBindings;if(0!==mu(d))return r[Vl(d)]}(r,o,d);void 0!==F&&Array.isArray(F)&&(F=cd(null,r,o,F[1],d),F=wc(F,o.attrs,d),function Sp(r,o,l,d){r[Vl(l?o.classBindings:o.styleBindings)]=d}(r,o,d,F))}else v=function sf(r,o,l){let d;const p=o.directiveEnd;for(let v=1+o.directiveStylingLast;v<p;v++)d=wc(d,r[v].hostAttrs,l);return wc(d,o.attrs,l)}(r,o,d)}return void 0!==v&&(d?o.residualClasses=v:o.residualStyles=v),l}(p,v,o,d),function $M(r,o,l,d,p,v){let S=v?o.classBindings:o.styleBindings,I=Vl(S),F=mu(S);r[d]=l;let ee,$=!1;if(Array.isArray(l)){const le=l;ee=le[1],(null===ee||Ze(le,ee)>0)&&($=!0)}else ee=l;if(p)if(0!==F){const be=Vl(r[I+1]);r[d+1]=$m(be,I),0!==be&&(r[be+1]=U_(r[be+1],d)),r[I+1]=function lM(r,o){return 131071&r|o<<17}(r[I+1],d)}else r[d+1]=$m(I,0),0!==I&&(r[I+1]=U_(r[I+1],d)),I=d;else r[d+1]=$m(F,0),0===I?I=d:r[F+1]=U_(r[F+1],d),F=d;$&&(r[d+1]=B_(r[d+1])),Mb(r,ee,d,!0),Mb(r,ee,d,!1),function YM(r,o,l,d,p){const v=p?r.residualClasses:r.residualStyles;null!=v&&"string"==typeof o&&Ze(v,o)>=0&&(l[d+1]=V_(l[d+1]))}(o,ee,r,d,v),S=$m(I,F),v?o.classBindings=S:o.styleBindings=S}(p,v,o,l,S,d)}}function cd(r,o,l,d,p){let v=null;const S=l.directiveEnd;let I=l.directiveStylingLast;for(-1===I?I=l.directiveStart:I++;I<S&&(v=o[I],d=wc(d,v.hostAttrs,p),v!==r);)I++;return null!==r&&(l.directiveStylingLast=I),d}function wc(r,o,l){const d=l?1:2;let p=-1;if(null!==o)for(let v=0;v<o.length;v++){const S=o[v];"number"==typeof S?p=S:p===d&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),ue(r,S,!!l||o[++v]))}return void 0===r?null:r}function af(r,o,l,d,p,v,S,I){if(!(3&o.type))return;const F=r.data,$=F[I+1];Tp(function S0(r){return 1==(1&r)}($)?xp(F,o,l,p,mu($),S):void 0)||(Tp(v)||function M0(r){return 2==(2&r)}($)&&(v=xp(F,null,l,p,I,S)),function IE(r,o,l,d,p){if(o)p?r.addClass(l,d):r.removeClass(l,d);else{let v=-1===d.indexOf("-")?void 0:$o.DashCase;null==p?r.removeStyle(l,d,v):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),v|=$o.Important),r.setStyle(l,d,p,v))}}(d,S,Oa(es(),l),p,v))}function xp(r,o,l,d,p,v){const S=null===o;let I;for(;p>0;){const F=r[p],$=Array.isArray(F),ee=$?F[1]:F,le=null===ee;let be=l[p+1];be===ui&&(be=le?dn:void 0);let He=le?ge(be,d):ee===d?be:void 0;if($&&!Tp(He)&&(He=ge(F,d)),Tp(He)&&(I=He,S))return I;const ct=r[p+1];p=S?Vl(ct):mu(ct)}if(null!==o){let F=v?o.residualClasses:o.residualStyles;null!=F&&(I=ge(F,d))}return I}function Tp(r){return void 0!==r}function Ev(r,o){return 0!=(r.flags&(o?16:32))}function Ob(r,o=""){const l=St(),d=Jt(),p=r+22,v=d.firstCreatePass?pp(d,p,1,o,null):d.data[p],S=l[p]=Qf(l[11],o);$a(d,l,S,v),Ri(v,!1)}function lf(r){return Qd("",r,""),lf}function Qd(r,o,l){const d=St(),p=Xh(d,r,o,l);return p!==ui&&function _u(r,o,l){const d=Oa(o,r);ep(r[11],d,l)}(d,es(),p),Qd}function hg(r,o,l){ya(ue,Ja,Xh(St(),r,o,l),!0)}function th(r,o,l){const d=St();return Lo(d,Ts(),o)&&Za(Jt(),rr(),d,r,o,d[11],l,!0),th}function gg(r,o,l){const d=St();if(Lo(d,Ts(),o)){const v=Jt(),S=rr();Za(v,S,d,r,o,function X0(r,o,l){return(null===r||xs(r))&&(l=function So(r){for(;Array.isArray(r);){if("object"==typeof r[1])return r;r=r[0]}return null}(l[o.index])),l[11]}(Ru(v.data),S,d),l,!0)}return gg}const yu=void 0;var Lv=["en",[["a","p"],["AM","PM"],yu],[["AM","PM"],yu,yu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yu,"{1} 'at' {0}",yu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Hb(r){const l=Math.floor(Math.abs(r)),d=r.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let bu={};function _g(r){const o=function Ex(r){return r.toLowerCase().replace(/_/g,"-")}(r);let l=nS(o);if(l)return l;const d=o.split("-")[0];if(l=nS(d),l)return l;if("en"===d)return Lv;throw new Gt(701,!1)}function tS(r){return _g(r)[Yn.PluralCase]}function nS(r){return r in bu||(bu[r]=vi.ng&&vi.ng.common&&vi.ng.common.locales&&vi.ng.common.locales[r]),bu[r]}var Yn=(()=>((Yn=Yn||{})[Yn.LocaleId=0]="LocaleId",Yn[Yn.DayPeriodsFormat=1]="DayPeriodsFormat",Yn[Yn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Yn[Yn.DaysFormat=3]="DaysFormat",Yn[Yn.DaysStandalone=4]="DaysStandalone",Yn[Yn.MonthsFormat=5]="MonthsFormat",Yn[Yn.MonthsStandalone=6]="MonthsStandalone",Yn[Yn.Eras=7]="Eras",Yn[Yn.FirstDayOfWeek=8]="FirstDayOfWeek",Yn[Yn.WeekendRange=9]="WeekendRange",Yn[Yn.DateFormat=10]="DateFormat",Yn[Yn.TimeFormat=11]="TimeFormat",Yn[Yn.DateTimeFormat=12]="DateTimeFormat",Yn[Yn.NumberSymbols=13]="NumberSymbols",Yn[Yn.NumberFormats=14]="NumberFormats",Yn[Yn.CurrencyCode=15]="CurrencyCode",Yn[Yn.CurrencySymbol=16]="CurrencySymbol",Yn[Yn.CurrencyName=17]="CurrencyName",Yn[Yn.Currencies=18]="Currencies",Yn[Yn.Directionality=19]="Directionality",Yn[Yn.PluralCase=20]="PluralCase",Yn[Yn.ExtraData=21]="ExtraData",Yn))();const Mx=["zero","one","two","few","many"],dd="en-US",uf={marker:"element"},nh={marker:"ICU"};var zr=(()=>((zr=zr||{})[zr.SHIFT=2]="SHIFT",zr[zr.APPEND_EAGERLY=1]="APPEND_EAGERLY",zr[zr.COMMENT=2]="COMMENT",zr))();let vg=dd;function zb(r){(function lt(r,o){null==r&&pt(o,r,null,"!=")})(r,"Expected localeId to be defined"),"string"==typeof r&&(vg=r.toLowerCase().replace(/_/g,"-"))}function Wb(r,o,l){const d=o.insertBeforeIndex,p=Array.isArray(d)?d[0]:d;return null===p?Bd(r,0,l):nr(l[p])}function $b(r,o,l,d,p){const v=o.insertBeforeIndex;if(Array.isArray(v)){let S=d,I=null;if(3&o.type||(I=S,S=p),null!==S&&0==(2&o.flags))for(let F=1;F<v.length;F++)hc(r,S,l[v[F]],I,!1)}}function Yb(r,o){if(r.push(o),r.length>1)for(let l=r.length-2;l>=0;l--){const d=r[l];df(d)||rS(d,o)&&null===sS(d)&&oS(d,o.index)}}function df(r){return!(64&r.type)}function rS(r,o){return df(o)||r.index>o.index}function sS(r){const o=r.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function oS(r,o){const l=r.insertBeforeIndex;Array.isArray(l)?l[0]=o:(np(Wb,$b),r.insertBeforeIndex=o)}function Np(r,o){const l=r.data[o];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function aS(r,o,l){const d=I0(r,l,64,null,null);return Yb(o,d),d}function Lp(r,o){const l=o[r.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function qb(r){return r>>>17}function kv(r){return(131070&r)>>>1}let hd=0,Fp=0;function wg(r,o,l,d){const p=l[11];let S,v=null;for(let I=0;I<o.length;I++){const F=o[I];if("string"==typeof F){const $=o[++I];null===l[$]&&(l[$]=Qf(p,F))}else if("number"==typeof F)switch(1&F){case 0:const $=qb(F);let ee,le;if(null===v&&(v=$,S=Ph(p,d)),$===v?(ee=d,le=S):(ee=null,le=nr(l[$])),null!==le){const Pt=kv(F);hc(p,le,l[Pt],ee,!1);const hn=Np(r,Pt);if(null!==hn&&"object"==typeof hn){const Ln=Lp(hn,l);null!==Ln&&wg(r,hn.create[Ln],l,l[hn.anchorIdx])}}break;case 1:const He=o[++I],ct=o[++I];gu(p,Oa(F>>>1,l),null,null,He,ct,null)}else switch(F){case nh:const $=o[++I],ee=o[++I];null===l[ee]&&Io(l[ee]=S_(p,$),l);break;case uf:const le=o[++I],be=o[++I];null===l[be]&&Io(l[be]=Dl(p,le,null),l)}}}function hf(r,o,l,d,p){for(let v=0;v<l.length;v++){const S=l[v],I=l[++v];if(S&p){let F="";for(let $=v+1;$<=v+I;$++){const ee=l[$];if("string"==typeof ee)F+=ee;else if("number"==typeof ee)if(ee<0)F+=Ue(o[d-ee]);else{const le=ee>>>2;switch(3&ee){case 1:const be=l[++$],He=l[++$],ct=r.data[le];"string"==typeof ct?gu(o[11],o[le],null,ct,be,F,He):Za(r,ct,o,be,F,o[11],He,!1);break;case 0:const Pt=o[le];null!==Pt&&ep(o[11],Pt,F);break;case 2:ih(r,Np(r,le),o,F);break;case 3:Eg(r,Np(r,le),d,o)}}}}else{const F=l[v+1];if(F>0&&3==(3&F)){const ee=Np(r,F>>>2);o[ee.currentCaseLViewIndex]<0&&Eg(r,ee,d,o)}}v+=I}}function Eg(r,o,l,d){let p=d[o.currentCaseLViewIndex];if(null!==p){let v=hd;p<0&&(p=d[o.currentCaseLViewIndex]=~p,v=-1),hf(r,d,o.update[p],l,v)}}function ih(r,o,l,d){const p=function Sg(r,o){let l=r.cases.indexOf(o);if(-1===l)switch(r.type){case 1:{const d=function Ec(r,o){const l=tS(o)(parseInt(r,10)),d=Mx[l];return void 0!==d?d:"other"}(o,function jb(){return vg}());l=r.cases.indexOf(d),-1===l&&"other"!==d&&(l=r.cases.indexOf("other"));break}case 0:l=r.cases.indexOf("other")}return-1===l?null:l}(o,d);if(Lp(o,l)!==p&&(Mg(r,o,l),l[o.currentCaseLViewIndex]=null===p?null:~p,null!==p)){const S=l[o.anchorIdx];S&&wg(r,o.create[p],l,S)}}function Mg(r,o,l){let d=Lp(o,l);if(null!==d){const p=o.remove[d];for(let v=0;v<p.length;v++){const S=p[v];if(S>0){const I=Oa(S,l);null!==I&&er(l[11],I)}else Mg(r,Np(r,~S),l)}}}function Cg(){const r=[];let l,d,o=-1;function v(I,F){o=0;const $=Lp(I,F);d=null!==$?I.remove[$]:dn}function S(){if(o<d.length){const I=d[o++];return I>0?l[I]:(r.push(o,d),v(l[1].data[~I],l),S())}return 0===r.length?null:(d=r.pop(),o=r.pop(),S())}return function p(I,F){for(l=F;r.length;)r.pop();return v(I.value,F),S}}const Bp=/\ufffd(\d+):?\d*\ufffd/gi,Up=/\ufffd(\d+)\ufffd/,Qb=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,lS=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,cS=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,uS=/\uE500/g;function ew(r,o,l,d,p,v,S){const I=mp(r,d,1,null);let F=I<<zr.SHIFT,$=Go();o===$&&($=null),null===$&&(F|=zr.APPEND_EAGERLY),S&&(F|=zr.COMMENT,function Kf(r){void 0===Oo&&(Oo=r())}(Cg)),p.push(F,null===v?"":v);const ee=I0(r,I,S?32:1,null===v?"":v,null);Yb(l,ee);const le=ee.index;return Ri(ee,!1),null!==$&&o!==$&&function Xb(r,o){let l=r.insertBeforeIndex;null===l?(np(Wb,$b),l=r.insertBeforeIndex=[null,o]):(function Ge(r,o,l){r!=o&&pt(l,r,o,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(o))}($,le),ee}function fS(r,o,l,d,p,v,S){const I=S.match(Bp),F=ew(r,o,l,v,d,I?null:S,!1);I&&Hp(p,S,F.index,null,0,null)}function Hp(r,o,l,d,p,v){const S=r.length,I=S+1;r.push(null,null);const F=S+2,$=o.split(Bp);let ee=0;for(let le=0;le<$.length;le++){const be=$[le];if(1&le){const He=p+parseInt(be,10);r.push(-1-He),ee|=tw(He)}else""!==be&&r.push(be)}return r.push(l<<2|(d?1:0)),d&&r.push(d,v),r[S]=ee,r[I]=r.length-F,ee}function tw(r){return 1<<Math.min(r,31)}function nw(r){let o,v,l="",d=0,p=!1;for(;null!==(o=lS.exec(r));)p?o[0]===`\ufffd/*${v}\ufffd`&&(d=o.index,p=!1):(l+=r.substring(d,o.index+o[0].length),v=o[1],p=!0);return l+=r.slice(d),l}function Gp(r,o,l,d,p,v){let S=0;const I={type:p.type,currentCaseLViewIndex:mp(r,o,1,null),anchorIdx:v,cases:[],create:[],remove:[],update:[]};(function sw(r,o,l){r.push(tw(o.mainBinding),2,-1-o.mainBinding,l<<2|2)})(l,p,v),function Pp(r,o,l){const d=r.data[o];null===d?r.data[o]=l:d.value=l}(r,v,I);const F=p.values;for(let $=0;$<F.length;$++){const ee=F[$],le=[];for(let be=0;be<ee.length;be++){const He=ee[be];if("string"!=typeof He){const ct=le.push(He)-1;ee[be]=`\x3c!--\ufffd${ct}\ufffd--\x3e`}}S=xg(r,I,o,l,d,p.cases[$],ee.join(""),le)|S}S&&function ow(r,o,l){r.push(o,1,l<<2|3)}(l,S,v)}function iw(r){const o=[],l=[];let d=1,p=0;const v=pf(r=r.replace(Qb,function(S,I,F){return d="select"===F?0:1,p=parseInt(I.slice(1),10),""}));for(let S=0;S<v.length;){let I=v[S++].trim();1===d&&(I=I.replace(/\s*(?:=)?(\w+)\s*/,"$1")),I.length&&o.push(I);const F=pf(v[S++]);o.length>l.length&&l.push(F)}return{type:d,mainBinding:p,cases:o,values:l}}function pf(r){if(!r)return[];let o=0;const l=[],d=[],p=/[{}]/g;let v;for(p.lastIndex=0;v=p.exec(r);){const I=v.index;if("}"==v[0]){if(l.pop(),0==l.length){const F=r.substring(o,I);Qb.test(F)?d.push(iw(F)):d.push(F),o=I+1}}else{if(0==l.length){const F=r.substring(o,I);d.push(F),o=I+1}l.push("{")}}const S=r.substring(o);return d.push(S),d}function xg(r,o,l,d,p,v,S,I){const F=[],$=[],ee=[];o.cases.push(v),o.create.push(F),o.remove.push($),o.update.push(ee);const be=Yu(ju()).getInertBodyElement(S),He=M(be)||be;return He?rw(r,o,l,d,F,$,ee,He,p,I,0):0}function rw(r,o,l,d,p,v,S,I,F,$,ee){let le=0,be=I.firstChild;for(;be;){const He=mp(r,l,1,null);switch(be.nodeType){case Node.ELEMENT_NODE:const ct=be,Pt=ct.tagName.toLowerCase();if(lp.hasOwnProperty(Pt)){sh(p,uf,Pt,F,He),r.data[He]=Pt;const At=ct.attributes;for(let jn=0;jn<At.length;jn++){const ki=At.item(jn),jr=ki.name.toLowerCase();ki.value.match(Bp)?zd.hasOwnProperty(jr)&&Hp(S,ki.value,He,ki.name,0,uu[jr]?ap:null):Gv(p,He,ki)}le=rw(r,o,l,d,p,v,S,be,He,$,ee+1)|le,mf(v,He,ee)}break;case Node.TEXT_NODE:const Qt=be.textContent||"",hn=Qt.match(Bp);sh(p,null,hn?"":Qt,F,He),mf(v,He,ee),hn&&(le=Hp(S,Qt,He,null,0,null)|le);break;case Node.COMMENT_NODE:const Ln=Up.exec(be.textContent||"");if(Ln){const jn=$[parseInt(Ln[1],10)];sh(p,nh,"",F,He),Gp(r,l,d,F,jn,He),mS(v,He,ee)}}be=be.nextSibling}return le}function mf(r,o,l){0===l&&r.push(o)}function mS(r,o,l){0===l&&(r.push(~o),r.push(o))}function sh(r,o,l,d,p){null!==o&&r.push(o),r.push(l,p,function Zb(r,o,l){return r|o<<17|l<<1}(0,d,p))}function Gv(r,o,l){r.push(o<<1|1,l.name,l.value)}function Dg(r,o,l=-1){const d=Jt(),p=St(),v=22+r,S=ir(d.consts,o),I=Go();d.firstCreatePass&&function hS(r,o,l,d,p,v){const S=Go(),I=[],F=[],$=[[]];p=function ss(r,o){if(function ff(r){return-1===r}(o))return nw(r);{const l=r.indexOf(`:${o}\ufffd`)+2+o.toString().length,d=r.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return nw(r.substring(l,d))}}(p,v);const ee=function dS(r){return r.replace(uS," ")}(p).split(cS);for(let le=0;le<ee.length;le++){let be=ee[le];if(0==(1&le)){const He=pf(be);for(let ct=0;ct<He.length;ct++){let Pt=He[ct];if(0==(1&ct)){const Qt=Pt;""!==Qt&&fS(r,S,$[0],I,F,l,Qt)}else{const Qt=Pt;if("object"!=typeof Qt)throw new Error(`Unable to parse ICU expression in "${p}" message.`);Gp(r,l,F,o,Qt,ew(r,S,$[0],l,I,"",!0).index)}}}else{const He=47===be.charCodeAt(0),Pt=(be.charCodeAt(He?1:0),22+Number.parseInt(be.substring(He?2:1)));if(He)$.shift(),Ri(Go(),!1);else{const Qt=aS(r,$[0],Pt);$.unshift([]),Ri(Qt,!0)}}}r.data[d]={create:I,update:F}}(d,null===I?0:I.index,p,v,S,l);const F=d.data[v],ee=Tm(d,I===p[6]?null:I,p);(function Uv(r,o,l,d){const p=r[11];for(let v=0;v<o.length;v++){const S=o[v++],I=o[v],F=(S&zr.COMMENT)===zr.COMMENT,$=(S&zr.APPEND_EAGERLY)===zr.APPEND_EAGERLY,ee=S>>>zr.SHIFT;let le=r[ee];null===le&&(le=r[ee]=F?p.createComment(I):Qf(p,I)),$&&null!==l&&hc(p,l,le,d,!1)}})(p,F.create,ee,I&&8&I.type?p[I.index]:null),zc(!0)}function uw(r,o,l){Dg(r,o,l),function Ag(){zc(!1)}()}function zp(r){return function yg(r){r&&(hd|=1<<Math.min(Fp,31)),Fp++}(Lo(St(),Ts(),r)),zp}function Ig(r){!function bg(r,o,l){if(Fp>0){const d=r.data[l];hf(r,o,Array.isArray(d)?d:d.update,function Ar(){return Vn.lFrame.bindingIndex}()-Fp-1,hd)}hd=0,Fp=0}(Jt(),St(),r+22)}function Yv(r,o,l,d,p){if(r=Et(r),Array.isArray(r))for(let v=0;v<r.length;v++)Yv(r[v],o,l,d,p);else{const v=Jt(),S=St();let I=lo(r)?r:Et(r.provide),F=Wd(r);const $=Dr(),ee=1048575&$.providerIndexes,le=$.directiveStart,be=$.providerIndexes>>20;if(lo(r)||!r.multi){const He=new _o(F,p,Gh),ct=qv(I,o,p?ee:ee+be,le);-1===ct?(nc(bl($,S),v,I),Og(v,r,o.length),o.push(I),$.directiveStart++,$.directiveEnd++,p&&($.providerIndexes+=1048576),l.push(He),S.push(He)):(l[ct]=He,S[ct]=He)}else{const He=qv(I,o,ee+be,le),ct=qv(I,o,ee,ee+be),Pt=He>=0&&l[He],Qt=ct>=0&&l[ct];if(p&&!Qt||!p&&!Pt){nc(bl($,S),v,I);const hn=function yS(r,o,l,d,p){const v=new _o(r,l,Gh);return v.multi=[],v.index=o,v.componentProviders=0,Xv(v,p,d&&!l),v}(p?oh:vS,l.length,p,d,F);!p&&Qt&&(l[ct].providerFactory=hn),Og(v,r,o.length,0),o.push(I),$.directiveStart++,$.directiveEnd++,p&&($.providerIndexes+=1048576),l.push(hn),S.push(hn)}else Og(v,r,He>-1?He:ct,Xv(l[p?ct:He],F,!p&&d));!p&&d&&Qt&&l[ct].componentProviders++}}}function Og(r,o,l,d){const p=lo(o),v=function Bi(r){return!!r.useClass}(o);if(p||v){const F=(v?Et(o.useClass):o).prototype.ngOnDestroy;if(F){const $=r.destroyHooks||(r.destroyHooks=[]);if(!p&&o.multi){const ee=$.indexOf(l);-1===ee?$.push(l,[d,F]):$[ee+1].push(d,F)}else $.push(l,F)}}}function Xv(r,o,l){return l&&r.componentProviders++,r.multi.push(o)-1}function qv(r,o,l,d){for(let p=l;p<d;p++)if(o[p]===r)return p;return-1}function vS(r,o,l,d){return zl(this.multi,[])}function oh(r,o,l,d){const p=this.multi;let v;if(this.providerFactory){const S=this.providerFactory.componentProviders,I=Us(l,l[1],this.providerFactory.index,d);v=I.slice(0,S),zl(p,v);for(let F=S;F<I.length;F++)v.push(I[F])}else v=[],zl(p,v);return v}function zl(r,o){for(let l=0;l<r.length;l++)o.push((0,r[l])());return o}function dw(r,o=[]){return l=>{l.providersResolver=(d,p)=>function $v(r,o,l){const d=Jt();if(d.firstCreatePass){const p=xs(r);Yv(l,d.data,d.blueprint,p,!0),Yv(o,d.data,d.blueprint,p,!1)}}(d,p?p(r):r,o)}}class gf{}class hw{}function bS(r,o){return new fd(r,o??null)}class fd extends gf{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new eg(this);const d=de(o);this._bootstrapComponents=Rr(d.bootstrap),this._r3Injector=p0(o,l,[{provide:gf,useValue:this},{provide:co,useValue:this.componentFactoryResolver}],ot(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Ng extends hw{constructor(o){super(),this.moduleType=o}create(o){return new fd(this.moduleType,o)}}class fw extends gf{constructor(o,l,d){super(),this.componentFactoryResolver=new eg(this),this.instance=null;const p=new Zu([...o,{provide:gf,useValue:this},{provide:co,useValue:this.componentFactoryResolver}],l||hu(),d,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function jp(r,o,l=null){return new fw(r,o,l).injector}let Zv=(()=>{class r{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const d=pi(0,l.type),p=d.length>0?jp([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,p)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=bn({token:r,providedIn:"environment",factory:()=>new r(is(qa))}),r})();function pw(r){r.getStandaloneInjector=o=>o.get(Zv).getOrCreateStandaloneInjector(r)}function vw(r,o,l,d){return function yw(r,o,l,d,p,v){const S=o+l;return Lo(r,S,p)?bc(r,S+1,v?d.call(v,p):d(p)):Fg(r,S+1)}(St(),oi(),r,o,l,d)}function Ef(r,o,l,d,p){return function Wp(r,o,l,d,p,v,S){const I=o+l;return Jd(r,I,p,v)?bc(r,I+2,S?d.call(S,p,v):d(p,v)):Fg(r,I+2)}(St(),oi(),r,o,l,d,p)}function Sc(r,o,l,d,p,v){return function bw(r,o,l,d,p,v,S,I){const F=o+l;return function ig(r,o,l,d,p){const v=Jd(r,o,l,d);return Lo(r,o+2,p)||v}(r,F,p,v,S)?bc(r,F+3,I?d.call(I,p,v,S):d(p,v,S)):Fg(r,F+3)}(St(),oi(),r,o,l,d,p,v)}function Fg(r,o){const l=r[o];return l===ui?void 0:l}function Sf(r){return o=>{setTimeout(r,void 0,o)}}const jl=class xS extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,d){let p=o,v=l||(()=>null),S=d;if(o&&"object"==typeof o){const F=o;p=F.next?.bind(F),v=F.error?.bind(F),S=F.complete?.bind(F)}this.__isAsync&&(v=Sf(v),p&&(p=Sf(p)),S&&(S=Sf(S)));const I=super.subscribe({next:p,error:v,complete:S});return o instanceof b.w0&&o.add(I),I}};function TS(){return this._results[Kd()]()}class Ug{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Kd(),d=Ug.prototype;d[l]||(d[l]=TS)}get changes(){return this._changes||(this._changes=new jl)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const d=this;d.dirty=!1;const p=us(o);(this._changesDetected=!function Lf(r,o,l){if(r.length!==o.length)return!1;for(let d=0;d<r.length;d++){let p=r[d],v=o[d];if(l&&(p=l(p),v=l(v)),v!==p)return!1}return!0}(d._results,p,l))&&(d._results=p,d.length=p.length,d.last=p[this.length-1],d.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Yp=(()=>{class r{}return r.__NG_ELEMENT_ID__=DS,r})();const ny=Yp,Xp=class extends ny{constructor(o,l,d){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(o,l){const d=this._declarationTContainer.tViews,p=X_(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,null,l||null);p[17]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[19];return null!==S&&(p[19]=S.createEmbeddedView(d)),O0(d,p,o),new Wh(p)}};function DS(){return Vg(Dr(),St())}function Vg(r,o){return 4&r.type?new Xp(o,r,kl(r,o)):null}let iy=(()=>{class r{}return r.__NG_ELEMENT_ID__=AS,r})();function AS(){return sy(Dr(),St())}const Mw=iy,ry=class extends Mw{constructor(o,l,d){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=d}get element(){return kl(this._hostTNode,this._hostLView)}get injector(){return new Kc(this._hostTNode,this._hostLView)}get parentInjector(){const o=El(this._hostTNode,this._hostLView);if(Wi(o)){const l=io(o,this._hostLView),d=Si(o);return new Kc(l[1].data[d+8],l)}return new Kc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=Sw(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,d){let p,v;"number"==typeof d?p=d:null!=d&&(p=d.index,v=d.injector);const S=o.createEmbeddedView(l||{},v);return this.insert(S,p),S}createComponent(o,l,d,p,v){const S=o&&!function za(r){return"function"==typeof r}(o);let I;if(S)I=l;else{const le=l||{};I=le.index,d=le.injector,p=le.projectableNodes,v=le.environmentInjector||le.ngModuleRef}const F=S?o:new $h(hi(o)),$=d||this.parentInjector;if(!v&&null==F.ngModule){const be=(S?$:this.parentInjector).get(qa,null);be&&(v=be)}const ee=F.create($,p,void 0,v);return this.insert(ee.hostView,I),ee}insert(o,l){const d=o._lView,p=d[1];if(function Nr(r){return ys(r[3])}(d)){const ee=this.indexOf(o);if(-1!==ee)this.detach(ee);else{const le=d[3],be=new ry(le,le[6],le[3]);be.detach(be.indexOf(o))}}const v=this._adjustIndex(l),S=this._lContainer;!function fi(r,o,l,d){const p=10+d,v=l.length;d>0&&(l[p-1][4]=o),d<v-10?(o[4]=l[p],vo(l,10+d,o)):(l.push(o),o[4]=null),o[3]=l;const S=o[17];null!==S&&l!==S&&function Al(r,o){const l=r[9];o[16]!==o[3][3][16]&&(r[2]=!0),null===l?r[9]=[o]:l.push(o)}(S,o);const I=o[19];null!==I&&I.insertView(r),o[2]|=64}(p,d,S,v);const I=Po(v,S),F=d[11],$=Ph(F,S[7]);return null!==$&&function Ih(r,o,l,d,p,v){d[0]=p,d[6]=o,va(r,d,l,1,p,v)}(p,S[6],F,d,$,I),o.attachToViewContainerRef(),vo(Cf(S),v,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=Sw(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),d=ci(this._lContainer,l);d&&(Lu(Cf(this._lContainer),l),Oh(d[1],d))}detach(o){const l=this._adjustIndex(o,-1),d=ci(this._lContainer,l);return d&&null!=Lu(Cf(this._lContainer),l)?new Wh(d):null}_adjustIndex(o,l=0){return o??this.length+l}};function Sw(r){return r[8]}function Cf(r){return r[8]||(r[8]=[])}function sy(r,o){let l;const d=o[r.index];if(ys(d))l=d;else{let p;if(8&r.type)p=nr(d);else{const v=o[11];p=v.createComment("");const S=ws(r,o);hc(v,Ph(v,S),p,function Zi(r,o){return r.nextSibling(o)}(v,S),!1)}o[r.index]=l=od(d,o,p,r),Km(o,l)}return new ry(l,r,o)}class Eu{constructor(o){this.queryList=o,this.matches=null}clone(){return new Eu(this.queryList)}setDirty(){this.queryList.setDirty()}}class xw{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const d=null!==o.contentQueries?o.contentQueries[0]:l.length,p=[];for(let v=0;v<d;v++){const S=l.getByIndex(v);p.push(this.queries[S.indexInDeclarationView].clone())}return new xw(p)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==zg(o,l).matches&&this.queries[l].setDirty()}}class Tw{constructor(o,l,d=null){this.predicate=o,this.flags=l,this.read=d}}class Hg{constructor(o=[]){this.queries=o}elementStart(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let d=0;d<this.length;d++){const p=null!==l?l.length:0,v=this.getByIndex(d).embeddedTView(o,p);v&&(v.indexInDeclarationView=d,null!==l?l.push(v):l=[v])}return null!==l?new Hg(l):null}template(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Mu{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Mu(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let p=0;p<d.length;p++){const v=d[p];this.matchTNodeWithReadOption(o,l,Dw(l,v)),this.matchTNodeWithReadOption(o,l,Zc(l,o,v,!1,!1))}else d===Yp?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Zc(l,o,d,!1,!1))}matchTNodeWithReadOption(o,l,d){if(null!==d){const p=this.metadata.read;if(null!==p)if(p===Bl||p===iy||p===Yp&&4&l.type)this.addMatch(l.index,-2);else{const v=Zc(l,o,p,!1,!1);null!==v&&this.addMatch(l.index,v)}else this.addMatch(l.index,d)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function Dw(r,o){const l=r.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===o)return l[d+1];return null}function lh(r,o,l,d){return-1===l?function IS(r,o){return 11&r.type?kl(r,o):4&r.type?Vg(r,o):null}(o,r):-2===l?function Nx(r,o,l){return l===Bl?kl(o,r):l===Yp?Vg(o,r):l===iy?sy(o,r):void 0}(r,o,d):Us(r,r[1],l,o)}function OS(r,o,l,d){const p=o[19].queries[d];if(null===p.matches){const v=r.data,S=l.matches,I=[];for(let F=0;F<S.length;F+=2){const $=S[F];I.push($<0?null:lh(o,v[$],S[F+1],l.metadata.read))}p.matches=I}return p.matches}function Su(r,o,l,d){const p=r.queries.getByIndex(l),v=p.matches;if(null!==v){const S=OS(r,o,p,l);for(let I=0;I<v.length;I+=2){const F=v[I];if(F>0)d.push(S[I/2]);else{const $=v[I+1],ee=o[-F];for(let le=10;le<ee.length;le++){const be=ee[le];be[17]===be[3]&&Su(be[1],be,$,d)}if(null!==ee[9]){const le=ee[9];for(let be=0;be<le.length;be++){const He=le[be];Su(He[1],He,$,d)}}}}}return d}function oy(r){const o=St(),l=Jt(),d=pl();ml(d+1);const p=zg(l,d);if(r.dirty&&function ra(r){return 4==(4&r[2])}(o)===(2==(2&p.metadata.flags))){if(null===p.matches)r.reset([]);else{const v=p.crossesNgTemplate?Su(l,o,d,[]):OS(l,o,p,d);r.reset(v,ed),r.notifyOnChanges()}return!0}return!1}function Aw(r,o,l){const d=Jt();d.firstCreatePass&&(Gg(d,new Tw(r,o,l),-1),2==(2&o)&&(d.staticViewQueries=!0)),Rw(d,St(),o)}function md(r,o,l,d){const p=Jt();if(p.firstCreatePass){const v=Dr();Gg(p,new Tw(o,l,d),v.index),function PS(r,o){const l=r.contentQueries||(r.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(r.queries.length-1,o)}(p,r),2==(2&l)&&(p.staticContentQueries=!0)}Rw(p,St(),l)}function NS(){return function Px(r,o){return r[19].queries[o].queryList}(St(),pl())}function Rw(r,o,l){const d=new Ug(4==(4&l));wM(r,o,d,d.destroy),null===o[19]&&(o[19]=new xw),o[19].queries.push(new Eu(d))}function Gg(r,o,l){null===r.queries&&(r.queries=new Hg),r.queries.track(new Mu(o,l))}function zg(r,o){return r.queries.getByIndex(o)}function Iw(r,o){return Vg(r,o)}function Xg(...r){}const WS=new Qi("Application Initializer");let my=(()=>{class r{constructor(l){this.appInits=l,this.resolve=Xg,this.reject=Xg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,p)=>{this.resolve=d,this.reject=p})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const v=this.appInits[p]();if(Mp(v))l.push(v);else if(db(v)){const S=new Promise((I,F)=>{v.subscribe({complete:I,error:F})});l.push(S)}}Promise.all(l).then(()=>{d()}).catch(p=>{this.reject(p)}),0===l.length&&d(),this.initialized=!0}}return r.\u0275fac=function(l){return new(l||r)(is(WS,8))},r.\u0275prov=bn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const qg=new Qi("AppId",{providedIn:"root",factory:function $S(){return`${Ww()}${Ww()}${Ww()}`}});function Ww(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gy=new Qi("Platform Initializer"),Wx=new Qi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),YS=new Qi("appBootstrapListener"),$x=new Qi("AnimationModuleType");let Yx=(()=>{class r{log(l){console.log(l)}warn(l){console.warn(l)}}return r.\u0275fac=function(l){return new(l||r)},r.\u0275prov=bn({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const Zg=new Qi("LocaleId",{providedIn:"root",factory:()=>Ch(Zg,vn.Optional|vn.SkipSelf)||function _y(){return typeof $localize<"u"&&$localize.locale||dd}()}),Hi=new Qi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class XS{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let qS=(()=>{class r{compileModuleSync(l){return new Ng(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),v=Rr(de(l).declarations).reduce((S,I)=>{const F=hi(I);return F&&S.push(new $h(F)),S},[]);return new XS(d,v)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return r.\u0275fac=function(l){return new(l||r)},r.\u0275prov=bn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const JS=(()=>Promise.resolve(0))();function vy(r){typeof Zone>"u"?JS.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class el{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jl(!1),this.onMicrotaskEmpty=new jl(!1),this.onStable=new jl(!1),this.onError=new jl(!1),typeof Zone>"u")throw new Gt(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const v=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new v("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!d&&l,p.shouldCoalesceRunChangeDetection=d,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function QS(){let r=vi.requestAnimationFrame,o=vi.cancelAnimationFrame;if(typeof Zone<"u"&&r&&o){const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function eC(r){const o=()=>{!function qw(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(vi,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,yy(r),r.isCheckStableRunning=!0,uh(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),yy(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,p,v,S,I)=>{try{return Zw(r),l.invokeTask(p,v,S,I)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||r.shouldCoalesceRunChangeDetection)&&o(),Kw(r)}},onInvoke:(l,d,p,v,S,I,F)=>{try{return Zw(r),l.invoke(p,v,S,I,F)}finally{r.shouldCoalesceRunChangeDetection&&o(),Kw(r)}},onHasTask:(l,d,p,v)=>{l.hasTask(p,v),d===p&&("microTask"==v.change?(r._hasPendingMicrotasks=v.microTask,yy(r),uh(r)):"macroTask"==v.change&&(r.hasPendingMacrotasks=v.macroTask))},onHandleError:(l,d,p,v)=>(l.handleError(p,v),r.runOutsideAngular(()=>r.onError.emit(v)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!el.isInAngularZone())throw new Gt(909,!1)}static assertNotInAngularZone(){if(el.isInAngularZone())throw new Gt(909,!1)}run(o,l,d){return this._inner.run(o,l,d)}runTask(o,l,d,p){const v=this._inner,S=v.scheduleEventTask("NgZoneEvent: "+p,o,Xw,Xg,Xg);try{return v.runTask(S,l,d)}finally{v.cancelTask(S)}}runGuarded(o,l,d){return this._inner.runGuarded(o,l,d)}runOutsideAngular(o){return this._outer.run(o)}}const Xw={};function uh(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function yy(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function Zw(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function Kw(r){r._nesting--,uh(r)}class Jw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jl,this.onMicrotaskEmpty=new jl,this.onStable=new jl,this.onError=new jl}run(o,l,d){return o.apply(l,d)}runGuarded(o,l,d){return o.apply(l,d)}runOutsideAngular(o){return o()}runTask(o,l,d,p){return o.apply(l,d)}}const Qw=new Qi(""),eE=new Qi("");let Kg,tl=(()=>{class r{constructor(l,d,p){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Kg||(function tE(r){Kg=r}(p),p.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{el.assertNotInAngularZone(),vy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vy(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,p){let v=-1;d&&d>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(S=>S.timeoutId!==v),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:v,updateCb:p})}whenStable(l,d,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,p){return[]}}return r.\u0275fac=function(l){return new(l||r)(is(el),is(dh),is(eE))},r.\u0275prov=bn({token:r,factory:r.\u0275fac}),r})(),dh=(()=>{class r{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Kg?.findTestabilityInTree(this,l,d)??null}}return r.\u0275fac=function(l){return new(l||r)},r.\u0275prov=bn({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),xc=null;const Jg=new Qi("AllowMultipleToken"),Tc=new Qi("PlatformDestroyListeners");class gd{constructor(o,l){this.name=o,this.token=l}}function Qg(r,o,l=[]){const d=`Platform: ${o}`,p=new Qi(d);return(v=[])=>{let S=wy();if(!S||S.injector.get(Jg,!1)){const I=[...l,...v,{provide:p,useValue:!0}];r?r(I):function tC(r){if(xc&&!xc.get(Jg,!1))throw new Gt(400,!1);xc=r;const o=r.get(Ey);(function nE(r){const o=r.get(gy,null);o&&o.forEach(l=>l())})(r)}(function rE(r=[],o){return qd.create({name:o,providers:[{provide:la,useValue:"platform"},{provide:Tc,useValue:new Set([()=>xc=null])},...r]})}(I,d))}return function iC(r){const o=wy();if(!o)throw new Gt(401,!1);return o}()}}function wy(){return xc?.get(Ey)??null}let Ey=(()=>{class r{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const p=function e_(r,o){let l;return l="noop"===r?new Jw:("zone.js"===r?void 0:r)||new el(o),l}(d?.ngZone,function My(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(d)),v=[{provide:el,useValue:p}];return p.run(()=>{const S=qd.create({providers:v,parent:this.injector,name:l.moduleType.name}),I=l.create(S),F=I.injector.get(vc,null);if(!F)throw new Gt(402,!1);return p.runOutsideAngular(()=>{const $=p.onError.subscribe({next:ee=>{F.handleError(ee)}});I.onDestroy(()=>{t_(this._modules,I),$.unsubscribe()})}),function Sy(r,o,l){try{const d=l();return Mp(d)?d.catch(p=>{throw o.runOutsideAngular(()=>r.handleError(p)),p}):d}catch(d){throw o.runOutsideAngular(()=>r.handleError(d)),d}}(F,p,()=>{const $=I.injector.get(my);return $.runInitializers(),$.donePromise.then(()=>(zb(I.injector.get(Zg,dd)||dd),this._moduleDoBootstrap(I),I))})})}bootstrapModule(l,d=[]){const p=Kp({},d);return function by(r,o,l){const d=new Ng(l);return Promise.resolve(d)}(0,0,l).then(v=>this.bootstrapModuleFactory(v,p))}_moduleDoBootstrap(l){const d=l.injector.get(Jp);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(p=>d.bootstrap(p));else{if(!l.instance.ngDoBootstrap)throw new Gt(403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Gt(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(Tc,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(l){return new(l||r)(is(qd))},r.\u0275prov=bn({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function Kp(r,o){return Array.isArray(o)?o.reduce(Kp,r):{...r,...o}}let Jp=(()=>{class r{constructor(l,d,p){this._zone=l,this._injector=d,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new X.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),S=new X.y(I=>{let F;this._zone.runOutsideAngular(()=>{F=this._zone.onStable.subscribe(()=>{el.assertNotInAngularZone(),vy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const $=this._zone.onUnstable.subscribe(()=>{el.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{F.unsubscribe(),$.unsubscribe()}});this.isStable=(0,Me.T)(v,S.pipe(function st(r={}){const{connector:o=(()=>new m.x),resetOnError:l=!0,resetOnComplete:d=!0,resetOnRefCountZero:p=!0}=r;return v=>{let S,I,F,$=0,ee=!1,le=!1;const be=()=>{I?.unsubscribe(),I=void 0},He=()=>{be(),S=F=void 0,ee=le=!1},ct=()=>{const Pt=S;He(),Pt?.unsubscribe()};return(0,Ae.e)((Pt,Qt)=>{$++,!le&&!ee&&be();const hn=F=F??o();Qt.add(()=>{$--,0===$&&!le&&!ee&&(I=qe(ct,p))}),hn.subscribe(Qt),!S&&$>0&&(S=new Oe.Hp({next:Ln=>hn.next(Ln),error:Ln=>{le=!0,be(),I=qe(He,l,Ln),hn.error(Ln)},complete:()=>{ee=!0,be(),I=qe(He,d),hn.complete()}}),(0,ye.Xf)(Pt).subscribe(S))})(v)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const p=l instanceof cp;if(!this._injector.get(my).done)throw!p&&xe(l),new Gt(405,false);let S;S=p?l:this._injector.get(co).resolveComponentFactory(l),this.componentTypes.push(S.componentType);const I=function hh(r){return r.isBoundToModule}(S)?void 0:this._injector.get(gf),$=S.create(qd.NULL,[],d||S.selector,I),ee=$.location.nativeElement,le=$.injector.get(Qw,null);return le?.registerApplication(ee),$.onDestroy(()=>{this.detachView($.hostView),t_(this.components,$),le?.unregisterApplication(ee)}),this._loadComponent($),$}tick(){if(this._runningTick)throw new Gt(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;t_(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(YS,[]).concat(this._bootstrapListeners).forEach(p=>p(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>t_(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Gt(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(l){return new(l||r)(is(el),is(qa),is(vc))},r.\u0275prov=bn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function t_(r,o){const l=r.indexOf(o);l>-1&&r.splice(l,1)}let Cy=!0;function n_(){Cy=!1}let oE=(()=>{class r{}return r.__NG_ELEMENT_ID__=aE,r})();function aE(r){return function Tu(r,o,l){if(rl(r)&&!l){const d=Hr(r.index,o);return new Wh(d,d)}return 47&r.type?new Wh(o[16],o):null}(Dr(),St(),16==(16&r))}class Ay{constructor(){}supports(o){return bp(o)}create(o){return new fE(o)}}const hE=(r,o)=>o;class fE{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||hE}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,d=this._removalsHead,p=0,v=null;for(;l||d;){const S=!d||l&&l.currentIndex<uC(d,p,v)?l:d,I=uC(S,p,v),F=S.currentIndex;if(S===d)p--,d=d._nextRemoved;else if(l=l._next,null==S.previousIndex)p++;else{v||(v=[]);const $=I-p,ee=F-p;if($!=ee){for(let be=0;be<$;be++){const He=be<v.length?v[be]:v[be]=0,ct=He+be;ee<=ct&&ct<$&&(v[be]=He+1)}v[S.previousIndex]=ee-$}}I!==F&&o(S,I,F)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!bp(o))throw new Gt(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let p,v,S,l=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)v=o[I],S=this._trackByFn(I,v),null!==l&&Object.is(l.trackById,S)?(d&&(l=this._verifyReinsertion(l,v,S,I)),Object.is(l.item,v)||this._addIdentityChange(l,v)):(l=this._mismatch(l,v,S,I),d=!0),l=l._next}else p=0,function BM(r,o){if(Array.isArray(r))for(let l=0;l<r.length;l++)o(r[l]);else{const l=r[Kd()]();let d;for(;!(d=l.next()).done;)o(d.value)}}(o,I=>{S=this._trackByFn(p,I),null!==l&&Object.is(l.trackById,S)?(d&&(l=this._verifyReinsertion(l,I,S,p)),Object.is(l.item,I)||this._addIdentityChange(l,I)):(l=this._mismatch(l,I,S,p),d=!0),l=l._next,p++}),this.length=p;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,d,p){let v;return null===o?v=this._itTail:(v=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,v,p)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,p))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,v,p)):o=this._addAfter(new lC(l,d),v,p),o}_verifyReinsertion(o,l,d,p){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==v?o=this._reinsertAfter(v,o._prev,p):o.currentIndex!=p&&(o.currentIndex=p,this._addToMoves(o,p)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const p=o._prevRemoved,v=o._nextRemoved;return null===p?this._removalsHead=v:p._nextRemoved=v,null===v?this._removalsTail=p:v._prevRemoved=p,this._insertAfter(o,l,d),this._addToMoves(o,d),o}_moveAfter(o,l,d){return this._unlink(o),this._insertAfter(o,l,d),this._addToMoves(o,d),o}_addAfter(o,l,d){return this._insertAfter(o,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,d){const p=null===l?this._itHead:l._next;return o._next=p,o._prev=l,null===p?this._itTail=o:p._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new cC),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,d=o._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class lC{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class l1{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const l=o._prevDup,d=o._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class cC{constructor(){this.map=new Map}put(o){const l=o.trackById;let d=this.map.get(l);d||(d=new l1,this.map.set(l,d)),d.add(o)}get(o,l){const p=this.map.get(o);return p?p.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uC(r,o,l){const d=r.previousIndex;if(null===d)return d;let p=0;return l&&d<l.length&&(p=l[d]),d+o+p}class dC{constructor(){}supports(o){return o instanceof Map||iv(o)}create(){return new c1}}class c1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||iv(o)))throw new Gt(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,p)=>{if(l&&l.key===p)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const v=this._getOrCreateRecordForKey(p,d);l=this._insertBeforeOrAppend(l,v)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const d=o._prev;return l._next=o,l._prev=d,o._prev=l,d&&(d._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const p=this._records.get(o);this._maybeAddToChanges(p,l);const v=p._prev,S=p._next;return v&&(v._next=S),S&&(S._prev=v),p._next=null,p._prev=null,p}const d=new u1(o);return this._records.set(o,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(d=>l(o[d],d))}}class u1{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hC(){return new pE([new Ay])}let pE=(()=>{class r{constructor(l){this.factories=l}static create(l,d){if(null!=d){const p=d.factories.slice();l=l.concat(p)}return new r(l)}static extend(l){return{provide:r,useFactory:d=>r.create(l,d||hC()),deps:[[r,new Id,new Rd]]}}find(l){const d=this.factories.find(p=>p.supports(l));if(null!=d)return d;throw new Gt(901,!1)}}return r.\u0275prov=bn({token:r,providedIn:"root",factory:hC}),r})();function mE(){return new Ry([new dC])}let Ry=(()=>{class r{constructor(l){this.factories=l}static create(l,d){if(d){const p=d.factories.slice();l=l.concat(p)}return new r(l)}static extend(l){return{provide:r,useFactory:d=>r.create(l,d||mE()),deps:[[r,new Id,new Rd]]}}find(l){const d=this.factories.find(p=>p.supports(l));if(d)return d;throw new Gt(901,!1)}}return r.\u0275prov=bn({token:r,providedIn:"root",factory:mE}),r})();const pC=Qg(null,"core",[]);let Oy=(()=>{class r{constructor(l){}}return r.\u0275fac=function(l){return new(l||r)(is(Jp))},r.\u0275mod=qs({type:r}),r.\u0275inj=dr({}),r})();function mC(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}function o_(r,o){const l=hi(r),d=o.elementInjector||hu();return new $h(l).create(d,o.projectableNodes,o.hostElement,o.environmentInjector)}},433:(gn,it,K)=>{"use strict";K.d(it,{sg:()=>ta,u5:()=>La,a5:()=>Mi,JL:()=>Yi,F:()=>mo,kI:()=>Fe,_Y:()=>xa});var m=K(1571),X=(K(6895),K(2076)),Me=K(9751),ye=K(4742),Oe=K(8421),Ae=K(3269),st=K(5403),qe=K(3268),je=K(1810),ot=K(4004);function xt(W){return null==W||("string"==typeof W||Array.isArray(W))&&0===W.length}function Dt(W){return null!=W&&"number"==typeof W.length}const ft=new m.OlP("NgValidators"),Mt=new m.OlP("NgAsyncValidators"),kt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Fe{static min(H){return function ke(W){return H=>{if(xt(H.value)||xt(W))return null;const V=parseFloat(H.value);return!isNaN(V)&&V<W?{min:{min:W,actual:H.value}}:null}}(H)}static max(H){return function at(W){return H=>{if(xt(H.value)||xt(W))return null;const V=parseFloat(H.value);return!isNaN(V)&&V>W?{max:{max:W,actual:H.value}}:null}}(H)}static required(H){return function Ge(W){return xt(W.value)?{required:!0}:null}(H)}static requiredTrue(H){return function Vt(W){return!0===W.value?null:{required:!0}}(H)}static email(H){return function Bt(W){return xt(W.value)||kt.test(W.value)?null:{email:!0}}(H)}static minLength(H){return function Mn(W){return H=>xt(H.value)||!Dt(H.value)?null:H.value.length<W?{minlength:{requiredLength:W,actualLength:H.value.length}}:null}(H)}static maxLength(H){return function Li(W){return H=>Dt(H.value)&&H.value.length>W?{maxlength:{requiredLength:W,actualLength:H.value.length}}:null}(H)}static pattern(H){return function ar(W){if(!W)return Wn;let H,V;return"string"==typeof W?(V="","^"!==W.charAt(0)&&(V+="^"),V+=W,"$"!==W.charAt(W.length-1)&&(V+="$"),H=new RegExp(V)):(V=W.toString(),H=W),ne=>{if(xt(ne.value))return null;const tt=ne.value;return H.test(tt)?null:{pattern:{requiredPattern:V,actualValue:tt}}}}(H)}static nullValidator(H){return null}static compose(H){return Xt(H)}static composeAsync(H){return On(H)}}function Wn(W){return null}function yr(W){return null!=W}function ps(W){return(0,m.QGY)(W)?(0,X.D)(W):W}function lt(W){let H={};return W.forEach(V=>{H=null!=V?{...H,...V}:H}),0===Object.keys(H).length?null:H}function pt(W,H){return H.map(V=>V(W))}function We(W){return W.map(H=>function Be(W){return!W.validate}(H)?H:V=>H.validate(V))}function Xt(W){if(!W)return null;const H=W.filter(yr);return 0==H.length?null:function(V){return lt(pt(V,H))}}function bn(W){return null!=W?Xt(We(W)):null}function On(W){if(!W)return null;const H=W.filter(yr);return 0==H.length?null:function(V){return function $e(...W){const H=(0,Ae.jO)(W),{args:V,keys:ne}=(0,ye.D)(W),tt=new Me.y(_n=>{const{length:oi}=V;if(!oi)return void _n.complete();const Ar=new Array(oi);let Co=oi,Ts=oi;for(let cs=0;cs<oi;cs++){let fl=!1;(0,Oe.Xf)(V[cs]).subscribe((0,st.x)(_n,zc=>{fl||(fl=!0,Ts--),Ar[cs]=zc},()=>Co--,void 0,()=>{(!Co||!fl)&&(Ts||_n.next(ne?(0,je.n)(ne,Ar):Ar),_n.complete())}))}});return H?tt.pipe((0,qe.Z)(H)):tt}(pt(V,H).map(ps)).pipe((0,ot.U)(lt))}}function dr(W){return null!=W?On(We(W)):null}function ji(W,H){return null===W?[H]:Array.isArray(W)?[...W,H]:[W,H]}function _i(W){return W._rawValidators}function tr(W){return W._rawAsyncValidators}function Ki(W){return W?Array.isArray(W)?W:[W]:[]}function vr(W,H){return Array.isArray(W)?W.includes(H):W===H}function ms(W,H){const V=Ki(H);return Ki(W).forEach(tt=>{vr(V,tt)||V.push(tt)}),V}function Ai(W,H){return Ki(H).filter(V=>!vr(W,V))}class Ir{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(H){this._rawValidators=H||[],this._composedValidatorFn=bn(this._rawValidators)}_setAsyncValidators(H){this._rawAsyncValidators=H||[],this._composedAsyncValidatorFn=dr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(H){this._onDestroyCallbacks.push(H)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(H=>H()),this._onDestroyCallbacks=[]}reset(H){this.control&&this.control.reset(H)}hasError(H,V){return!!this.control&&this.control.hasError(H,V)}getError(H,V){return this.control?this.control.getError(H,V):null}}class Or extends Ir{get formDirective(){return null}get path(){return null}}class Mi extends Ir{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Yi=(()=>{class W extends class vn{constructor(H){this._cd=H}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(V){super(V)}}return W.\u0275fac=function(V){return new(V||W)(m.Y36(Or,10))},W.\u0275dir=m.lG2({type:W,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(V,ne){2&V&&m.ekj("ng-untouched",ne.isUntouched)("ng-touched",ne.isTouched)("ng-pristine",ne.isPristine)("ng-dirty",ne.isDirty)("ng-valid",ne.isValid)("ng-invalid",ne.isInvalid)("ng-pending",ne.isPending)("ng-submitted",ne.isSubmitted)},features:[m.qOj]}),W})();const Yr="VALID",Xr="INVALID",Ns="PENDING",br="DISABLED";function qs(W){return(Zr(W)?W.validators:W)||null}function gs(W){return Array.isArray(W)?bn(W):W||null}function qr(W,H){return(Zr(H)?H.asyncValidators:W)||null}function fr(W){return Array.isArray(W)?dr(W):W||null}function Zr(W){return null!=W&&!Array.isArray(W)&&"object"==typeof W}class Re{constructor(H,V){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=H,this._rawAsyncValidators=V,this._composedValidatorFn=gs(this._rawValidators),this._composedAsyncValidatorFn=fr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(H){this._rawValidators=this._composedValidatorFn=H}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(H){this._rawAsyncValidators=this._composedAsyncValidatorFn=H}get parent(){return this._parent}get valid(){return this.status===Yr}get invalid(){return this.status===Xr}get pending(){return this.status==Ns}get disabled(){return this.status===br}get enabled(){return this.status!==br}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(H){this._rawValidators=H,this._composedValidatorFn=gs(H)}setAsyncValidators(H){this._rawAsyncValidators=H,this._composedAsyncValidatorFn=fr(H)}addValidators(H){this.setValidators(ms(H,this._rawValidators))}addAsyncValidators(H){this.setAsyncValidators(ms(H,this._rawAsyncValidators))}removeValidators(H){this.setValidators(Ai(H,this._rawValidators))}removeAsyncValidators(H){this.setAsyncValidators(Ai(H,this._rawAsyncValidators))}hasValidator(H){return vr(this._rawValidators,H)}hasAsyncValidator(H){return vr(this._rawAsyncValidators,H)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(H={}){this.touched=!0,this._parent&&!H.onlySelf&&this._parent.markAsTouched(H)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(H=>H.markAllAsTouched())}markAsUntouched(H={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(V=>{V.markAsUntouched({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}markAsDirty(H={}){this.pristine=!1,this._parent&&!H.onlySelf&&this._parent.markAsDirty(H)}markAsPristine(H={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(V=>{V.markAsPristine({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}markAsPending(H={}){this.status=Ns,!1!==H.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!H.onlySelf&&this._parent.markAsPending(H)}disable(H={}){const V=this._parentMarkedDirty(H.onlySelf);this.status=br,this.errors=null,this._forEachChild(ne=>{ne.disable({...H,onlySelf:!0})}),this._updateValue(),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...H,skipPristineCheck:V}),this._onDisabledChange.forEach(ne=>ne(!0))}enable(H={}){const V=this._parentMarkedDirty(H.onlySelf);this.status=Yr,this._forEachChild(ne=>{ne.enable({...H,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent}),this._updateAncestors({...H,skipPristineCheck:V}),this._onDisabledChange.forEach(ne=>ne(!1))}_updateAncestors(H){this._parent&&!H.onlySelf&&(this._parent.updateValueAndValidity(H),H.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(H){this._parent=H}getRawValue(){return this.value}updateValueAndValidity(H={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yr||this.status===Ns)&&this._runAsyncValidator(H.emitEvent)),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!H.onlySelf&&this._parent.updateValueAndValidity(H)}_updateTreeValidity(H={emitEvent:!0}){this._forEachChild(V=>V._updateTreeValidity(H)),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?br:Yr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(H){if(this.asyncValidator){this.status=Ns,this._hasOwnPendingAsyncValidator=!0;const V=ps(this.asyncValidator(this));this._asyncValidationSubscription=V.subscribe(ne=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ne,{emitEvent:H})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(H,V={}){this.errors=H,this._updateControlsErrors(!1!==V.emitEvent)}get(H){let V=H;return null==V||(Array.isArray(V)||(V=V.split(".")),0===V.length)?null:V.reduce((ne,tt)=>ne&&ne._find(tt),this)}getError(H,V){const ne=V?this.get(V):this;return ne&&ne.errors?ne.errors[H]:null}hasError(H,V){return!!this.getError(H,V)}get root(){let H=this;for(;H._parent;)H=H._parent;return H}_updateControlsErrors(H){this.status=this._calculateStatus(),H&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(H)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?br:this.errors?Xr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ns)?Ns:this._anyControlsHaveStatus(Xr)?Xr:Yr}_anyControlsHaveStatus(H){return this._anyControls(V=>V.status===H)}_anyControlsDirty(){return this._anyControls(H=>H.dirty)}_anyControlsTouched(){return this._anyControls(H=>H.touched)}_updatePristine(H={}){this.pristine=!this._anyControlsDirty(),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}_updateTouched(H={}){this.touched=this._anyControlsTouched(),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}_registerOnCollectionChange(H){this._onCollectionChange=H}_setUpdateStrategy(H){Zr(H)&&null!=H.updateOn&&(this._updateOn=H.updateOn)}_parentMarkedDirty(H){return!H&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(H){return null}}class xe extends Re{constructor(H,V,ne){super(qs(V),qr(ne,V)),this.controls=H,this._initObservables(),this._setUpdateStrategy(V),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(H,V){return this.controls[H]?this.controls[H]:(this.controls[H]=V,V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange),V)}addControl(H,V,ne={}){this.registerControl(H,V),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}removeControl(H,V={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}setControl(H,V,ne={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],V&&this.registerControl(H,V),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}contains(H){return this.controls.hasOwnProperty(H)&&this.controls[H].enabled}setValue(H,V={}){(function Ji(W,H,V){W._forEachChild((ne,tt)=>{if(void 0===V[tt])throw new m.vHH(1002,"")})})(this,0,H),Object.keys(H).forEach(ne=>{(function hi(W,H,V){const ne=W.controls;if(!(H?Object.keys(ne):ne).length)throw new m.vHH(1e3,"");if(!ne[V])throw new m.vHH(1001,"")})(this,!0,ne),this.controls[ne].setValue(H[ne],{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V)}patchValue(H,V={}){null!=H&&(Object.keys(H).forEach(ne=>{const tt=this.controls[ne];tt&&tt.patchValue(H[ne],{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V))}reset(H={},V={}){this._forEachChild((ne,tt)=>{ne.reset(H[tt],{onlySelf:!0,emitEvent:V.emitEvent})}),this._updatePristine(V),this._updateTouched(V),this.updateValueAndValidity(V)}getRawValue(){return this._reduceChildren({},(H,V,ne)=>(H[ne]=V.getRawValue(),H))}_syncPendingControls(){let H=this._reduceChildren(!1,(V,ne)=>!!ne._syncPendingControls()||V);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_forEachChild(H){Object.keys(this.controls).forEach(V=>{const ne=this.controls[V];ne&&H(ne,V)})}_setUpControls(){this._forEachChild(H=>{H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(H){for(const[V,ne]of Object.entries(this.controls))if(this.contains(V)&&H(ne))return!0;return!1}_reduceValue(){return this._reduceChildren({},(V,ne,tt)=>((ne.enabled||this.disabled)&&(V[tt]=ne.value),V))}_reduceChildren(H,V){let ne=H;return this._forEachChild((tt,_n)=>{ne=V(ne,tt,_n)}),ne}_allControlsDisabled(){for(const H of Object.keys(this.controls))if(this.controls[H].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(H){return this.controls.hasOwnProperty(H)?this.controls[H]:null}}function yi(W,H){bi(W,H),H.valueAccessor.writeValue(W.value),W.disabled&&H.valueAccessor.setDisabledState?.(!0),function Qo(W,H){H.valueAccessor.registerOnChange(V=>{W._pendingValue=V,W._pendingChange=!0,W._pendingDirty=!0,"change"===W.updateOn&&Ps(W,H)})}(W,H),function _s(W,H){const V=(ne,tt)=>{H.valueAccessor.writeValue(ne),tt&&H.viewToModelUpdate(ne)};W.registerOnChange(V),H._registerOnDestroy(()=>{W._unregisterOnChange(V)})}(W,H),function Hn(W,H){H.valueAccessor.registerOnTouched(()=>{W._pendingTouched=!0,"blur"===W.updateOn&&W._pendingChange&&Ps(W,H),"submit"!==W.updateOn&&W.markAsTouched()})}(W,H),function Cs(W,H){if(H.valueAccessor.setDisabledState){const V=ne=>{H.valueAccessor.setDisabledState(ne)};W.registerOnDisabledChange(V),H._registerOnDestroy(()=>{W._unregisterOnDisabledChange(V)})}}(W,H)}function Xn(W,H,V=!0){const ne=()=>{};H.valueAccessor&&(H.valueAccessor.registerOnChange(ne),H.valueAccessor.registerOnTouched(ne)),Zs(W,H),W&&(H._invokeOnDestroyCallbacks(),W._registerOnCollectionChange(()=>{}))}function Ui(W,H){W.forEach(V=>{V.registerOnValidatorChange&&V.registerOnValidatorChange(H)})}function bi(W,H){const V=_i(W);null!==H.validator?W.setValidators(ji(V,H.validator)):"function"==typeof V&&W.setValidators([V]);const ne=tr(W);null!==H.asyncValidator?W.setAsyncValidators(ji(ne,H.asyncValidator)):"function"==typeof ne&&W.setAsyncValidators([ne]);const tt=()=>W.updateValueAndValidity();Ui(H._rawValidators,tt),Ui(H._rawAsyncValidators,tt)}function Zs(W,H){let V=!1;if(null!==W){if(null!==H.validator){const tt=_i(W);if(Array.isArray(tt)&&tt.length>0){const _n=tt.filter(oi=>oi!==H.validator);_n.length!==tt.length&&(V=!0,W.setValidators(_n))}}if(null!==H.asyncValidator){const tt=tr(W);if(Array.isArray(tt)&&tt.length>0){const _n=tt.filter(oi=>oi!==H.asyncValidator);_n.length!==tt.length&&(V=!0,W.setAsyncValidators(_n))}}}const ne=()=>{};return Ui(H._rawValidators,ne),Ui(H._rawAsyncValidators,ne),V}function Ps(W,H){W._pendingDirty&&W.markAsDirty(),W.setValue(W._pendingValue,{emitModelToViewChange:!1}),H.viewToModelUpdate(W._pendingValue),W._pendingChange=!1}function Ls(W,H){bi(W,H)}function Di(W,H){W._syncPendingControls(),H.forEach(V=>{const ne=V.control;"submit"===ne.updateOn&&ne._pendingChange&&(V.viewToModelUpdate(ne._pendingValue),ne._pendingChange=!1)})}const Ma={provide:Or,useExisting:(0,m.Gpc)(()=>mo)},Qs=(()=>Promise.resolve())();let mo=(()=>{class W extends Or{constructor(V,ne){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new m.vpe,this.form=new xe({},bn(V),dr(ne))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(V){Qs.then(()=>{const ne=this._findContainer(V.path);V.control=ne.registerControl(V.name,V.control),yi(V.control,V),V.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(V)})}getControl(V){return this.form.get(V.path)}removeControl(V){Qs.then(()=>{const ne=this._findContainer(V.path);ne&&ne.removeControl(V.name),this._directives.delete(V)})}addFormGroup(V){Qs.then(()=>{const ne=this._findContainer(V.path),tt=new xe({});Ls(tt,V),ne.registerControl(V.name,tt),tt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(V){Qs.then(()=>{const ne=this._findContainer(V.path);ne&&ne.removeControl(V.name)})}getFormGroup(V){return this.form.get(V.path)}updateModel(V,ne){Qs.then(()=>{this.form.get(V.path).setValue(ne)})}setValue(V){this.control.setValue(V)}onSubmit(V){return this.submitted=!0,Di(this.form,this._directives),this.ngSubmit.emit(V),"dialog"===V?.target?.method}onReset(){this.resetForm()}resetForm(V){this.form.reset(V),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(V){return V.pop(),V.length?this.form.get(V):this.form}}return W.\u0275fac=function(V){return new(V||W)(m.Y36(ft,10),m.Y36(Mt,10))},W.\u0275dir=m.lG2({type:W,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(V,ne){1&V&&m.NdJ("submit",function(_n){return ne.onSubmit(_n)})("reset",function(){return ne.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([Ma]),m.qOj]}),W})();function xr(W,H){const V=W.indexOf(H);V>-1&&W.splice(V,1)}function cr(W){return"object"==typeof W&&null!==W&&2===Object.keys(W).length&&"value"in W&&"disabled"in W}const Qr=class extends Re{constructor(H=null,V,ne){super(qs(V),qr(ne,V)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(H),this._setUpdateStrategy(V),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zr(V)&&(V.nonNullable||V.initialValueIsDefault)&&(this.defaultValue=cr(H)?H.value:H)}setValue(H,V={}){this.value=this._pendingValue=H,this._onChange.length&&!1!==V.emitModelToViewChange&&this._onChange.forEach(ne=>ne(this.value,!1!==V.emitViewToModelChange)),this.updateValueAndValidity(V)}patchValue(H,V={}){this.setValue(H,V)}reset(H=this.defaultValue,V={}){this._applyFormState(H),this.markAsPristine(V),this.markAsUntouched(V),this.setValue(this.value,V),this._pendingChange=!1}_updateValue(){}_anyControls(H){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(H){this._onChange.push(H)}_unregisterOnChange(H){xr(this._onChange,H)}registerOnDisabledChange(H){this._onDisabledChange.push(H)}_unregisterOnDisabledChange(H){xr(this._onDisabledChange,H)}_forEachChild(H){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(H){cr(H)?(this.value=this._pendingValue=H.value,H.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=H}};let xa=(()=>{class W{}return W.\u0275fac=function(V){return new(V||W)},W.\u0275dir=m.lG2({type:W,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),W})(),da=(()=>{class W{}return W.\u0275fac=function(V){return new(V||W)},W.\u0275mod=m.oAB({type:W}),W.\u0275inj=m.cJS({}),W})();const Ta={provide:Or,useExisting:(0,m.Gpc)(()=>ta)};let ta=(()=>{class W extends Or{constructor(V,ne){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new m.vpe,this._setValidators(V),this._setAsyncValidators(ne)}ngOnChanges(V){this._checkFormPresent(),V.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Zs(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(V){const ne=this.form.get(V.path);return yi(ne,V),ne.updateValueAndValidity({emitEvent:!1}),this.directives.push(V),ne}getControl(V){return this.form.get(V.path)}removeControl(V){Xn(V.control||null,V,!1),function il(W,H){const V=W.indexOf(H);V>-1&&W.splice(V,1)}(this.directives,V)}addFormGroup(V){this._setUpFormContainer(V)}removeFormGroup(V){this._cleanUpFormContainer(V)}getFormGroup(V){return this.form.get(V.path)}addFormArray(V){this._setUpFormContainer(V)}removeFormArray(V){this._cleanUpFormContainer(V)}getFormArray(V){return this.form.get(V.path)}updateModel(V,ne){this.form.get(V.path).setValue(ne)}onSubmit(V){return this.submitted=!0,Di(this.form,this.directives),this.ngSubmit.emit(V),"dialog"===V?.target?.method}onReset(){this.resetForm()}resetForm(V){this.form.reset(V),this.submitted=!1}_updateDomValue(){this.directives.forEach(V=>{const ne=V.control,tt=this.form.get(V.path);ne!==tt&&(Xn(ne||null,V),(W=>W instanceof Qr)(tt)&&(yi(tt,V),V.control=tt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(V){const ne=this.form.get(V.path);Ls(ne,V),ne.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(V){if(this.form){const ne=this.form.get(V.path);ne&&function Eo(W,H){return Zs(W,H)}(ne,V)&&ne.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){bi(this.form,this),this._oldForm&&Zs(this._oldForm,this)}_checkFormPresent(){}}return W.\u0275fac=function(V){return new(V||W)(m.Y36(ft,10),m.Y36(Mt,10))},W.\u0275dir=m.lG2({type:W,selectors:[["","formGroup",""]],hostBindings:function(V,ne){1&V&&m.NdJ("submit",function(_n){return ne.onSubmit(_n)})("reset",function(){return ne.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([Ta]),m.qOj,m.TTD]}),W})(),go=(()=>{class W{}return W.\u0275fac=function(V){return new(V||W)},W.\u0275mod=m.oAB({type:W}),W.\u0275inj=m.cJS({imports:[da]}),W})(),La=(()=>{class W{}return W.\u0275fac=function(V){return new(V||W)},W.\u0275mod=m.oAB({type:W}),W.\u0275inj=m.cJS({imports:[go]}),W})()},1481:(gn,it,K)=>{"use strict";K.d(it,{Dx:()=>kr,H7:()=>fr,b2:()=>Or,q6:()=>vr,se:()=>Ge});var m=K(6895),b=K(1571);class X extends m.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Me extends X{static makeCurrent(){(0,m.HT)(new Me)}onAndCancel(xe,de,Pe){return xe.addEventListener(de,Pe,!1),()=>{xe.removeEventListener(de,Pe,!1)}}dispatchEvent(xe,de){xe.dispatchEvent(de)}remove(xe){xe.parentNode&&xe.parentNode.removeChild(xe)}createElement(xe,de){return(de=de||this.getDefaultDocument()).createElement(xe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(xe){return xe.nodeType===Node.ELEMENT_NODE}isShadowRoot(xe){return xe instanceof DocumentFragment}getGlobalEventTarget(xe,de){return"window"===de?window:"document"===de?xe:"body"===de?xe.body:null}getBaseHref(xe){const de=function Oe(){return ye=ye||document.querySelector("base"),ye?ye.getAttribute("href"):null}();return null==de?null:function st(Re){Ae=Ae||document.createElement("a"),Ae.setAttribute("href",Re);const xe=Ae.pathname;return"/"===xe.charAt(0)?xe:`/${xe}`}(de)}resetBaseElement(){ye=null}getUserAgent(){return window.navigator.userAgent}getCookie(xe){return(0,m.Mx)(document.cookie,xe)}}let Ae,ye=null;const qe=new b.OlP("TRANSITION_ID"),$e=[{provide:b.ip1,useFactory:function je(Re,xe,de){return()=>{de.get(b.CZH).donePromise.then(()=>{const Pe=(0,m.q)(),Ie=xe.querySelectorAll(`style[ng-transition="${Re}"]`);for(let Nt=0;Nt<Ie.length;Nt++)Pe.remove(Ie[Nt])})}},deps:[qe,m.K0,b.zs3],multi:!0}];let tn=(()=>{class Re{build(){return new XMLHttpRequest}}return Re.\u0275fac=function(de){return new(de||Re)},Re.\u0275prov=b.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const Ct=new b.OlP("EventManagerPlugins");let mt=(()=>{class Re{constructor(de,Pe){this._zone=Pe,this._eventNameToPlugin=new Map,de.forEach(Ie=>Ie.manager=this),this._plugins=de.slice().reverse()}addEventListener(de,Pe,Ie){return this._findPluginFor(Pe).addEventListener(de,Pe,Ie)}addGlobalEventListener(de,Pe,Ie){return this._findPluginFor(Pe).addGlobalEventListener(de,Pe,Ie)}getZone(){return this._zone}_findPluginFor(de){const Pe=this._eventNameToPlugin.get(de);if(Pe)return Pe;const Ie=this._plugins;for(let Nt=0;Nt<Ie.length;Nt++){const an=Ie[Nt];if(an.supports(de))return this._eventNameToPlugin.set(de,an),an}throw new Error(`No event manager plugin found for event ${de}`)}}return Re.\u0275fac=function(de){return new(de||Re)(b.LFG(Ct),b.LFG(b.R0b))},Re.\u0275prov=b.Yz7({token:Re,factory:Re.\u0275fac}),Re})();class Et{constructor(xe){this._doc=xe}addGlobalEventListener(xe,de,Pe){const Ie=(0,m.q)().getGlobalEventTarget(this._doc,xe);if(!Ie)throw new Error(`Unsupported event target ${Ie} for event ${de}`);return this.addEventListener(Ie,de,Pe)}}let Yt=(()=>{class Re{constructor(){this._stylesSet=new Set}addStyles(de){const Pe=new Set;de.forEach(Ie=>{this._stylesSet.has(Ie)||(this._stylesSet.add(Ie),Pe.add(Ie))}),this.onStylesAdded(Pe)}onStylesAdded(de){}getAllStyles(){return Array.from(this._stylesSet)}}return Re.\u0275fac=function(de){return new(de||Re)},Re.\u0275prov=b.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),Dn=(()=>{class Re extends Yt{constructor(de){super(),this._doc=de,this._hostNodes=new Map,this._hostNodes.set(de.head,[])}_addStylesToHost(de,Pe,Ie){de.forEach(Nt=>{const an=this._doc.createElement("style");an.textContent=Nt,Ie.push(Pe.appendChild(an))})}addHost(de){const Pe=[];this._addStylesToHost(this._stylesSet,de,Pe),this._hostNodes.set(de,Pe)}removeHost(de){const Pe=this._hostNodes.get(de);Pe&&Pe.forEach(Gt),this._hostNodes.delete(de)}onStylesAdded(de){this._hostNodes.forEach((Pe,Ie)=>{this._addStylesToHost(de,Ie,Pe)})}ngOnDestroy(){this._hostNodes.forEach(de=>de.forEach(Gt))}}return Re.\u0275fac=function(de){return new(de||Re)(b.LFG(m.K0))},Re.\u0275prov=b.Yz7({token:Re,factory:Re.\u0275fac}),Re})();function Gt(Re){(0,m.q)().remove(Re)}const ei={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ue=/%COMP%/g;function Fe(Re,xe,de){for(let Pe=0;Pe<xe.length;Pe++){let Ie=xe[Pe];Array.isArray(Ie)?Fe(Re,Ie,de):(Ie=Ie.replace(Ue,Re),de.push(Ie))}return de}function ke(Re){return xe=>{if("__ngUnwrap__"===xe)return Re;!1===Re(xe)&&(xe.preventDefault(),xe.returnValue=!1)}}let Ge=(()=>{class Re{constructor(de,Pe,Ie){this.eventManager=de,this.sharedStylesHost=Pe,this.appId=Ie,this.rendererByCompId=new Map,this.defaultRenderer=new Vt(de)}createRenderer(de,Pe){if(!de||!Pe)return this.defaultRenderer;switch(Pe.encapsulation){case b.ifc.Emulated:{let Ie=this.rendererByCompId.get(Pe.id);return Ie||(Ie=new ar(this.eventManager,this.sharedStylesHost,Pe,this.appId),this.rendererByCompId.set(Pe.id,Ie)),Ie.applyToHost(de),Ie}case 1:case b.ifc.ShadowDom:return new Wn(this.eventManager,this.sharedStylesHost,de,Pe);default:if(!this.rendererByCompId.has(Pe.id)){const Ie=Fe(Pe.id,Pe.styles,[]);this.sharedStylesHost.addStyles(Ie),this.rendererByCompId.set(Pe.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Re.\u0275fac=function(de){return new(de||Re)(b.LFG(mt),b.LFG(Dn),b.LFG(b.AFp))},Re.\u0275prov=b.Yz7({token:Re,factory:Re.\u0275fac}),Re})();class Vt{constructor(xe){this.eventManager=xe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(xe,de){return de?document.createElementNS(ei[de]||de,xe):document.createElement(xe)}createComment(xe){return document.createComment(xe)}createText(xe){return document.createTextNode(xe)}appendChild(xe,de){(Li(xe)?xe.content:xe).appendChild(de)}insertBefore(xe,de,Pe){xe&&(Li(xe)?xe.content:xe).insertBefore(de,Pe)}removeChild(xe,de){xe&&xe.removeChild(de)}selectRootElement(xe,de){let Pe="string"==typeof xe?document.querySelector(xe):xe;if(!Pe)throw new Error(`The selector "${xe}" did not match any elements`);return de||(Pe.textContent=""),Pe}parentNode(xe){return xe.parentNode}nextSibling(xe){return xe.nextSibling}setAttribute(xe,de,Pe,Ie){if(Ie){de=Ie+":"+de;const Nt=ei[Ie];Nt?xe.setAttributeNS(Nt,de,Pe):xe.setAttribute(de,Pe)}else xe.setAttribute(de,Pe)}removeAttribute(xe,de,Pe){if(Pe){const Ie=ei[Pe];Ie?xe.removeAttributeNS(Ie,de):xe.removeAttribute(`${Pe}:${de}`)}else xe.removeAttribute(de)}addClass(xe,de){xe.classList.add(de)}removeClass(xe,de){xe.classList.remove(de)}setStyle(xe,de,Pe,Ie){Ie&(b.JOm.DashCase|b.JOm.Important)?xe.style.setProperty(de,Pe,Ie&b.JOm.Important?"important":""):xe.style[de]=Pe}removeStyle(xe,de,Pe){Pe&b.JOm.DashCase?xe.style.removeProperty(de):xe.style[de]=""}setProperty(xe,de,Pe){xe[de]=Pe}setValue(xe,de){xe.nodeValue=de}listen(xe,de,Pe){return"string"==typeof xe?this.eventManager.addGlobalEventListener(xe,de,ke(Pe)):this.eventManager.addEventListener(xe,de,ke(Pe))}}function Li(Re){return"TEMPLATE"===Re.tagName&&void 0!==Re.content}class ar extends Vt{constructor(xe,de,Pe,Ie){super(xe),this.component=Pe;const Nt=Fe(Ie+"-"+Pe.id,Pe.styles,[]);de.addStyles(Nt),this.contentAttr=function Mt(Re){return"_ngcontent-%COMP%".replace(Ue,Re)}(Ie+"-"+Pe.id),this.hostAttr=function kt(Re){return"_nghost-%COMP%".replace(Ue,Re)}(Ie+"-"+Pe.id)}applyToHost(xe){super.setAttribute(xe,this.hostAttr,"")}createElement(xe,de){const Pe=super.createElement(xe,de);return super.setAttribute(Pe,this.contentAttr,""),Pe}}class Wn extends Vt{constructor(xe,de,Pe,Ie){super(xe),this.sharedStylesHost=de,this.hostEl=Pe,this.shadowRoot=Pe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Nt=Fe(Ie.id,Ie.styles,[]);for(let an=0;an<Nt.length;an++){const yi=document.createElement("style");yi.textContent=Nt[an],this.shadowRoot.appendChild(yi)}}nodeOrShadowRoot(xe){return xe===this.hostEl?this.shadowRoot:xe}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(xe,de){return super.appendChild(this.nodeOrShadowRoot(xe),de)}insertBefore(xe,de,Pe){return super.insertBefore(this.nodeOrShadowRoot(xe),de,Pe)}removeChild(xe,de){return super.removeChild(this.nodeOrShadowRoot(xe),de)}parentNode(xe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(xe)))}}let yr=(()=>{class Re extends Et{constructor(de){super(de)}supports(de){return!0}addEventListener(de,Pe,Ie){return de.addEventListener(Pe,Ie,!1),()=>this.removeEventListener(de,Pe,Ie)}removeEventListener(de,Pe,Ie){return de.removeEventListener(Pe,Ie)}}return Re.\u0275fac=function(de){return new(de||Re)(b.LFG(m.K0))},Re.\u0275prov=b.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const ps=["alt","control","meta","shift"],lt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pt={alt:Re=>Re.altKey,control:Re=>Re.ctrlKey,meta:Re=>Re.metaKey,shift:Re=>Re.shiftKey};let Be=(()=>{class Re extends Et{constructor(de){super(de)}supports(de){return null!=Re.parseEventName(de)}addEventListener(de,Pe,Ie){const Nt=Re.parseEventName(Pe),an=Re.eventCallback(Nt.fullKey,Ie,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,m.q)().onAndCancel(de,Nt.domEventName,an))}static parseEventName(de){const Pe=de.toLowerCase().split("."),Ie=Pe.shift();if(0===Pe.length||"keydown"!==Ie&&"keyup"!==Ie)return null;const Nt=Re._normalizeKey(Pe.pop());let an="",yi=Pe.indexOf("code");if(yi>-1&&(Pe.splice(yi,1),an="code."),ps.forEach(Ui=>{const Cs=Pe.indexOf(Ui);Cs>-1&&(Pe.splice(Cs,1),an+=Ui+".")}),an+=Nt,0!=Pe.length||0===Nt.length)return null;const Xn={};return Xn.domEventName=Ie,Xn.fullKey=an,Xn}static matchEventFullKeyCode(de,Pe){let Ie=lt[de.key]||de.key,Nt="";return Pe.indexOf("code.")>-1&&(Ie=de.code,Nt="code."),!(null==Ie||!Ie)&&(Ie=Ie.toLowerCase()," "===Ie?Ie="space":"."===Ie&&(Ie="dot"),ps.forEach(an=>{an!==Ie&&(0,pt[an])(de)&&(Nt+=an+".")}),Nt+=Ie,Nt===Pe)}static eventCallback(de,Pe,Ie){return Nt=>{Re.matchEventFullKeyCode(Nt,de)&&Ie.runGuarded(()=>Pe(Nt))}}static _normalizeKey(de){return"esc"===de?"escape":de}}return Re.\u0275fac=function(de){return new(de||Re)(b.LFG(m.K0))},Re.\u0275prov=b.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const vr=(0,b.eFA)(b._c5,"browser",[{provide:b.Lbi,useValue:m.bD},{provide:b.g9A,useValue:function ji(){Me.makeCurrent()},multi:!0},{provide:m.K0,useFactory:function tr(){return(0,b.RDi)(document),document},deps:[]}]),ms=new b.OlP(""),Ai=[{provide:b.rWj,useClass:class ot{addToWindow(xe){b.dqk.getAngularTestability=(Pe,Ie=!0)=>{const Nt=xe.findTestabilityInTree(Pe,Ie);if(null==Nt)throw new Error("Could not find testability for element.");return Nt},b.dqk.getAllAngularTestabilities=()=>xe.getAllTestabilities(),b.dqk.getAllAngularRootElements=()=>xe.getAllRootElements(),b.dqk.frameworkStabilizers||(b.dqk.frameworkStabilizers=[]),b.dqk.frameworkStabilizers.push(Pe=>{const Ie=b.dqk.getAllAngularTestabilities();let Nt=Ie.length,an=!1;const yi=function(Xn){an=an||Xn,Nt--,0==Nt&&Pe(an)};Ie.forEach(function(Xn){Xn.whenStable(yi)})})}findTestabilityInTree(xe,de,Pe){return null==de?null:xe.getTestability(de)??(Pe?(0,m.q)().isShadowRoot(de)?this.findTestabilityInTree(xe,de.host,!0):this.findTestabilityInTree(xe,de.parentElement,!0):null)}},deps:[]},{provide:b.lri,useClass:b.dDg,deps:[b.R0b,b.eoX,b.rWj]},{provide:b.dDg,useClass:b.dDg,deps:[b.R0b,b.eoX,b.rWj]}],Ir=[{provide:b.zSh,useValue:"root"},{provide:b.qLn,useFactory:function _i(){return new b.qLn},deps:[]},{provide:Ct,useClass:yr,multi:!0,deps:[m.K0,b.R0b,b.Lbi]},{provide:Ct,useClass:Be,multi:!0,deps:[m.K0]},{provide:Ge,useClass:Ge,deps:[mt,Dn,b.AFp]},{provide:b.FYo,useExisting:Ge},{provide:Yt,useExisting:Dn},{provide:Dn,useClass:Dn,deps:[m.K0]},{provide:mt,useClass:mt,deps:[Ct,b.R0b]},{provide:m.JF,useClass:tn,deps:[]},[]];let Or=(()=>{class Re{constructor(de){}static withServerTransition(de){return{ngModule:Re,providers:[{provide:b.AFp,useValue:de.appId},{provide:qe,useExisting:b.AFp},$e]}}}return Re.\u0275fac=function(de){return new(de||Re)(b.LFG(ms,12))},Re.\u0275mod=b.oAB({type:Re}),Re.\u0275inj=b.cJS({providers:[...Ir,...Ai],imports:[m.ez,b.hGG]}),Re})(),kr=(()=>{class Re{constructor(de){this._doc=de}getTitle(){return this._doc.title}setTitle(de){this._doc.title=de||""}}return Re.\u0275fac=function(de){return new(de||Re)(b.LFG(m.K0))},Re.\u0275prov=b.Yz7({token:Re,factory:function(de){let Pe=null;return Pe=de?new de:function Jo(){return new kr((0,b.LFG)(m.K0))}(),Pe},providedIn:"root"}),Re})();typeof window<"u"&&window;let fr=(()=>{class Re{}return Re.\u0275fac=function(de){return new(de||Re)},Re.\u0275prov=b.Yz7({token:Re,factory:function(de){let Pe=null;return Pe=de?new(de||Re):b.LFG(hi),Pe},providedIn:"root"}),Re})(),hi=(()=>{class Re extends fr{constructor(de){super(),this._doc=de}sanitize(de,Pe){if(null==Pe)return null;switch(de){case b.q3G.NONE:return Pe;case b.q3G.HTML:return(0,b.qzn)(Pe,"HTML")?(0,b.z3N)(Pe):(0,b.EiD)(this._doc,String(Pe)).toString();case b.q3G.STYLE:return(0,b.qzn)(Pe,"Style")?(0,b.z3N)(Pe):Pe;case b.q3G.SCRIPT:if((0,b.qzn)(Pe,"Script"))return(0,b.z3N)(Pe);throw new Error("unsafe value used in a script context");case b.q3G.URL:return(0,b.qzn)(Pe,"URL")?(0,b.z3N)(Pe):(0,b.mCW)(String(Pe));case b.q3G.RESOURCE_URL:if((0,b.qzn)(Pe,"ResourceURL"))return(0,b.z3N)(Pe);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${de} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(de){return(0,b.JVY)(de)}bypassSecurityTrustStyle(de){return(0,b.L6k)(de)}bypassSecurityTrustScript(de){return(0,b.eBb)(de)}bypassSecurityTrustUrl(de){return(0,b.LAX)(de)}bypassSecurityTrustResourceUrl(de){return(0,b.pB0)(de)}}return Re.\u0275fac=function(de){return new(de||Re)(b.LFG(m.K0))},Re.\u0275prov=b.Yz7({token:Re,factory:function(de){let Pe=null;return Pe=de?new de:function Zr(Re){return new hi(Re.get(m.K0))}(b.LFG(b.zs3)),Pe},providedIn:"root"}),Re})()},9347:(gn,it,K)=>{"use strict";K.d(it,{F0:()=>ns,Od:()=>Pu,yS:()=>ic,Bz:()=>aa,lC:()=>Ia});var m=K(1571),b=K(2076),X=K(9646),Me=K(1135);const Oe=(0,K(3888).d)(D=>function(){D(this),this.name="EmptyError",this.message="no elements in sequence"});var Ae=K(9841),st=K(7272),qe=K(9770),je=K(9635),$e=K(9751),ot=K(576);function tn(D,A){const x=(0,ot.m)(D)?D:()=>D,k=G=>G.error(x());return new $e.y(A?G=>A.schedule(k,0,G):k)}var Ct=K(515),mt=K(727),Et=K(4482),Yt=K(5403);function Dn(){return(0,Et.e)((D,A)=>{let x=null;D._refCount++;const k=(0,Yt.x)(A,void 0,void 0,void 0,()=>{if(!D||D._refCount<=0||0<--D._refCount)return void(x=null);const G=D._connection,Q=x;x=null,G&&(!Q||G===Q)&&G.unsubscribe(),A.unsubscribe()});D.subscribe(k),k.closed||(x=D.connect())})}class Gt extends $e.y{constructor(A,x){super(),this.source=A,this.subjectFactory=x,this._subject=null,this._refCount=0,this._connection=null,(0,Et.A)(A)&&(this.lift=A.lift)}_subscribe(A){return this.getSubject().subscribe(A)}getSubject(){const A=this._subject;return(!A||A.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:A}=this;this._subject=this._connection=null,A?.unsubscribe()}connect(){let A=this._connection;if(!A){A=this._connection=new mt.w0;const x=this.getSubject();A.add(this.source.subscribe((0,Yt.x)(x,void 0,()=>{this._teardown(),x.complete()},k=>{this._teardown(),x.error(k)},()=>this._teardown()))),A.closed&&(this._connection=null,A=mt.w0.EMPTY)}return A}refCount(){return Dn()(this)}}var ei=K(7579),Ue=K(6895),ve=K(4004),xt=K(3900),Dt=K(5698),ft=K(8675),Mt=K(9300),kt=K(5577);function Fe(D){return(0,Et.e)((A,x)=>{let k=!1;A.subscribe((0,Yt.x)(x,G=>{k=!0,x.next(G)},()=>{k||x.next(D),x.complete()}))})}function ke(D=at){return(0,Et.e)((A,x)=>{let k=!1;A.subscribe((0,Yt.x)(x,G=>{k=!0,x.next(G)},()=>k?x.complete():x.error(D())))})}function at(){return new Oe}var Ge=K(4671);function Vt(D,A){const x=arguments.length>=2;return k=>k.pipe(D?(0,Mt.h)((G,Q)=>D(G,Q,k)):Ge.y,(0,Dt.q)(1),x?Fe(A):ke(()=>new Oe))}var Bt=K(4351),Mn=K(8505),Li=K(8421);function ar(D){return(0,Et.e)((A,x)=>{let Q,k=null,G=!1;k=A.subscribe((0,Yt.x)(x,void 0,void 0,ue=>{Q=(0,Li.Xf)(D(ue,ar(D)(A))),k?(k.unsubscribe(),k=null,Q.subscribe(x)):G=!0})),G&&(k.unsubscribe(),k=null,Q.subscribe(x))})}function Wn(D,A,x,k,G){return(Q,ue)=>{let ge=x,Ze=A,jt=0;Q.subscribe((0,Yt.x)(ue,Zn=>{const pn=jt++;Ze=ge?D(Ze,Zn,pn):(ge=!0,Zn),k&&ue.next(Ze)},G&&(()=>{ge&&ue.next(Ze),ue.complete()})))}}function yr(D,A){return(0,Et.e)(Wn(D,A,arguments.length>=2,!0))}function ps(D){return D<=0?()=>Ct.E:(0,Et.e)((A,x)=>{let k=[];A.subscribe((0,Yt.x)(x,G=>{k.push(G),D<k.length&&k.shift()},()=>{for(const G of k)x.next(G);x.complete()},void 0,()=>{k=null}))})}function lt(D,A){const x=arguments.length>=2;return k=>k.pipe(D?(0,Mt.h)((G,Q)=>D(G,Q,k)):Ge.y,ps(1),x?Fe(A):ke(()=>new Oe))}var pt=K(2529),Be=K(9718);function We(D){return(0,Et.e)((A,x)=>{try{A.subscribe(x)}finally{x.add(D)}})}var Xt=K(8189),bn=K(1481);const On="primary",dr=Symbol("RouteTitle");class ji{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const x=this.params[A];return Array.isArray(x)?x[0]:x}return null}getAll(A){if(this.has(A)){const x=this.params[A];return Array.isArray(x)?x:[x]}return[]}get keys(){return Object.keys(this.params)}}function _i(D){return new ji(D)}function tr(D,A,x){const k=x.path.split("/");if(k.length>D.length||"full"===x.pathMatch&&(A.hasChildren()||k.length<D.length))return null;const G={};for(let Q=0;Q<k.length;Q++){const ue=k[Q],ge=D[Q];if(ue.startsWith(":"))G[ue.substring(1)]=ge;else if(ue!==ge.path)return null}return{consumed:D.slice(0,k.length),posParams:G}}function vr(D,A){const x=D?Object.keys(D):void 0,k=A?Object.keys(A):void 0;if(!x||!k||x.length!=k.length)return!1;let G;for(let Q=0;Q<x.length;Q++)if(G=x[Q],!ms(D[G],A[G]))return!1;return!0}function ms(D,A){if(Array.isArray(D)&&Array.isArray(A)){if(D.length!==A.length)return!1;const x=[...D].sort(),k=[...A].sort();return x.every((G,Q)=>k[Q]===G)}return D===A}function Ai(D){return Array.prototype.concat.apply([],D)}function Ir(D){return D.length>0?D[D.length-1]:null}function Mi(D,A){for(const x in D)D.hasOwnProperty(x)&&A(D[x],x)}function vn(D){return(0,m.CqO)(D)?D:(0,m.QGY)(D)?(0,b.D)(Promise.resolve(D)):(0,X.of)(D)}const kr={exact:function ls(D,A,x){if(!lr(D.segments,A.segments)||!vi(D.segments,A.segments,x)||D.numberOfChildren!==A.numberOfChildren)return!1;for(const k in A.children)if(!D.children[k]||!ls(D.children[k],A.children[k],x))return!1;return!0},subset:Cr},Yi={exact:function Pn(D,A){return vr(D,A)},subset:function Xs(D,A){return Object.keys(A).length<=Object.keys(D).length&&Object.keys(A).every(x=>ms(D[x],A[x]))},ignored:()=>!0};function Rn(D,A,x){return kr[x.paths](D.root,A.root,x.matrixParams)&&Yi[x.queryParams](D.queryParams,A.queryParams)&&!("exact"===x.fragment&&D.fragment!==A.fragment)}function Cr(D,A,x){return Wr(D,A,A.segments,x)}function Wr(D,A,x,k){if(D.segments.length>x.length){const G=D.segments.slice(0,x.length);return!(!lr(G,x)||A.hasChildren()||!vi(G,x,k))}if(D.segments.length===x.length){if(!lr(D.segments,x)||!vi(D.segments,x,k))return!1;for(const G in A.children)if(!D.children[G]||!Cr(D.children[G],A.children[G],k))return!1;return!0}{const G=x.slice(0,D.segments.length),Q=x.slice(D.segments.length);return!!(lr(D.segments,G)&&vi(D.segments,G,k)&&D.children[On])&&Wr(D.children[On],A,Q,k)}}function vi(D,A,x){return A.every((k,G)=>Yi[x](D[G].parameters,k.parameters))}class Os{constructor(A,x,k){this.root=A,this.queryParams=x,this.fragment=k}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_i(this.queryParams)),this._queryParamMap}toString(){return Ur.serialize(this)}}class wn{constructor(A,x){this.segments=A,this.children=x,this.parent=null,Mi(x,(k,G)=>k.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $r(this)}}class Xi{constructor(A,x){this.path=A,this.parameters=x}get parameterMap(){return this._parameterMap||(this._parameterMap=_i(this.parameters)),this._parameterMap}toString(){return qr(this)}}function lr(D,A){return D.length===A.length&&D.every((x,k)=>x.path===A[k].path)}let hr=(()=>{class D{}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=m.Yz7({token:D,factory:function(){return new Br},providedIn:"root"}),D})();class Br{parse(A){const x=new Ie(A);return new Os(x.parseRootSegment(),x.parseQueryParams(),x.parseFragment())}serialize(A){const x=`/${Vr(A.root,!0)}`,k=function Zr(D){const A=Object.keys(D).map(x=>{const k=D[x];return Array.isArray(k)?k.map(G=>`${Xr(x)}=${Xr(G)}`).join("&"):`${Xr(x)}=${Xr(k)}`}).filter(x=>!!x);return A.length?`?${A.join("&")}`:""}(A.queryParams);return`${x}${k}${"string"==typeof A.fragment?`#${function Ns(D){return encodeURI(D)}(A.fragment)}`:""}`}}const Ur=new Br;function $r(D){return D.segments.map(A=>qr(A)).join("/")}function Vr(D,A){if(!D.hasChildren())return $r(D);if(A){const x=D.children[On]?Vr(D.children[On],!1):"",k=[];return Mi(D.children,(G,Q)=>{Q!==On&&k.push(`${Q}:${Vr(G,!1)}`)}),k.length>0?`${x}(${k.join("//")})`:x}{const x=function Ss(D,A){let x=[];return Mi(D.children,(k,G)=>{G===On&&(x=x.concat(A(k,G)))}),Mi(D.children,(k,G)=>{G!==On&&(x=x.concat(A(k,G)))}),x}(D,(k,G)=>G===On?[Vr(D.children[On],!1)]:[`${G}:${Vr(k,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[On]?`${$r(D)}/${x[0]}`:`${$r(D)}/(${x.join("//")})`}}function Yr(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xr(D){return Yr(D).replace(/%3B/gi,";")}function br(D){return Yr(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qs(D){return decodeURIComponent(D)}function gs(D){return qs(D.replace(/\+/g,"%20"))}function qr(D){return`${br(D.path)}${function fr(D){return Object.keys(D).map(A=>`;${br(A)}=${br(D[A])}`).join("")}(D.parameters)}`}const hi=/^[^\/()?;=#]+/;function Ji(D){const A=D.match(hi);return A?A[0]:""}const Re=/^[^=?&#]+/,de=/^[^&#]+/;class Ie{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wn([],{}):new wn([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let x={};this.peekStartsWith("/(")&&(this.capture("/"),x=this.parseParens(!0));let k={};return this.peekStartsWith("(")&&(k=this.parseParens(!1)),(A.length>0||Object.keys(x).length>0)&&(k[On]=new wn(A,x)),k}parseSegment(){const A=Ji(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new m.vHH(4009,!1);return this.capture(A),new Xi(qs(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const x=Ji(this.remaining);if(!x)return;this.capture(x);let k="";if(this.consumeOptional("=")){const G=Ji(this.remaining);G&&(k=G,this.capture(k))}A[qs(x)]=qs(k)}parseQueryParam(A){const x=function xe(D){const A=D.match(Re);return A?A[0]:""}(this.remaining);if(!x)return;this.capture(x);let k="";if(this.consumeOptional("=")){const ue=function Pe(D){const A=D.match(de);return A?A[0]:""}(this.remaining);ue&&(k=ue,this.capture(k))}const G=gs(x),Q=gs(k);if(A.hasOwnProperty(G)){let ue=A[G];Array.isArray(ue)||(ue=[ue],A[G]=ue),ue.push(Q)}else A[G]=Q}parseParens(A){const x={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const k=Ji(this.remaining),G=this.remaining[k.length];if("/"!==G&&")"!==G&&";"!==G)throw new m.vHH(4010,!1);let Q;k.indexOf(":")>-1?(Q=k.slice(0,k.indexOf(":")),this.capture(Q),this.capture(":")):A&&(Q=On);const ue=this.parseChildren();x[Q]=1===Object.keys(ue).length?ue[On]:new wn([],ue),this.consumeOptional("//")}return x}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new m.vHH(4011,!1)}}function Nt(D){return D.segments.length>0?new wn([],{[On]:D}):D}function an(D){const A={};for(const k of Object.keys(D.children)){const Q=an(D.children[k]);(Q.segments.length>0||Q.hasChildren())&&(A[k]=Q)}return function yi(D){if(1===D.numberOfChildren&&D.children[On]){const A=D.children[On];return new wn(D.segments.concat(A.segments),A.children)}return D}(new wn(D.segments,A))}function Xn(D){return D instanceof Os}function Qo(D,A,x,k,G){if(0===x.length)return _s(A.root,A.root,A.root,k,G);const Q=function Kr(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new Eo(!0,0,D);let A=0,x=!1;const k=D.reduce((G,Q,ue)=>{if("object"==typeof Q&&null!=Q){if(Q.outlets){const ge={};return Mi(Q.outlets,(Ze,jt)=>{ge[jt]="string"==typeof Ze?Ze.split("/"):Ze}),[...G,{outlets:ge}]}if(Q.segmentPath)return[...G,Q.segmentPath]}return"string"!=typeof Q?[...G,Q]:0===ue?(Q.split("/").forEach((ge,Ze)=>{0==Ze&&"."===ge||(0==Ze&&""===ge?x=!0:".."===ge?A++:""!=ge&&G.push(ge))}),G):[...G,Q]},[]);return new Eo(x,A,k)}(x);return Q.toRoot()?_s(A.root,A.root,new wn([],{}),k,G):function ue(Ze){const jt=function vs(D,A,x,k){if(D.isAbsolute)return new Ks(A.root,!0,0);if(-1===k)return new Ks(x,x===A.root,0);return function Jr(D,A,x){let k=D,G=A,Q=x;for(;Q>G;){if(Q-=G,k=k.parent,!k)throw new m.vHH(4005,!1);G=k.segments.length}return new Ks(k,!1,G-Q)}(x,k+(Hn(D.commands[0])?0:1),D.numberOfDoubleDots)}(Q,A,D.snapshot?._urlSegment,Ze),Zn=jt.processChildren?Js(jt.segmentGroup,jt.index,Q.commands):Di(jt.segmentGroup,jt.index,Q.commands);return _s(A.root,jt.segmentGroup,Zn,k,G)}(D.snapshot?._lastPathIndex)}function Hn(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function Ps(D){return"object"==typeof D&&null!=D&&D.outlets}function _s(D,A,x,k,G){let ue,Q={};k&&Mi(k,(Ze,jt)=>{Q[jt]=Array.isArray(Ze)?Ze.map(Zn=>`${Zn}`):`${Ze}`}),ue=D===A?x:Ls(D,A,x);const ge=Nt(an(ue));return new Os(ge,Q,G)}function Ls(D,A,x){const k={};return Mi(D.children,(G,Q)=>{k[Q]=G===A?x:Ls(G,A,x)}),new wn(D.segments,k)}class Eo{constructor(A,x,k){if(this.isAbsolute=A,this.numberOfDoubleDots=x,this.commands=k,A&&k.length>0&&Hn(k[0]))throw new m.vHH(4003,!1);const G=k.find(Ps);if(G&&G!==Ir(k))throw new m.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ks{constructor(A,x,k){this.segmentGroup=A,this.processChildren=x,this.index=k}}function Di(D,A,x){if(D||(D=new wn([],{})),0===D.segments.length&&D.hasChildren())return Js(D,A,x);const k=function il(D,A,x){let k=0,G=A;const Q={match:!1,pathIndex:0,commandIndex:0};for(;G<D.segments.length;){if(k>=x.length)return Q;const ue=D.segments[G],ge=x[k];if(Ps(ge))break;const Ze=`${ge}`,jt=k<x.length-1?x[k+1]:null;if(G>0&&void 0===Ze)break;if(Ze&&jt&&"object"==typeof jt&&void 0===jt.outlets){if(!mo(Ze,jt,ue))return Q;k+=2}else{if(!mo(Ze,{},ue))return Q;k++}G++}return{match:!0,pathIndex:G,commandIndex:k}}(D,A,x),G=x.slice(k.commandIndex);if(k.match&&k.pathIndex<D.segments.length){const Q=new wn(D.segments.slice(0,k.pathIndex),{});return Q.children[On]=new wn(D.segments.slice(k.pathIndex),D.children),Js(Q,0,G)}return k.match&&0===G.length?new wn(D.segments,{}):k.match&&!D.hasChildren()?ua(D,A,x):k.match?Js(D,0,G):ua(D,A,x)}function Js(D,A,x){if(0===x.length)return new wn(D.segments,{});{const k=function Ea(D){return Ps(D[0])?D[0].outlets:{[On]:D}}(x),G={};return Mi(k,(Q,ue)=>{"string"==typeof Q&&(Q=[Q]),null!==Q&&(G[ue]=Di(D.children[ue],A,Q))}),Mi(D.children,(Q,ue)=>{void 0===k[ue]&&(G[ue]=Q)}),new wn(D.segments,G)}}function ua(D,A,x){const k=D.segments.slice(0,A);let G=0;for(;G<x.length;){const Q=x[G];if(Ps(Q)){const Ze=Ma(Q.outlets);return new wn(k,Ze)}if(0===G&&Hn(x[0])){k.push(new Xi(D.segments[A].path,Qs(x[0]))),G++;continue}const ue=Ps(Q)?Q.outlets[On]:`${Q}`,ge=G<x.length-1?x[G+1]:null;ue&&ge&&Hn(ge)?(k.push(new Xi(ue,Qs(ge))),G+=2):(k.push(new Xi(ue,{})),G++)}return new wn(k,{})}function Ma(D){const A={};return Mi(D,(x,k)=>{"string"==typeof x&&(x=[x]),null!==x&&(A[k]=ua(new wn([],{}),0,x))}),A}function Qs(D){const A={};return Mi(D,(x,k)=>A[k]=`${x}`),A}function mo(D,A,x){return D==x.path&&vr(A,x.parameters)}class xr{constructor(A,x){this.id=A,this.url=x}}class cr extends xr{constructor(A,x,k="imperative",G=null){super(A,x),this.type=0,this.navigationTrigger=k,this.restoredState=G}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qr extends xr{constructor(A,x,k){super(A,x),this.urlAfterRedirects=k,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wr extends xr{constructor(A,x,k,G){super(A,x),this.reason=k,this.code=G,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ys extends xr{constructor(A,x,k,G){super(A,x),this.error=k,this.target=G,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Mo extends xr{constructor(A,x,k,G){super(A,x),this.urlAfterRedirects=k,this.state=G,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rl extends xr{constructor(A,x,k,G){super(A,x),this.urlAfterRedirects=k,this.state=G,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sl extends xr{constructor(A,x,k,G,Q){super(A,x),this.urlAfterRedirects=k,this.state=G,this.shouldActivate=Q,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xs extends xr{constructor(A,x,k,G){super(A,x),this.urlAfterRedirects=k,this.state=G,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Du extends xr{constructor(A,x,k,G){super(A,x),this.urlAfterRedirects=k,this.state=G,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eo{constructor(A){this.route=A,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ol{constructor(A){this.route=A,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sa{constructor(A){this.snapshot=A,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ca{constructor(A){this.snapshot=A,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class al{constructor(A){this.snapshot=A,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xa{constructor(A){this.snapshot=A,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ic{constructor(A,x,k){this.routerEvent=A,this.position=x,this.anchor=k,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Oc{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const x=this.pathFromRoot(A);return x.length>1?x[x.length-2]:null}children(A){const x=Nc(A,this._root);return x?x.children.map(k=>k.value):[]}firstChild(A){const x=Nc(A,this._root);return x&&x.children.length>0?x.children[0].value:null}siblings(A){const x=da(A,this._root);return x.length<2?[]:x[x.length-2].children.map(G=>G.value).filter(G=>G!==A)}pathFromRoot(A){return da(A,this._root).map(x=>x.value)}}function Nc(D,A){if(D===A.value)return A;for(const x of A.children){const k=Nc(D,x);if(k)return k}return null}function da(D,A){if(D===A.value)return[A];for(const x of A.children){const k=da(D,x);if(k.length)return k.unshift(A),k}return[]}class ko{constructor(A,x){this.value=A,this.children=x}toString(){return`TreeNode(${this.value})`}}function ea(D){const A={};return D&&D.children.forEach(x=>A[x.value.outlet]=x),A}class Pc extends Oc{constructor(A,x){super(A),this.snapshot=x,Da(this,A)}toString(){return this.snapshot.toString()}}function ql(D,A){const x=function ll(D,A){const ue=new ta([],{},{},"",{},On,A,null,D.root,-1,{});return new Lc("",new ko(ue,[]))}(D,A),k=new Me.X([new Xi("",{})]),G=new Me.X({}),Q=new Me.X({}),ue=new Me.X({}),ge=new Me.X(""),Ze=new Bo(k,G,ue,ge,Q,On,A,x.root);return Ze.snapshot=x.root,new Pc(new ko(Ze,[]),x)}class Bo{constructor(A,x,k,G,Q,ue,ge,Ze){this.url=A,this.params=x,this.queryParams=k,this.fragment=G,this.data=Q,this.outlet=ue,this.component=ge,this.title=this.data?.pipe((0,ve.U)(jt=>jt[dr]))??(0,X.of)(void 0),this._futureSnapshot=Ze}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ve.U)(A=>_i(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ve.U)(A=>_i(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cl(D,A="emptyOnly"){const x=D.pathFromRoot;let k=0;if("always"!==A)for(k=x.length-1;k>=1;){const G=x[k],Q=x[k-1];if(G.routeConfig&&""===G.routeConfig.path)k--;else{if(Q.component)break;k--}}return function Ta(D){return D.reduce((A,x)=>({params:{...A.params,...x.params},data:{...A.data,...x.data},resolve:{...x.data,...A.resolve,...x.routeConfig?.data,...x._resolvedData}}),{params:{},data:{},resolve:{}})}(x.slice(k))}class ta{constructor(A,x,k,G,Q,ue,ge,Ze,jt,Zn,pn,qi){this.url=A,this.params=x,this.queryParams=k,this.fragment=G,this.data=Q,this.outlet=ue,this.component=ge,this.title=this.data?.[dr],this.routeConfig=Ze,this._urlSegment=jt,this._lastPathIndex=Zn,this._correctedLastPathIndex=qi??Zn,this._resolve=pn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_i(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_i(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(k=>k.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Lc extends Oc{constructor(A,x){super(x),this.url=A,Da(this,x)}toString(){return to(this._root)}}function Da(D,A){A.value._routerState=D,A.children.forEach(x=>Da(D,x))}function to(D){const A=D.children.length>0?` { ${D.children.map(to).join(", ")} } `:"";return`${D.value}${A}`}function Uo(D){if(D.snapshot){const A=D.snapshot,x=D._futureSnapshot;D.snapshot=x,vr(A.queryParams,x.queryParams)||D.queryParams.next(x.queryParams),A.fragment!==x.fragment&&D.fragment.next(x.fragment),vr(A.params,x.params)||D.params.next(x.params),function Ki(D,A){if(D.length!==A.length)return!1;for(let x=0;x<D.length;++x)if(!vr(D[x],A[x]))return!1;return!0}(A.url,x.url)||D.url.next(x.url),vr(A.data,x.data)||D.data.next(x.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function Vo(D,A){const x=vr(D.params,A.params)&&function dn(D,A){return lr(D,A)&&D.every((x,k)=>vr(x.parameters,A[k].parameters))}(D.url,A.url);return x&&!(!D.parent!=!A.parent)&&(!D.parent||Vo(D.parent,A.parent))}function na(D,A,x){if(x&&D.shouldReuseRoute(A.value,x.value.snapshot)){const k=x.value;k._futureSnapshot=A.value;const G=function Zl(D,A,x){return A.children.map(k=>{for(const G of x.children)if(D.shouldReuseRoute(k.value,G.value.snapshot))return na(D,k,G);return na(D,k)})}(D,A,x);return new ko(k,G)}{if(D.shouldAttach(A.value)){const Q=D.retrieve(A.value);if(null!==Q){const ue=Q.route;return ue.value._futureSnapshot=A.value,ue.children=A.children.map(ge=>na(D,ge)),ue}}const k=function ul(D){return new Bo(new Me.X(D.url),new Me.X(D.params),new Me.X(D.queryParams),new Me.X(D.fragment),new Me.X(D.data),D.outlet,D.component,D)}(A.value),G=A.children.map(Q=>na(D,Q));return new ko(k,G)}}const ia="ngNavigationCancelingError";function Aa(D,A){const{redirectTo:x,navigationBehaviorOptions:k}=Xn(A)?{redirectTo:A,navigationBehaviorOptions:void 0}:A,G=Ra(!1,0,A);return G.url=x,G.navigationBehaviorOptions=k,G}function Ra(D,A,x){const k=new Error("NavigationCancelingError: "+(D||""));return k[ia]=!0,k.cancellationCode=A,x&&(k.url=x),k}function kc(D){return bs(D)&&Xn(D.url)}function bs(D){return D&&D[ia]}class Kl{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Jl,this.attachRef=null}}let Jl=(()=>{class D{constructor(){this.contexts=new Map}onChildOutletCreated(x,k){const G=this.getOrCreateContext(x);G.outlet=k,this.contexts.set(x,G)}onChildOutletDestroyed(x){const k=this.getContext(x);k&&(k.outlet=null,k.attachRef=null)}onOutletDeactivated(){const x=this.contexts;return this.contexts=new Map,x}onOutletReAttached(x){this.contexts=x}getOrCreateContext(x){let k=this.getContext(x);return k||(k=new Kl,this.contexts.set(x,k)),k}getContext(x){return this.contexts.get(x)||null}}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=m.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const Tr=!1;let Ia=(()=>{class D{constructor(x,k,G,Q,ue){this.parentContexts=x,this.location=k,this.changeDetector=Q,this.environmentInjector=ue,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=G||On,x.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const x=this.parentContexts.getContext(this.name);x&&x.route&&(x.attachRef?this.attach(x.attachRef,x.route):this.activateWith(x.route,x.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,Tr);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,Tr);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,Tr);this.location.detach();const x=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(x.instance),x}attach(x,k){this.activated=x,this._activatedRoute=k,this.location.insert(x.hostView),this.attachEvents.emit(x.instance)}deactivate(){if(this.activated){const x=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(x)}}activateWith(x,k){if(this.isActivated)throw new m.vHH(4013,Tr);this._activatedRoute=x;const G=this.location,ue=x._futureSnapshot.component,ge=this.parentContexts.getOrCreateContext(this.name).children,Ze=new ha(x,ge,G.injector);if(k&&function nr(D){return!!D.resolveComponentFactory}(k)){const jt=k.resolveComponentFactory(ue);this.activated=G.createComponent(jt,G.length,Ze)}else this.activated=G.createComponent(ue,{index:G.length,injector:Ze,environmentInjector:k??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(x){return new(x||D)(m.Y36(Jl),m.Y36(m.s_b),m.$8M("name"),m.Y36(m.sBO),m.Y36(m.lqb))},D.\u0275dir=m.lG2({type:D,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),D})();class ha{constructor(A,x,k){this.route=A,this.childContexts=x,this.parent=k}get(A,x){return A===Bo?this.route:A===Jl?this.childContexts:this.parent.get(A,x)}}let So=(()=>{class D{}return D.\u0275fac=function(x){return new(x||D)},D.\u0275cmp=m.Xpm({type:D,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(x,k){1&x&&m._UZ(0,"router-outlet")},dependencies:[Ia],encapsulation:2}),D})();function Bc(D,A){return D.providers&&!D._injector&&(D._injector=(0,m.MMx)(D.providers,A,`Route: ${D.path}`)),D._injector??A}function Nr(D){const A=D.children&&D.children.map(Nr),x=A?{...D,children:A}:{...D};return!x.component&&!x.loadComponent&&(A||x.loadChildren)&&x.outlet&&x.outlet!==On&&(x.component=So),x}function ir(D){return D.outlet||On}function dl(D,A){const x=D.filter(k=>ir(k)===A);return x.push(...D.filter(k=>ir(k)!==A)),x}function sa(D){if(!D)return null;if(D.routeConfig?._injector)return D.routeConfig._injector;for(let A=D.parent;A;A=A.parent){const x=A.routeConfig;if(x?._loadedInjector)return x._loadedInjector;if(x?._injector)return x._injector}return null}class Uc{constructor(A,x,k,G){this.routeReuseStrategy=A,this.futureState=x,this.currState=k,this.forwardEvent=G}activate(A){const x=this.futureState._root,k=this.currState?this.currState._root:null;this.deactivateChildRoutes(x,k,A),Uo(this.futureState.root),this.activateChildRoutes(x,k,A)}deactivateChildRoutes(A,x,k){const G=ea(x);A.children.forEach(Q=>{const ue=Q.value.outlet;this.deactivateRoutes(Q,G[ue],k),delete G[ue]}),Mi(G,(Q,ue)=>{this.deactivateRouteAndItsChildren(Q,k)})}deactivateRoutes(A,x,k){const G=A.value,Q=x?x.value:null;if(G===Q)if(G.component){const ue=k.getContext(G.outlet);ue&&this.deactivateChildRoutes(A,x,ue.children)}else this.deactivateChildRoutes(A,x,k);else Q&&this.deactivateRouteAndItsChildren(x,k)}deactivateRouteAndItsChildren(A,x){A.value.component&&this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,x):this.deactivateRouteAndOutlet(A,x)}detachAndStoreRouteSubtree(A,x){const k=x.getContext(A.value.outlet),G=k&&A.value.component?k.children:x,Q=ea(A);for(const ue of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[ue],G);if(k&&k.outlet){const ue=k.outlet.detach(),ge=k.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:ue,route:A,contexts:ge})}}deactivateRouteAndOutlet(A,x){const k=x.getContext(A.value.outlet),G=k&&A.value.component?k.children:x,Q=ea(A);for(const ue of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[ue],G);k&&k.outlet&&(k.outlet.deactivate(),k.children.onOutletDeactivated(),k.attachRef=null,k.resolver=null,k.route=null)}activateChildRoutes(A,x,k){const G=ea(x);A.children.forEach(Q=>{this.activateRoutes(Q,G[Q.value.outlet],k),this.forwardEvent(new xa(Q.value.snapshot))}),A.children.length&&this.forwardEvent(new Ca(A.value.snapshot))}activateRoutes(A,x,k){const G=A.value,Q=x?x.value:null;if(Uo(G),G===Q)if(G.component){const ue=k.getOrCreateContext(G.outlet);this.activateChildRoutes(A,x,ue.children)}else this.activateChildRoutes(A,x,k);else if(G.component){const ue=k.getOrCreateContext(G.outlet);if(this.routeReuseStrategy.shouldAttach(G.snapshot)){const ge=this.routeReuseStrategy.retrieve(G.snapshot);this.routeReuseStrategy.store(G.snapshot,null),ue.children.onOutletReAttached(ge.contexts),ue.attachRef=ge.componentRef,ue.route=ge.route.value,ue.outlet&&ue.outlet.attach(ge.componentRef,ge.route.value),Uo(ge.route.value),this.activateChildRoutes(A,null,ue.children)}else{const ge=sa(G.snapshot),Ze=ge?.get(m._Vd)??null;ue.attachRef=null,ue.route=G,ue.resolver=Ze,ue.injector=ge,ue.outlet&&ue.outlet.activateWith(G,ue.injector),this.activateChildRoutes(A,null,ue.children)}}else this.activateChildRoutes(A,null,k)}}class hl{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class oa{constructor(A,x){this.component=A,this.route=x}}function bd(D,A,x){const k=D._root;return La(k,A?A._root:null,x,[k.value])}function go(D,A){const x=Symbol(),k=A.get(D,x);return k===x?"function"!=typeof D||(0,m.Z0I)(D)?A.get(D):D:k}function La(D,A,x,k,G={canDeactivateChecks:[],canActivateChecks:[]}){const Q=ea(A);return D.children.forEach(ue=>{(function Vc(D,A,x,k,G={canDeactivateChecks:[],canActivateChecks:[]}){const Q=D.value,ue=A?A.value:null,ge=x?x.getContext(D.value.outlet):null;if(ue&&Q.routeConfig===ue.routeConfig){const Ze=function St(D,A,x){if("function"==typeof x)return x(D,A);switch(x){case"pathParamsChange":return!lr(D.url,A.url);case"pathParamsOrQueryParamsChange":return!lr(D.url,A.url)||!vr(D.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vo(D,A)||!vr(D.queryParams,A.queryParams);default:return!Vo(D,A)}}(ue,Q,Q.routeConfig.runGuardsAndResolvers);Ze?G.canActivateChecks.push(new hl(k)):(Q.data=ue.data,Q._resolvedData=ue._resolvedData),La(D,A,Q.component?ge?ge.children:null:x,k,G),Ze&&ge&&ge.outlet&&ge.outlet.isActivated&&G.canDeactivateChecks.push(new oa(ge.outlet.component,ue))}else ue&&Jt(A,ge,G),G.canActivateChecks.push(new hl(k)),La(D,null,Q.component?ge?ge.children:null:x,k,G)})(ue,Q[ue.value.outlet],x,k.concat([ue.value]),G),delete Q[ue.value.outlet]}),Mi(Q,(ue,ge)=>Jt(ue,x.getContext(ge),G)),G}function Jt(D,A,x){const k=ea(D),G=D.value;Mi(k,(Q,ue)=>{Jt(Q,G.component?A?A.children.getContext(ue):null:A,x)}),x.canDeactivateChecks.push(new oa(G.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,G))}function fa(D){return"function"==typeof D}function ne(D){return D instanceof Oe||"EmptyError"===D?.name}const tt=Symbol("INITIAL_VALUE");function _n(){return(0,xt.w)(D=>(0,Ae.a)(D.map(A=>A.pipe((0,Dt.q)(1),(0,ft.O)(tt)))).pipe((0,ve.U)(A=>{for(const x of A)if(!0!==x){if(x===tt)return tt;if(!1===x||x instanceof Os)return x}return!0}),(0,Mt.h)(A=>A!==tt),(0,Dt.q)(1)))}function no(D){return(0,je.z)((0,Mn.b)(A=>{if(Xn(A))throw Aa(0,A)}),(0,ve.U)(A=>!0===A))}const pl={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ml(D,A,x,k,G){const Q=pa(D,A,x);return Q.matched?function Ru(D,A,x,k){const G=A.canMatch;if(!G||0===G.length)return(0,X.of)(!0);const Q=G.map(ue=>{const ge=go(ue,D);return vn(function W(D){return D&&fa(D.canMatch)}(ge)?ge.canMatch(A,x):D.runInContext(()=>ge(A,x)))});return(0,X.of)(Q).pipe(_n(),no())}(k=Bc(A,k),A,x).pipe((0,ve.U)(ue=>!0===ue?Q:{...pl})):(0,X.of)(Q)}function pa(D,A,x){if(""===A.path)return"full"===A.pathMatch&&(D.hasChildren()||x.length>0)?{...pl}:{matched:!0,consumedSegments:[],remainingSegments:x,parameters:{},positionalParamSegments:{}};const G=(A.matcher||tr)(x,D,A);if(!G)return{...pl};const Q={};Mi(G.posParams,(ge,Ze)=>{Q[Ze]=ge.path});const ue=G.consumed.length>0?{...Q,...G.consumed[G.consumed.length-1].parameters}:Q;return{matched:!0,consumedSegments:G.consumed,remainingSegments:x.slice(G.consumed.length),parameters:ue,positionalParamSegments:G.posParams??{}}}function tc(D,A,x,k,G="corrected"){if(x.length>0&&function wd(D,A,x){return x.some(k=>gl(D,A,k)&&ir(k)!==On)}(D,x,k)){const ue=new wn(A,function Wc(D,A,x,k){const G={};G[On]=k,k._sourceSegment=D,k._segmentIndexShift=A.length;for(const Q of x)if(""===Q.path&&ir(Q)!==On){const ue=new wn([],{});ue._sourceSegment=D,ue._segmentIndexShift=A.length,G[ir(Q)]=ue}return G}(D,A,k,new wn(x,D.children)));return ue._sourceSegment=D,ue._segmentIndexShift=A.length,{segmentGroup:ue,slicedSegments:[]}}if(0===x.length&&function Ed(D,A,x){return x.some(k=>gl(D,A,k))}(D,x,k)){const ue=new wn(D.segments,function jc(D,A,x,k,G,Q){const ue={};for(const ge of k)if(gl(D,x,ge)&&!G[ir(ge)]){const Ze=new wn([],{});Ze._sourceSegment=D,Ze._segmentIndexShift="legacy"===Q?D.segments.length:A.length,ue[ir(ge)]=Ze}return{...G,...ue}}(D,A,x,k,D.children,G));return ue._sourceSegment=D,ue._segmentIndexShift=A.length,{segmentGroup:ue,slicedSegments:x}}const Q=new wn(D.segments,D.children);return Q._sourceSegment=D,Q._segmentIndexShift=A.length,{segmentGroup:Q,slicedSegments:x}}function gl(D,A,x){return(!(D.hasChildren()||A.length>0)||"full"!==x.pathMatch)&&""===x.path}function Iu(D,A,x,k){return!!(ir(D)===k||k!==On&&gl(A,x,D))&&("**"===D.path||pa(A,D,x).matched)}function _h(D,A,x){return 0===A.length&&!D.children[x]}const Ou=!1;class es{constructor(A){this.segmentGroup=A||null}}class ks{constructor(A){this.urlTree=A}}function rr(D){return tn(new es(D))}function vh(D){return tn(new ks(D))}class Fa{constructor(A,x,k,G,Q){this.injector=A,this.configLoader=x,this.urlSerializer=k,this.urlTree=G,this.config=Q,this.allowRedirects=!0}apply(){const A=tc(this.urlTree.root,[],[],this.config).segmentGroup,x=new wn(A.segments,A.children);return this.expandSegmentGroup(this.injector,this.config,x,On).pipe((0,ve.U)(Q=>this.createUrlTree(an(Q),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ar(Q=>{if(Q instanceof ks)return this.allowRedirects=!1,this.match(Q.urlTree);throw Q instanceof es?this.noMatchError(Q):Q}))}match(A){return this.expandSegmentGroup(this.injector,this.config,A.root,On).pipe((0,ve.U)(G=>this.createUrlTree(an(G),A.queryParams,A.fragment))).pipe(ar(G=>{throw G instanceof es?this.noMatchError(G):G}))}noMatchError(A){return new m.vHH(4002,Ou)}createUrlTree(A,x,k){const G=Nt(A);return new Os(G,x,k)}expandSegmentGroup(A,x,k,G){return 0===k.segments.length&&k.hasChildren()?this.expandChildren(A,x,k).pipe((0,ve.U)(Q=>new wn([],Q))):this.expandSegment(A,k,x,k.segments,G,!0)}expandChildren(A,x,k){const G=[];for(const Q of Object.keys(k.children))"primary"===Q?G.unshift(Q):G.push(Q);return(0,b.D)(G).pipe((0,Bt.b)(Q=>{const ue=k.children[Q],ge=dl(x,Q);return this.expandSegmentGroup(A,ge,ue,Q).pipe((0,ve.U)(Ze=>({segment:Ze,outlet:Q})))}),yr((Q,ue)=>(Q[ue.outlet]=ue.segment,Q),{}),lt())}expandSegment(A,x,k,G,Q,ue){return(0,b.D)(k).pipe((0,Bt.b)(ge=>this.expandSegmentAgainstRoute(A,x,k,ge,G,Q,ue).pipe(ar(jt=>{if(jt instanceof es)return(0,X.of)(null);throw jt}))),Vt(ge=>!!ge),ar((ge,Ze)=>{if(ne(ge))return _h(x,G,Q)?(0,X.of)(new wn([],{})):rr(x);throw ge}))}expandSegmentAgainstRoute(A,x,k,G,Q,ue,ge){return Iu(G,x,Q,ue)?void 0===G.redirectTo?this.matchSegmentAgainstRoute(A,x,G,Q,ue):ge&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,x,k,G,Q,ue):rr(x):rr(x)}expandSegmentAgainstRouteUsingRedirect(A,x,k,G,Q,ue){return"**"===G.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,k,G,ue):this.expandRegularSegmentAgainstRouteUsingRedirect(A,x,k,G,Q,ue)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,x,k,G){const Q=this.applyRedirectCommands([],k.redirectTo,{});return k.redirectTo.startsWith("/")?vh(Q):this.lineralizeSegments(k,Q).pipe((0,kt.z)(ue=>{const ge=new wn(ue,{});return this.expandSegment(A,ge,x,ue,G,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,x,k,G,Q,ue){const{matched:ge,consumedSegments:Ze,remainingSegments:jt,positionalParamSegments:Zn}=pa(x,G,Q);if(!ge)return rr(x);const pn=this.applyRedirectCommands(Ze,G.redirectTo,Zn);return G.redirectTo.startsWith("/")?vh(pn):this.lineralizeSegments(G,pn).pipe((0,kt.z)(qi=>this.expandSegment(A,x,k,qi.concat(jt),ue,!1)))}matchSegmentAgainstRoute(A,x,k,G,Q){return"**"===k.path?(A=Bc(k,A),k.loadChildren?(k._loadedRoutes?(0,X.of)({routes:k._loadedRoutes,injector:k._loadedInjector}):this.configLoader.loadChildren(A,k)).pipe((0,ve.U)(ge=>(k._loadedRoutes=ge.routes,k._loadedInjector=ge.injector,new wn(G,{})))):(0,X.of)(new wn(G,{}))):ml(x,k,G,A).pipe((0,xt.w)(({matched:ue,consumedSegments:ge,remainingSegments:Ze})=>ue?this.getChildConfig(A=k._injector??A,k,G).pipe((0,kt.z)(Zn=>{const pn=Zn.injector??A,qi=Zn.routes,{segmentGroup:Hs,slicedSegments:ga}=tc(x,ge,Ze,qi),sc=new wn(Hs.segments,Hs.children);if(0===ga.length&&sc.hasChildren())return this.expandChildren(pn,qi,sc).pipe((0,ve.U)(am=>new wn(ge,am)));if(0===qi.length&&0===ga.length)return(0,X.of)(new wn(ge,{}));const Wo=ir(k)===Q;return this.expandSegment(pn,sc,qi,ga,Wo?On:Q,!0).pipe((0,ve.U)(Wa=>new wn(ge.concat(Wa.segments),Wa.children)))})):rr(x)))}getChildConfig(A,x,k){return x.children?(0,X.of)({routes:x.children,injector:A}):x.loadChildren?void 0!==x._loadedRoutes?(0,X.of)({routes:x._loadedRoutes,injector:x._loadedInjector}):function ec(D,A,x,k){const G=A.canLoad;if(void 0===G||0===G.length)return(0,X.of)(!0);const Q=G.map(ue=>{const ge=go(ue,D);return vn(function Dr(D){return D&&fa(D.canLoad)}(ge)?ge.canLoad(A,x):D.runInContext(()=>ge(A,x)))});return(0,X.of)(Q).pipe(_n(),no())}(A,x,k).pipe((0,kt.z)(G=>G?this.configLoader.loadChildren(A,x).pipe((0,Mn.b)(Q=>{x._loadedRoutes=Q.routes,x._loadedInjector=Q.injector})):function If(D){return tn(Ra(Ou,3))}())):(0,X.of)({routes:[],injector:A})}lineralizeSegments(A,x){let k=[],G=x.root;for(;;){if(k=k.concat(G.segments),0===G.numberOfChildren)return(0,X.of)(k);if(G.numberOfChildren>1||!G.children[On])return tn(new m.vHH(4e3,Ou));G=G.children[On]}}applyRedirectCommands(A,x,k){return this.applyRedirectCreateUrlTree(x,this.urlSerializer.parse(x),A,k)}applyRedirectCreateUrlTree(A,x,k,G){const Q=this.createSegmentGroup(A,x.root,k,G);return new Os(Q,this.createQueryParams(x.queryParams,this.urlTree.queryParams),x.fragment)}createQueryParams(A,x){const k={};return Mi(A,(G,Q)=>{if("string"==typeof G&&G.startsWith(":")){const ge=G.substring(1);k[Q]=x[ge]}else k[Q]=G}),k}createSegmentGroup(A,x,k,G){const Q=this.createSegments(A,x.segments,k,G);let ue={};return Mi(x.children,(ge,Ze)=>{ue[Ze]=this.createSegmentGroup(A,ge,k,G)}),new wn(Q,ue)}createSegments(A,x,k,G){return x.map(Q=>Q.path.startsWith(":")?this.findPosParam(A,Q,G):this.findOrReturn(Q,k))}findPosParam(A,x,k){const G=k[x.path.substring(1)];if(!G)throw new m.vHH(4001,Ou);return G}findOrReturn(A,x){let k=0;for(const G of x){if(G.path===A.path)return x.splice(k),G;k++}return A}}class $c{}class Of{constructor(A,x,k,G,Q,ue,ge,Ze){this.injector=A,this.rootComponentType=x,this.config=k,this.urlTree=G,this.url=Q,this.paramsInheritanceStrategy=ue,this.relativeLinkResolution=ge,this.urlSerializer=Ze}recognize(){const A=tc(this.urlTree.root,[],[],this.config.filter(x=>void 0===x.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,A,On).pipe((0,ve.U)(x=>{if(null===x)return null;const k=new ta([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},On,this.rootComponentType,null,this.urlTree.root,-1,{}),G=new ko(k,x),Q=new Lc(this.url,G);return this.inheritParamsAndData(Q._root),Q}))}inheritParamsAndData(A){const x=A.value,k=cl(x,this.paramsInheritanceStrategy);x.params=Object.freeze(k.params),x.data=Object.freeze(k.data),A.children.forEach(G=>this.inheritParamsAndData(G))}processSegmentGroup(A,x,k,G){return 0===k.segments.length&&k.hasChildren()?this.processChildren(A,x,k):this.processSegment(A,x,k,k.segments,G)}processChildren(A,x,k){return(0,b.D)(Object.keys(k.children)).pipe((0,Bt.b)(G=>{const Q=k.children[G],ue=dl(x,G);return this.processSegmentGroup(A,ue,Q,G)}),yr((G,Q)=>G&&Q?(G.push(...Q),G):null),(0,pt.o)(G=>null!==G),Fe(null),lt(),(0,ve.U)(G=>{if(null===G)return null;const Q=zo(G);return function yh(D){D.sort((A,x)=>A.value.outlet===On?-1:x.value.outlet===On?1:A.value.outlet.localeCompare(x.value.outlet))}(Q),Q}))}processSegment(A,x,k,G,Q){return(0,b.D)(x).pipe((0,Bt.b)(ue=>this.processSegmentAgainstRoute(ue._injector??A,ue,k,G,Q)),Vt(ue=>!!ue),ar(ue=>{if(ne(ue))return _h(k,G,Q)?(0,X.of)([]):(0,X.of)(null);throw ue}))}processSegmentAgainstRoute(A,x,k,G,Q){if(x.redirectTo||!Iu(x,k,G,Q))return(0,X.of)(null);let ue;if("**"===x.path){const ge=G.length>0?Ir(G).parameters:{},Ze=U(k)+G.length,jt=new ta(G,ge,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_e(x),ir(x),x.component??x._loadedComponent??null,x,Y(k),Ze,Qe(x),Ze);ue=(0,X.of)({snapshot:jt,consumedSegments:[],remainingSegments:[]})}else ue=ml(k,x,G,A).pipe((0,ve.U)(({matched:ge,consumedSegments:Ze,remainingSegments:jt,parameters:Zn})=>{if(!ge)return null;const pn=U(k)+Ze.length;return{snapshot:new ta(Ze,Zn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_e(x),ir(x),x.component??x._loadedComponent??null,x,Y(k),pn,Qe(x),pn),consumedSegments:Ze,remainingSegments:jt}}));return ue.pipe((0,xt.w)(ge=>{if(null===ge)return(0,X.of)(null);const{snapshot:Ze,consumedSegments:jt,remainingSegments:Zn}=ge;A=x._injector??A;const pn=x._loadedInjector??A,qi=function ma(D){return D.children?D.children:D.loadChildren?D._loadedRoutes:[]}(x),{segmentGroup:Hs,slicedSegments:ga}=tc(k,jt,Zn,qi.filter(Wo=>void 0===Wo.redirectTo),this.relativeLinkResolution);if(0===ga.length&&Hs.hasChildren())return this.processChildren(pn,qi,Hs).pipe((0,ve.U)(Wo=>null===Wo?null:[new ko(Ze,Wo)]));if(0===qi.length&&0===ga.length)return(0,X.of)([new ko(Ze,[])]);const sc=ir(x)===Q;return this.processSegment(pn,qi,Hs,ga,sc?On:Q).pipe((0,ve.U)(Wo=>null===Wo?null:[new ko(Ze,Wo)]))}))}}function _o(D){const A=D.value.routeConfig;return A&&""===A.path&&void 0===A.redirectTo}function zo(D){const A=[],x=new Set;for(const k of D){if(!_o(k)){A.push(k);continue}const G=A.find(Q=>k.value.routeConfig===Q.value.routeConfig);void 0!==G?(G.children.push(...k.children),x.add(G)):A.push(k)}for(const k of x){const G=zo(k.children);A.push(new ko(k.value,G))}return A.filter(k=>!x.has(k))}function Y(D){let A=D;for(;A._sourceSegment;)A=A._sourceSegment;return A}function U(D){let A=D,x=A._segmentIndexShift??0;for(;A._sourceSegment;)A=A._sourceSegment,x+=A._segmentIndexShift??0;return x-1}function _e(D){return D.data||{}}function Qe(D){return D.resolve||{}}function Wi(D){return"string"==typeof D.title||null===D.title}function Si(D){return(0,xt.w)(A=>{const x=D(A);return x?(0,b.D)(x).pipe((0,ve.U)(()=>A)):(0,X.of)(A)})}let ts=(()=>{class D{buildTitle(x){let k,G=x.root;for(;void 0!==G;)k=this.getResolvedTitleForRoute(G)??k,G=G.children.find(Q=>Q.outlet===On);return k}getResolvedTitleForRoute(x){return x.data[dr]}}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=m.Yz7({token:D,factory:function(){return(0,m.f3M)(io)},providedIn:"root"}),D})(),io=(()=>{class D extends ts{constructor(x){super(),this.title=x}updateTitle(x){const k=this.buildTitle(x);void 0!==k&&this.title.setTitle(k)}}return D.\u0275fac=function(x){return new(x||D)(m.LFG(bn.Dx))},D.\u0275prov=m.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class To{}class ka extends class Bs{shouldDetach(A){return!1}store(A,x){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,x){return A.routeConfig===x.routeConfig}}{}const yl=new m.OlP("",{providedIn:"root",factory:()=>({})}),Cd=new m.OlP("ROUTES");let bl=(()=>{class D{constructor(x,k){this.injector=x,this.compiler=k,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(x){if(this.componentLoaders.get(x))return this.componentLoaders.get(x);if(x._loadedComponent)return(0,X.of)(x._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(x);const k=vn(x.loadComponent()).pipe((0,Mn.b)(Q=>{this.onLoadEndListener&&this.onLoadEndListener(x),x._loadedComponent=Q}),We(()=>{this.componentLoaders.delete(x)})),G=new Gt(k,()=>new ei.x).pipe(Dn());return this.componentLoaders.set(x,G),G}loadChildren(x,k){if(this.childrenLoaders.get(k))return this.childrenLoaders.get(k);if(k._loadedRoutes)return(0,X.of)({routes:k._loadedRoutes,injector:k._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(k);const Q=this.loadModuleFactoryOrRoutes(k.loadChildren).pipe((0,ve.U)(ge=>{this.onLoadEndListener&&this.onLoadEndListener(k);let Ze,jt,Zn=!1;Array.isArray(ge)?jt=ge:(Ze=ge.create(x).injector,jt=Ai(Ze.get(Cd,[],m.XFs.Self|m.XFs.Optional)));return{routes:jt.map(Nr),injector:Ze}}),We(()=>{this.childrenLoaders.delete(k)})),ue=new Gt(Q,()=>new ei.x).pipe(Dn());return this.childrenLoaders.set(k,ue),ue}loadModuleFactoryOrRoutes(x){return vn(x()).pipe((0,kt.z)(k=>k instanceof m.YKP||Array.isArray(k)?(0,X.of)(k):(0,b.D)(this.compiler.compileModuleAsync(k))))}}return D.\u0275fac=function(x){return new(x||D)(m.LFG(m.zs3),m.LFG(m.Sil))},D.\u0275prov=m.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();class wl{}class Es{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,x){return A}}function nc(D){throw D}function bh(D,A,x){return A.parse("/")}const qc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wh={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ba(){const D=(0,m.f3M)(hr),A=(0,m.f3M)(Jl),x=(0,m.f3M)(Ue.Ye),k=(0,m.f3M)(m.zs3),G=(0,m.f3M)(m.Sil),Q=(0,m.f3M)(Cd,{optional:!0})??[],ue=(0,m.f3M)(yl,{optional:!0})??{},ge=(0,m.f3M)(io),Ze=(0,m.f3M)(ts,{optional:!0}),jt=(0,m.f3M)(wl,{optional:!0}),Zn=(0,m.f3M)(To,{optional:!0}),pn=new ns(null,D,A,x,k,G,Ai(Q));return jt&&(pn.urlHandlingStrategy=jt),Zn&&(pn.routeReuseStrategy=Zn),pn.titleStrategy=Ze??ge,function Eh(D,A){D.errorHandler&&(A.errorHandler=D.errorHandler),D.malformedUriErrorHandler&&(A.malformedUriErrorHandler=D.malformedUriErrorHandler),D.onSameUrlNavigation&&(A.onSameUrlNavigation=D.onSameUrlNavigation),D.paramsInheritanceStrategy&&(A.paramsInheritanceStrategy=D.paramsInheritanceStrategy),D.relativeLinkResolution&&(A.relativeLinkResolution=D.relativeLinkResolution),D.urlUpdateStrategy&&(A.urlUpdateStrategy=D.urlUpdateStrategy),D.canceledNavigationResolution&&(A.canceledNavigationResolution=D.canceledNavigationResolution)}(ue,pn),pn}let ns=(()=>{class D{constructor(x,k,G,Q,ue,ge,Ze){this.rootComponentType=x,this.urlSerializer=k,this.rootContexts=G,this.location=Q,this.config=Ze,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ei.x,this.errorHandler=nc,this.malformedUriErrorHandler=bh,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,X.of)(void 0),this.urlHandlingStrategy=new Es,this.routeReuseStrategy=new ka,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ue.get(bl),this.configLoader.onLoadEndListener=qi=>this.triggerEvent(new ol(qi)),this.configLoader.onLoadStartListener=qi=>this.triggerEvent(new eo(qi)),this.ngModule=ue.get(m.h0i),this.console=ue.get(m.c2e);const pn=ue.get(m.R0b);this.isNgZoneEnabled=pn instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(Ze),this.currentUrlTree=function Jo(){return new Os(new wn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ql(this.currentUrlTree,this.rootComponentType),this.transitions=new Me.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(x){const k=this.events;return x.pipe((0,Mt.h)(G=>0!==G.id),(0,ve.U)(G=>({...G,extractedUrl:this.urlHandlingStrategy.extract(G.rawUrl)})),(0,xt.w)(G=>{let Q=!1,ue=!1;return(0,X.of)(G).pipe((0,Mn.b)(ge=>{this.currentNavigation={id:ge.id,initialUrl:ge.rawUrl,extractedUrl:ge.extractedUrl,trigger:ge.source,extras:ge.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,xt.w)(ge=>{const Ze=this.browserUrlTree.toString(),jt=!this.navigated||ge.extractedUrl.toString()!==Ze||Ze!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||jt)&&this.urlHandlingStrategy.shouldProcessUrl(ge.rawUrl))return Us(ge.source)&&(this.browserUrlTree=ge.extractedUrl),(0,X.of)(ge).pipe((0,xt.w)(pn=>{const qi=this.transitions.getValue();return k.next(new cr(pn.id,this.serializeUrl(pn.extractedUrl),pn.source,pn.restoredState)),qi!==this.transitions.getValue()?Ct.E:Promise.resolve(pn)}),function _l(D,A,x,k){return(0,xt.w)(G=>function Nu(D,A,x,k,G){return new Fa(D,A,x,k,G).apply()}(D,A,x,G.extractedUrl,k).pipe((0,ve.U)(Q=>({...G,urlAfterRedirects:Q}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Mn.b)(pn=>{this.currentNavigation={...this.currentNavigation,finalUrl:pn.urlAfterRedirects},G.urlAfterRedirects=pn.urlAfterRedirects}),function gt(D,A,x,k,G,Q){return(0,kt.z)(ue=>function Sd(D,A,x,k,G,Q,ue="emptyOnly",ge="legacy"){return new Of(D,A,x,k,G,ue,ge,Q).recognize().pipe((0,xt.w)(Ze=>null===Ze?function Yc(D){return new $e.y(A=>A.error(D))}(new $c):(0,X.of)(Ze)))}(D,A,x,ue.urlAfterRedirects,k.serialize(ue.urlAfterRedirects),k,G,Q).pipe((0,ve.U)(ge=>({...ue,targetSnapshot:ge}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Mn.b)(pn=>{if(G.targetSnapshot=pn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!pn.extras.skipLocationChange){const Hs=this.urlHandlingStrategy.merge(pn.urlAfterRedirects,pn.rawUrl);this.setBrowserUrl(Hs,pn)}this.browserUrlTree=pn.urlAfterRedirects}const qi=new Mo(pn.id,this.serializeUrl(pn.extractedUrl),this.serializeUrl(pn.urlAfterRedirects),pn.targetSnapshot);k.next(qi)}));if(jt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:qi,extractedUrl:Hs,source:ga,restoredState:sc,extras:Wo}=ge,Er=new cr(qi,this.serializeUrl(Hs),ga,sc);k.next(Er);const Wa=ql(Hs,this.rootComponentType).snapshot;return G={...ge,targetSnapshot:Wa,urlAfterRedirects:Hs,extras:{...Wo,skipLocationChange:!1,replaceUrl:!1}},(0,X.of)(G)}return this.rawUrlTree=ge.rawUrl,ge.resolve(null),Ct.E}),(0,Mn.b)(ge=>{const Ze=new rl(ge.id,this.serializeUrl(ge.extractedUrl),this.serializeUrl(ge.urlAfterRedirects),ge.targetSnapshot);this.triggerEvent(Ze)}),(0,ve.U)(ge=>G={...ge,guards:bd(ge.targetSnapshot,ge.currentSnapshot,this.rootContexts)}),function oi(D,A){return(0,kt.z)(x=>{const{targetSnapshot:k,currentSnapshot:G,guards:{canActivateChecks:Q,canDeactivateChecks:ue}}=x;return 0===ue.length&&0===Q.length?(0,X.of)({...x,guardsResult:!0}):function Ar(D,A,x,k){return(0,b.D)(D).pipe((0,kt.z)(G=>function Ql(D,A,x,k,G){const Q=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!Q||0===Q.length)return(0,X.of)(!0);const ue=Q.map(ge=>{const Ze=sa(A)??G,jt=go(ge,Ze);return vn(function Ri(D){return D&&fa(D.canDeactivate)}(jt)?jt.canDeactivate(D,A,x,k):Ze.runInContext(()=>jt(D,A,x,k))).pipe(Vt())});return(0,X.of)(ue).pipe(_n())}(G.component,G.route,x,A,k)),Vt(G=>!0!==G,!0))}(ue,k,G,D).pipe((0,kt.z)(ge=>ge&&function Hc(D){return"boolean"==typeof D}(ge)?function Co(D,A,x,k){return(0,b.D)(A).pipe((0,Bt.b)(G=>(0,st.z)(function cs(D,A){return null!==D&&A&&A(new Sa(D)),(0,X.of)(!0)}(G.route.parent,k),function Ts(D,A){return null!==D&&A&&A(new al(D)),(0,X.of)(!0)}(G.route,k),function zc(D,A,x){const k=A[A.length-1],Q=A.slice(0,A.length-1).reverse().map(ue=>function Au(D){const A=D.routeConfig?D.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:D,guards:A}:null}(ue)).filter(ue=>null!==ue).map(ue=>(0,qe.P)(()=>{const ge=ue.guards.map(Ze=>{const jt=sa(ue.node)??x,Zn=go(Ze,jt);return vn(function Go(D){return D&&fa(D.canActivateChild)}(Zn)?Zn.canActivateChild(k,D):jt.runInContext(()=>Zn(k,D))).pipe(Vt())});return(0,X.of)(ge).pipe(_n())}));return(0,X.of)(Q).pipe(_n())}(D,G.path,x),function fl(D,A,x){const k=A.routeConfig?A.routeConfig.canActivate:null;if(!k||0===k.length)return(0,X.of)(!0);const G=k.map(Q=>(0,qe.P)(()=>{const ue=sa(A)??x,ge=go(Q,ue);return vn(function Gc(D){return D&&fa(D.canActivate)}(ge)?ge.canActivate(A,D):ue.runInContext(()=>ge(A,D))).pipe(Vt())}));return(0,X.of)(G).pipe(_n())}(D,G.route,x))),Vt(G=>!0!==G,!0))}(k,Q,D,A):(0,X.of)(ge)),(0,ve.U)(ge=>({...x,guardsResult:ge})))})}(this.ngModule.injector,ge=>this.triggerEvent(ge)),(0,Mn.b)(ge=>{if(G.guardsResult=ge.guardsResult,Xn(ge.guardsResult))throw Aa(0,ge.guardsResult);const Ze=new sl(ge.id,this.serializeUrl(ge.extractedUrl),this.serializeUrl(ge.urlAfterRedirects),ge.targetSnapshot,!!ge.guardsResult);this.triggerEvent(Ze)}),(0,Mt.h)(ge=>!!ge.guardsResult||(this.restoreHistory(ge),this.cancelNavigationTransition(ge,"",3),!1)),Si(ge=>{if(ge.guards.canActivateChecks.length)return(0,X.of)(ge).pipe((0,Mn.b)(Ze=>{const jt=new xs(Ze.id,this.serializeUrl(Ze.extractedUrl),this.serializeUrl(Ze.urlAfterRedirects),Ze.targetSnapshot);this.triggerEvent(jt)}),(0,xt.w)(Ze=>{let jt=!1;return(0,X.of)(Ze).pipe(function yn(D,A){return(0,kt.z)(x=>{const{targetSnapshot:k,guards:{canActivateChecks:G}}=x;if(!G.length)return(0,X.of)(x);let Q=0;return(0,b.D)(G).pipe((0,Bt.b)(ue=>function Fi(D,A,x,k){const G=D.routeConfig,Q=D._resolve;return void 0!==G?.title&&!Wi(G)&&(Q[dr]=G.title),function ai(D,A,x,k){const G=function ni(D){return[...Object.keys(D),...Object.getOwnPropertySymbols(D)]}(D);if(0===G.length)return(0,X.of)({});const Q={};return(0,b.D)(G).pipe((0,kt.z)(ue=>function li(D,A,x,k){const G=sa(A)??k,Q=go(D,G);return vn(Q.resolve?Q.resolve(A,x):G.runInContext(()=>Q(A,x)))}(D[ue],A,x,k).pipe(Vt(),(0,Mn.b)(ge=>{Q[ue]=ge}))),ps(1),(0,Be.h)(Q),ar(ue=>ne(ue)?Ct.E:tn(ue)))}(Q,D,A,k).pipe((0,ve.U)(ue=>(D._resolvedData=ue,D.data=cl(D,x).resolve,G&&Wi(G)&&(D.data[dr]=G.title),null)))}(ue.route,k,D,A)),(0,Mn.b)(()=>Q++),ps(1),(0,kt.z)(ue=>Q===G.length?(0,X.of)(x):Ct.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Mn.b)({next:()=>jt=!0,complete:()=>{jt||(this.restoreHistory(Ze),this.cancelNavigationTransition(Ze,"",2))}}))}),(0,Mn.b)(Ze=>{const jt=new Du(Ze.id,this.serializeUrl(Ze.extractedUrl),this.serializeUrl(Ze.urlAfterRedirects),Ze.targetSnapshot);this.triggerEvent(jt)}))}),Si(ge=>{const Ze=jt=>{const Zn=[];jt.routeConfig?.loadComponent&&!jt.routeConfig._loadedComponent&&Zn.push(this.configLoader.loadComponent(jt.routeConfig).pipe((0,Mn.b)(pn=>{jt.component=pn}),(0,ve.U)(()=>{})));for(const pn of jt.children)Zn.push(...Ze(pn));return Zn};return(0,Ae.a)(Ze(ge.targetSnapshot.root)).pipe(Fe(),(0,Dt.q)(1))}),Si(()=>this.afterPreactivation()),(0,ve.U)(ge=>{const Ze=function Fc(D,A,x){const k=na(D,A._root,x?x._root:void 0);return new Pc(k,A)}(this.routeReuseStrategy,ge.targetSnapshot,ge.currentRouterState);return G={...ge,targetRouterState:Ze}}),(0,Mn.b)(ge=>{this.currentUrlTree=ge.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ge.urlAfterRedirects,ge.rawUrl),this.routerState=ge.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ge.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ge),this.browserUrlTree=ge.urlAfterRedirects)}),((D,A,x)=>(0,ve.U)(k=>(new Uc(A,k.targetRouterState,k.currentRouterState,x).activate(D),k)))(this.rootContexts,this.routeReuseStrategy,ge=>this.triggerEvent(ge)),(0,Mn.b)({next(){Q=!0},complete(){Q=!0}}),We(()=>{Q||ue||this.cancelNavigationTransition(G,"",1),this.currentNavigation?.id===G.id&&(this.currentNavigation=null)}),ar(ge=>{if(ue=!0,bs(ge)){kc(ge)||(this.navigated=!0,this.restoreHistory(G,!0));const Ze=new wr(G.id,this.serializeUrl(G.extractedUrl),ge.message,ge.cancellationCode);if(k.next(Ze),kc(ge)){const jt=this.urlHandlingStrategy.merge(ge.url,this.rawUrlTree),Zn={skipLocationChange:G.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Us(G.source)};this.scheduleNavigation(jt,"imperative",null,Zn,{resolve:G.resolve,reject:G.reject,promise:G.promise})}else G.resolve(!1)}else{this.restoreHistory(G,!0);const Ze=new ys(G.id,this.serializeUrl(G.extractedUrl),ge,G.targetSnapshot??void 0);k.next(Ze);try{G.resolve(this.errorHandler(ge))}catch(jt){G.reject(jt)}}return Ct.E}))}))}resetRootComponentType(x){this.rootComponentType=x,this.routerState.root.component=this.rootComponentType}setTransition(x){this.transitions.next({...this.transitions.value,...x})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(x=>{const k="popstate"===x.type?"popstate":"hashchange";"popstate"===k&&setTimeout(()=>{const G={replaceUrl:!0},Q=x.state?.navigationId?x.state:null;if(Q){const ge={...Q};delete ge.navigationId,delete ge.\u0275routerPageId,0!==Object.keys(ge).length&&(G.state=ge)}const ue=this.parseUrl(x.url);this.scheduleNavigation(ue,k,Q,G)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(x){this.events.next(x)}resetConfig(x){this.config=x.map(Nr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(x,k={}){const{relativeTo:G,queryParams:Q,fragment:ue,queryParamsHandling:ge,preserveFragment:Ze}=k,jt=G||this.routerState.root,Zn=Ze?this.currentUrlTree.fragment:ue;let pn=null;switch(ge){case"merge":pn={...this.currentUrlTree.queryParams,...Q};break;case"preserve":pn=this.currentUrlTree.queryParams;break;default:pn=Q||null}return null!==pn&&(pn=this.removeEmptyProps(pn)),Qo(jt,this.currentUrlTree,x,pn,Zn??null)}navigateByUrl(x,k={skipLocationChange:!1}){const G=Xn(x)?x:this.parseUrl(x),Q=this.urlHandlingStrategy.merge(G,this.rawUrlTree);return this.scheduleNavigation(Q,"imperative",null,k)}navigate(x,k={skipLocationChange:!1}){return function Zc(D){for(let A=0;A<D.length;A++){if(null==D[A])throw new m.vHH(4008,false)}}(x),this.navigateByUrl(this.createUrlTree(x,k),k)}serializeUrl(x){return this.urlSerializer.serialize(x)}parseUrl(x){let k;try{k=this.urlSerializer.parse(x)}catch(G){k=this.malformedUriErrorHandler(G,this.urlSerializer,x)}return k}isActive(x,k){let G;if(G=!0===k?{...qc}:!1===k?{...wh}:k,Xn(x))return Rn(this.currentUrlTree,x,G);const Q=this.parseUrl(x);return Rn(this.currentUrlTree,Q,G)}removeEmptyProps(x){return Object.keys(x).reduce((k,G)=>{const Q=x[G];return null!=Q&&(k[G]=Q),k},{})}processNavigations(){this.navigations.subscribe(x=>{this.navigated=!0,this.lastSuccessfulId=x.id,this.currentPageId=x.targetPageId,this.events.next(new Qr(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),x.resolve(!0)},x=>{this.console.warn(`Unhandled Navigation Error: ${x}`)})}scheduleNavigation(x,k,G,Q,ue){if(this.disposed)return Promise.resolve(!1);let ge,Ze,jt;ue?(ge=ue.resolve,Ze=ue.reject,jt=ue.promise):jt=new Promise((qi,Hs)=>{ge=qi,Ze=Hs});const Zn=++this.navigationId;let pn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(G=this.location.getState()),pn=G&&G.\u0275routerPageId?G.\u0275routerPageId:Q.replaceUrl||Q.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):pn=0,this.setTransition({id:Zn,targetPageId:pn,source:k,restoredState:G,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:x,extras:Q,resolve:ge,reject:Ze,promise:jt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),jt.catch(qi=>Promise.reject(qi))}setBrowserUrl(x,k){const G=this.urlSerializer.serialize(x),Q={...k.extras.state,...this.generateNgRouterState(k.id,k.targetPageId)};this.location.isCurrentPathEqualTo(G)||k.extras.replaceUrl?this.location.replaceState(G,"",Q):this.location.go(G,"",Q)}restoreHistory(x,k=!1){if("computed"===this.canceledNavigationResolution){const G=this.currentPageId-x.targetPageId;"popstate"!==x.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===G?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===G&&(this.resetState(x),this.browserUrlTree=x.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(G)}else"replace"===this.canceledNavigationResolution&&(k&&this.resetState(x),this.resetUrlToCurrentUrlTree())}resetState(x){this.routerState=x.currentRouterState,this.currentUrlTree=x.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,x.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(x,k,G){const Q=new wr(x.id,this.serializeUrl(x.extractedUrl),k,G);this.triggerEvent(Q),x.resolve(!1)}generateNgRouterState(x,k){return"computed"===this.canceledNavigationResolution?{navigationId:x,\u0275routerPageId:k}:{navigationId:x}}}return D.\u0275fac=function(x){m.$Z()},D.\u0275prov=m.Yz7({token:D,factory:function(){return Ba()},providedIn:"root"}),D})();function Us(D){return"imperative"!==D}let xd=(()=>{class D{constructor(x,k,G,Q,ue){this.router=x,this.route=k,this.tabIndexAttribute=G,this.renderer=Q,this.el=ue,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ei.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(x){this._preserveFragment=(0,m.D6c)(x)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(x){this._skipLocationChange=(0,m.D6c)(x)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(x){this._replaceUrl=(0,m.D6c)(x)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(x){if(null!=this.tabIndexAttribute)return;const k=this.renderer,G=this.el.nativeElement;null!==x?k.setAttribute(G,"tabindex",x):k.removeAttribute(G,"tabindex")}ngOnChanges(x){this.onChanges.next(this)}set routerLink(x){null!=x?(this.commands=Array.isArray(x)?x:[x],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(x){return new(x||D)(m.Y36(ns),m.Y36(Bo),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},D.\u0275dir=m.lG2({type:D,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(x,k){1&x&&m.NdJ("click",function(){return k.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),D})(),ic=(()=>{class D{constructor(x,k,G){this.router=x,this.route=k,this.locationStrategy=G,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ei.x,this.subscription=x.events.subscribe(Q=>{Q instanceof Qr&&this.updateTargetUrlAndHref()})}set preserveFragment(x){this._preserveFragment=(0,m.D6c)(x)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(x){this._skipLocationChange=(0,m.D6c)(x)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(x){this._replaceUrl=(0,m.D6c)(x)}get replaceUrl(){return this._replaceUrl}set routerLink(x){this.commands=null!=x?Array.isArray(x)?x:[x]:null}ngOnChanges(x){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(x,k,G,Q,ue){return!!(0!==x||k||G||Q||ue||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return D.\u0275fac=function(x){return new(x||D)(m.Y36(ns),m.Y36(Bo),m.Y36(Ue.S$))},D.\u0275dir=m.lG2({type:D,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(x,k){1&x&&m.NdJ("click",function(Q){return k.onClick(Q.button,Q.ctrlKey,Q.shiftKey,Q.altKey,Q.metaKey)}),2&x&&m.uIk("target",k.target)("href",k.href,m.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),D})(),Pu=(()=>{class D{constructor(x,k,G,Q,ue,ge){this.router=x,this.element=k,this.renderer=G,this.cdr=Q,this.link=ue,this.linkWithHref=ge,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new m.vpe,this.routerEventsSubscription=x.events.subscribe(Ze=>{Ze instanceof Qr&&this.update()})}ngAfterContentInit(){(0,X.of)(this.links.changes,this.linksWithHrefs.changes,(0,X.of)(null)).pipe((0,Xt.J)()).subscribe(x=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const x=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(k=>!!k).map(k=>k.onChanges);this.linkInputChangesSubscription=(0,b.D)(x).pipe((0,Xt.J)()).subscribe(k=>{this.isActive!==this.isLinkActive(this.router)(k)&&this.update()})}set routerLinkActive(x){const k=Array.isArray(x)?x:x.split(" ");this.classes=k.filter(G=>!!G)}ngOnChanges(x){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const x=this.hasActiveLinks();this.isActive!==x&&(this.isActive=x,this.cdr.markForCheck(),this.classes.forEach(k=>{x?this.renderer.addClass(this.element.nativeElement,k):this.renderer.removeClass(this.element.nativeElement,k)}),x&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(x))})}isLinkActive(x){const k=function Kc(D){return!!D.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return G=>!!G.urlTree&&x.isActive(G.urlTree,k)}hasActiveLinks(){const x=this.isLinkActive(this.router);return this.link&&x(this.link)||this.linkWithHref&&x(this.linkWithHref)||this.links.some(x)||this.linksWithHrefs.some(x)}}return D.\u0275fac=function(x){return new(x||D)(m.Y36(ns),m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(m.sBO),m.Y36(xd,8),m.Y36(ic,8))},D.\u0275dir=m.lG2({type:D,selectors:[["","routerLinkActive",""]],contentQueries:function(x,k,G){if(1&x&&(m.Suo(G,xd,5),m.Suo(G,ic,5)),2&x){let Q;m.iGM(Q=m.CRH())&&(k.links=Q),m.iGM(Q=m.CRH())&&(k.linksWithHrefs=Q)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[m.TTD]}),D})();class Td{}let rc=(()=>{class D{constructor(x,k,G,Q,ue){this.router=x,this.injector=G,this.preloadingStrategy=Q,this.loader=ue}setUpPreloading(){this.subscription=this.router.events.pipe((0,Mt.h)(x=>x instanceof Qr),(0,Bt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(x,k){const G=[];for(const Q of k){Q.providers&&!Q._injector&&(Q._injector=(0,m.MMx)(Q.providers,x,`Route: ${Q.path}`));const ue=Q._injector??x,ge=Q._loadedInjector??ue;Q.loadChildren&&!Q._loadedRoutes&&void 0===Q.canLoad||Q.loadComponent&&!Q._loadedComponent?G.push(this.preloadConfig(ue,Q)):(Q.children||Q._loadedRoutes)&&G.push(this.processRoutes(ge,Q.children??Q._loadedRoutes))}return(0,b.D)(G).pipe((0,Xt.J)())}preloadConfig(x,k){return this.preloadingStrategy.preload(k,()=>{let G;G=k.loadChildren&&void 0===k.canLoad?this.loader.loadChildren(x,k):(0,X.of)(null);const Q=G.pipe((0,kt.z)(ue=>null===ue?(0,X.of)(void 0):(k._loadedRoutes=ue.routes,k._loadedInjector=ue.injector,this.processRoutes(ue.injector??x,ue.routes))));if(k.loadComponent&&!k._loadedComponent){const ue=this.loader.loadComponent(k);return(0,b.D)([Q,ue]).pipe((0,Xt.J)())}return Q})}}return D.\u0275fac=function(x){return new(x||D)(m.LFG(ns),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(Td),m.LFG(bl))},D.\u0275prov=m.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();const Va=new m.OlP("");let ro=(()=>{class D{constructor(x,k,G={}){this.router=x,this.viewportScroller=k,this.options=G,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},G.scrollPositionRestoration=G.scrollPositionRestoration||"disabled",G.anchorScrolling=G.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(x=>{x instanceof cr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=x.navigationTrigger,this.restoredId=x.restoredState?x.restoredState.navigationId:0):x instanceof Qr&&(this.lastId=x.id,this.scheduleScrollEvent(x,this.router.parseUrl(x.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(x=>{x instanceof Ic&&(x.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(x.position):x.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(x.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(x,k){this.router.triggerEvent(new Ic(x,"popstate"===this.lastSource?this.store[this.restoredId]:null,k))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return D.\u0275fac=function(x){m.$Z()},D.\u0275prov=m.Yz7({token:D,factory:D.\u0275fac}),D})();function jo(D,A){return{\u0275kind:D,\u0275providers:A}}function mr(D){return[{provide:Cd,multi:!0,useValue:D}]}function rm(){const D=(0,m.f3M)(m.zs3);return A=>{const x=D.get(m.z2F);if(A!==x.components[0])return;const k=D.get(ns),G=D.get(Ml);1===D.get(Qi)&&k.initialNavigation(),D.get(Ga,null,m.XFs.Optional)?.setUpPreloading(),D.get(Va,null,m.XFs.Optional)?.init(),k.resetRootComponentType(x.componentTypes[0]),G.closed||(G.next(),G.unsubscribe())}}const Ml=new m.OlP("",{factory:()=>new ei.x}),Qi=new m.OlP("",{providedIn:"root",factory:()=>1});const Ga=new m.OlP("");function Gy(D){return jo(0,[{provide:Ga,useExisting:rc},{provide:Td,useExisting:D}])}const Sh=new m.OlP("ROUTER_FORROOT_GUARD"),Pf=[Ue.Ye,{provide:hr,useClass:Br},{provide:ns,useFactory:Ba},Jl,{provide:Bo,useFactory:function pr(D){return D.routerState.root},deps:[ns]},bl];function gr(){return new m.PXZ("Router",ns)}let aa=(()=>{class D{constructor(x){}static forRoot(x,k){return{ngModule:D,providers:[Pf,[],mr(x),{provide:Sh,useFactory:us,deps:[[ns,new m.FiY,new m.tp0]]},{provide:yl,useValue:k||{}},k?.useHash?{provide:Ue.S$,useClass:Ue.Do}:{provide:Ue.S$,useClass:Ue.b0},{provide:Va,useFactory:()=>{const D=(0,m.f3M)(ns),A=(0,m.f3M)(Ue.EM),x=(0,m.f3M)(yl);return x.scrollOffset&&A.setOffset(x.scrollOffset),new ro(D,A,x)}},k?.preloadingStrategy?Gy(k.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:gr},k?.initialNavigation?ja(k):[],[{provide:vo,useFactory:rm},{provide:m.tb,multi:!0,useExisting:vo}]]}}static forChild(x){return{ngModule:D,providers:[mr(x)]}}}return D.\u0275fac=function(x){return new(x||D)(m.LFG(Sh,8))},D.\u0275mod=m.oAB({type:D}),D.\u0275inj=m.cJS({imports:[So]}),D})();function us(D){return"guarded"}function ja(D){return["disabled"===D.initialNavigation?jo(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const A=(0,m.f3M)(ns);return()=>{A.setUpLocationChangeListener()}}},{provide:Qi,useValue:2}]).\u0275providers:[],"enabledBlocking"===D.initialNavigation?jo(2,[{provide:Qi,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:A=>{const x=A.get(Ue.V_,Promise.resolve());let k=!1;return()=>x.then(()=>new Promise(Q=>{const ue=A.get(ns),ge=A.get(Ml);(function G(Q){A.get(ns).events.pipe((0,Mt.h)(ge=>ge instanceof Qr||ge instanceof wr||ge instanceof ys),(0,ve.U)(ge=>ge instanceof Qr||ge instanceof wr&&(0===ge.code||1===ge.code)&&null),(0,Mt.h)(ge=>null!==ge),(0,Dt.q)(1)).subscribe(()=>{Q()})})(()=>{Q(!0),k=!0}),ue.afterPreactivation=()=>(Q(!0),k||ge.closed?(0,X.of)(void 0):ge),ue.initialNavigation()}))}}]).\u0275providers:[]]}const vo=new m.OlP("")},2953:(gn,it,K)=>{"use strict";K.d(it,{jt:()=>iu,Vi:()=>_a,iD:()=>Sm,IJ:()=>Hm,M2:()=>Ah});var m=K(1571),b=K(6895),X=K(9751),Me=K(515),ye=K(9646),Oe=K(7579),Ae=K(4968),st=K(5963),qe=K(8421);const{isArray:je}=Array;function $e(_){return 1===_.length&&je(_[0])?_[0]:_}var ot=K(5403);function tn(..._){return 1===(_=$e(_)).length?(0,qe.Xf)(_[0]):new X.y(function Ct(_){return w=>{let f=[];for(let M=0;f&&!w.closed&&M<_.length;M++)f.push((0,qe.Xf)(_[M]).subscribe((0,ot.x)(w,N=>{if(f){for(let z=0;z<f.length;z++)z!==M&&f[z].unsubscribe();f=null}w.next(N)})))}}(_))}K(1135),K(9841);var Yt=K(5032);new X.y(Yt.Z);var ei=K(3269);function Ue(..._){const w=(0,ei.jO)(_),f=$e(_);return f.length?new X.y(M=>{let N=f.map(()=>[]),z=f.map(()=>!1);M.add(()=>{N=z=null});for(let he=0;!M.closed&&he<f.length;he++)(0,qe.Xf)(f[he]).subscribe((0,ot.x)(M,Se=>{if(N[he].push(Se),N.every(we=>we.length)){const we=N.map(Ye=>Ye.shift());M.next(w?w(...we):we),N.some((Ye,ht)=>!Ye.length&&z[ht])&&M.complete()}},()=>{z[he]=!0,!N[he].length&&M.complete()}));return()=>{N=z=null}}):Me.E}var ve=K(7272),Dt=K(2722),ft=K(9300),Mt=K(5698),kt=K(4004),at=(K(8675),K(1884),K(3900)),Ge=K(8505),Vt=K(4482),Bt=K(4671);function Mn(..._){const w=(0,ei.jO)(_);return(0,Vt.e)((f,M)=>{const N=_.length,z=new Array(N);let he=_.map(()=>!1),Se=!1;for(let we=0;we<N;we++)(0,qe.Xf)(_[we]).subscribe((0,ot.x)(M,Ye=>{z[we]=Ye,!Se&&!he[we]&&(he[we]=!0,(Se=he.every(Bt.y))&&(he=null))},Yt.Z));f.subscribe((0,ot.x)(M,we=>{if(Se){const Ye=[we,...z];M.next(w?w(...Ye):Ye)}}))})}var Li=K(4986),Wn=K(9718),yr=K(5577);function ps(_,w){return w?f=>(0,ve.z)(w.pipe((0,Mt.q)(1),function ar(){return(0,Vt.e)((_,w)=>{_.subscribe((0,ot.x)(w,Yt.Z))})}()),f.pipe(ps(_))):(0,yr.z)((f,M)=>_(f,M).pipe((0,Mt.q)(1),(0,Wn.h)(f)))}K(5684);var Be=K(433),We={left:"right",right:"left",bottom:"top",top:"bottom"};function Xt(_){return _.replace(/left|right|bottom|top/g,function(w){return We[w]})}function bn(_){return _.split("-")[0]}var On={start:"end",end:"start"};function dr(_){return _.replace(/start|end/g,function(w){return On[w]})}var ji="top",_i="bottom",tr="right",Ki="left",vr="auto",ms=[ji,_i,tr,Ki],Ai="start",Ir="end",Mi="viewport",vn="popper",Jo=ms.reduce(function(_,w){return _.concat([w+"-"+Ai,w+"-"+Ir])},[]),kr=[].concat(ms,[vr]).reduce(function(_,w){return _.concat([w,w+"-"+Ai,w+"-"+Ir])},[]),wn=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Xi(_){if(null==_)return window;if("[object Window]"!==_.toString()){var w=_.ownerDocument;return w&&w.defaultView||window}return _}function dn(_){return _ instanceof Xi(_).Element||_ instanceof Element}function lr(_){return _ instanceof Xi(_).HTMLElement||_ instanceof HTMLElement}function Ss(_){return!(typeof ShadowRoot>"u")&&(_ instanceof Xi(_).ShadowRoot||_ instanceof ShadowRoot)}function hr(_){return((dn(_)?_.ownerDocument:_.document)||window.document).documentElement}var Br=Math.max,Ur=Math.min,$r=Math.round;function Vr(){var _=navigator.userAgentData;return null!=_&&_.brands&&Array.isArray(_.brands)?_.brands.map(function(w){return w.brand+"/"+w.version}).join(" "):navigator.userAgent}function Yr(){return!/^((?!chrome|android).)*safari/i.test(Vr())}function Xr(_,w,f){void 0===w&&(w=!1),void 0===f&&(f=!1);var M=_.getBoundingClientRect(),N=1,z=1;w&&lr(_)&&(N=_.offsetWidth>0&&$r(M.width)/_.offsetWidth||1,z=_.offsetHeight>0&&$r(M.height)/_.offsetHeight||1);var Se=(dn(_)?Xi(_):window).visualViewport,we=!Yr()&&f,Ye=(M.left+(we&&Se?Se.offsetLeft:0))/N,ht=(M.top+(we&&Se?Se.offsetTop:0))/z,cn=M.width/N,rn=M.height/z;return{width:cn,height:rn,top:ht,right:Ye+cn,bottom:ht+rn,left:Ye,x:Ye,y:ht}}function Ns(_){var w=Xi(_);return{scrollLeft:w.pageXOffset,scrollTop:w.pageYOffset}}function br(_){return Xr(hr(_)).left+Ns(_).scrollLeft}function gs(_){return Xi(_).getComputedStyle(_)}function fr(_){return _?(_.nodeName||"").toLowerCase():null}function Zr(_){return"html"===fr(_)?_:_.assignedSlot||_.parentNode||(Ss(_)?_.host:null)||hr(_)}function hi(_){var w=gs(_);return/auto|scroll|overlay|hidden/.test(w.overflow+w.overflowY+w.overflowX)}function Ji(_){return["html","body","#document"].indexOf(fr(_))>=0?_.ownerDocument.body:lr(_)&&hi(_)?_:Ji(Zr(_))}function Re(_,w){var f;void 0===w&&(w=[]);var M=Ji(_),N=M===(null==(f=_.ownerDocument)?void 0:f.body),z=Xi(M),he=N?[z].concat(z.visualViewport||[],hi(M)?M:[]):M,Se=w.concat(he);return N?Se:Se.concat(Re(Zr(he)))}function xe(_){return["table","td","th"].indexOf(fr(_))>=0}function de(_){return lr(_)&&"fixed"!==gs(_).position?_.offsetParent:null}function Ie(_){for(var w=Xi(_),f=de(_);f&&xe(f)&&"static"===gs(f).position;)f=de(f);return f&&("html"===fr(f)||"body"===fr(f)&&"static"===gs(f).position)?w:f||function Pe(_){var w=/firefox/i.test(Vr());if(/Trident/i.test(Vr())&&lr(_)&&"fixed"===gs(_).position)return null;var N=Zr(_);for(Ss(N)&&(N=N.host);lr(N)&&["html","body"].indexOf(fr(N))<0;){var z=gs(N);if("none"!==z.transform||"none"!==z.perspective||"paint"===z.contain||-1!==["transform","perspective"].indexOf(z.willChange)||w&&"filter"===z.willChange||w&&z.filter&&"none"!==z.filter)return N;N=N.parentNode}return null}(_)||w}function Nt(_,w){var f=w.getRootNode&&w.getRootNode();if(_.contains(w))return!0;if(f&&Ss(f)){var M=w;do{if(M&&_.isSameNode(M))return!0;M=M.parentNode||M.host}while(M)}return!1}function an(_){return Object.assign({},_,{left:_.x,top:_.y,right:_.x+_.width,bottom:_.y+_.height})}function Xn(_,w,f){return w===Mi?an(function qs(_,w){var f=Xi(_),M=hr(_),N=f.visualViewport,z=M.clientWidth,he=M.clientHeight,Se=0,we=0;if(N){z=N.width,he=N.height;var Ye=Yr();(Ye||!Ye&&"fixed"===w)&&(Se=N.offsetLeft,we=N.offsetTop)}return{width:z,height:he,x:Se+br(_),y:we}}(_,f)):dn(w)?function yi(_,w){var f=Xr(_,!1,"fixed"===w);return f.top=f.top+_.clientTop,f.left=f.left+_.clientLeft,f.bottom=f.top+_.clientHeight,f.right=f.left+_.clientWidth,f.width=_.clientWidth,f.height=_.clientHeight,f.x=f.left,f.y=f.top,f}(w,f):an(function qr(_){var w,f=hr(_),M=Ns(_),N=null==(w=_.ownerDocument)?void 0:w.body,z=Br(f.scrollWidth,f.clientWidth,N?N.scrollWidth:0,N?N.clientWidth:0),he=Br(f.scrollHeight,f.clientHeight,N?N.scrollHeight:0,N?N.clientHeight:0),Se=-M.scrollLeft+br(_),we=-M.scrollTop;return"rtl"===gs(N||f).direction&&(Se+=Br(f.clientWidth,N?N.clientWidth:0)-z),{width:z,height:he,x:Se,y:we}}(hr(_)))}function bi(_){return _.split("-")[1]}function Zs(_){return["top","bottom"].indexOf(_)>=0?"x":"y"}function Qo(_){var we,w=_.reference,f=_.element,M=_.placement,N=M?bn(M):null,z=M?bi(M):null,he=w.x+w.width/2-f.width/2,Se=w.y+w.height/2-f.height/2;switch(N){case ji:we={x:he,y:w.y-f.height};break;case _i:we={x:he,y:w.y+w.height};break;case tr:we={x:w.x+w.width,y:Se};break;case Ki:we={x:w.x-f.width,y:Se};break;default:we={x:w.x,y:w.y}}var Ye=N?Zs(N):null;if(null!=Ye){var ht="y"===Ye?"height":"width";switch(z){case Ai:we[Ye]=we[Ye]-(w[ht]/2-f[ht]/2);break;case Ir:we[Ye]=we[Ye]+(w[ht]/2-f[ht]/2)}}return we}function Ps(_){return Object.assign({},{top:0,right:0,bottom:0,left:0},_)}function _s(_,w){return w.reduce(function(f,M){return f[M]=_,f},{})}function Ls(_,w){void 0===w&&(w={});var M=w.placement,N=void 0===M?_.placement:M,z=w.strategy,he=void 0===z?_.strategy:z,Se=w.boundary,we=void 0===Se?"clippingParents":Se,Ye=w.rootBoundary,ht=void 0===Ye?Mi:Ye,cn=w.elementContext,rn=void 0===cn?vn:cn,Sn=w.altBoundary,Ii=void 0!==Sn&&Sn,Cn=w.padding,wi=void 0===Cn?0:Cn,$n=Ps("number"!=typeof wi?wi:_s(wi,ms)),Vi=_.rects.popper,ri=_.elements[Ii?rn===vn?"reference":vn:rn],Oi=function Cs(_,w,f,M){var N="clippingParents"===w?function Ui(_){var w=Re(Zr(_)),M=["absolute","fixed"].indexOf(gs(_).position)>=0&&lr(_)?Ie(_):_;return dn(M)?w.filter(function(N){return dn(N)&&Nt(N,M)&&"body"!==fr(N)}):[]}(_):[].concat(w),z=[].concat(N,[f]),Se=z.reduce(function(we,Ye){var ht=Xn(_,Ye,M);return we.top=Br(ht.top,we.top),we.right=Ur(ht.right,we.right),we.bottom=Ur(ht.bottom,we.bottom),we.left=Br(ht.left,we.left),we},Xn(_,z[0],M));return Se.width=Se.right-Se.left,Se.height=Se.bottom-Se.top,Se.x=Se.left,Se.y=Se.top,Se}(dn(ri)?ri:ri.contextElement||hr(_.elements.popper),we,ht,he),Rt=Xr(_.elements.reference),pi=Qo({reference:Rt,element:Vi,strategy:"absolute",placement:N}),xi=an(Object.assign({},Vi,pi)),ur=rn===vn?xi:Rt,Rs={top:Oi.top-ur.top+$n.top,bottom:ur.bottom-Oi.bottom+$n.bottom,left:Oi.left-ur.left+$n.left,right:ur.right-Oi.right+$n.right},or=_.modifiersData.offset;if(rn===vn&&or){var Gs=or[N];Object.keys(Rs).forEach(function(bo){var _r=[tr,_i].indexOf(bo)>=0?1:-1,lo=[ji,_i].indexOf(bo)>=0?"y":"x";Rs[bo]+=Gs[lo]*_r})}return Rs}const Fs={name:"flip",enabled:!0,phase:"main",fn:function Ks(_){var w=_.state,f=_.options,M=_.name;if(!w.modifiersData[M]._skip){for(var N=f.mainAxis,z=void 0===N||N,he=f.altAxis,Se=void 0===he||he,we=f.fallbackPlacements,Ye=f.padding,ht=f.boundary,cn=f.rootBoundary,rn=f.altBoundary,Sn=f.flipVariations,Ii=void 0===Sn||Sn,Cn=f.allowedAutoPlacements,wi=w.options.placement,$n=bn(wi),Vi=we||($n!==wi&&Ii?function Kr(_){if(bn(_)===vr)return[];var w=Xt(_);return[dr(_),w,dr(w)]}(wi):[Xt(wi)]),ri=[wi].concat(Vi).reduce(function(fu,En){return fu.concat(bn(En)===vr?function Eo(_,w){void 0===w&&(w={});var N=w.boundary,z=w.rootBoundary,he=w.padding,Se=w.flipVariations,we=w.allowedAutoPlacements,Ye=void 0===we?kr:we,ht=bi(w.placement),cn=ht?Se?Jo:Jo.filter(function(Ii){return bi(Ii)===ht}):ms,rn=cn.filter(function(Ii){return Ye.indexOf(Ii)>=0});0===rn.length&&(rn=cn);var Sn=rn.reduce(function(Ii,Cn){return Ii[Cn]=Ls(_,{placement:Cn,boundary:N,rootBoundary:z,padding:he})[bn(Cn)],Ii},{});return Object.keys(Sn).sort(function(Ii,Cn){return Sn[Ii]-Sn[Cn]})}(w,{placement:En,boundary:ht,rootBoundary:cn,padding:Ye,flipVariations:Ii,allowedAutoPlacements:Cn}):En)},[]),Oi=w.rects.reference,Rt=w.rects.popper,pi=new Map,xi=!0,ur=ri[0],Rs=0;Rs<ri.length;Rs++){var or=ri[Rs],Gs=bn(or),bo=bi(or)===Ai,_r=[ji,_i].indexOf(Gs)>=0,lo=_r?"width":"height",Bi=Ls(w,{placement:or,boundary:ht,rootBoundary:cn,altBoundary:rn,padding:Ye}),la=_r?bo?tr:Ki:bo?_i:ji;Oi[lo]>Rt[lo]&&(la=Xt(la));var Xu=Xt(la),qu=[];if(z&&qu.push(Bi[Gs]<=0),Se&&qu.push(Bi[la]<=0,Bi[Xu]<=0),qu.every(function(fu){return fu})){ur=or,xi=!1;break}pi.set(or,qu)}if(xi)for(var hu=function(En){var kh=ri.find(function(Wd){var Fr=pi.get(Wd);if(Fr)return Fr.slice(0,En).every(function($d){return $d})});if(kh)return ur=kh,"break"},qa=Ii?3:1;qa>0&&"break"!==hu(qa);qa--);w.placement!==ur&&(w.modifiersData[M]._skip=!0,w.placement=ur,w.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Jr(_,w,f){return Br(_,Ur(w,f))}function Di(_){var w=Xr(_),f=_.offsetWidth,M=_.offsetHeight;return Math.abs(w.width-f)<=1&&(f=w.width),Math.abs(w.height-M)<=1&&(M=w.height),{x:_.offsetLeft,y:_.offsetTop,width:f,height:M}}const il={name:"preventOverflow",enabled:!0,phase:"main",fn:function Js(_){var w=_.state,f=_.options,M=_.name,N=f.mainAxis,z=void 0===N||N,he=f.altAxis,Se=void 0!==he&&he,rn=f.tether,Sn=void 0===rn||rn,Ii=f.tetherOffset,Cn=void 0===Ii?0:Ii,wi=Ls(w,{boundary:f.boundary,rootBoundary:f.rootBoundary,padding:f.padding,altBoundary:f.altBoundary}),$n=bn(w.placement),Ei=bi(w.placement),Vi=!Ei,ri=Zs($n),Oi=function vs(_){return"x"===_?"y":"x"}(ri),Rt=w.modifiersData.popperOffsets,pi=w.rects.reference,xi=w.rects.popper,ur="function"==typeof Cn?Cn(Object.assign({},w.rects,{placement:w.placement})):Cn,Rs="number"==typeof ur?{mainAxis:ur,altAxis:ur}:Object.assign({mainAxis:0,altAxis:0},ur),or=w.modifiersData.offset?w.modifiersData.offset[w.placement]:null,Gs={x:0,y:0};if(Rt){if(z){var bo,_r="y"===ri?ji:Ki,lo="y"===ri?_i:tr,Bi="y"===ri?"height":"width",la=Rt[ri],Xu=la+wi[_r],qu=la-wi[lo],jd=Sn?-xi[Bi]/2:0,hu=Ei===Ai?pi[Bi]:xi[Bi],qa=Ei===Ai?-xi[Bi]:-pi[Bi],Zu=w.elements.arrow,fu=Sn&&Zu?Di(Zu):{width:0,height:0},En=w.modifiersData["arrow#persistent"]?w.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},kh=En[_r],Wd=En[lo],Fr=Jr(0,pi[Bi],fu[Bi]),$d=Vi?pi[Bi]/2-jd-Fr-kh-Rs.mainAxis:hu-Fr-kh-Rs.mainAxis,Ku=Vi?-pi[Bi]/2+jd+Fr+Wd+Rs.mainAxis:qa+Fr+Wd+Rs.mainAxis,wo=w.elements.arrow&&Ie(w.elements.arrow),rs=null!=(bo=or?.[ri])?bo:0,cp=la+Ku-rs,_c=Jr(Sn?Ur(Xu,la+$d-rs-(wo?"y"===ri?wo.clientTop||0:wo.clientLeft||0:0)):Xu,la,Sn?Br(qu,cp):qu);Rt[ri]=_c,Gs[ri]=_c-la}if(Se){var Ju,co=Rt[Oi],Fl="y"===Oi?"height":"width",kl=co+wi["x"===ri?ji:Ki],Bl=co-wi["x"===ri?_i:tr],ed=-1!==[ji,Ki].indexOf($n),Bh=null!=(Ju=or?.[Oi])?Ju:0,td=ed?kl:co-pi[Fl]-xi[Fl]-Bh+Rs.altAxis,up=ed?co+pi[Fl]+xi[Fl]-Bh-Rs.altAxis:Bl,dp=Sn&&ed?function Ea(_,w,f){var M=Jr(_,w,f);return M>f?f:M}(td,co,up):Jr(Sn?td:kl,co,Sn?up:Bl);Rt[Oi]=dp,Gs[Oi]=dp-co}w.modifiersData[M]=Gs}},requiresIfExists:["offset"]},mo={name:"arrow",enabled:!0,phase:"main",fn:function Ma(_){var w,f=_.state,M=_.name,N=_.options,z=f.elements.arrow,he=f.modifiersData.popperOffsets,Se=bn(f.placement),we=Zs(Se),ht=[Ki,tr].indexOf(Se)>=0?"height":"width";if(z&&he){var cn=function(w,f){return Ps("number"!=typeof(w="function"==typeof w?w(Object.assign({},f.rects,{placement:f.placement})):w)?w:_s(w,ms))}(N.padding,f),rn=Di(z),Sn="y"===we?ji:Ki,Ii="y"===we?_i:tr,Cn=f.rects.reference[ht]+f.rects.reference[we]-he[we]-f.rects.popper[ht],wi=he[we]-f.rects.reference[we],$n=Ie(z),Ei=$n?"y"===we?$n.clientHeight||0:$n.clientWidth||0:0,Rt=Ei/2-rn[ht]/2+(Cn/2-wi/2),pi=Jr(cn[Sn],Rt,Ei-rn[ht]-cn[Ii]);f.modifiersData[M]=((w={})[we]=pi,w.centerOffset=pi-Rt,w)}},effect:function Qs(_){var w=_.state,M=_.options.element,N=void 0===M?"[data-popper-arrow]":M;null!=N&&("string"==typeof N&&!(N=w.elements.popper.querySelector(N))||!Nt(w.elements.popper,N)||(w.elements.arrow=N))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function wr(_,w,f){void 0===f&&(f=!1);var M=lr(w),N=lr(w)&&function Qr(_){var w=_.getBoundingClientRect(),f=$r(w.width)/_.offsetWidth||1,M=$r(w.height)/_.offsetHeight||1;return 1!==f||1!==M}(w),z=hr(w),he=Xr(_,N,f),Se={scrollLeft:0,scrollTop:0},we={x:0,y:0};return(M||!M&&!f)&&(("body"!==fr(w)||hi(z))&&(Se=function cr(_){return _!==Xi(_)&&lr(_)?function xr(_){return{scrollLeft:_.scrollLeft,scrollTop:_.scrollTop}}(_):Ns(_)}(w)),lr(w)?((we=Xr(w,!0)).x+=w.clientLeft,we.y+=w.clientTop):z&&(we.x=br(z))),{x:he.left+Se.scrollLeft-we.x,y:he.top+Se.scrollTop-we.y,width:he.width,height:he.height}}function ys(_){var w=new Map,f=new Set,M=[];function N(z){f.add(z.name),[].concat(z.requires||[],z.requiresIfExists||[]).forEach(function(Se){if(!f.has(Se)){var we=w.get(Se);we&&N(we)}}),M.push(z)}return _.forEach(function(z){w.set(z.name,z)}),_.forEach(function(z){f.has(z.name)||N(z)}),M}function rl(_){var w;return function(){return w||(w=new Promise(function(f){Promise.resolve().then(function(){w=void 0,f(_())})})),w}}var xs={placement:"bottom",modifiers:[],strategy:"absolute"};function Du(){for(var _=arguments.length,w=new Array(_),f=0;f<_;f++)w[f]=arguments[f];return!w.some(function(M){return!(M&&"function"==typeof M.getBoundingClientRect)})}function eo(_){void 0===_&&(_={});var f=_.defaultModifiers,M=void 0===f?[]:f,N=_.defaultOptions,z=void 0===N?xs:N;return function(Se,we,Ye){void 0===Ye&&(Ye=z);var ht={placement:"bottom",orderedModifiers:[],options:Object.assign({},xs,z),modifiersData:{},elements:{reference:Se,popper:we},attributes:{},styles:{}},cn=[],rn=!1,Sn={state:ht,setOptions:function($n){var Ei="function"==typeof $n?$n(ht.options):$n;Cn(),ht.options=Object.assign({},z,ht.options,Ei),ht.scrollParents={reference:dn(Se)?Re(Se):Se.contextElement?Re(Se.contextElement):[],popper:Re(we)};var Vi=function Mo(_){var w=ys(_);return wn.reduce(function(f,M){return f.concat(w.filter(function(N){return N.phase===M}))},[])}(function sl(_){var w=_.reduce(function(f,M){var N=f[M.name];return f[M.name]=N?Object.assign({},N,M,{options:Object.assign({},N.options,M.options),data:Object.assign({},N.data,M.data)}):M,f},{});return Object.keys(w).map(function(f){return w[f]})}([].concat(M,ht.options.modifiers)));return ht.orderedModifiers=Vi.filter(function(ri){return ri.enabled}),function Ii(){ht.orderedModifiers.forEach(function(wi){var Ei=wi.options,ri=wi.effect;if("function"==typeof ri){var Oi=ri({state:ht,name:wi.name,instance:Sn,options:void 0===Ei?{}:Ei});cn.push(Oi||function(){})}})}(),Sn.update()},forceUpdate:function(){if(!rn){var $n=ht.elements,Ei=$n.reference,Vi=$n.popper;if(Du(Ei,Vi)){ht.rects={reference:wr(Ei,Ie(Vi),"fixed"===ht.options.strategy),popper:Di(Vi)},ht.reset=!1,ht.placement=ht.options.placement,ht.orderedModifiers.forEach(function(Rs){return ht.modifiersData[Rs.name]=Object.assign({},Rs.data)});for(var ri=0;ri<ht.orderedModifiers.length;ri++)if(!0!==ht.reset){var Oi=ht.orderedModifiers[ri],Rt=Oi.fn,pi=Oi.options;"function"==typeof Rt&&(ht=Rt({state:ht,options:void 0===pi?{}:pi,name:Oi.name,instance:Sn})||ht)}else ht.reset=!1,ri=-1}}},update:rl(function(){return new Promise(function(wi){Sn.forceUpdate(),wi(ht)})}),destroy:function(){Cn(),rn=!0}};if(!Du(Se,we))return Sn;function Cn(){cn.forEach(function(wi){return wi()}),cn=[]}return Sn.setOptions(Ye).then(function(wi){!rn&&Ye.onFirstUpdate&&Ye.onFirstUpdate(wi)}),Sn}}var Sa={passive:!0},Xl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Nc(_){var w,f=_.popper,M=_.popperRect,N=_.placement,z=_.variation,he=_.offsets,Se=_.position,we=_.gpuAcceleration,Ye=_.adaptive,ht=_.roundOffsets,cn=_.isFixed,rn=he.x,Sn=void 0===rn?0:rn,Ii=he.y,Cn=void 0===Ii?0:Ii,wi="function"==typeof ht?ht({x:Sn,y:Cn}):{x:Sn,y:Cn};Sn=wi.x,Cn=wi.y;var $n=he.hasOwnProperty("x"),Ei=he.hasOwnProperty("y"),Vi=Ki,ri=ji,Oi=window;if(Ye){var Rt=Ie(f),pi="clientHeight",xi="clientWidth";Rt===Xi(f)&&"static"!==gs(Rt=hr(f)).position&&"absolute"===Se&&(pi="scrollHeight",xi="scrollWidth"),(N===ji||(N===Ki||N===tr)&&z===Ir)&&(ri=_i,Cn-=(cn&&Rt===Oi&&Oi.visualViewport?Oi.visualViewport.height:Rt[pi])-M.height,Cn*=we?1:-1),N!==Ki&&(N!==ji&&N!==_i||z!==Ir)||(Vi=tr,Sn-=(cn&&Rt===Oi&&Oi.visualViewport?Oi.visualViewport.width:Rt[xi])-M.width,Sn*=we?1:-1)}var bo,or=Object.assign({position:Se},Ye&&Xl),Gs=!0===ht?function Oc(_,w){var M=_.y,N=w.devicePixelRatio||1;return{x:$r(_.x*N)/N||0,y:$r(M*N)/N||0}}({x:Sn,y:Cn},Xi(f)):{x:Sn,y:Cn};return Sn=Gs.x,Cn=Gs.y,Object.assign({},or,we?((bo={})[ri]=Ei?"0":"",bo[Vi]=$n?"0":"",bo.transform=(Oi.devicePixelRatio||1)<=1?"translate("+Sn+"px, "+Cn+"px)":"translate3d("+Sn+"px, "+Cn+"px, 0)",bo):((w={})[ri]=Ei?Cn+"px":"",w[Vi]=$n?Sn+"px":"",w.transform="",w))}var Bo=eo({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Ca(_){var w=_.state,f=_.instance,M=_.options,N=M.scroll,z=void 0===N||N,he=M.resize,Se=void 0===he||he,we=Xi(w.elements.popper),Ye=[].concat(w.scrollParents.reference,w.scrollParents.popper);return z&&Ye.forEach(function(ht){ht.addEventListener("scroll",f.update,Sa)}),Se&&we.addEventListener("resize",f.update,Sa),function(){z&&Ye.forEach(function(ht){ht.removeEventListener("scroll",f.update,Sa)}),Se&&we.removeEventListener("resize",f.update,Sa)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function xa(_){var w=_.state;w.modifiersData[_.name]=Qo({reference:w.rects.reference,element:w.rects.popper,strategy:"absolute",placement:w.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function da(_){var w=_.state,f=_.options,M=f.gpuAcceleration,N=void 0===M||M,z=f.adaptive,he=void 0===z||z,Se=f.roundOffsets,we=void 0===Se||Se,Ye={placement:bn(w.placement),variation:bi(w.placement),popper:w.elements.popper,popperRect:w.rects.popper,gpuAcceleration:N,isFixed:"fixed"===w.options.strategy};null!=w.modifiersData.popperOffsets&&(w.styles.popper=Object.assign({},w.styles.popper,Nc(Object.assign({},Ye,{offsets:w.modifiersData.popperOffsets,position:w.options.strategy,adaptive:he,roundOffsets:we})))),null!=w.modifiersData.arrow&&(w.styles.arrow=Object.assign({},w.styles.arrow,Nc(Object.assign({},Ye,{offsets:w.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:we})))),w.attributes.popper=Object.assign({},w.attributes.popper,{"data-popper-placement":w.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function ea(_){var w=_.state;Object.keys(w.elements).forEach(function(f){var M=w.styles[f]||{},N=w.attributes[f]||{},z=w.elements[f];!lr(z)||!fr(z)||(Object.assign(z.style,M),Object.keys(N).forEach(function(he){var Se=N[he];!1===Se?z.removeAttribute(he):z.setAttribute(he,!0===Se?"":Se)}))})},effect:function Pc(_){var w=_.state,f={popper:{position:w.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(w.elements.popper.style,f.popper),w.styles=f,w.elements.arrow&&Object.assign(w.elements.arrow.style,f.arrow),function(){Object.keys(w.elements).forEach(function(M){var N=w.elements[M],z=w.attributes[M]||{},Se=Object.keys(w.styles.hasOwnProperty(M)?w.styles[M]:f[M]).reduce(function(we,Ye){return we[Ye]="",we},{});!lr(N)||!fr(N)||(Object.assign(N.style,Se),Object.keys(z).forEach(function(we){N.removeAttribute(we)}))})}},requires:["computeStyles"]}]});const ta={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function Ta(_){var w=_.state,M=_.name,N=_.options.offset,z=void 0===N?[0,0]:N,he=kr.reduce(function(ht,cn){return ht[cn]=function cl(_,w,f){var M=bn(_),N=[Ki,ji].indexOf(M)>=0?-1:1,z="function"==typeof f?f(Object.assign({},w,{placement:_})):f,he=z[0],Se=z[1];return he=he||0,Se=(Se||0)*N,[Ki,tr].indexOf(M)>=0?{x:Se,y:he}:{x:he,y:Se}}(cn,w.rects,z),ht},{}),Se=he[w.placement],Ye=Se.y;null!=w.modifiersData.popperOffsets&&(w.modifiersData.popperOffsets.x+=Se.x,w.modifiersData.popperOffsets.y+=Ye),w.modifiersData[M]=he}},ul=["*"],Vc=["dialog"];function ai(_){return"string"==typeof _}function Wi(_){return null!=_}function Bs(_){return(_||document.body).getBoundingClientRect()}const Do={animation:!0,transitionTimerDelayMs:5},Cd=()=>{},{transitionTimerDelayMs:bl}=Do,wl=new Map,Es=(_,w,f,M)=>{let N=M.context||{};const z=wl.get(w);if(z)switch(M.runningTransition){case"continue":return Me.E;case"stop":_.run(()=>z.transition$.complete()),N=Object.assign(z.context,N),wl.delete(w)}const he=f(w,M.animation,N)||Cd;if(!M.animation||"none"===window.getComputedStyle(w).transitionProperty)return _.run(()=>he()),(0,ye.of)(void 0).pipe(function ka(_){return w=>new X.y(f=>w.subscribe({next:he=>_.run(()=>f.next(he)),error:he=>_.run(()=>f.error(he)),complete:()=>_.run(()=>f.complete())}))}(_));const Se=new Oe.x,we=new Oe.x,Ye=Se.pipe(function xt(..._){return w=>(0,ve.z)(w,(0,ye.of)(..._))}(!0));wl.set(w,{transition$:Se,complete:()=>{we.next(),we.complete()},context:N});const ht=function yl(_){const{transitionDelay:w,transitionDuration:f}=window.getComputedStyle(_);return 1e3*(parseFloat(w)+parseFloat(f))}(w);return _.runOutsideAngular(()=>{const cn=(0,Ae.R)(w,"transitionend").pipe((0,Dt.R)(Ye),(0,ft.h)(({target:Sn})=>Sn===w));tn((0,st.H)(ht+bl).pipe((0,Dt.R)(Ye)),cn,we).pipe((0,Dt.R)(Ye)).subscribe(()=>{wl.delete(w),_.run(()=>{he(),Se.next(),Se.complete()})})}),Se.asObservable()};let qc=(()=>{class _{constructor(){this.animation=Do.animation}}return _.\u0275fac=function(f){return new(f||_)},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})(),Td=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({imports:[b.ez]}),_})(),Va=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({imports:[b.ez]}),_})(),sm=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({imports:[b.ez]}),_})(),Sl=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({}),_})();var Er=(()=>{return(_=Er||(Er={}))[_.Tab=9]="Tab",_[_.Enter=13]="Enter",_[_.Escape=27]="Escape",_[_.Space=32]="Space",_[_.PageUp=33]="PageUp",_[_.PageDown=34]="PageDown",_[_.End=35]="End",_[_.Home=36]="Home",_[_.ArrowLeft=37]="ArrowLeft",_[_.ArrowUp=38]="ArrowUp",_[_.ArrowRight=39]="ArrowRight",_[_.ArrowDown=40]="ArrowDown",Er;var _})();const oc=(_,w)=>!!w&&w.some(f=>f.contains(_)),kf=(_,w)=>!w||null!=function To(_,w){return!w||typeof _.closest>"u"?null:_.closest(w)}(_,w),lm=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function Bf(_,w,f,M,N,z,he,Se){f&&_.runOutsideAngular((_=>lm?()=>setTimeout(()=>_(),100):_)(()=>{const Ye=(0,Ae.R)(w,"keydown").pipe((0,Dt.R)(N),(0,ft.h)(rn=>rn.which===Er.Escape),(0,Ge.b)(rn=>rn.preventDefault())),ht=(0,Ae.R)(w,"mousedown").pipe((0,kt.U)(rn=>{const Sn=rn.target;return 2!==rn.button&&!oc(Sn,he)&&("inside"===f?oc(Sn,z)&&kf(Sn,Se):"outside"===f?!oc(Sn,z):kf(Sn,Se)||!oc(Sn,z))}),(0,Dt.R)(N)),cn=(0,Ae.R)(w,"mouseup").pipe(Mn(ht),(0,ft.h)(([rn,Sn])=>Sn),function lt(_,w=Li.z){const f=(0,st.H)(_,w);return ps(()=>f)}(0),(0,Dt.R)(N));tn([Ye.pipe((0,kt.U)(rn=>0)),cn.pipe((0,kt.U)(rn=>1))]).subscribe(rn=>_.run(()=>M(rn)))}))}const Jc=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function ac(_){const w=Array.from(_.querySelectorAll(Jc)).filter(f=>-1!==f.tabIndex);return[w[0],w[w.length-1]]}const is=/\s+/,Uf=/  +/gi,Ch=/^start/,xh=/^end/,ku=/-(top|left)$/,h_=/-(bottom|right)$/,hm=/^left/,Th=/^right/,Rd=/^start/,fm=/^end/;function Bu({placement:_,baseClass:w}){let f=Array.isArray(_)?_:_.split(is),N=f.findIndex(we=>"auto"===we);N>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(we){null==f.find(Ye=>-1!==Ye.search("^"+we))&&f.splice(N++,1,we)});const z=f.map(we=>function dm(_){return _.replace(Ch,"left").replace(xh,"right").replace(ku,"-start").replace(h_,"-end")}(we));return{placement:z.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!w,phase:"write",fn({state:we}){const Ye=new RegExp(w+"(-[a-z]+)*","gi"),ht=we.elements.popper,cn=we.placement;let rn=ht.className;rn=rn.replace(Ye,""),rn+=` ${function Id(_,w){let[f,M]=w.split("-");const N=f.replace(hm,"start").replace(Th,"end");let z=[N];if(M){let he=M;("left"===f||"right"===f)&&(he=he.replace(Rd,"top").replace(fm,"bottom")),z.push(`${N}-${he}`)}return _&&(z=z.map(he=>`${_}-${he}`)),z.join(" ")}(w,cn)}`,rn=rn.trim().replace(Uf," "),ht.className=rn}},Fs,il,mo,{enabled:!0,name:"flip",options:{fallbackPlacements:z}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function lc(_){return _}function eu(_){return w=>(w.modifiers.push(ta,{name:"offset",options:{offset:()=>_}}),w)}new Date(1882,10,12),new Date(2174,10,25);let Mr=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({imports:[b.ez,Be.u5]}),_})(),Kf=(()=>{class _{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return _.\u0275fac=function(f){return new(f||_)},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})(),Ah=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275dir=m.lG2({type:_,selectors:[["",8,"navbar"]]}),_})(),Mm=(()=>{class _{constructor(f,M){this.elementRef=f,this._renderer=M,this._disabled=!1}set disabled(f){this._disabled=""===f||!0===f,this._renderer.setProperty(this.elementRef.nativeElement,"disabled",this._disabled)}get disabled(){return this._disabled}}return _.\u0275fac=function(f){return new(f||_)(m.Y36(m.SBq),m.Y36(m.Qsj))},_.\u0275dir=m.lG2({type:_,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(f,M){2&f&&(m.Ikx("tabIndex",M.disabled?-1:0),m.ekj("disabled",M.disabled))},inputs:{disabled:"disabled"}}),_})(),_a=(()=>{class _{constructor(f,M){this.dropdown=f,this.placement="bottom",this.isOpen=!1,this.nativeElement=M.nativeElement}}return _.\u0275fac=function(f){return new(f||_)(m.Y36((0,m.Gpc)(()=>iu)),m.Y36(m.SBq))},_.\u0275dir=m.lG2({type:_,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(f,M,N){if(1&f&&m.Suo(N,Mm,4),2&f){let z;m.iGM(z=m.CRH())&&(M.menuItems=z)}},hostVars:4,hostBindings:function(f,M){1&f&&m.NdJ("keydown.ArrowUp",function(z){return M.dropdown.onKeyDown(z)})("keydown.ArrowDown",function(z){return M.dropdown.onKeyDown(z)})("keydown.Home",function(z){return M.dropdown.onKeyDown(z)})("keydown.End",function(z){return M.dropdown.onKeyDown(z)})("keydown.Enter",function(z){return M.dropdown.onKeyDown(z)})("keydown.Space",function(z){return M.dropdown.onKeyDown(z)})("keydown.Tab",function(z){return M.dropdown.onKeyDown(z)})("keydown.Shift.Tab",function(z){return M.dropdown.onKeyDown(z)}),2&f&&m.ekj("dropdown-menu",!0)("show",M.dropdown.isOpen())}}),_})(),Rh=(()=>{class _{constructor(f,M){this.dropdown=f,this.nativeElement=M.nativeElement}}return _.\u0275fac=function(f){return new(f||_)(m.Y36((0,m.Gpc)(()=>iu)),m.Y36(m.SBq))},_.\u0275dir=m.lG2({type:_,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(f,M){2&f&&m.uIk("aria-expanded",M.dropdown.isOpen())}}),_})(),Sm=(()=>{class _ extends Rh{constructor(f,M){super(f,M)}}return _.\u0275fac=function(f){return new(f||_)(m.Y36((0,m.Gpc)(()=>iu)),m.Y36(m.SBq))},_.\u0275dir=m.lG2({type:_,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(f,M){1&f&&m.NdJ("click",function(){return M.dropdown.toggle()})("keydown.ArrowUp",function(z){return M.dropdown.onKeyDown(z)})("keydown.ArrowDown",function(z){return M.dropdown.onKeyDown(z)})("keydown.Home",function(z){return M.dropdown.onKeyDown(z)})("keydown.End",function(z){return M.dropdown.onKeyDown(z)})("keydown.Tab",function(z){return M.dropdown.onKeyDown(z)})("keydown.Shift.Tab",function(z){return M.dropdown.onKeyDown(z)}),2&f&&m.uIk("aria-expanded",M.dropdown.isOpen())},features:[m._Bn([{provide:Rh,useExisting:(0,m.Gpc)(()=>_)}]),m.qOj]}),_})(),iu=(()=>{class _{constructor(f,M,N,z,he,Se,we){this._changeDetector=f,this._document=N,this._ngZone=z,this._elementRef=he,this._renderer=Se,this._destroyCloseHandlers$=new Oe.x,this._bodyContainer=null,this._positioning=function Qc(){let _=null;return{createPopper(w){if(!_){let M=(w.updatePopperOptions||lc)(Bu(w));_=Bo(w.hostElement,w.targetElement,M)}},update(){_&&_.update()},setOptions(w){if(_){let M=(w.updatePopperOptions||lc)(Bu(w));_.setOptions(M)}},destroy(){_&&(_.destroy(),_=null)}}}(),this._open=!1,this.openChange=new m.vpe,this.placement=M.placement,this.container=M.container,this.autoClose=M.autoClose,this.display=we?"static":"dynamic"}ngAfterContentInit(){this._ngZone.onStable.pipe((0,Mt.q)(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(f){if(f.container&&this._open&&this._applyContainer(this.container),f.placement&&!f.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),f.dropdownClass){const{currentValue:M,previousValue:N}=f.dropdownClass;this._applyCustomDropdownClass(M,N)}f.autoClose&&this._open&&(this.autoClose=f.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:eu([0,2])}),this._applyPlacementClasses(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positionMenu())})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),Bf(this._ngZone,this._document,this.autoClose,f=>{this.close(),0===f&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(f){const M=f.which,N=this._getMenuElements();let z=-1,he=null;const Se=this._isEventFromToggle(f);if(!Se&&N.length&&N.forEach((we,Ye)=>{we.contains(f.target)&&(he=we),we===this._document.activeElement&&(z=Ye)}),M!==Er.Space&&M!==Er.Enter){if(M!==Er.Tab){if(Se||he){if(this.open(),N.length){switch(M){case Er.ArrowDown:z=Math.min(z+1,N.length-1);break;case Er.ArrowUp:if(this._isDropup()&&-1===z){z=N.length-1;break}z=Math.max(z-1,0);break;case Er.Home:z=0;break;case Er.End:z=N.length-1}N[z].focus()}f.preventDefault()}}else if(f.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===f.target)return void("body"!==this.container||f.shiftKey?f.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const we=this._menu.nativeElement.querySelectorAll(Jc);f.shiftKey&&f.target===we[0]?(this._anchor.nativeElement.focus(),f.preventDefault()):!f.shiftKey&&f.target===we[we.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else(0,Ae.R)(f.target,"focusout").pipe((0,Mt.q)(1)).subscribe(({relatedTarget:we})=>{this._elementRef.nativeElement.contains(we)||this.close()})}}else he&&(!0===this.autoClose||"inside"===this.autoClose)&&(0,Ae.R)(he,"click").pipe((0,Mt.q)(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(f){return this._anchor.nativeElement.contains(f.target)}_getMenuElements(){const f=this._menu;return null==f?[]:f.menuItems.filter(M=>!M.disabled).map(M=>M.elementRef.nativeElement)}_positionMenu(){const f=this._menu;this.isOpen()&&f&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(f){return Array.isArray(f)?f[0]:f.split(" ")[0]}_resetContainer(){const f=this._renderer;this._menu&&f.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(f.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(f=null){if(this._resetContainer(),"body"===f){const M=this._renderer,N=this._menu.nativeElement,z=this._bodyContainer=this._bodyContainer||M.createElement("div");M.setStyle(z,"position","absolute"),M.setStyle(N,"position","static"),M.setStyle(z,"z-index","1055"),M.appendChild(z,N),M.appendChild(this._document.body,z)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(f,M){const N="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;N&&(M&&this._renderer.removeClass(N,M),f&&this._renderer.addClass(N,f))}_applyPlacementClasses(f){const M=this._menu;if(M){f||(f=this._getFirstPlacement(this.placement));const N=this._renderer,z=this._elementRef.nativeElement;N.removeClass(z,"dropup"),N.removeClass(z,"dropdown");const{nativeElement:he}=M;"static"===this.display?(M.placement=null,N.setAttribute(he,"data-bs-popper","static")):(M.placement=f,N.removeAttribute(he,"data-bs-popper"));const Se=-1!==f.search("^top")?"dropup":"dropdown";N.addClass(z,Se);const we=this._bodyContainer;we&&(N.removeClass(we,"dropup"),N.removeClass(we,"dropdown"),N.addClass(we,Se))}}}return _.\u0275fac=function(f){return new(f||_)(m.Y36(m.sBO),m.Y36(Kf),m.Y36(b.K0),m.Y36(m.R0b),m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(Ah,8))},_.\u0275dir=m.lG2({type:_,selectors:[["","ngbDropdown",""]],contentQueries:function(f,M,N){if(1&f&&(m.Suo(N,_a,5),m.Suo(N,Rh,5)),2&f){let z;m.iGM(z=m.CRH())&&(M._menu=z.first),m.iGM(z=m.CRH())&&(M._anchor=z.first)}},hostVars:2,hostBindings:function(f,M){2&f&&m.ekj("show",M.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[m.TTD]}),_})(),Jf=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({}),_})();class zu{constructor(w,f,M){this.nodes=w,this.viewRef=f,this.componentRef=M}}let Qf=(()=>{class _{constructor(f,M){this._el=f,this._zone=M}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Mt.q)(1)).subscribe(()=>{Es(this._zone,this._el.nativeElement,(f,M)=>{M&&Bs(f),f.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Es(this._zone,this._el.nativeElement,({classList:f})=>f.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return _.\u0275fac=function(f){return new(f||_)(m.Y36(m.SBq),m.Y36(m.R0b))},_.\u0275cmp=m.Xpm({type:_,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(f,M){2&f&&(m.Tol("modal-backdrop"+(M.backdropClass?" "+M.backdropClass:"")),m.ekj("show",!M.animation)("fade",M.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(f,M){},encapsulation:2}),_})();class ep{close(w){}dismiss(w){}}class S_{constructor(w,f,M,N){this._windowCmptRef=w,this._contentRef=f,this._backdropCmptRef=M,this._beforeDismiss=N,this._closed=new Oe.x,this._dismissed=new Oe.x,this._hidden=new Oe.x,w.instance.dismissEvent.subscribe(z=>{this.dismiss(z)}),this.result=new Promise((z,he)=>{this._resolve=z,this._reject=he}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,Dt.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,Dt.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(w){this._windowCmptRef&&(this._closed.next(w),this._resolve(w),this._removeModalElements())}_dismiss(w){this._dismissed.next(w),this._reject(w),this._removeModalElements()}dismiss(w){if(this._windowCmptRef)if(this._beforeDismiss){const f=this._beforeDismiss();!function Si(_){return _&&_.then}(f)?!1!==f&&this._dismiss(w):f.then(M=>{!1!==M&&this._dismiss(w)},()=>{})}else this._dismiss(w)}_removeModalElements(){const w=this._windowCmptRef.instance.hide(),f=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,ye.of)(void 0);w.subscribe(()=>{const{nativeElement:M}=this._windowCmptRef.location;M.parentNode.removeChild(M),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),f.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:M}=this._backdropCmptRef.location;M.parentNode.removeChild(M),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Ue(w,f).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Dl=(()=>{return(_=Dl||(Dl={}))[_.BACKDROP_CLICK=0]="BACKDROP_CLICK",_[_.ESC=1]="ESC",Dl;var _})();let xm=(()=>{class _{constructor(f,M,N){this._document=f,this._elRef=M,this._zone=N,this._closed$=new Oe.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new m.vpe,this.shown=new Oe.x,this.hidden=new Oe.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":ai(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(f){this.dismissEvent.emit(f)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Mt.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:f}=this._elRef,M={animation:this.animation,runningTransition:"stop"},he=Ue(Es(this._zone,f,()=>f.classList.remove("show"),M),Es(this._zone,this._dialogEl.nativeElement,()=>{},M));return he.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),he}_show(){const f={animation:this.animation,runningTransition:"continue"};Ue(Es(this._zone,this._elRef.nativeElement,(z,he)=>{he&&Bs(z),z.classList.add("show")},f),Es(this._zone,this._dialogEl.nativeElement,()=>{},f)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:f}=this._elRef;this._zone.runOutsideAngular(()=>{(0,Ae.R)(f,"keydown").pipe((0,Dt.R)(this._closed$),(0,ft.h)(N=>N.which===Er.Escape)).subscribe(N=>{this.keyboard?requestAnimationFrame(()=>{N.defaultPrevented||this._zone.run(()=>this.dismiss(Dl.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let M=!1;(0,Ae.R)(this._dialogEl.nativeElement,"mousedown").pipe((0,Dt.R)(this._closed$),(0,Ge.b)(()=>M=!1),(0,at.w)(()=>(0,Ae.R)(f,"mouseup").pipe((0,Dt.R)(this._closed$),(0,Mt.q)(1))),(0,ft.h)(({target:N})=>f===N)).subscribe(()=>{M=!0}),(0,Ae.R)(f,"click").pipe((0,Dt.R)(this._closed$)).subscribe(({target:N})=>{f===N&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!M&&this._zone.run(()=>this.dismiss(Dl.BACKDROP_CLICK))),M=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:f}=this._elRef;if(!f.contains(document.activeElement)){const M=f.querySelector("[ngbAutofocus]"),N=ac(f)[0];(M||N||f).focus()}}_restoreFocus(){const f=this._document.body,M=this._elWithFocus;let N;N=M&&M.focus&&f.contains(M)?M:f,this._zone.runOutsideAngular(()=>{setTimeout(()=>N.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Es(this._zone,this._elRef.nativeElement,({classList:f})=>(f.add("modal-static"),()=>f.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return _.\u0275fac=function(f){return new(f||_)(m.Y36(b.K0),m.Y36(m.SBq),m.Y36(m.R0b))},_.\u0275cmp=m.Xpm({type:_,selectors:[["ngb-modal-window"]],viewQuery:function(f,M){if(1&f&&m.Gf(Vc,7),2&f){let N;m.iGM(N=m.CRH())&&(M._dialogEl=N.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(f,M){2&f&&(m.uIk("aria-modal",!0)("aria-labelledby",M.ariaLabelledBy)("aria-describedby",M.ariaDescribedBy),m.Tol("modal d-block"+(M.windowClass?" "+M.windowClass:"")),m.ekj("fade",M.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:ul,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(f,M){1&f&&(m.F$t(),m.TgZ(0,"div",0,1)(2,"div",2),m.Hsn(3),m.qZA()()),2&f&&m.Tol("modal-dialog"+(M.size?" modal-"+M.size:"")+(M.centered?" modal-dialog-centered":"")+M.fullscreenClass+(M.scrollable?" modal-dialog-scrollable":"")+(M.modalDialogClass?" "+M.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),_})(),Ih=(()=>{class _{constructor(f){this._document=f}hide(){const f=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),M=this._document.body,N=M.style,{overflow:z,paddingRight:he}=N;if(f>0){const Se=parseFloat(window.getComputedStyle(M).paddingRight);N.paddingRight=`${Se+f}px`}return N.overflow="hidden",()=>{f>0&&(N.paddingRight=he),N.overflow=z}}}return _.\u0275fac=function(f){return new(f||_)(m.LFG(b.K0))},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})(),C_=(()=>{class _{constructor(f,M,N,z,he,Se){this._applicationRef=f,this._injector=M,this._document=N,this._scrollBar=z,this._rendererFactory=he,this._ngZone=Se,this._activeWindowCmptHasChanged=new Oe.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new m.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const we=this._windowCmpts[this._windowCmpts.length-1];((_,w,f,M=!1)=>{this._ngZone.runOutsideAngular(()=>{const N=(0,Ae.R)(w,"focusin").pipe((0,Dt.R)(f),(0,kt.U)(z=>z.target));(0,Ae.R)(w,"keydown").pipe((0,Dt.R)(f),(0,ft.h)(z=>z.which===Er.Tab),Mn(N)).subscribe(([z,he])=>{const[Se,we]=ac(w);(he===Se||he===w)&&z.shiftKey&&(we.focus(),z.preventDefault()),he===we&&!z.shiftKey&&(Se.focus(),z.preventDefault())}),M&&(0,Ae.R)(w,"click").pipe((0,Dt.R)(f),Mn(N),(0,kt.U)(z=>z[1])).subscribe(z=>z.focus())})})(0,we.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(we.location.nativeElement)}})}_restoreScrollBar(){const f=this._scrollBarRestoreFn;f&&(this._scrollBarRestoreFn=null,f())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(f,M,N){const z=N.container instanceof HTMLElement?N.container:Wi(N.container)?this._document.querySelector(N.container):this._document.body,he=this._rendererFactory.createRenderer(null,null);if(!z)throw new Error(`The specified modal container "${N.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const Se=new ep,we=this._getContentRef(N.injector||f,M,Se,N);let Ye=!1!==N.backdrop?this._attachBackdrop(z):void 0,ht=this._attachWindowComponent(z,we.nodes),cn=new S_(ht,we,Ye,N.beforeDismiss);return this._registerModalRef(cn),this._registerWindowCmpt(ht),cn.hidden.pipe((0,Mt.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(he.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),Se.close=rn=>{cn.close(rn)},Se.dismiss=rn=>{cn.dismiss(rn)},this._applyWindowOptions(ht.instance,N),1===this._modalRefs.length&&he.addClass(this._document.body,"modal-open"),Ye&&Ye.instance&&(this._applyBackdropOptions(Ye.instance,N),Ye.changeDetectorRef.detectChanges()),ht.changeDetectorRef.detectChanges(),cn}get activeInstances(){return this._activeInstances}dismissAll(f){this._modalRefs.forEach(M=>M.dismiss(f))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(f){let M=(0,m.LMc)(Qf,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(M.hostView),f.appendChild(M.location.nativeElement),M}_attachWindowComponent(f,M){let N=(0,m.LMc)(xm,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:M});return this._applicationRef.attachView(N.hostView),f.appendChild(N.location.nativeElement),N}_applyWindowOptions(f,M){this._windowAttributes.forEach(N=>{Wi(M[N])&&(f[N]=M[N])})}_applyBackdropOptions(f,M){this._backdropAttributes.forEach(N=>{Wi(M[N])&&(f[N]=M[N])})}_getContentRef(f,M,N,z){return M?M instanceof m.Rgc?this._createFromTemplateRef(M,N):ai(M)?this._createFromString(M):this._createFromComponent(f,M,N,z):new zu([])}_createFromTemplateRef(f,M){const z=f.createEmbeddedView({$implicit:M,close(he){M.close(he)},dismiss(he){M.dismiss(he)}});return this._applicationRef.attachView(z),new zu([z.rootNodes],z)}_createFromString(f){const M=this._document.createTextNode(`${f}`);return new zu([[M]])}_createFromComponent(f,M,N,z){const he=m.zs3.create({providers:[{provide:ep,useValue:N}],parent:f}),Se=(0,m.LMc)(M,{environmentInjector:this._applicationRef.injector,elementInjector:he}),we=Se.location.nativeElement;return z.scrollable&&we.classList.add("component-host-scrollable"),this._applicationRef.attachView(Se.hostView),new zu([[we]],Se.hostView,Se)}_setAriaHidden(f){const M=f.parentElement;M&&f!==this._document.body&&(Array.from(M.children).forEach(N=>{N!==f&&"SCRIPT"!==N.nodeName&&(this._ariaHiddenValues.set(N,N.getAttribute("aria-hidden")),N.setAttribute("aria-hidden","true"))}),this._setAriaHidden(M))}_revertAriaHidden(){this._ariaHiddenValues.forEach((f,M)=>{f?M.setAttribute("aria-hidden",f):M.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(f){const M=()=>{const N=this._modalRefs.indexOf(f);N>-1&&(this._modalRefs.splice(N,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(f),this._activeInstances.emit(this._modalRefs),f.result.then(M,M)}_registerWindowCmpt(f){this._windowCmpts.push(f),this._activeWindowCmptHasChanged.next(),f.onDestroy(()=>{const M=this._windowCmpts.indexOf(f);M>-1&&(this._windowCmpts.splice(M,1),this._activeWindowCmptHasChanged.next())})}}return _.\u0275fac=function(f){return new(f||_)(m.LFG(m.z2F),m.LFG(m.zs3),m.LFG(b.K0),m.LFG(Ih),m.LFG(m.FYo),m.LFG(m.R0b))},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})(),No=(()=>{class _{constructor(f){this._ngbConfig=f,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(f){this._animation=f}}return _.\u0275fac=function(f){return new(f||_)(m.LFG(qc))},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})(),fi=(()=>{class _{constructor(f,M,N){this._injector=f,this._modalStack=M,this._config=N}open(f,M={}){const N={...this._config,animation:this._config.animation,...M};return this._modalStack.open(this._injector,f,N)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(f){this._modalStack.dismissAll(f)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return _.\u0275fac=function(f){return new(f||_)(m.LFG(m.zs3),m.LFG(C_),m.LFG(No))},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})(),Al=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({providers:[fi]}),_})(),Nh=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({imports:[b.ez]}),_})(),Po=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({imports:[b.ez]}),_})(),Rl=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({imports:[b.ez]}),_})(),Ol=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({imports:[b.ez]}),_})(),ou=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({imports:[b.ez]}),_})(),$u=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({imports:[b.ez]}),_})(),Ll=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({imports:[b.ez]}),_})(),Kn=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({}),_})();new m.OlP("live announcer delay",{providedIn:"root",factory:function ao(){return 100}});let D_=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({imports:[b.ez]}),_})(),Um=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({}),_})();const Vm=[Td,Va,sm,Sl,Mr,Jf,Al,Nh,Um,Po,Rl,Ol,ou,$u,Ll,Kn,D_];let Hm=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=m.oAB({type:_}),_.\u0275inj=m.cJS({imports:[Vm,Td,Va,sm,Sl,Mr,Jf,Al,Nh,Um,Po,Rl,Ol,ou,$u,Ll,Kn,D_]}),_})()},7185:(gn,it,K)=>{"use strict";K.d(it,{Rh:()=>Li,_W:()=>Vt});var m=K(1571),b=K(7340),X=K(7579),Me=K(6895),ye=K(1481);const Oe=["toast-component",""];function Ae(lt,pt){if(1&lt){const Be=m.EpF();m.TgZ(0,"button",5),m.NdJ("click",function(){m.CHM(Be);const Xt=m.oxw();return m.KtG(Xt.remove())}),m.TgZ(1,"span",6),m._uU(2,"\xd7"),m.qZA()()}}function st(lt,pt){if(1&lt&&(m.ynx(0),m._uU(1),m.BQk()),2&lt){const Be=m.oxw(2);m.xp6(1),m.hij("[",Be.duplicatesCount+1,"]")}}function qe(lt,pt){if(1&lt&&(m.TgZ(0,"div"),m._uU(1),m.YNc(2,st,2,1,"ng-container",4),m.qZA()),2&lt){const Be=m.oxw();m.Tol(Be.options.titleClass),m.uIk("aria-label",Be.title),m.xp6(1),m.hij(" ",Be.title," "),m.xp6(1),m.Q6J("ngIf",Be.duplicatesCount)}}function je(lt,pt){if(1&lt&&m._UZ(0,"div",7),2&lt){const Be=m.oxw();m.Tol(Be.options.messageClass),m.Q6J("innerHTML",Be.message,m.oJD)}}function $e(lt,pt){if(1&lt&&(m.TgZ(0,"div",8),m._uU(1),m.qZA()),2&lt){const Be=m.oxw();m.Tol(Be.options.messageClass),m.uIk("aria-label",Be.message),m.xp6(1),m.hij(" ",Be.message," ")}}function ot(lt,pt){if(1&lt&&(m.TgZ(0,"div"),m._UZ(1,"div",9),m.qZA()),2&lt){const Be=m.oxw();m.xp6(1),m.Udp("width",Be.width+"%")}}class Ue{constructor(pt,Be){this.component=pt,this.injector=Be}attach(pt,Be){return this._attachedHost=pt,pt.attach(this,Be)}detach(){const pt=this._attachedHost;if(pt)return this._attachedHost=void 0,pt.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(pt){this._attachedHost=pt}}class xt{constructor(pt,Be,We,Xt,bn,On){this.toastId=pt,this.config=Be,this.message=We,this.title=Xt,this.toastType=bn,this.toastRef=On,this._onTap=new X.x,this._onAction=new X.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(pt){this._onAction.next(pt)}onAction(){return this._onAction.asObservable()}}const ft=new m.OlP("ToastConfig");class Mt{constructor(pt){this._overlayRef=pt,this.duplicatesCount=0,this._afterClosed=new X.x,this._activate=new X.x,this._manualClose=new X.x,this._resetTimeout=new X.x,this._countDuplicate=new X.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(pt,Be){pt&&this._resetTimeout.next(),Be&&this._countDuplicate.next(++this.duplicatesCount)}}class kt{constructor(pt,Be){this._toastPackage=pt,this._parentInjector=Be}get(pt,Be,We){return pt===xt?this._toastPackage:this._parentInjector.get(pt,Be,We)}}class Fe extends class ve{attach(pt,Be){return this._attachedPortal=pt,this.attachComponentPortal(pt,Be)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(pt){this._disposeFn=pt}}{constructor(pt,Be,We){super(),this._hostDomElement=pt,this._componentFactoryResolver=Be,this._appRef=We}attachComponentPortal(pt,Be){const We=this._componentFactoryResolver.resolveComponentFactory(pt.component);let Xt;return Xt=We.create(pt.injector),this._appRef.attachView(Xt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(Xt.hostView),Xt.destroy()}),Be?this._hostDomElement.insertBefore(this._getComponentRootNode(Xt),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(Xt)),Xt}_getComponentRootNode(pt){return pt.hostView.rootNodes[0]}}class ke{constructor(pt){this._portalHost=pt}attach(pt,Be=!0){return this._portalHost.attach(pt,Be)}detach(){return this._portalHost.detach()}}let at=(()=>{class lt{constructor(Be){this._document=Be}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Be=this._document.createElement("div");Be.classList.add("overlay-container"),Be.setAttribute("aria-live","polite"),this._document.body.appendChild(Be),this._containerElement=Be}}return lt.\u0275fac=function(Be){return new(Be||lt)(m.LFG(Me.K0))},lt.\u0275prov=m.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})(),Ge=(()=>{class lt{constructor(Be,We,Xt,bn){this._overlayContainer=Be,this._componentFactoryResolver=We,this._appRef=Xt,this._document=bn,this._paneElements=new Map}create(Be,We){return this._createOverlayRef(this.getPaneElement(Be,We))}getPaneElement(Be="",We){return this._paneElements.get(We)||this._paneElements.set(We,{}),this._paneElements.get(We)[Be]||(this._paneElements.get(We)[Be]=this._createPaneElement(Be,We)),this._paneElements.get(We)[Be]}_createPaneElement(Be,We){const Xt=this._document.createElement("div");return Xt.id="toast-container",Xt.classList.add(Be),Xt.classList.add("toast-container"),We?We.getContainerElement().appendChild(Xt):this._overlayContainer.getContainerElement().appendChild(Xt),Xt}_createPortalHost(Be){return new Fe(Be,this._componentFactoryResolver,this._appRef)}_createOverlayRef(Be){return new ke(this._createPortalHost(Be))}}return lt.\u0275fac=function(Be){return new(Be||lt)(m.LFG(at),m.LFG(m._Vd),m.LFG(m.z2F),m.LFG(Me.K0))},lt.\u0275prov=m.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})(),Vt=(()=>{class lt{constructor(Be,We,Xt,bn,On){this.overlay=We,this._injector=Xt,this.sanitizer=bn,this.ngZone=On,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...Be.default,...Be.config},Be.config.iconClasses&&(this.toastrConfig.iconClasses={...Be.default.iconClasses,...Be.config.iconClasses})}show(Be,We,Xt={},bn=""){return this._preBuildNotification(bn,Be,We,this.applyConfig(Xt))}success(Be,We,Xt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",Be,We,this.applyConfig(Xt))}error(Be,We,Xt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",Be,We,this.applyConfig(Xt))}info(Be,We,Xt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",Be,We,this.applyConfig(Xt))}warning(Be,We,Xt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",Be,We,this.applyConfig(Xt))}clear(Be){for(const We of this.toasts)if(void 0!==Be){if(We.toastId===Be)return void We.toastRef.manualClose()}else We.toastRef.manualClose()}remove(Be){const We=this._findToast(Be);if(!We||(We.activeToast.toastRef.close(),this.toasts.splice(We.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const Xt=this.toasts[this.currentlyActive].toastRef;Xt.isInactive()||(this.currentlyActive=this.currentlyActive+1,Xt.activate())}return!0}findDuplicate(Be="",We="",Xt,bn){const{includeTitleDuplicates:On}=this.toastrConfig;for(const dr of this.toasts){const ji=On&&dr.title===Be;if((!On||ji)&&dr.message===We)return dr.toastRef.onDuplicate(Xt,bn),dr}return null}applyConfig(Be={}){return{...this.toastrConfig,...Be}}_findToast(Be){for(let We=0;We<this.toasts.length;We++)if(this.toasts[We].toastId===Be)return{index:We,activeToast:this.toasts[We]};return null}_preBuildNotification(Be,We,Xt,bn){return bn.onActivateTick?this.ngZone.run(()=>this._buildNotification(Be,We,Xt,bn)):this._buildNotification(Be,We,Xt,bn)}_buildNotification(Be,We,Xt,bn){if(!bn.toastComponent)throw new Error("toastComponent required");const On=this.findDuplicate(Xt,We,this.toastrConfig.resetTimeoutOnDuplicate&&bn.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&Xt||We)&&this.toastrConfig.preventDuplicates&&null!==On)return On;this.previousToastMessage=We;let dr=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(dr=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const ji=this.overlay.create(bn.positionClass,this.overlayContainer);this.index=this.index+1;let _i=We;We&&bn.enableHtml&&(_i=this.sanitizer.sanitize(m.q3G.HTML,We));const tr=new Mt(ji),Ki=new xt(this.index,bn,_i,Xt,Be,tr),vr=new kt(Ki,this._injector),ms=new Ue(bn.toastComponent,vr),Ai=ji.attach(ms,this.toastrConfig.newestOnTop);tr.componentInstance=Ai.instance;const Ir={toastId:this.index,title:Xt||"",message:We||"",toastRef:tr,onShown:tr.afterActivate(),onHidden:tr.afterClosed(),onTap:Ki.onTap(),onAction:Ki.onAction(),portal:Ai};return dr||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Ir.toastRef.activate()})),this.toasts.push(Ir),Ir}}return lt.\u0275fac=function(Be){return new(Be||lt)(m.LFG(ft),m.LFG(Ge),m.LFG(m.zs3),m.LFG(ye.H7),m.LFG(m.R0b))},lt.\u0275prov=m.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})();const Mn={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class lt{constructor(Be,We,Xt){this.toastrService=Be,this.toastPackage=We,this.ngZone=Xt,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=We.message,this.title=We.title,this.options=We.config,this.originalTimeout=We.config.timeOut,this.toastClasses=`${We.toastType} ${We.config.toastClass}`,this.sub=We.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=We.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=We.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=We.toastRef.countDuplicate().subscribe(bn=>{this.duplicatesCount=bn})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const Be=(new Date).getTime();this.width=(this.hideTime-Be)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(Be,We){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(Be),We)):this.timeout=setTimeout(()=>Be(),We)}outsideInterval(Be,We){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(Be),We)):this.intervalId=setInterval(()=>Be(),We)}runInsideAngular(Be){this.ngZone?this.ngZone.run(()=>Be()):Be()}}return lt.\u0275fac=function(Be){return new(Be||lt)(m.Y36(Vt),m.Y36(xt),m.Y36(m.R0b))},lt.\u0275cmp=m.Xpm({type:lt,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(Be,We){1&Be&&m.NdJ("click",function(){return We.tapToast()})("mouseenter",function(){return We.stickAround()})("mouseleave",function(){return We.delayedHideToast()}),2&Be&&(m.d8E("@flyInOut",We.state),m.Tol(We.toastClasses),m.Udp("display",We.displayStyle))},attrs:Oe,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(Be,We){1&Be&&(m.YNc(0,Ae,3,0,"button",0),m.YNc(1,qe,3,5,"div",1),m.YNc(2,je,1,3,"div",2),m.YNc(3,$e,2,4,"div",3),m.YNc(4,ot,2,2,"div",4)),2&Be&&(m.Q6J("ngIf",We.options.closeButton),m.xp6(1),m.Q6J("ngIf",We.title),m.xp6(1),m.Q6J("ngIf",We.message&&We.options.enableHtml),m.xp6(1),m.Q6J("ngIf",We.message&&!We.options.enableHtml),m.xp6(1),m.Q6J("ngIf",We.options.progressBar))},dependencies:[Me.O5],encapsulation:2,data:{animation:[(0,b.X$)("flyInOut",[(0,b.SB)("inactive",(0,b.oB)({opacity:0})),(0,b.SB)("active",(0,b.oB)({opacity:1})),(0,b.SB)("removed",(0,b.oB)({opacity:0})),(0,b.eR)("inactive => active",(0,b.jt)("{{ easeTime }}ms {{ easing }}")),(0,b.eR)("active => removed",(0,b.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),lt})()};let Li=(()=>{class lt{static forRoot(Be={}){return{ngModule:lt,providers:[{provide:ft,useValue:{default:Mn,config:Be}}]}}}return lt.\u0275fac=function(Be){return new(Be||lt)},lt.\u0275mod=m.oAB({type:lt}),lt.\u0275inj=m.cJS({imports:[[Me.ez]]}),lt})()}},gn=>{gn(gn.s=2616)}]);